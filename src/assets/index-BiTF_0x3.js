var oE=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var jV=oE((er,tr)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();/**
* @vue/shared v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function uh(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Ot={},ls=[],Wr=()=>{},sE=()=>!1,Ud=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),fh=n=>n.startsWith("onUpdate:"),Jt=Object.assign,hh=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},aE=Object.prototype.hasOwnProperty,Lt=(n,e)=>aE.call(n,e),Ze=Array.isArray,ds=n=>Hd(n)==="[object Map]",ab=n=>Hd(n)==="[object Set]",nt=n=>typeof n=="function",Xt=n=>typeof n=="string",yi=n=>typeof n=="symbol",Bt=n=>n!==null&&typeof n=="object",lb=n=>(Bt(n)||nt(n))&&nt(n.then)&&nt(n.catch),db=Object.prototype.toString,Hd=n=>db.call(n),lE=n=>Hd(n).slice(8,-1),cb=n=>Hd(n)==="[object Object]",ph=n=>Xt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,la=uh(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Vd=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},dE=/-(\w)/g,pr=Vd(n=>n.replace(dE,(e,t)=>t?t.toUpperCase():"")),cE=/\B([A-Z])/g,$o=Vd(n=>n.replace(cE,"-$1").toLowerCase()),Gd=Vd(n=>n.charAt(0).toUpperCase()+n.slice(1)),Oc=Vd(n=>n?`on${Gd(n)}`:""),ji=(n,e)=>!Object.is(n,e),Mc=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},ub=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},uE=n=>{const e=parseFloat(n);return isNaN(e)?n:e},fE=n=>{const e=Xt(n)?Number(n):NaN;return isNaN(e)?n:e};let Yp;const Wd=()=>Yp||(Yp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jd(n){if(Ze(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],i=Xt(r)?mE(r):jd(r);if(i)for(const o in i)e[o]=i[o]}return e}else if(Xt(n)||Bt(n))return n}const hE=/;(?![^(]*\))/g,pE=/:([^]+)/,gE=/\/\*[^]*?\*\//g;function mE(n){const e={};return n.replace(gE,"").split(hE).forEach(t=>{if(t){const r=t.split(pE);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Io(n){let e="";if(Xt(n))e=n;else if(Ze(n))for(let t=0;t<n.length;t++){const r=Io(n[t]);r&&(e+=r+" ")}else if(Bt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const vE="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bE=uh(vE);function fb(n){return!!n||n===""}const hb=n=>!!(n&&n.__v_isRef===!0),mn=n=>Xt(n)?n:n==null?"":Ze(n)||Bt(n)&&(n.toString===db||!nt(n.toString))?hb(n)?mn(n.value):JSON.stringify(n,pb,2):String(n),pb=(n,e)=>hb(e)?pb(n,e.value):ds(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,i],o)=>(t[Fc(r,o)+" =>"]=i,t),{})}:ab(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Fc(t))}:yi(e)?Fc(e):Bt(e)&&!Ze(e)&&!cb(e)?String(e):e,Fc=(n,e="")=>{var t;return yi(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ln;class gb{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ln,!e&&Ln&&(this.index=(Ln.scopes||(Ln.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Ln;try{return Ln=this,e()}finally{Ln=t}}}on(){Ln=this}off(){Ln=this.parent}stop(e){if(this._active){let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function mb(n){return new gb(n)}function vb(){return Ln}function yE(n,e=!1){Ln&&Ln.cleanups.push(n)}let $t;const $c=new WeakSet;class bb{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ln&&Ln.active&&Ln.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,$c.has(this)&&($c.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||xb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Xp(this),Sb(this);const e=$t,t=wr;$t=this,wr=!0;try{return this.fn()}finally{Cb(this),$t=e,wr=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)vh(e);this.deps=this.depsTail=void 0,Xp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?$c.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Zu(this)&&this.run()}get dirty(){return Zu(this)}}let yb=0,da,ca;function xb(n,e=!1){if(n.flags|=8,e){n.next=ca,ca=n;return}n.next=da,da=n}function gh(){yb++}function mh(){if(--yb>0)return;if(ca){let e=ca;for(ca=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;da;){let e=da;for(da=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function Sb(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Cb(n){let e,t=n.depsTail,r=t;for(;r;){const i=r.prevDep;r.version===-1?(r===t&&(t=i),vh(r),xE(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}n.deps=e,n.depsTail=t}function Zu(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Tb(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Tb(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Ra))return;n.globalVersion=Ra;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Zu(n)){n.flags&=-3;return}const t=$t,r=wr;$t=n,wr=!0;try{Sb(n);const i=n.fn(n._value);(e.version===0||ji(i,n._value))&&(n._value=i,e.version++)}catch(i){throw e.version++,i}finally{$t=t,wr=r,Cb(n),n.flags&=-3}}function vh(n,e=!1){const{dep:t,prevSub:r,nextSub:i}=n;if(r&&(r.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let o=t.computed.deps;o;o=o.nextDep)vh(o,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function xE(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let wr=!0;const wb=[];function eo(){wb.push(wr),wr=!1}function to(){const n=wb.pop();wr=n===void 0?!0:n}function Xp(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=$t;$t=void 0;try{e()}finally{$t=t}}}let Ra=0;class SE{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class bh{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!$t||!wr||$t===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==$t)t=this.activeLink=new SE($t,this),$t.deps?(t.prevDep=$t.depsTail,$t.depsTail.nextDep=t,$t.depsTail=t):$t.deps=$t.depsTail=t,Eb(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=$t.depsTail,t.nextDep=void 0,$t.depsTail.nextDep=t,$t.depsTail=t,$t.deps===t&&($t.deps=r)}return t}trigger(e){this.version++,Ra++,this.notify(e)}notify(e){gh();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{mh()}}}function Eb(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Eb(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const id=new WeakMap,Co=Symbol(""),Ju=Symbol(""),Aa=Symbol("");function Sn(n,e,t){if(wr&&$t){let r=id.get(n);r||id.set(n,r=new Map);let i=r.get(t);i||(r.set(t,i=new bh),i.map=r,i.key=t),i.track()}}function gi(n,e,t,r,i,o){const s=id.get(n);if(!s){Ra++;return}const a=l=>{l&&l.trigger()};if(gh(),e==="clear")s.forEach(a);else{const l=Ze(n),d=l&&ph(t);if(l&&t==="length"){const c=Number(r);s.forEach((u,f)=>{(f==="length"||f===Aa||!yi(f)&&f>=c)&&a(u)})}else switch((t!==void 0||s.has(void 0))&&a(s.get(t)),d&&a(s.get(Aa)),e){case"add":l?d&&a(s.get("length")):(a(s.get(Co)),ds(n)&&a(s.get(Ju)));break;case"delete":l||(a(s.get(Co)),ds(n)&&a(s.get(Ju)));break;case"set":ds(n)&&a(s.get(Co));break}}mh()}function CE(n,e){const t=id.get(n);return t&&t.get(e)}function Ko(n){const e=gt(n);return e===n?e:(Sn(e,"iterate",Aa),fr(n)?e:e.map(Cn))}function Kd(n){return Sn(n=gt(n),"iterate",Aa),n}const TE={__proto__:null,[Symbol.iterator](){return Bc(this,Symbol.iterator,Cn)},concat(...n){return Ko(this).concat(...n.map(e=>Ze(e)?Ko(e):e))},entries(){return Bc(this,"entries",n=>(n[1]=Cn(n[1]),n))},every(n,e){return ri(this,"every",n,e,void 0,arguments)},filter(n,e){return ri(this,"filter",n,e,t=>t.map(Cn),arguments)},find(n,e){return ri(this,"find",n,e,Cn,arguments)},findIndex(n,e){return ri(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return ri(this,"findLast",n,e,Cn,arguments)},findLastIndex(n,e){return ri(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return ri(this,"forEach",n,e,void 0,arguments)},includes(...n){return Nc(this,"includes",n)},indexOf(...n){return Nc(this,"indexOf",n)},join(n){return Ko(this).join(n)},lastIndexOf(...n){return Nc(this,"lastIndexOf",n)},map(n,e){return ri(this,"map",n,e,void 0,arguments)},pop(){return Vs(this,"pop")},push(...n){return Vs(this,"push",n)},reduce(n,...e){return Qp(this,"reduce",n,e)},reduceRight(n,...e){return Qp(this,"reduceRight",n,e)},shift(){return Vs(this,"shift")},some(n,e){return ri(this,"some",n,e,void 0,arguments)},splice(...n){return Vs(this,"splice",n)},toReversed(){return Ko(this).toReversed()},toSorted(n){return Ko(this).toSorted(n)},toSpliced(...n){return Ko(this).toSpliced(...n)},unshift(...n){return Vs(this,"unshift",n)},values(){return Bc(this,"values",Cn)}};function Bc(n,e,t){const r=Kd(n),i=r[e]();return r!==n&&!fr(n)&&(i._next=i.next,i.next=()=>{const o=i._next();return o.value&&(o.value=t(o.value)),o}),i}const wE=Array.prototype;function ri(n,e,t,r,i,o){const s=Kd(n),a=s!==n&&!fr(n),l=s[e];if(l!==wE[e]){const u=l.apply(n,o);return a?Cn(u):u}let d=t;s!==n&&(a?d=function(u,f){return t.call(this,Cn(u),f,n)}:t.length>2&&(d=function(u,f){return t.call(this,u,f,n)}));const c=l.call(s,d,r);return a&&i?i(c):c}function Qp(n,e,t,r){const i=Kd(n);let o=t;return i!==n&&(fr(n)?t.length>3&&(o=function(s,a,l){return t.call(this,s,a,l,n)}):o=function(s,a,l){return t.call(this,s,Cn(a),l,n)}),i[e](o,...r)}function Nc(n,e,t){const r=gt(n);Sn(r,"iterate",Aa);const i=r[e](...t);return(i===-1||i===!1)&&Sh(t[0])?(t[0]=gt(t[0]),r[e](...t)):i}function Vs(n,e,t=[]){eo(),gh();const r=gt(n)[e].apply(n,t);return mh(),to(),r}const EE=uh("__proto__,__v_isRef,__isVue"),Rb=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(yi));function RE(n){yi(n)||(n=String(n));const e=gt(this);return Sn(e,"has",n),e.hasOwnProperty(n)}class Ab{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){const i=this._isReadonly,o=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return o;if(t==="__v_raw")return r===(i?o?FE:_b:o?Pb:Lb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const s=Ze(e);if(!i){let l;if(s&&(l=TE[t]))return l;if(t==="hasOwnProperty")return RE}const a=Reflect.get(e,t,Yt(e)?e:r);return(yi(t)?Rb.has(t):EE(t))||(i||Sn(e,"get",t),o)?a:Yt(a)?s&&ph(t)?a:a.value:Bt(a)?i?Kr(a):no(a):a}}class Ib extends Ab{constructor(e=!1){super(!1,e)}set(e,t,r,i){let o=e[t];if(!this._isShallow){const l=Lo(o);if(!fr(r)&&!Lo(r)&&(o=gt(o),r=gt(r)),!Ze(e)&&Yt(o)&&!Yt(r))return l?!1:(o.value=r,!0)}const s=Ze(e)&&ph(t)?Number(t)<e.length:Lt(e,t),a=Reflect.set(e,t,r,Yt(e)?e:i);return e===gt(i)&&(s?ji(r,o)&&gi(e,"set",t,r):gi(e,"add",t,r)),a}deleteProperty(e,t){const r=Lt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&r&&gi(e,"delete",t,void 0),i}has(e,t){const r=Reflect.has(e,t);return(!yi(t)||!Rb.has(t))&&Sn(e,"has",t),r}ownKeys(e){return Sn(e,"iterate",Ze(e)?"length":Co),Reflect.ownKeys(e)}}class AE extends Ab{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const IE=new Ib,LE=new AE,PE=new Ib(!0),ef=n=>n,dl=n=>Reflect.getPrototypeOf(n);function _E(n,e,t){return function(...r){const i=this.__v_raw,o=gt(i),s=ds(o),a=n==="entries"||n===Symbol.iterator&&s,l=n==="keys"&&s,d=i[n](...r),c=t?ef:e?tf:Cn;return!e&&Sn(o,"iterate",l?Ju:Co),{next(){const{value:u,done:f}=d.next();return f?{value:u,done:f}:{value:a?[c(u[0]),c(u[1])]:c(u),done:f}},[Symbol.iterator](){return this}}}}function cl(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function kE(n,e){const t={get(i){const o=this.__v_raw,s=gt(o),a=gt(i);n||(ji(i,a)&&Sn(s,"get",i),Sn(s,"get",a));const{has:l}=dl(s),d=e?ef:n?tf:Cn;if(l.call(s,i))return d(o.get(i));if(l.call(s,a))return d(o.get(a));o!==s&&o.get(i)},get size(){const i=this.__v_raw;return!n&&Sn(gt(i),"iterate",Co),Reflect.get(i,"size",i)},has(i){const o=this.__v_raw,s=gt(o),a=gt(i);return n||(ji(i,a)&&Sn(s,"has",i),Sn(s,"has",a)),i===a?o.has(i):o.has(i)||o.has(a)},forEach(i,o){const s=this,a=s.__v_raw,l=gt(a),d=e?ef:n?tf:Cn;return!n&&Sn(l,"iterate",Co),a.forEach((c,u)=>i.call(o,d(c),d(u),s))}};return Jt(t,n?{add:cl("add"),set:cl("set"),delete:cl("delete"),clear:cl("clear")}:{add(i){!e&&!fr(i)&&!Lo(i)&&(i=gt(i));const o=gt(this);return dl(o).has.call(o,i)||(o.add(i),gi(o,"add",i,i)),this},set(i,o){!e&&!fr(o)&&!Lo(o)&&(o=gt(o));const s=gt(this),{has:a,get:l}=dl(s);let d=a.call(s,i);d||(i=gt(i),d=a.call(s,i));const c=l.call(s,i);return s.set(i,o),d?ji(o,c)&&gi(s,"set",i,o):gi(s,"add",i,o),this},delete(i){const o=gt(this),{has:s,get:a}=dl(o);let l=s.call(o,i);l||(i=gt(i),l=s.call(o,i)),a&&a.call(o,i);const d=o.delete(i);return l&&gi(o,"delete",i,void 0),d},clear(){const i=gt(this),o=i.size!==0,s=i.clear();return o&&gi(i,"clear",void 0,void 0),s}}),["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=_E(i,n,e)}),t}function yh(n,e){const t=kE(n,e);return(r,i,o)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?r:Reflect.get(Lt(t,i)&&i in r?t:r,i,o)}const DE={get:yh(!1,!1)},OE={get:yh(!1,!0)},ME={get:yh(!0,!1)},Lb=new WeakMap,Pb=new WeakMap,_b=new WeakMap,FE=new WeakMap;function $E(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function BE(n){return n.__v_skip||!Object.isExtensible(n)?0:$E(lE(n))}function no(n){return Lo(n)?n:xh(n,!1,IE,DE,Lb)}function kb(n){return xh(n,!1,PE,OE,Pb)}function Kr(n){return xh(n,!0,LE,ME,_b)}function xh(n,e,t,r,i){if(!Bt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const o=i.get(n);if(o)return o;const s=BE(n);if(s===0)return n;const a=new Proxy(n,s===2?r:t);return i.set(n,a),a}function Ki(n){return Lo(n)?Ki(n.__v_raw):!!(n&&n.__v_isReactive)}function Lo(n){return!!(n&&n.__v_isReadonly)}function fr(n){return!!(n&&n.__v_isShallow)}function Sh(n){return n?!!n.__v_raw:!1}function gt(n){const e=n&&n.__v_raw;return e?gt(e):n}function Ia(n){return!Lt(n,"__v_skip")&&Object.isExtensible(n)&&ub(n,"__v_skip",!0),n}const Cn=n=>Bt(n)?no(n):n,tf=n=>Bt(n)?Kr(n):n;function Yt(n){return n?n.__v_isRef===!0:!1}function G(n){return Db(n,!1)}function Ch(n){return Db(n,!0)}function Db(n,e){return Yt(n)?n:new NE(n,e)}class NE{constructor(e,t){this.dep=new bh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:gt(e),this._value=t?e:Cn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||fr(e)||Lo(e);e=r?e:gt(e),ji(e,t)&&(this._rawValue=e,this._value=r?e:Cn(e),this.dep.trigger())}}function Me(n){return Yt(n)?n.value:n}const zE={get:(n,e,t)=>e==="__v_raw"?n:Me(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const i=n[e];return Yt(i)&&!Yt(t)?(i.value=t,!0):Reflect.set(n,e,t,r)}};function Ob(n){return Ki(n)?n:new Proxy(n,zE)}function UE(n){const e=Ze(n)?new Array(n.length):{};for(const t in n)e[t]=Mb(n,t);return e}class HE{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return CE(gt(this._object),this._key)}}class VE{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Ie(n,e,t){return Yt(n)?n:nt(n)?new VE(n):Bt(n)&&arguments.length>1?Mb(n,e,t):G(n)}function Mb(n,e,t){const r=n[e];return Yt(r)?r:new HE(n,e,t)}class GE{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new bh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ra-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&$t!==this)return xb(this,!0),!0}get value(){const e=this.dep.track();return Tb(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function WE(n,e,t=!1){let r,i;return nt(n)?r=n:(r=n.get,i=n.set),new GE(r,i,t)}const ul={},od=new WeakMap;let mo;function jE(n,e=!1,t=mo){if(t){let r=od.get(t);r||od.set(t,r=[]),r.push(n)}}function KE(n,e,t=Ot){const{immediate:r,deep:i,once:o,scheduler:s,augmentJob:a,call:l}=t,d=x=>i?x:fr(x)||i===!1||i===0?mi(x,1):mi(x);let c,u,f,p,h=!1,g=!1;if(Yt(n)?(u=()=>n.value,h=fr(n)):Ki(n)?(u=()=>d(n),h=!0):Ze(n)?(g=!0,h=n.some(x=>Ki(x)||fr(x)),u=()=>n.map(x=>{if(Yt(x))return x.value;if(Ki(x))return d(x);if(nt(x))return l?l(x,2):x()})):nt(n)?e?u=l?()=>l(n,2):n:u=()=>{if(f){eo();try{f()}finally{to()}}const x=mo;mo=c;try{return l?l(n,3,[p]):n(p)}finally{mo=x}}:u=Wr,e&&i){const x=u,E=i===!0?1/0:i;u=()=>mi(x(),E)}const m=vb(),v=()=>{c.stop(),m&&hh(m.effects,c)};if(o&&e){const x=e;e=(...E)=>{x(...E),v()}}let b=g?new Array(n.length).fill(ul):ul;const y=x=>{if(!(!(c.flags&1)||!c.dirty&&!x))if(e){const E=c.run();if(i||h||(g?E.some((A,S)=>ji(A,b[S])):ji(E,b))){f&&f();const A=mo;mo=c;try{const S=[E,b===ul?void 0:g&&b[0]===ul?[]:b,p];l?l(e,3,S):e(...S),b=E}finally{mo=A}}}else c.run()};return a&&a(y),c=new bb(u),c.scheduler=s?()=>s(y,!1):y,p=x=>jE(x,!1,c),f=c.onStop=()=>{const x=od.get(c);if(x){if(l)l(x,4);else for(const E of x)E();od.delete(c)}},e?r?y(!0):b=c.run():s?s(y.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function mi(n,e=1/0,t){if(e<=0||!Bt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,Yt(n))mi(n.value,e,t);else if(Ze(n))for(let r=0;r<n.length;r++)mi(n[r],e,t);else if(ab(n)||ds(n))n.forEach(r=>{mi(r,e,t)});else if(cb(n)){for(const r in n)mi(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&mi(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Qa(n,e,t,r){try{return r?n(...r):n()}catch(i){qd(i,e,t)}}function Rr(n,e,t,r){if(nt(n)){const i=Qa(n,e,t,r);return i&&lb(i)&&i.catch(o=>{qd(o,e,t)}),i}if(Ze(n)){const i=[];for(let o=0;o<n.length;o++)i.push(Rr(n[o],e,t,r));return i}}function qd(n,e,t,r=!0){const i=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:s}=e&&e.appContext.config||Ot;if(e){let a=e.parent;const l=e.proxy,d=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const c=a.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](n,l,d)===!1)return}a=a.parent}if(o){eo(),Qa(o,null,10,[n,l,d]),to();return}}qE(n,t,i,r,s)}function qE(n,e,t,r=!0,i=!1){if(i)throw n;console.error(n)}const Pn=[];let Nr=-1;const cs=[];let Fi=null,is=0;const Fb=Promise.resolve();let sd=null;function wn(n){const e=sd||Fb;return n?e.then(this?n.bind(this):n):e}function YE(n){let e=Nr+1,t=Pn.length;for(;e<t;){const r=e+t>>>1,i=Pn[r],o=La(i);o<n||o===n&&i.flags&2?e=r+1:t=r}return e}function Th(n){if(!(n.flags&1)){const e=La(n),t=Pn[Pn.length-1];!t||!(n.flags&2)&&e>=La(t)?Pn.push(n):Pn.splice(YE(e),0,n),n.flags|=1,$b()}}function $b(){sd||(sd=Fb.then(Nb))}function XE(n){Ze(n)?cs.push(...n):Fi&&n.id===-1?Fi.splice(is+1,0,n):n.flags&1||(cs.push(n),n.flags|=1),$b()}function Zp(n,e,t=Nr+1){for(;t<Pn.length;t++){const r=Pn[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;Pn.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Bb(n){if(cs.length){const e=[...new Set(cs)].sort((t,r)=>La(t)-La(r));if(cs.length=0,Fi){Fi.push(...e);return}for(Fi=e,is=0;is<Fi.length;is++){const t=Fi[is];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Fi=null,is=0}}const La=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Nb(n){try{for(Nr=0;Nr<Pn.length;Nr++){const e=Pn[Nr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Qa(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;Nr<Pn.length;Nr++){const e=Pn[Nr];e&&(e.flags&=-2)}Nr=-1,Pn.length=0,Bb(),sd=null,(Pn.length||cs.length)&&Nb()}}let sn=null,zb=null;function ad(n){const e=sn;return sn=n,zb=n&&n.type.__scopeId||null,e}function ut(n,e=sn,t){if(!e||n._n)return n;const r=(...i)=>{r._d&&cg(-1);const o=ad(e);let s;try{s=n(...i)}finally{ad(o),r._d&&cg(1)}return s};return r._n=!0,r._c=!0,r._d=!0,r}function qi(n,e){if(sn===null)return n;const t=ec(sn),r=n.dirs||(n.dirs=[]);for(let i=0;i<e.length;i++){let[o,s,a,l=Ot]=e[i];o&&(nt(o)&&(o={mounted:o,updated:o}),o.deep&&mi(s),r.push({dir:o,instance:t,value:s,oldValue:void 0,arg:a,modifiers:l}))}return n}function co(n,e,t,r){const i=n.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let l=a.dir[r];l&&(eo(),Rr(l,t,8,[n.el,a,n,e]),to())}}const Ub=Symbol("_vte"),Hb=n=>n.__isTeleport,ua=n=>n&&(n.disabled||n.disabled===""),QE=n=>n&&(n.defer||n.defer===""),Jp=n=>typeof SVGElement<"u"&&n instanceof SVGElement,eg=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,nf=(n,e)=>{const t=n&&n.to;return Xt(t)?e?e(t):null:t},ZE={name:"Teleport",__isTeleport:!0,process(n,e,t,r,i,o,s,a,l,d){const{mc:c,pc:u,pbc:f,o:{insert:p,querySelector:h,createText:g,createComment:m}}=d,v=ua(e.props);let{shapeFlag:b,children:y,dynamicChildren:x}=e;if(n==null){const E=e.el=g(""),A=e.anchor=g("");p(E,t,r),p(A,t,r);const S=(T,C)=>{b&16&&(i&&i.isCE&&(i.ce._teleportTarget=T),c(y,T,C,i,o,s,a,l))},w=()=>{const T=e.target=nf(e.props,h),C=Gb(T,e,g,p);T&&(s!=="svg"&&Jp(T)?s="svg":s!=="mathml"&&eg(T)&&(s="mathml"),v||(S(T,C),Vl(e,!1)))};v&&(S(t,A),Vl(e,!0)),QE(e.props)?Nn(w,o):w()}else{e.el=n.el,e.targetStart=n.targetStart;const E=e.anchor=n.anchor,A=e.target=n.target,S=e.targetAnchor=n.targetAnchor,w=ua(n.props),T=w?t:A,C=w?E:S;if(s==="svg"||Jp(A)?s="svg":(s==="mathml"||eg(A))&&(s="mathml"),x?(f(n.dynamicChildren,x,T,i,o,s,a),Ih(n,e,!0)):l||u(n,e,T,C,i,o,s,a,!1),v)w?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):fl(e,t,E,d,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const L=e.target=nf(e.props,h);L&&fl(e,L,null,d,0)}else w&&fl(e,A,S,d,1);Vl(e,v)}},remove(n,e,t,{um:r,o:{remove:i}},o){const{shapeFlag:s,children:a,anchor:l,targetStart:d,targetAnchor:c,target:u,props:f}=n;if(u&&(i(d),i(c)),o&&i(l),s&16){const p=o||!ua(f);for(let h=0;h<a.length;h++){const g=a[h];r(g,e,t,p,!!g.dynamicChildren)}}},move:fl,hydrate:JE};function fl(n,e,t,{o:{insert:r},m:i},o=2){o===0&&r(n.targetAnchor,e,t);const{el:s,anchor:a,shapeFlag:l,children:d,props:c}=n,u=o===2;if(u&&r(s,e,t),(!u||ua(c))&&l&16)for(let f=0;f<d.length;f++)i(d[f],e,t,2);u&&r(a,e,t)}function JE(n,e,t,r,i,o,{o:{nextSibling:s,parentNode:a,querySelector:l,insert:d,createText:c}},u){const f=e.target=nf(e.props,l);if(f){const p=ua(e.props),h=f._lpa||f.firstChild;if(e.shapeFlag&16)if(p)e.anchor=u(s(n),e,a(n),t,r,i,o),e.targetStart=h,e.targetAnchor=h&&s(h);else{e.anchor=s(n);let g=h;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,f._lpa=e.targetAnchor&&s(e.targetAnchor);break}}g=s(g)}e.targetAnchor||Gb(f,e,c,d),u(h&&s(h),e,f,t,r,i,o)}Vl(e,p)}return e.anchor&&s(e.anchor)}const Vb=ZE;function Vl(n,e){const t=n.ctx;if(t&&t.ut){let r,i;for(e?(r=n.el,i=n.anchor):(r=n.targetStart,i=n.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function Gb(n,e,t,r){const i=e.targetStart=t(""),o=e.targetAnchor=t("");return i[Ub]=o,n&&(r(i,n),r(o,n)),o}const $i=Symbol("_leaveCb"),hl=Symbol("_enterCb");function Wb(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Nt(()=>{n.isMounted=!0}),jt(()=>{n.isUnmounting=!0}),n}const ar=[Function,Array],jb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ar,onEnter:ar,onAfterEnter:ar,onEnterCancelled:ar,onBeforeLeave:ar,onLeave:ar,onAfterLeave:ar,onLeaveCancelled:ar,onBeforeAppear:ar,onAppear:ar,onAfterAppear:ar,onAppearCancelled:ar},Kb=n=>{const e=n.subTree;return e.component?Kb(e.component):e},e1={name:"BaseTransition",props:jb,setup(n,{slots:e}){const t=Bo(),r=Wb();return()=>{const i=e.default&&wh(e.default(),!0);if(!i||!i.length)return;const o=qb(i),s=gt(n),{mode:a}=s;if(r.isLeaving)return zc(o);const l=tg(o);if(!l)return zc(o);let d=Pa(l,s,r,t,f=>d=f);l.type!==un&&Po(l,d);const c=t.subTree,u=c&&tg(c);if(u&&u.type!==un&&!bo(l,u)&&Kb(t).type!==un){const f=Pa(u,s,r,t);if(Po(u,f),a==="out-in"&&l.type!==un)return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,t.job.flags&8||t.update(),delete f.afterLeave},zc(o);a==="in-out"&&l.type!==un&&(f.delayLeave=(p,h,g)=>{const m=Yb(r,u);m[String(u.key)]=u,p[$i]=()=>{h(),p[$i]=void 0,delete d.delayedLeave},d.delayedLeave=g})}return o}}};function qb(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==un){e=t;break}}return e}const t1=e1;function Yb(n,e){const{leavingVNodes:t}=n;let r=t.get(e.type);return r||(r=Object.create(null),t.set(e.type,r)),r}function Pa(n,e,t,r,i){const{appear:o,mode:s,persisted:a=!1,onBeforeEnter:l,onEnter:d,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:f,onLeave:p,onAfterLeave:h,onLeaveCancelled:g,onBeforeAppear:m,onAppear:v,onAfterAppear:b,onAppearCancelled:y}=e,x=String(n.key),E=Yb(t,n),A=(T,C)=>{T&&Rr(T,r,9,C)},S=(T,C)=>{const L=C[1];A(T,C),Ze(T)?T.every(P=>P.length<=1)&&L():T.length<=1&&L()},w={mode:s,persisted:a,beforeEnter(T){let C=l;if(!t.isMounted)if(o)C=m||l;else return;T[$i]&&T[$i](!0);const L=E[x];L&&bo(n,L)&&L.el[$i]&&L.el[$i](),A(C,[T])},enter(T){let C=d,L=c,P=u;if(!t.isMounted)if(o)C=v||d,L=b||c,P=y||u;else return;let _=!1;const D=T[hl]=k=>{_||(_=!0,k?A(P,[T]):A(L,[T]),w.delayedLeave&&w.delayedLeave(),T[hl]=void 0)};C?S(C,[T,D]):D()},leave(T,C){const L=String(n.key);if(T[hl]&&T[hl](!0),t.isUnmounting)return C();A(f,[T]);let P=!1;const _=T[$i]=D=>{P||(P=!0,C(),D?A(g,[T]):A(h,[T]),T[$i]=void 0,E[L]===n&&delete E[L])};E[L]=n,p?S(p,[T,_]):_()},clone(T){const C=Pa(T,e,t,r,i);return i&&i(C),C}};return w}function zc(n){if(Yd(n))return n=qr(n),n.children=null,n}function tg(n){if(!Yd(n))return Hb(n.type)&&n.children?qb(n.children):n;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&nt(t.default))return t.default()}}function Po(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Po(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function wh(n,e=!1,t){let r=[],i=0;for(let o=0;o<n.length;o++){let s=n[o];const a=t==null?s.key:String(t)+String(s.key!=null?s.key:o);s.type===mt?(s.patchFlag&128&&i++,r=r.concat(wh(s.children,e,a))):(e||s.type!==un)&&r.push(a!=null?qr(s,{key:a}):s)}if(i>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Ce(n,e){return nt(n)?Jt({name:n.name},e,{setup:n}):n}function Xb(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function rf(n,e,t,r,i=!1){if(Ze(n)){n.forEach((h,g)=>rf(h,e&&(Ze(e)?e[g]:e),t,r,i));return}if(us(r)&&!i)return;const o=r.shapeFlag&4?ec(r.component):r.el,s=i?null:o,{i:a,r:l}=n,d=e&&e.r,c=a.refs===Ot?a.refs={}:a.refs,u=a.setupState,f=gt(u),p=u===Ot?()=>!1:h=>Lt(f,h);if(d!=null&&d!==l&&(Xt(d)?(c[d]=null,p(d)&&(u[d]=null)):Yt(d)&&(d.value=null)),nt(l))Qa(l,a,12,[s,c]);else{const h=Xt(l),g=Yt(l);if(h||g){const m=()=>{if(n.f){const v=h?p(l)?u[l]:c[l]:l.value;i?Ze(v)&&hh(v,o):Ze(v)?v.includes(o)||v.push(o):h?(c[l]=[o],p(l)&&(u[l]=c[l])):(l.value=[o],n.k&&(c[n.k]=l.value))}else h?(c[l]=s,p(l)&&(u[l]=s)):g&&(l.value=s,n.k&&(c[n.k]=s))};s?(m.id=-1,Nn(m,t)):m()}}}Wd().requestIdleCallback;Wd().cancelIdleCallback;const us=n=>!!n.type.__asyncLoader,Yd=n=>n.type.__isKeepAlive;function Eh(n,e){Qb(n,"a",e)}function Xd(n,e){Qb(n,"da",e)}function Qb(n,e,t=fn){const r=n.__wdc||(n.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(Qd(e,r,t),t){let i=t.parent;for(;i&&i.parent;)Yd(i.parent.vnode)&&n1(r,e,t,i),i=i.parent}}function n1(n,e,t,r){const i=Qd(e,n,r,!0);io(()=>{hh(r[e],i)},t)}function Qd(n,e,t=fn,r=!1){if(t){const i=t[n]||(t[n]=[]),o=e.__weh||(e.__weh=(...s)=>{eo();const a=Ja(t),l=Rr(e,t,n,s);return a(),to(),l});return r?i.unshift(o):i.push(o),o}}const xi=n=>(e,t=fn)=>{(!ka||n==="sp")&&Qd(n,(...r)=>e(...r),t)},ro=xi("bm"),Nt=xi("m"),Zb=xi("bu"),Zd=xi("u"),jt=xi("bum"),io=xi("um"),r1=xi("sp"),i1=xi("rtg"),o1=xi("rtc");function s1(n,e=fn){Qd("ec",n,e)}const a1="components";function l1(n,e){return c1(a1,n,!0,e)||n}const d1=Symbol.for("v-ndc");function c1(n,e,t=!0,r=!1){const i=sn||fn;if(i){const o=i.type;{const a=X1(o,!1);if(a&&(a===e||a===pr(e)||a===Gd(pr(e))))return o}const s=ng(i[n]||o[n],e)||ng(i.appContext[n],e);return!s&&r?o:s}}function ng(n,e){return n&&(n[e]||n[pr(e)]||n[Gd(pr(e))])}function ld(n,e,t,r){let i;const o=t,s=Ze(n);if(s||Xt(n)){const a=s&&Ki(n);let l=!1;a&&(l=!fr(n),n=Kd(n)),i=new Array(n.length);for(let d=0,c=n.length;d<c;d++)i[d]=e(l?Cn(n[d]):n[d],d,void 0,o)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=e(a+1,a,void 0,o)}else if(Bt(n))if(n[Symbol.iterator])i=Array.from(n,(a,l)=>e(a,l,void 0,o));else{const a=Object.keys(n);i=new Array(a.length);for(let l=0,d=a.length;l<d;l++){const c=a[l];i[l]=e(n[c],c,l,o)}}else i=[];return i}function Jb(n,e,t={},r,i){if(sn.ce||sn.parent&&us(sn.parent)&&sn.parent.ce)return Rt(),xn(mt,null,[qe("slot",t,r)],64);let o=n[e];o&&o._c&&(o._d=!1),Rt();const s=o&&ey(o(t)),a=t.key||s&&s.key,l=xn(mt,{key:(a&&!yi(a)?a:`_${e}`)+(!s&&r?"_fb":"")},s||[],s&&n._===1?64:-2);return l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),o&&o._c&&(o._d=!0),l}function ey(n){return n.some(e=>ys(e)?!(e.type===un||e.type===mt&&!ey(e.children)):!0)?n:null}const of=n=>n?by(n)?ec(n):of(n.parent):null,fa=Jt(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>of(n.parent),$root:n=>of(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Rh(n),$forceUpdate:n=>n.f||(n.f=()=>{Th(n.update)}),$nextTick:n=>n.n||(n.n=wn.bind(n.proxy)),$watch:n=>k1.bind(n)}),Uc=(n,e)=>n!==Ot&&!n.__isScriptSetup&&Lt(n,e),u1={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:l}=n;let d;if(e[0]!=="$"){const p=s[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return i[e];case 4:return t[e];case 3:return o[e]}else{if(Uc(r,e))return s[e]=1,r[e];if(i!==Ot&&Lt(i,e))return s[e]=2,i[e];if((d=n.propsOptions[0])&&Lt(d,e))return s[e]=3,o[e];if(t!==Ot&&Lt(t,e))return s[e]=4,t[e];sf&&(s[e]=0)}}const c=fa[e];let u,f;if(c)return e==="$attrs"&&Sn(n.attrs,"get",""),c(n);if((u=a.__cssModules)&&(u=u[e]))return u;if(t!==Ot&&Lt(t,e))return s[e]=4,t[e];if(f=l.config.globalProperties,Lt(f,e))return f[e]},set({_:n},e,t){const{data:r,setupState:i,ctx:o}=n;return Uc(i,e)?(i[e]=t,!0):r!==Ot&&Lt(r,e)?(r[e]=t,!0):Lt(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(o[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:i,propsOptions:o}},s){let a;return!!t[s]||n!==Ot&&Lt(n,s)||Uc(e,s)||(a=o[0])&&Lt(a,s)||Lt(r,s)||Lt(fa,s)||Lt(i.config.globalProperties,s)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Lt(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function rg(n){return Ze(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let sf=!0;function f1(n){const e=Rh(n),t=n.proxy,r=n.ctx;sf=!1,e.beforeCreate&&ig(e.beforeCreate,n,"bc");const{data:i,computed:o,methods:s,watch:a,provide:l,inject:d,created:c,beforeMount:u,mounted:f,beforeUpdate:p,updated:h,activated:g,deactivated:m,beforeDestroy:v,beforeUnmount:b,destroyed:y,unmounted:x,render:E,renderTracked:A,renderTriggered:S,errorCaptured:w,serverPrefetch:T,expose:C,inheritAttrs:L,components:P,directives:_,filters:D}=e;if(d&&h1(d,r,null),s)for(const O in s){const $=s[O];nt($)&&(r[O]=$.bind(t))}if(i){const O=i.call(t,t);Bt(O)&&(n.data=no(O))}if(sf=!0,o)for(const O in o){const $=o[O],K=nt($)?$.bind(t,t):nt($.get)?$.get.bind(t,t):Wr,Y=!nt($)&&nt($.set)?$.set.bind(t):Wr,H=U({get:K,set:Y});Object.defineProperty(r,O,{enumerable:!0,configurable:!0,get:()=>H.value,set:B=>H.value=B})}if(a)for(const O in a)ty(a[O],r,t,O);if(l){const O=nt(l)?l.call(t):l;Reflect.ownKeys(O).forEach($=>{st($,O[$])})}c&&ig(c,n,"c");function M(O,$){Ze($)?$.forEach(K=>O(K.bind(t))):$&&O($.bind(t))}if(M(ro,u),M(Nt,f),M(Zb,p),M(Zd,h),M(Eh,g),M(Xd,m),M(s1,w),M(o1,A),M(i1,S),M(jt,b),M(io,x),M(r1,T),Ze(C))if(C.length){const O=n.exposed||(n.exposed={});C.forEach($=>{Object.defineProperty(O,$,{get:()=>t[$],set:K=>t[$]=K})})}else n.exposed||(n.exposed={});E&&n.render===Wr&&(n.render=E),L!=null&&(n.inheritAttrs=L),P&&(n.components=P),_&&(n.directives=_),T&&Xb(n)}function h1(n,e,t=Wr){Ze(n)&&(n=af(n));for(const r in n){const i=n[r];let o;Bt(i)?"default"in i?o=Be(i.from||r,i.default,!0):o=Be(i.from||r):o=Be(i),Yt(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:s=>o.value=s}):e[r]=o}}function ig(n,e,t){Rr(Ze(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function ty(n,e,t,r){let i=r.includes(".")?hy(t,r):()=>t[r];if(Xt(n)){const o=e[n];nt(o)&&at(i,o)}else if(nt(n))at(i,n.bind(t));else if(Bt(n))if(Ze(n))n.forEach(o=>ty(o,e,t,r));else{const o=nt(n.handler)?n.handler.bind(t):e[n.handler];nt(o)&&at(i,o,n)}}function Rh(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=n.appContext,a=o.get(e);let l;return a?l=a:!i.length&&!t&&!r?l=e:(l={},i.length&&i.forEach(d=>dd(l,d,s,!0)),dd(l,e,s)),Bt(e)&&o.set(e,l),l}function dd(n,e,t,r=!1){const{mixins:i,extends:o}=e;o&&dd(n,o,t,!0),i&&i.forEach(s=>dd(n,s,t,!0));for(const s in e)if(!(r&&s==="expose")){const a=p1[s]||t&&t[s];n[s]=a?a(n[s],e[s]):e[s]}return n}const p1={data:og,props:sg,emits:sg,methods:na,computed:na,beforeCreate:An,created:An,beforeMount:An,mounted:An,beforeUpdate:An,updated:An,beforeDestroy:An,beforeUnmount:An,destroyed:An,unmounted:An,activated:An,deactivated:An,errorCaptured:An,serverPrefetch:An,components:na,directives:na,watch:m1,provide:og,inject:g1};function og(n,e){return e?n?function(){return Jt(nt(n)?n.call(this,this):n,nt(e)?e.call(this,this):e)}:e:n}function g1(n,e){return na(af(n),af(e))}function af(n){if(Ze(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function An(n,e){return n?[...new Set([].concat(n,e))]:e}function na(n,e){return n?Jt(Object.create(null),n,e):e}function sg(n,e){return n?Ze(n)&&Ze(e)?[...new Set([...n,...e])]:Jt(Object.create(null),rg(n),rg(e??{})):e}function m1(n,e){if(!n)return e;if(!e)return n;const t=Jt(Object.create(null),n);for(const r in e)t[r]=An(n[r],e[r]);return t}function ny(){return{app:null,config:{isNativeTag:sE,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let v1=0;function b1(n,e){return function(r,i=null){nt(r)||(r=Jt({},r)),i!=null&&!Bt(i)&&(i=null);const o=ny(),s=new WeakSet,a=[];let l=!1;const d=o.app={_uid:v1++,_component:r,_props:i,_container:null,_context:o,_instance:null,version:Z1,get config(){return o.config},set config(c){},use(c,...u){return s.has(c)||(c&&nt(c.install)?(s.add(c),c.install(d,...u)):nt(c)&&(s.add(c),c(d,...u))),d},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),d},component(c,u){return u?(o.components[c]=u,d):o.components[c]},directive(c,u){return u?(o.directives[c]=u,d):o.directives[c]},mount(c,u,f){if(!l){const p=d._ceVNode||qe(r,i);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),u&&e?e(p,c):n(p,c,f),l=!0,d._container=c,c.__vue_app__=d,ec(p.component)}},onUnmount(c){a.push(c)},unmount(){l&&(Rr(a,d._instance,16),n(null,d._container),delete d._container.__vue_app__)},provide(c,u){return o.provides[c]=u,d},runWithContext(c){const u=To;To=d;try{return c()}finally{To=u}}};return d}}let To=null;function st(n,e){if(fn){let t=fn.provides;const r=fn.parent&&fn.parent.provides;r===t&&(t=fn.provides=Object.create(r)),t[n]=e}}function Be(n,e,t=!1){const r=fn||sn;if(r||To){const i=To?To._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return t&&nt(e)?e.call(r&&r.proxy):e}}function y1(){return!!(fn||sn||To)}const ry={},iy=()=>Object.create(ry),oy=n=>Object.getPrototypeOf(n)===ry;function x1(n,e,t,r=!1){const i={},o=iy();n.propsDefaults=Object.create(null),sy(n,e,i,o);for(const s in n.propsOptions[0])s in i||(i[s]=void 0);t?n.props=r?i:kb(i):n.type.props?n.props=i:n.props=o,n.attrs=o}function S1(n,e,t,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=n,a=gt(i),[l]=n.propsOptions;let d=!1;if((r||s>0)&&!(s&16)){if(s&8){const c=n.vnode.dynamicProps;for(let u=0;u<c.length;u++){let f=c[u];if(Jd(n.emitsOptions,f))continue;const p=e[f];if(l)if(Lt(o,f))p!==o[f]&&(o[f]=p,d=!0);else{const h=pr(f);i[h]=lf(l,a,h,p,n,!1)}else p!==o[f]&&(o[f]=p,d=!0)}}}else{sy(n,e,i,o)&&(d=!0);let c;for(const u in a)(!e||!Lt(e,u)&&((c=$o(u))===u||!Lt(e,c)))&&(l?t&&(t[u]!==void 0||t[c]!==void 0)&&(i[u]=lf(l,a,u,void 0,n,!0)):delete i[u]);if(o!==a)for(const u in o)(!e||!Lt(e,u))&&(delete o[u],d=!0)}d&&gi(n.attrs,"set","")}function sy(n,e,t,r){const[i,o]=n.propsOptions;let s=!1,a;if(e)for(let l in e){if(la(l))continue;const d=e[l];let c;i&&Lt(i,c=pr(l))?!o||!o.includes(c)?t[c]=d:(a||(a={}))[c]=d:Jd(n.emitsOptions,l)||(!(l in r)||d!==r[l])&&(r[l]=d,s=!0)}if(o){const l=gt(t),d=a||Ot;for(let c=0;c<o.length;c++){const u=o[c];t[u]=lf(i,l,u,d[u],n,!Lt(d,u))}}return s}function lf(n,e,t,r,i,o){const s=n[t];if(s!=null){const a=Lt(s,"default");if(a&&r===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&nt(l)){const{propsDefaults:d}=i;if(t in d)r=d[t];else{const c=Ja(i);r=d[t]=l.call(null,e),c()}}else r=l;i.ce&&i.ce._setProp(t,r)}s[0]&&(o&&!a?r=!1:s[1]&&(r===""||r===$o(t))&&(r=!0))}return r}const C1=new WeakMap;function ay(n,e,t=!1){const r=t?C1:e.propsCache,i=r.get(n);if(i)return i;const o=n.props,s={},a=[];let l=!1;if(!nt(n)){const c=u=>{l=!0;const[f,p]=ay(u,e,!0);Jt(s,f),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}if(!o&&!l)return Bt(n)&&r.set(n,ls),ls;if(Ze(o))for(let c=0;c<o.length;c++){const u=pr(o[c]);ag(u)&&(s[u]=Ot)}else if(o)for(const c in o){const u=pr(c);if(ag(u)){const f=o[c],p=s[u]=Ze(f)||nt(f)?{type:f}:Jt({},f),h=p.type;let g=!1,m=!0;if(Ze(h))for(let v=0;v<h.length;++v){const b=h[v],y=nt(b)&&b.name;if(y==="Boolean"){g=!0;break}else y==="String"&&(m=!1)}else g=nt(h)&&h.name==="Boolean";p[0]=g,p[1]=m,(g||Lt(p,"default"))&&a.push(u)}}const d=[s,a];return Bt(n)&&r.set(n,d),d}function ag(n){return n[0]!=="$"&&!la(n)}const ly=n=>n[0]==="_"||n==="$stable",Ah=n=>Ze(n)?n.map(Ur):[Ur(n)],T1=(n,e,t)=>{if(e._n)return e;const r=ut((...i)=>Ah(e(...i)),t);return r._c=!1,r},dy=(n,e,t)=>{const r=n._ctx;for(const i in n){if(ly(i))continue;const o=n[i];if(nt(o))e[i]=T1(i,o,r);else if(o!=null){const s=Ah(o);e[i]=()=>s}}},cy=(n,e)=>{const t=Ah(e);n.slots.default=()=>t},uy=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},w1=(n,e,t)=>{const r=n.slots=iy();if(n.vnode.shapeFlag&32){const i=e._;i?(uy(r,e,t),t&&ub(r,"_",i,!0)):dy(e,r)}else e&&cy(n,e)},E1=(n,e,t)=>{const{vnode:r,slots:i}=n;let o=!0,s=Ot;if(r.shapeFlag&32){const a=e._;a?t&&a===1?o=!1:uy(i,e,t):(o=!e.$stable,dy(e,i)),s=e}else e&&(cy(n,e),s={default:1});if(o)for(const a in i)!ly(a)&&s[a]==null&&delete i[a]},Nn=N1;function R1(n){return A1(n)}function A1(n,e){const t=Wd();t.__VUE__=!0;const{insert:r,remove:i,patchProp:o,createElement:s,createText:a,createComment:l,setText:d,setElementText:c,parentNode:u,nextSibling:f,setScopeId:p=Wr,insertStaticContent:h}=n,g=(F,z,ne,ae=null,le=null,me=null,fe=void 0,ce=null,ve=!!z.dynamicChildren)=>{if(F===z)return;F&&!bo(F,z)&&(ae=W(F),B(F,le,me,!0),F=null),z.patchFlag===-2&&(ve=!1,z.dynamicChildren=null);const{type:he,ref:_e,shapeFlag:re}=z;switch(he){case Za:m(F,z,ne,ae);break;case un:v(F,z,ne,ae);break;case Gc:F==null&&b(z,ne,ae,fe);break;case mt:P(F,z,ne,ae,le,me,fe,ce,ve);break;default:re&1?E(F,z,ne,ae,le,me,fe,ce,ve):re&6?_(F,z,ne,ae,le,me,fe,ce,ve):(re&64||re&128)&&he.process(F,z,ne,ae,le,me,fe,ce,ve,ue)}_e!=null&&le&&rf(_e,F&&F.ref,me,z||F,!z)},m=(F,z,ne,ae)=>{if(F==null)r(z.el=a(z.children),ne,ae);else{const le=z.el=F.el;z.children!==F.children&&d(le,z.children)}},v=(F,z,ne,ae)=>{F==null?r(z.el=l(z.children||""),ne,ae):z.el=F.el},b=(F,z,ne,ae)=>{[F.el,F.anchor]=h(F.children,z,ne,ae,F.el,F.anchor)},y=({el:F,anchor:z},ne,ae)=>{let le;for(;F&&F!==z;)le=f(F),r(F,ne,ae),F=le;r(z,ne,ae)},x=({el:F,anchor:z})=>{let ne;for(;F&&F!==z;)ne=f(F),i(F),F=ne;i(z)},E=(F,z,ne,ae,le,me,fe,ce,ve)=>{z.type==="svg"?fe="svg":z.type==="math"&&(fe="mathml"),F==null?A(z,ne,ae,le,me,fe,ce,ve):T(F,z,le,me,fe,ce,ve)},A=(F,z,ne,ae,le,me,fe,ce)=>{let ve,he;const{props:_e,shapeFlag:re,transition:ge,dirs:Ee}=F;if(ve=F.el=s(F.type,me,_e&&_e.is,_e),re&8?c(ve,F.children):re&16&&w(F.children,ve,null,ae,le,Hc(F,me),fe,ce),Ee&&co(F,null,ae,"created"),S(ve,F,F.scopeId,fe,ae),_e){for(const et in _e)et!=="value"&&!la(et)&&o(ve,et,null,_e[et],me,ae);"value"in _e&&o(ve,"value",null,_e.value,me),(he=_e.onVnodeBeforeMount)&&Dr(he,ae,F)}Ee&&co(F,null,ae,"beforeMount");const He=I1(le,ge);He&&ge.beforeEnter(ve),r(ve,z,ne),((he=_e&&_e.onVnodeMounted)||He||Ee)&&Nn(()=>{he&&Dr(he,ae,F),He&&ge.enter(ve),Ee&&co(F,null,ae,"mounted")},le)},S=(F,z,ne,ae,le)=>{if(ne&&p(F,ne),ae)for(let me=0;me<ae.length;me++)p(F,ae[me]);if(le){let me=le.subTree;if(z===me||gy(me.type)&&(me.ssContent===z||me.ssFallback===z)){const fe=le.vnode;S(F,fe,fe.scopeId,fe.slotScopeIds,le.parent)}}},w=(F,z,ne,ae,le,me,fe,ce,ve=0)=>{for(let he=ve;he<F.length;he++){const _e=F[he]=ce?Bi(F[he]):Ur(F[he]);g(null,_e,z,ne,ae,le,me,fe,ce)}},T=(F,z,ne,ae,le,me,fe)=>{const ce=z.el=F.el;let{patchFlag:ve,dynamicChildren:he,dirs:_e}=z;ve|=F.patchFlag&16;const re=F.props||Ot,ge=z.props||Ot;let Ee;if(ne&&uo(ne,!1),(Ee=ge.onVnodeBeforeUpdate)&&Dr(Ee,ne,z,F),_e&&co(z,F,ne,"beforeUpdate"),ne&&uo(ne,!0),(re.innerHTML&&ge.innerHTML==null||re.textContent&&ge.textContent==null)&&c(ce,""),he?C(F.dynamicChildren,he,ce,ne,ae,Hc(z,le),me):fe||$(F,z,ce,null,ne,ae,Hc(z,le),me,!1),ve>0){if(ve&16)L(ce,re,ge,ne,le);else if(ve&2&&re.class!==ge.class&&o(ce,"class",null,ge.class,le),ve&4&&o(ce,"style",re.style,ge.style,le),ve&8){const He=z.dynamicProps;for(let et=0;et<He.length;et++){const Xe=He[et],lt=re[Xe],Qe=ge[Xe];(Qe!==lt||Xe==="value")&&o(ce,Xe,lt,Qe,le,ne)}}ve&1&&F.children!==z.children&&c(ce,z.children)}else!fe&&he==null&&L(ce,re,ge,ne,le);((Ee=ge.onVnodeUpdated)||_e)&&Nn(()=>{Ee&&Dr(Ee,ne,z,F),_e&&co(z,F,ne,"updated")},ae)},C=(F,z,ne,ae,le,me,fe)=>{for(let ce=0;ce<z.length;ce++){const ve=F[ce],he=z[ce],_e=ve.el&&(ve.type===mt||!bo(ve,he)||ve.shapeFlag&70)?u(ve.el):ne;g(ve,he,_e,null,ae,le,me,fe,!0)}},L=(F,z,ne,ae,le)=>{if(z!==ne){if(z!==Ot)for(const me in z)!la(me)&&!(me in ne)&&o(F,me,z[me],null,le,ae);for(const me in ne){if(la(me))continue;const fe=ne[me],ce=z[me];fe!==ce&&me!=="value"&&o(F,me,ce,fe,le,ae)}"value"in ne&&o(F,"value",z.value,ne.value,le)}},P=(F,z,ne,ae,le,me,fe,ce,ve)=>{const he=z.el=F?F.el:a(""),_e=z.anchor=F?F.anchor:a("");let{patchFlag:re,dynamicChildren:ge,slotScopeIds:Ee}=z;Ee&&(ce=ce?ce.concat(Ee):Ee),F==null?(r(he,ne,ae),r(_e,ne,ae),w(z.children||[],ne,_e,le,me,fe,ce,ve)):re>0&&re&64&&ge&&F.dynamicChildren?(C(F.dynamicChildren,ge,ne,le,me,fe,ce),(z.key!=null||le&&z===le.subTree)&&Ih(F,z,!0)):$(F,z,ne,_e,le,me,fe,ce,ve)},_=(F,z,ne,ae,le,me,fe,ce,ve)=>{z.slotScopeIds=ce,F==null?z.shapeFlag&512?le.ctx.activate(z,ne,ae,fe,ve):D(z,ne,ae,le,me,fe,ve):k(F,z,ve)},D=(F,z,ne,ae,le,me,fe)=>{const ce=F.component=W1(F,ae,le);if(Yd(F)&&(ce.ctx.renderer=ue),j1(ce,!1,fe),ce.asyncDep){if(le&&le.registerDep(ce,M,fe),!F.el){const ve=ce.subTree=qe(un);v(null,ve,z,ne)}}else M(ce,F,z,ne,le,me,fe)},k=(F,z,ne)=>{const ae=z.component=F.component;if($1(F,z,ne))if(ae.asyncDep&&!ae.asyncResolved){O(ae,z,ne);return}else ae.next=z,ae.update();else z.el=F.el,ae.vnode=z},M=(F,z,ne,ae,le,me,fe)=>{const ce=()=>{if(F.isMounted){let{next:re,bu:ge,u:Ee,parent:He,vnode:et}=F;{const it=fy(F);if(it){re&&(re.el=et.el,O(F,re,fe)),it.asyncDep.then(()=>{F.isUnmounted||ce()});return}}let Xe=re,lt;uo(F,!1),re?(re.el=et.el,O(F,re,fe)):re=et,ge&&Mc(ge),(lt=re.props&&re.props.onVnodeBeforeUpdate)&&Dr(lt,He,re,et),uo(F,!0);const Qe=Vc(F),xt=F.subTree;F.subTree=Qe,g(xt,Qe,u(xt.el),W(xt),F,le,me),re.el=Qe.el,Xe===null&&B1(F,Qe.el),Ee&&Nn(Ee,le),(lt=re.props&&re.props.onVnodeUpdated)&&Nn(()=>Dr(lt,He,re,et),le)}else{let re;const{el:ge,props:Ee}=z,{bm:He,m:et,parent:Xe,root:lt,type:Qe}=F,xt=us(z);if(uo(F,!1),He&&Mc(He),!xt&&(re=Ee&&Ee.onVnodeBeforeMount)&&Dr(re,Xe,z),uo(F,!0),ge&&Ae){const it=()=>{F.subTree=Vc(F),Ae(ge,F.subTree,F,le,null)};xt&&Qe.__asyncHydrate?Qe.__asyncHydrate(ge,F,it):it()}else{lt.ce&&lt.ce._injectChildStyle(Qe);const it=F.subTree=Vc(F);g(null,it,ne,ae,F,le,me),z.el=it.el}if(et&&Nn(et,le),!xt&&(re=Ee&&Ee.onVnodeMounted)){const it=z;Nn(()=>Dr(re,Xe,it),le)}(z.shapeFlag&256||Xe&&us(Xe.vnode)&&Xe.vnode.shapeFlag&256)&&F.a&&Nn(F.a,le),F.isMounted=!0,z=ne=ae=null}};F.scope.on();const ve=F.effect=new bb(ce);F.scope.off();const he=F.update=ve.run.bind(ve),_e=F.job=ve.runIfDirty.bind(ve);_e.i=F,_e.id=F.uid,ve.scheduler=()=>Th(_e),uo(F,!0),he()},O=(F,z,ne)=>{z.component=F;const ae=F.vnode.props;F.vnode=z,F.next=null,S1(F,z.props,ae,ne),E1(F,z.children,ne),eo(),Zp(F),to()},$=(F,z,ne,ae,le,me,fe,ce,ve=!1)=>{const he=F&&F.children,_e=F?F.shapeFlag:0,re=z.children,{patchFlag:ge,shapeFlag:Ee}=z;if(ge>0){if(ge&128){Y(he,re,ne,ae,le,me,fe,ce,ve);return}else if(ge&256){K(he,re,ne,ae,le,me,fe,ce,ve);return}}Ee&8?(_e&16&&te(he,le,me),re!==he&&c(ne,re)):_e&16?Ee&16?Y(he,re,ne,ae,le,me,fe,ce,ve):te(he,le,me,!0):(_e&8&&c(ne,""),Ee&16&&w(re,ne,ae,le,me,fe,ce,ve))},K=(F,z,ne,ae,le,me,fe,ce,ve)=>{F=F||ls,z=z||ls;const he=F.length,_e=z.length,re=Math.min(he,_e);let ge;for(ge=0;ge<re;ge++){const Ee=z[ge]=ve?Bi(z[ge]):Ur(z[ge]);g(F[ge],Ee,ne,null,le,me,fe,ce,ve)}he>_e?te(F,le,me,!0,!1,re):w(z,ne,ae,le,me,fe,ce,ve,re)},Y=(F,z,ne,ae,le,me,fe,ce,ve)=>{let he=0;const _e=z.length;let re=F.length-1,ge=_e-1;for(;he<=re&&he<=ge;){const Ee=F[he],He=z[he]=ve?Bi(z[he]):Ur(z[he]);if(bo(Ee,He))g(Ee,He,ne,null,le,me,fe,ce,ve);else break;he++}for(;he<=re&&he<=ge;){const Ee=F[re],He=z[ge]=ve?Bi(z[ge]):Ur(z[ge]);if(bo(Ee,He))g(Ee,He,ne,null,le,me,fe,ce,ve);else break;re--,ge--}if(he>re){if(he<=ge){const Ee=ge+1,He=Ee<_e?z[Ee].el:ae;for(;he<=ge;)g(null,z[he]=ve?Bi(z[he]):Ur(z[he]),ne,He,le,me,fe,ce,ve),he++}}else if(he>ge)for(;he<=re;)B(F[he],le,me,!0),he++;else{const Ee=he,He=he,et=new Map;for(he=He;he<=ge;he++){const N=z[he]=ve?Bi(z[he]):Ur(z[he]);N.key!=null&&et.set(N.key,he)}let Xe,lt=0;const Qe=ge-He+1;let xt=!1,it=0;const ke=new Array(Qe);for(he=0;he<Qe;he++)ke[he]=0;for(he=Ee;he<=re;he++){const N=F[he];if(lt>=Qe){B(N,le,me,!0);continue}let Q;if(N.key!=null)Q=et.get(N.key);else for(Xe=He;Xe<=ge;Xe++)if(ke[Xe-He]===0&&bo(N,z[Xe])){Q=Xe;break}Q===void 0?B(N,le,me,!0):(ke[Q-He]=he+1,Q>=it?it=Q:xt=!0,g(N,z[Q],ne,null,le,me,fe,ce,ve),lt++)}const We=xt?L1(ke):ls;for(Xe=We.length-1,he=Qe-1;he>=0;he--){const N=He+he,Q=z[N],be=N+1<_e?z[N+1].el:ae;ke[he]===0?g(null,Q,ne,be,le,me,fe,ce,ve):xt&&(Xe<0||he!==We[Xe]?H(Q,ne,be,2):Xe--)}}},H=(F,z,ne,ae,le=null)=>{const{el:me,type:fe,transition:ce,children:ve,shapeFlag:he}=F;if(he&6){H(F.component.subTree,z,ne,ae);return}if(he&128){F.suspense.move(z,ne,ae);return}if(he&64){fe.move(F,z,ne,ue);return}if(fe===mt){r(me,z,ne);for(let re=0;re<ve.length;re++)H(ve[re],z,ne,ae);r(F.anchor,z,ne);return}if(fe===Gc){y(F,z,ne);return}if(ae!==2&&he&1&&ce)if(ae===0)ce.beforeEnter(me),r(me,z,ne),Nn(()=>ce.enter(me),le);else{const{leave:re,delayLeave:ge,afterLeave:Ee}=ce,He=()=>r(me,z,ne),et=()=>{re(me,()=>{He(),Ee&&Ee()})};ge?ge(me,He,et):et()}else r(me,z,ne)},B=(F,z,ne,ae=!1,le=!1)=>{const{type:me,props:fe,ref:ce,children:ve,dynamicChildren:he,shapeFlag:_e,patchFlag:re,dirs:ge,cacheIndex:Ee}=F;if(re===-2&&(le=!1),ce!=null&&rf(ce,null,ne,F,!0),Ee!=null&&(z.renderCache[Ee]=void 0),_e&256){z.ctx.deactivate(F);return}const He=_e&1&&ge,et=!us(F);let Xe;if(et&&(Xe=fe&&fe.onVnodeBeforeUnmount)&&Dr(Xe,z,F),_e&6)pe(F.component,ne,ae);else{if(_e&128){F.suspense.unmount(ne,ae);return}He&&co(F,null,z,"beforeUnmount"),_e&64?F.type.remove(F,z,ne,ue,ae):he&&!he.hasOnce&&(me!==mt||re>0&&re&64)?te(he,z,ne,!1,!0):(me===mt&&re&384||!le&&_e&16)&&te(ve,z,ne),ae&&X(F)}(et&&(Xe=fe&&fe.onVnodeUnmounted)||He)&&Nn(()=>{Xe&&Dr(Xe,z,F),He&&co(F,null,z,"unmounted")},ne)},X=F=>{const{type:z,el:ne,anchor:ae,transition:le}=F;if(z===mt){se(ne,ae);return}if(z===Gc){x(F);return}const me=()=>{i(ne),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(F.shapeFlag&1&&le&&!le.persisted){const{leave:fe,delayLeave:ce}=le,ve=()=>fe(ne,me);ce?ce(F.el,me,ve):ve()}else me()},se=(F,z)=>{let ne;for(;F!==z;)ne=f(F),i(F),F=ne;i(z)},pe=(F,z,ne)=>{const{bum:ae,scope:le,job:me,subTree:fe,um:ce,m:ve,a:he}=F;lg(ve),lg(he),ae&&Mc(ae),le.stop(),me&&(me.flags|=8,B(fe,F,z,ne)),ce&&Nn(ce,z),Nn(()=>{F.isUnmounted=!0},z),z&&z.pendingBranch&&!z.isUnmounted&&F.asyncDep&&!F.asyncResolved&&F.suspenseId===z.pendingId&&(z.deps--,z.deps===0&&z.resolve())},te=(F,z,ne,ae=!1,le=!1,me=0)=>{for(let fe=me;fe<F.length;fe++)B(F[fe],z,ne,ae,le)},W=F=>{if(F.shapeFlag&6)return W(F.component.subTree);if(F.shapeFlag&128)return F.suspense.next();const z=f(F.anchor||F.el),ne=z&&z[Ub];return ne?f(ne):z};let de=!1;const V=(F,z,ne)=>{F==null?z._vnode&&B(z._vnode,null,null,!0):g(z._vnode||null,F,z,null,null,null,ne),z._vnode=F,de||(de=!0,Zp(),Bb(),de=!1)},ue={p:g,um:B,m:H,r:X,mt:D,mc:w,pc:$,pbc:C,n:W,o:n};let Pe,Ae;return{render:V,hydrate:Pe,createApp:b1(V,Pe)}}function Hc({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function uo({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function I1(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Ih(n,e,t=!1){const r=n.children,i=e.children;if(Ze(r)&&Ze(i))for(let o=0;o<r.length;o++){const s=r[o];let a=i[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[o]=Bi(i[o]),a.el=s.el),!t&&a.patchFlag!==-2&&Ih(s,a)),a.type===Za&&(a.el=s.el)}}function L1(n){const e=n.slice(),t=[0];let r,i,o,s,a;const l=n.length;for(r=0;r<l;r++){const d=n[r];if(d!==0){if(i=t[t.length-1],n[i]<d){e[r]=i,t.push(r);continue}for(o=0,s=t.length-1;o<s;)a=o+s>>1,n[t[a]]<d?o=a+1:s=a;d<n[t[o]]&&(o>0&&(e[r]=t[o-1]),t[o]=r)}}for(o=t.length,s=t[o-1];o-- >0;)t[o]=s,s=e[s];return t}function fy(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:fy(e)}function lg(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const P1=Symbol.for("v-scx"),_1=()=>Be(P1);function Vn(n,e){return Lh(n,null,e)}function at(n,e,t){return Lh(n,e,t)}function Lh(n,e,t=Ot){const{immediate:r,deep:i,flush:o,once:s}=t,a=Jt({},t),l=e&&r||!e&&o!=="post";let d;if(ka){if(o==="sync"){const p=_1();d=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Wr,p.resume=Wr,p.pause=Wr,p}}const c=fn;a.call=(p,h,g)=>Rr(p,c,h,g);let u=!1;o==="post"?a.scheduler=p=>{Nn(p,c&&c.suspense)}:o!=="sync"&&(u=!0,a.scheduler=(p,h)=>{h?p():Th(p)}),a.augmentJob=p=>{e&&(p.flags|=4),u&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=KE(n,e,a);return ka&&(d?d.push(f):l&&f()),f}function k1(n,e,t){const r=this.proxy,i=Xt(n)?n.includes(".")?hy(r,n):()=>r[n]:n.bind(r,r);let o;nt(e)?o=e:(o=e.handler,t=e);const s=Ja(this),a=Lh(i,o.bind(r),t);return s(),a}function hy(n,e){const t=e.split(".");return()=>{let r=n;for(let i=0;i<t.length&&r;i++)r=r[t[i]];return r}}const D1=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${pr(e)}Modifiers`]||n[`${$o(e)}Modifiers`];function O1(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||Ot;let i=t;const o=e.startsWith("update:"),s=o&&D1(r,e.slice(7));s&&(s.trim&&(i=t.map(c=>Xt(c)?c.trim():c)),s.number&&(i=t.map(uE)));let a,l=r[a=Oc(e)]||r[a=Oc(pr(e))];!l&&o&&(l=r[a=Oc($o(e))]),l&&Rr(l,n,6,i);const d=r[a+"Once"];if(d){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Rr(d,n,6,i)}}function py(n,e,t=!1){const r=e.emitsCache,i=r.get(n);if(i!==void 0)return i;const o=n.emits;let s={},a=!1;if(!nt(n)){const l=d=>{const c=py(d,e,!0);c&&(a=!0,Jt(s,c))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!o&&!a?(Bt(n)&&r.set(n,null),null):(Ze(o)?o.forEach(l=>s[l]=null):Jt(s,o),Bt(n)&&r.set(n,s),s)}function Jd(n,e){return!n||!Ud(e)?!1:(e=e.slice(2).replace(/Once$/,""),Lt(n,e[0].toLowerCase()+e.slice(1))||Lt(n,$o(e))||Lt(n,e))}function Vc(n){const{type:e,vnode:t,proxy:r,withProxy:i,propsOptions:[o],slots:s,attrs:a,emit:l,render:d,renderCache:c,props:u,data:f,setupState:p,ctx:h,inheritAttrs:g}=n,m=ad(n);let v,b;try{if(t.shapeFlag&4){const x=i||r,E=x;v=Ur(d.call(E,x,c,u,p,f,h)),b=a}else{const x=e;v=Ur(x.length>1?x(u,{attrs:a,slots:s,emit:l}):x(u,null)),b=e.props?a:M1(a)}}catch(x){ha.length=0,qd(x,n,1),v=qe(un)}let y=v;if(b&&g!==!1){const x=Object.keys(b),{shapeFlag:E}=y;x.length&&E&7&&(o&&x.some(fh)&&(b=F1(b,o)),y=qr(y,b,!1,!0))}return t.dirs&&(y=qr(y,null,!1,!0),y.dirs=y.dirs?y.dirs.concat(t.dirs):t.dirs),t.transition&&Po(y,t.transition),v=y,ad(m),v}const M1=n=>{let e;for(const t in n)(t==="class"||t==="style"||Ud(t))&&((e||(e={}))[t]=n[t]);return e},F1=(n,e)=>{const t={};for(const r in n)(!fh(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function $1(n,e,t){const{props:r,children:i,component:o}=n,{props:s,children:a,patchFlag:l}=e,d=o.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?dg(r,s,d):!!s;if(l&8){const c=e.dynamicProps;for(let u=0;u<c.length;u++){const f=c[u];if(s[f]!==r[f]&&!Jd(d,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===s?!1:r?s?dg(r,s,d):!0:!!s;return!1}function dg(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==n[o]&&!Jd(t,o))return!0}return!1}function B1({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const gy=n=>n.__isSuspense;function N1(n,e){e&&e.pendingBranch?Ze(n)?e.effects.push(...n):e.effects.push(n):XE(n)}const mt=Symbol.for("v-fgt"),Za=Symbol.for("v-txt"),un=Symbol.for("v-cmt"),Gc=Symbol.for("v-stc"),ha=[];let Xn=null;function Rt(n=!1){ha.push(Xn=n?null:[])}function z1(){ha.pop(),Xn=ha[ha.length-1]||null}let _a=1;function cg(n){_a+=n,n<0&&Xn&&(Xn.hasOnce=!0)}function my(n){return n.dynamicChildren=_a>0?Xn||ls:null,z1(),_a>0&&Xn&&Xn.push(n),n}function _n(n,e,t,r,i,o){return my(rt(n,e,t,r,i,o,!0))}function xn(n,e,t,r,i){return my(qe(n,e,t,r,i,!0))}function ys(n){return n?n.__v_isVNode===!0:!1}function bo(n,e){return n.type===e.type&&n.key===e.key}const vy=({key:n})=>n??null,Gl=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?Xt(n)||Yt(n)||nt(n)?{i:sn,r:n,k:e,f:!!t}:n:null);function rt(n,e=null,t=null,r=0,i=null,o=n===mt?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&vy(e),ref:e&&Gl(e),scopeId:zb,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:sn};return a?(Ph(l,t),o&128&&n.normalize(l)):t&&(l.shapeFlag|=Xt(t)?8:16),_a>0&&!s&&Xn&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Xn.push(l),l}const qe=U1;function U1(n,e=null,t=null,r=0,i=null,o=!1){if((!n||n===d1)&&(n=un),ys(n)){const a=qr(n,e,!0);return t&&Ph(a,t),_a>0&&!o&&Xn&&(a.shapeFlag&6?Xn[Xn.indexOf(n)]=a:Xn.push(a)),a.patchFlag=-2,a}if(Q1(n)&&(n=n.__vccOpts),e){e=H1(e);let{class:a,style:l}=e;a&&!Xt(a)&&(e.class=Io(a)),Bt(l)&&(Sh(l)&&!Ze(l)&&(l=Jt({},l)),e.style=jd(l))}const s=Xt(n)?1:gy(n)?128:Hb(n)?64:Bt(n)?4:nt(n)?2:0;return rt(n,e,t,r,i,s,o,!0)}function H1(n){return n?Sh(n)||oy(n)?Jt({},n):n:null}function qr(n,e,t=!1,r=!1){const{props:i,ref:o,patchFlag:s,children:a,transition:l}=n,d=e?Ar(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:n.type,props:d,key:d&&vy(d),ref:e&&e.ref?t&&o?Ze(o)?o.concat(Gl(e)):[o,Gl(e)]:Gl(e):o,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==mt?s===-1?16:s|16:s,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&qr(n.ssContent),ssFallback:n.ssFallback&&qr(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&Po(c,l.clone(c)),c}function In(n=" ",e=0){return qe(Za,null,n,e)}function Gs(n="",e=!1){return e?(Rt(),xn(un,null,n)):qe(un,null,n)}function Ur(n){return n==null||typeof n=="boolean"?qe(un):Ze(n)?qe(mt,null,n.slice()):ys(n)?Bi(n):qe(Za,null,String(n))}function Bi(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:qr(n)}function Ph(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(Ze(e))t=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),Ph(n,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!oy(e)?e._ctx=sn:i===3&&sn&&(sn.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else nt(e)?(e={default:e,_ctx:sn},t=32):(e=String(e),r&64?(t=16,e=[In(e)]):t=8);n.children=e,n.shapeFlag|=t}function Ar(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Io([e.class,r.class]));else if(i==="style")e.style=jd([e.style,r.style]);else if(Ud(i)){const o=e[i],s=r[i];s&&o!==s&&!(Ze(o)&&o.includes(s))&&(e[i]=o?[].concat(o,s):s)}else i!==""&&(e[i]=r[i])}return e}function Dr(n,e,t,r=null){Rr(n,e,7,[t,r])}const V1=ny();let G1=0;function W1(n,e,t){const r=n.type,i=(e?e.appContext:n.appContext)||V1,o={uid:G1++,vnode:n,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new gb(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ay(r,i),emitsOptions:py(r,i),emit:null,emitted:null,propsDefaults:Ot,inheritAttrs:r.inheritAttrs,ctx:Ot,data:Ot,props:Ot,attrs:Ot,slots:Ot,refs:Ot,setupState:Ot,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=O1.bind(null,o),n.ce&&n.ce(o),o}let fn=null;const Bo=()=>fn||sn;let cd,df;{const n=Wd(),e=(t,r)=>{let i;return(i=n[t])||(i=n[t]=[]),i.push(r),o=>{i.length>1?i.forEach(s=>s(o)):i[0](o)}};cd=e("__VUE_INSTANCE_SETTERS__",t=>fn=t),df=e("__VUE_SSR_SETTERS__",t=>ka=t)}const Ja=n=>{const e=fn;return cd(n),n.scope.on(),()=>{n.scope.off(),cd(e)}},ug=()=>{fn&&fn.scope.off(),cd(null)};function by(n){return n.vnode.shapeFlag&4}let ka=!1;function j1(n,e=!1,t=!1){e&&df(e);const{props:r,children:i}=n.vnode,o=by(n);x1(n,r,o,e),w1(n,i,t);const s=o?K1(n,e):void 0;return e&&df(!1),s}function K1(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,u1);const{setup:r}=t;if(r){eo();const i=n.setupContext=r.length>1?Y1(n):null,o=Ja(n),s=Qa(r,n,0,[n.props,i]),a=lb(s);if(to(),o(),(a||n.sp)&&!us(n)&&Xb(n),a){if(s.then(ug,ug),e)return s.then(l=>{fg(n,l,e)}).catch(l=>{qd(l,n,0)});n.asyncDep=s}else fg(n,s,e)}else yy(n,e)}function fg(n,e,t){nt(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Bt(e)&&(n.setupState=Ob(e)),yy(n,t)}let hg;function yy(n,e,t){const r=n.type;if(!n.render){if(!e&&hg&&!r.render){const i=r.template||Rh(n).template;if(i){const{isCustomElement:o,compilerOptions:s}=n.appContext.config,{delimiters:a,compilerOptions:l}=r,d=Jt(Jt({isCustomElement:o,delimiters:a},s),l);r.render=hg(i,d)}}n.render=r.render||Wr}{const i=Ja(n);eo();try{f1(n)}finally{to(),i()}}}const q1={get(n,e){return Sn(n,"get",""),n[e]}};function Y1(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,q1),slots:n.slots,emit:n.emit,expose:e}}function ec(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Ob(Ia(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in fa)return fa[t](n)},has(e,t){return t in e||t in fa}})):n.proxy}function X1(n,e=!0){return nt(n)?n.displayName||n.name:n.name||e&&n.__name}function Q1(n){return nt(n)&&"__vccOpts"in n}const U=(n,e)=>WE(n,e,ka);function R(n,e,t){const r=arguments.length;return r===2?Bt(e)&&!Ze(e)?ys(e)?qe(n,null,[e]):qe(n,e):qe(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&ys(t)&&(t=[t]),qe(n,e,t))}const Z1="3.5.12";/**
* @vue/runtime-dom v3.5.12
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cf;const pg=typeof window<"u"&&window.trustedTypes;if(pg)try{cf=pg.createPolicy("vue",{createHTML:n=>n})}catch{}const xy=cf?n=>cf.createHTML(n):n=>n,J1="http://www.w3.org/2000/svg",eR="http://www.w3.org/1998/Math/MathML",ui=typeof document<"u"?document:null,gg=ui&&ui.createElement("template"),tR={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const i=e==="svg"?ui.createElementNS(J1,n):e==="mathml"?ui.createElementNS(eR,n):t?ui.createElement(n,{is:t}):ui.createElement(n);return n==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:n=>ui.createTextNode(n),createComment:n=>ui.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ui.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,i,o){const s=t?t.previousSibling:e.lastChild;if(i&&(i===o||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===o||!(i=i.nextSibling)););else{gg.innerHTML=xy(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=gg.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[s?s.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Ai="transition",Ws="animation",xs=Symbol("_vtc"),Sy={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},Cy=Jt({},jb,Sy),nR=n=>(n.displayName="Transition",n.props=Cy,n),ir=nR((n,{slots:e})=>R(t1,Ty(n),e)),fo=(n,e=[])=>{Ze(n)?n.forEach(t=>t(...e)):n&&n(...e)},mg=n=>n?Ze(n)?n.some(e=>e.length>1):n.length>1:!1;function Ty(n){const e={};for(const P in n)P in Sy||(e[P]=n[P]);if(n.css===!1)return e;const{name:t="v",type:r,duration:i,enterFromClass:o=`${t}-enter-from`,enterActiveClass:s=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=o,appearActiveClass:d=s,appearToClass:c=a,leaveFromClass:u=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=n,h=rR(i),g=h&&h[0],m=h&&h[1],{onBeforeEnter:v,onEnter:b,onEnterCancelled:y,onLeave:x,onLeaveCancelled:E,onBeforeAppear:A=v,onAppear:S=b,onAppearCancelled:w=y}=e,T=(P,_,D)=>{Oi(P,_?c:a),Oi(P,_?d:s),D&&D()},C=(P,_)=>{P._isLeaving=!1,Oi(P,u),Oi(P,p),Oi(P,f),_&&_()},L=P=>(_,D)=>{const k=P?S:b,M=()=>T(_,P,D);fo(k,[_,M]),vg(()=>{Oi(_,P?l:o),di(_,P?c:a),mg(k)||bg(_,r,g,M)})};return Jt(e,{onBeforeEnter(P){fo(v,[P]),di(P,o),di(P,s)},onBeforeAppear(P){fo(A,[P]),di(P,l),di(P,d)},onEnter:L(!1),onAppear:L(!0),onLeave(P,_){P._isLeaving=!0;const D=()=>C(P,_);di(P,u),di(P,f),Ey(),vg(()=>{P._isLeaving&&(Oi(P,u),di(P,p),mg(x)||bg(P,r,m,D))}),fo(x,[P,D])},onEnterCancelled(P){T(P,!1),fo(y,[P])},onAppearCancelled(P){T(P,!0),fo(w,[P])},onLeaveCancelled(P){C(P),fo(E,[P])}})}function rR(n){if(n==null)return null;if(Bt(n))return[Wc(n.enter),Wc(n.leave)];{const e=Wc(n);return[e,e]}}function Wc(n){return fE(n)}function di(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[xs]||(n[xs]=new Set)).add(e)}function Oi(n,e){e.split(/\s+/).forEach(r=>r&&n.classList.remove(r));const t=n[xs];t&&(t.delete(e),t.size||(n[xs]=void 0))}function vg(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let iR=0;function bg(n,e,t,r){const i=n._endId=++iR,o=()=>{i===n._endId&&r()};if(t!=null)return setTimeout(o,t);const{type:s,timeout:a,propCount:l}=wy(n,e);if(!s)return r();const d=s+"end";let c=0;const u=()=>{n.removeEventListener(d,f),o()},f=p=>{p.target===n&&++c>=l&&u()};setTimeout(()=>{c<l&&u()},a+1),n.addEventListener(d,f)}function wy(n,e){const t=window.getComputedStyle(n),r=h=>(t[h]||"").split(", "),i=r(`${Ai}Delay`),o=r(`${Ai}Duration`),s=yg(i,o),a=r(`${Ws}Delay`),l=r(`${Ws}Duration`),d=yg(a,l);let c=null,u=0,f=0;e===Ai?s>0&&(c=Ai,u=s,f=o.length):e===Ws?d>0&&(c=Ws,u=d,f=l.length):(u=Math.max(s,d),c=u>0?s>d?Ai:Ws:null,f=c?c===Ai?o.length:l.length:0);const p=c===Ai&&/\b(transform|all)(,|$)/.test(r(`${Ai}Property`).toString());return{type:c,timeout:u,propCount:f,hasTransform:p}}function yg(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,r)=>xg(t)+xg(n[r])))}function xg(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function Ey(){return document.body.offsetHeight}function oR(n,e,t){const r=n[xs];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const ud=Symbol("_vod"),Ry=Symbol("_vsh"),fd={beforeMount(n,{value:e},{transition:t}){n[ud]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):js(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),js(n,!0),r.enter(n)):r.leave(n,()=>{js(n,!1)}):js(n,e))},beforeUnmount(n,{value:e}){js(n,e)}};function js(n,e){n.style.display=e?n[ud]:"none",n[Ry]=!e}const sR=Symbol(""),aR=/(^|;)\s*display\s*:/;function lR(n,e,t){const r=n.style,i=Xt(t);let o=!1;if(t&&!i){if(e)if(Xt(e))for(const s of e.split(";")){const a=s.slice(0,s.indexOf(":")).trim();t[a]==null&&Wl(r,a,"")}else for(const s in e)t[s]==null&&Wl(r,s,"");for(const s in t)s==="display"&&(o=!0),Wl(r,s,t[s])}else if(i){if(e!==t){const s=r[sR];s&&(t+=";"+s),r.cssText=t,o=aR.test(t)}}else e&&n.removeAttribute("style");ud in n&&(n[ud]=o?r.display:"",n[Ry]&&(r.display="none"))}const Sg=/\s*!important$/;function Wl(n,e,t){if(Ze(t))t.forEach(r=>Wl(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=dR(n,e);Sg.test(t)?n.setProperty($o(r),t.replace(Sg,""),"important"):n[r]=t}}const Cg=["Webkit","Moz","ms"],jc={};function dR(n,e){const t=jc[e];if(t)return t;let r=pr(e);if(r!=="filter"&&r in n)return jc[e]=r;r=Gd(r);for(let i=0;i<Cg.length;i++){const o=Cg[i]+r;if(o in n)return jc[e]=o}return e}const Tg="http://www.w3.org/1999/xlink";function wg(n,e,t,r,i,o=bE(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Tg,e.slice(6,e.length)):n.setAttributeNS(Tg,e,t):t==null||o&&!fb(t)?n.removeAttribute(e):n.setAttribute(e,o?"":yi(t)?String(t):t)}function Eg(n,e,t,r,i){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?xy(t):t);return}const o=n.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let s=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=fb(t):t==null&&a==="string"?(t="",s=!0):a==="number"&&(t=0,s=!0)}try{n[e]=t}catch{}s&&n.removeAttribute(i||e)}function cR(n,e,t,r){n.addEventListener(e,t,r)}function uR(n,e,t,r){n.removeEventListener(e,t,r)}const Rg=Symbol("_vei");function fR(n,e,t,r,i=null){const o=n[Rg]||(n[Rg]={}),s=o[e];if(r&&s)s.value=r;else{const[a,l]=hR(e);if(r){const d=o[e]=mR(r,i);cR(n,a,d,l)}else s&&(uR(n,a,s,l),o[e]=void 0)}}const Ag=/(?:Once|Passive|Capture)$/;function hR(n){let e;if(Ag.test(n)){e={};let r;for(;r=n.match(Ag);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):$o(n.slice(2)),e]}let Kc=0;const pR=Promise.resolve(),gR=()=>Kc||(pR.then(()=>Kc=0),Kc=Date.now());function mR(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Rr(vR(r,t.value),e,5,[r])};return t.value=n,t.attached=gR(),t}function vR(n,e){if(Ze(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const Ig=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,bR=(n,e,t,r,i,o)=>{const s=i==="svg";e==="class"?oR(n,r,s):e==="style"?lR(n,t,r):Ud(e)?fh(e)||fR(n,e,t,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):yR(n,e,r,s))?(Eg(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&wg(n,e,r,s,o,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!Xt(r))?Eg(n,pr(e),r,o,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),wg(n,e,r,s))};function yR(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Ig(e)&&nt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Ig(e)&&Xt(t)?!1:e in n}const Ay=new WeakMap,Iy=new WeakMap,hd=Symbol("_moveCb"),Lg=Symbol("_enterCb"),xR=n=>(delete n.props.mode,n),SR=xR({name:"TransitionGroup",props:Jt({},Cy,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=Bo(),r=Wb();let i,o;return Zd(()=>{if(!i.length)return;const s=n.moveClass||`${n.name||"v"}-move`;if(!RR(i[0].el,t.vnode.el,s))return;i.forEach(TR),i.forEach(wR);const a=i.filter(ER);Ey(),a.forEach(l=>{const d=l.el,c=d.style;di(d,s),c.transform=c.webkitTransform=c.transitionDuration="";const u=d[hd]=f=>{f&&f.target!==d||(!f||/transform$/.test(f.propertyName))&&(d.removeEventListener("transitionend",u),d[hd]=null,Oi(d,s))};d.addEventListener("transitionend",u)})}),()=>{const s=gt(n),a=Ty(s);let l=s.tag||mt;if(i=[],o)for(let d=0;d<o.length;d++){const c=o[d];c.el&&c.el instanceof Element&&(i.push(c),Po(c,Pa(c,a,r,t)),Ay.set(c,c.el.getBoundingClientRect()))}o=e.default?wh(e.default()):[];for(let d=0;d<o.length;d++){const c=o[d];c.key!=null&&Po(c,Pa(c,a,r,t))}return qe(l,null,o)}}}),CR=SR;function TR(n){const e=n.el;e[hd]&&e[hd](),e[Lg]&&e[Lg]()}function wR(n){Iy.set(n,n.el.getBoundingClientRect())}function ER(n){const e=Ay.get(n),t=Iy.get(n),r=e.left-t.left,i=e.top-t.top;if(r||i){const o=n.el.style;return o.transform=o.webkitTransform=`translate(${r}px,${i}px)`,o.transitionDuration="0s",n}}function RR(n,e,t){const r=n.cloneNode(),i=n[xs];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(r);const{hasTransform:s}=wy(r);return o.removeChild(r),s}const AR=Jt({patchProp:bR},tR);let Pg;function IR(){return Pg||(Pg=R1(AR))}const LR=(...n)=>{const e=IR().createApp(...n),{mount:t}=e;return e.mount=r=>{const i=_R(r);if(!i)return;const o=e._component;!nt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const s=t(i,!1,PR(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),s},e};function PR(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function _R(n){return Xt(n)?document.querySelector(n):n}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const os=typeof document<"u";function Ly(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function kR(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&Ly(n.default)}const It=Object.assign;function qc(n,e){const t={};for(const r in e){const i=e[r];t[r]=Ir(i)?i.map(n):n(i)}return t}const pa=()=>{},Ir=Array.isArray,Py=/#/g,DR=/&/g,OR=/\//g,MR=/=/g,FR=/\?/g,_y=/\+/g,$R=/%5B/g,BR=/%5D/g,ky=/%5E/g,NR=/%60/g,Dy=/%7B/g,zR=/%7C/g,Oy=/%7D/g,UR=/%20/g;function _h(n){return encodeURI(""+n).replace(zR,"|").replace($R,"[").replace(BR,"]")}function HR(n){return _h(n).replace(Dy,"{").replace(Oy,"}").replace(ky,"^")}function uf(n){return _h(n).replace(_y,"%2B").replace(UR,"+").replace(Py,"%23").replace(DR,"%26").replace(NR,"`").replace(Dy,"{").replace(Oy,"}").replace(ky,"^")}function VR(n){return uf(n).replace(MR,"%3D")}function GR(n){return _h(n).replace(Py,"%23").replace(FR,"%3F")}function WR(n){return n==null?"":GR(n).replace(OR,"%2F")}function Da(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const jR=/\/$/,KR=n=>n.replace(jR,"");function Yc(n,e,t="/"){let r,i={},o="",s="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),o=e.slice(l+1,a>-1?a:e.length),i=n(o)),a>-1&&(r=r||e.slice(0,a),s=e.slice(a,e.length)),r=QR(r??e,t),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:Da(s)}}function qR(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function _g(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function YR(n,e,t){const r=e.matched.length-1,i=t.matched.length-1;return r>-1&&r===i&&Ss(e.matched[r],t.matched[i])&&My(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function Ss(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function My(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!XR(n[t],e[t]))return!1;return!0}function XR(n,e){return Ir(n)?kg(n,e):Ir(e)?kg(e,n):n===e}function kg(n,e){return Ir(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function QR(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let o=t.length-1,s,a;for(s=0;s<r.length;s++)if(a=r[s],a!==".")if(a==="..")o>1&&o--;else break;return t.slice(0,o).join("/")+"/"+r.slice(s).join("/")}const Ii={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Oa;(function(n){n.pop="pop",n.push="push"})(Oa||(Oa={}));var ga;(function(n){n.back="back",n.forward="forward",n.unknown=""})(ga||(ga={}));function ZR(n){if(!n)if(os){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),KR(n)}const JR=/^[^#]+#/;function eA(n,e){return n.replace(JR,"#")+e}function tA(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const tc=()=>({left:window.scrollX,top:window.scrollY});function nA(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=tA(i,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Dg(n,e){return(history.state?history.state.position-e:-1)+n}const ff=new Map;function rA(n,e){ff.set(n,e)}function iA(n){const e=ff.get(n);return ff.delete(n),e}let oA=()=>location.protocol+"//"+location.host;function Fy(n,e){const{pathname:t,search:r,hash:i}=e,o=n.indexOf("#");if(o>-1){let a=i.includes(n.slice(o))?n.slice(o).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),_g(l,"")}return _g(t,n)+r+i}function sA(n,e,t,r){let i=[],o=[],s=null;const a=({state:f})=>{const p=Fy(n,location),h=t.value,g=e.value;let m=0;if(f){if(t.value=p,e.value=f,s&&s===h){s=null;return}m=g?f.position-g.position:0}else r(p);i.forEach(v=>{v(t.value,h,{delta:m,type:Oa.pop,direction:m?m>0?ga.forward:ga.back:ga.unknown})})};function l(){s=t.value}function d(f){i.push(f);const p=()=>{const h=i.indexOf(f);h>-1&&i.splice(h,1)};return o.push(p),p}function c(){const{history:f}=window;f.state&&f.replaceState(It({},f.state,{scroll:tc()}),"")}function u(){for(const f of o)f();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",c,{passive:!0}),{pauseListeners:l,listen:d,destroy:u}}function Og(n,e,t,r=!1,i=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:i?tc():null}}function aA(n){const{history:e,location:t}=window,r={value:Fy(n,t)},i={value:e.state};i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(l,d,c){const u=n.indexOf("#"),f=u>-1?(t.host&&document.querySelector("base")?n:n.slice(u))+l:oA()+n+l;try{e[c?"replaceState":"pushState"](d,"",f),i.value=d}catch(p){console.error(p),t[c?"replace":"assign"](f)}}function s(l,d){const c=It({},e.state,Og(i.value.back,l,i.value.forward,!0),d,{position:i.value.position});o(l,c,!0),r.value=l}function a(l,d){const c=It({},i.value,e.state,{forward:l,scroll:tc()});o(c.current,c,!0);const u=It({},Og(r.value,l,null),{position:c.position+1},d);o(l,u,!1),r.value=l}return{location:r,state:i,push:a,replace:s}}function lA(n){n=ZR(n);const e=aA(n),t=sA(n,e.state,e.location,e.replace);function r(o,s=!0){s||t.pauseListeners(),history.go(o)}const i=It({location:"",base:n,go:r,createHref:eA.bind(null,n)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function dA(n){return typeof n=="string"||n&&typeof n=="object"}function $y(n){return typeof n=="string"||typeof n=="symbol"}const By=Symbol("");var Mg;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Mg||(Mg={}));function Cs(n,e){return It(new Error,{type:n,[By]:!0},e)}function ii(n,e){return n instanceof Error&&By in n&&(e==null||!!(n.type&e))}const Fg="[^/]+?",cA={sensitive:!1,strict:!1,start:!0,end:!0},uA=/[.+*?^${}()[\]/\\]/g;function fA(n,e){const t=It({},cA,e),r=[];let i=t.start?"^":"";const o=[];for(const d of n){const c=d.length?[]:[90];t.strict&&!d.length&&(i+="/");for(let u=0;u<d.length;u++){const f=d[u];let p=40+(t.sensitive?.25:0);if(f.type===0)u||(i+="/"),i+=f.value.replace(uA,"\\$&"),p+=40;else if(f.type===1){const{value:h,repeatable:g,optional:m,regexp:v}=f;o.push({name:h,repeatable:g,optional:m});const b=v||Fg;if(b!==Fg){p+=10;try{new RegExp(`(${b})`)}catch(x){throw new Error(`Invalid custom RegExp for param "${h}" (${b}): `+x.message)}}let y=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;u||(y=m&&d.length<2?`(?:/${y})`:"/"+y),m&&(y+="?"),i+=y,p+=20,m&&(p+=-8),g&&(p+=-20),b===".*"&&(p+=-50)}c.push(p)}r.push(c)}if(t.strict&&t.end){const d=r.length-1;r[d][r[d].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const s=new RegExp(i,t.sensitive?"":"i");function a(d){const c=d.match(s),u={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",h=o[f-1];u[h.name]=p&&h.repeatable?p.split("/"):p}return u}function l(d){let c="",u=!1;for(const f of n){(!u||!c.endsWith("/"))&&(c+="/"),u=!1;for(const p of f)if(p.type===0)c+=p.value;else if(p.type===1){const{value:h,repeatable:g,optional:m}=p,v=h in d?d[h]:"";if(Ir(v)&&!g)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const b=Ir(v)?v.join("/"):v;if(!b)if(m)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):u=!0);else throw new Error(`Missing required param "${h}"`);c+=b}}return c||"/"}return{re:s,score:r,keys:o,parse:a,stringify:l}}function hA(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function Ny(n,e){let t=0;const r=n.score,i=e.score;for(;t<r.length&&t<i.length;){const o=hA(r[t],i[t]);if(o)return o;t++}if(Math.abs(i.length-r.length)===1){if($g(r))return 1;if($g(i))return-1}return i.length-r.length}function $g(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const pA={type:0,value:""},gA=/[a-zA-Z0-9_]/;function mA(n){if(!n)return[[]];if(n==="/")return[[pA]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(p){throw new Error(`ERR (${t})/"${d}": ${p}`)}let t=0,r=t;const i=[];let o;function s(){o&&i.push(o),o=[]}let a=0,l,d="",c="";function u(){d&&(t===0?o.push({type:0,value:d}):t===1||t===2||t===3?(o.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${d}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:d,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),d="")}function f(){d+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:l==="/"?(d&&u(),s()):l===":"?(u(),t=1):f();break;case 4:f(),t=r;break;case 1:l==="("?t=2:gA.test(l)?f():(u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:t=3:c+=l;break;case 3:u(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,c="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${d}"`),u(),s(),i}function vA(n,e,t){const r=fA(mA(n.path),t),i=It(r,{record:n,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function bA(n,e){const t=[],r=new Map;e=Ug({strict:!1,end:!0,sensitive:!1},e);function i(u){return r.get(u)}function o(u,f,p){const h=!p,g=Ng(u);g.aliasOf=p&&p.record;const m=Ug(e,u),v=[g];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const E of x)v.push(Ng(It({},g,{components:p?p.record.components:g.components,path:E,aliasOf:p?p.record:g})))}let b,y;for(const x of v){const{path:E}=x;if(f&&E[0]!=="/"){const A=f.record.path,S=A[A.length-1]==="/"?"":"/";x.path=f.record.path+(E&&S+E)}if(b=vA(x,f,m),p?p.alias.push(b):(y=y||b,y!==b&&y.alias.push(b),h&&u.name&&!zg(b)&&s(u.name)),zy(b)&&l(b),g.children){const A=g.children;for(let S=0;S<A.length;S++)o(A[S],b,p&&p.children[S])}p=p||b}return y?()=>{s(y)}:pa}function s(u){if($y(u)){const f=r.get(u);f&&(r.delete(u),t.splice(t.indexOf(f),1),f.children.forEach(s),f.alias.forEach(s))}else{const f=t.indexOf(u);f>-1&&(t.splice(f,1),u.record.name&&r.delete(u.record.name),u.children.forEach(s),u.alias.forEach(s))}}function a(){return t}function l(u){const f=SA(u,t);t.splice(f,0,u),u.record.name&&!zg(u)&&r.set(u.record.name,u)}function d(u,f){let p,h={},g,m;if("name"in u&&u.name){if(p=r.get(u.name),!p)throw Cs(1,{location:u});m=p.record.name,h=It(Bg(f.params,p.keys.filter(y=>!y.optional).concat(p.parent?p.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),u.params&&Bg(u.params,p.keys.map(y=>y.name))),g=p.stringify(h)}else if(u.path!=null)g=u.path,p=t.find(y=>y.re.test(g)),p&&(h=p.parse(g),m=p.record.name);else{if(p=f.name?r.get(f.name):t.find(y=>y.re.test(f.path)),!p)throw Cs(1,{location:u,currentLocation:f});m=p.record.name,h=It({},f.params,u.params),g=p.stringify(h)}const v=[];let b=p;for(;b;)v.unshift(b.record),b=b.parent;return{name:m,path:g,params:h,matched:v,meta:xA(v)}}n.forEach(u=>o(u));function c(){t.length=0,r.clear()}return{addRoute:o,resolve:d,removeRoute:s,clearRoutes:c,getRoutes:a,getRecordMatcher:i}}function Bg(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function Ng(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:yA(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function yA(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function zg(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function xA(n){return n.reduce((e,t)=>It(e,t.meta),{})}function Ug(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function SA(n,e){let t=0,r=e.length;for(;t!==r;){const o=t+r>>1;Ny(n,e[o])<0?r=o:t=o+1}const i=CA(n);return i&&(r=e.lastIndexOf(i,r-1)),r}function CA(n){let e=n;for(;e=e.parent;)if(zy(e)&&Ny(n,e)===0)return e}function zy({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function TA(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<r.length;++i){const o=r[i].replace(_y," "),s=o.indexOf("="),a=Da(s<0?o:o.slice(0,s)),l=s<0?null:Da(o.slice(s+1));if(a in e){let d=e[a];Ir(d)||(d=e[a]=[d]),d.push(l)}else e[a]=l}return e}function Hg(n){let e="";for(let t in n){const r=n[t];if(t=VR(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(Ir(r)?r.map(o=>o&&uf(o)):[r&&uf(r)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+t,o!=null&&(e+="="+o))})}return e}function wA(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=Ir(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const EA=Symbol(""),Vg=Symbol(""),kh=Symbol(""),Uy=Symbol(""),hf=Symbol("");function Ks(){let n=[];function e(r){return n.push(r),()=>{const i=n.indexOf(r);i>-1&&n.splice(i,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Ni(n,e,t,r,i,o=s=>s()){const s=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const d=f=>{f===!1?l(Cs(4,{from:t,to:e})):f instanceof Error?l(f):dA(f)?l(Cs(2,{from:e,to:f})):(s&&r.enterCallbacks[i]===s&&typeof f=="function"&&s.push(f),a())},c=o(()=>n.call(r&&r.instances[i],e,t,d));let u=Promise.resolve(c);n.length<3&&(u=u.then(d)),u.catch(f=>l(f))})}function Xc(n,e,t,r,i=o=>o()){const o=[];for(const s of n)for(const a in s.components){let l=s.components[a];if(!(e!=="beforeRouteEnter"&&!s.instances[a]))if(Ly(l)){const c=(l.__vccOpts||l)[e];c&&o.push(Ni(c,t,r,s,a,i))}else{let d=l();o.push(()=>d.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${a}" at "${s.path}"`);const u=kR(c)?c.default:c;s.mods[a]=c,s.components[a]=u;const p=(u.__vccOpts||u)[e];return p&&Ni(p,t,r,s,a,i)()}))}}return o}function Gg(n){const e=Be(kh),t=Be(Uy),r=U(()=>{const l=Me(n.to);return e.resolve(l)}),i=U(()=>{const{matched:l}=r.value,{length:d}=l,c=l[d-1],u=t.matched;if(!c||!u.length)return-1;const f=u.findIndex(Ss.bind(null,c));if(f>-1)return f;const p=Wg(l[d-2]);return d>1&&Wg(c)===p&&u[u.length-1].path!==p?u.findIndex(Ss.bind(null,l[d-2])):f}),o=U(()=>i.value>-1&&PA(t.params,r.value.params)),s=U(()=>i.value>-1&&i.value===t.matched.length-1&&My(t.params,r.value.params));function a(l={}){if(LA(l)){const d=e[Me(n.replace)?"replace":"push"](Me(n.to)).catch(pa);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>d),d}return Promise.resolve()}return{route:r,href:U(()=>r.value.href),isActive:o,isExactActive:s,navigate:a}}function RA(n){return n.length===1?n[0]:n}const AA=Ce({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Gg,setup(n,{slots:e}){const t=no(Gg(n)),{options:r}=Be(kh),i=U(()=>({[jg(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[jg(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const o=e.default&&RA(e.default(t));return n.custom?o:R("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},o)}}}),IA=AA;function LA(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function PA(n,e){for(const t in e){const r=e[t],i=n[t];if(typeof r=="string"){if(r!==i)return!1}else if(!Ir(i)||i.length!==r.length||r.some((o,s)=>o!==i[s]))return!1}return!0}function Wg(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const jg=(n,e,t)=>n??e??t,_A=Ce({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=Be(hf),i=U(()=>n.route||r.value),o=Be(Vg,0),s=U(()=>{let d=Me(o);const{matched:c}=i.value;let u;for(;(u=c[d])&&!u.components;)d++;return d}),a=U(()=>i.value.matched[s.value]);st(Vg,U(()=>s.value+1)),st(EA,a),st(hf,i);const l=G();return at(()=>[l.value,a.value,n.name],([d,c,u],[f,p,h])=>{c&&(c.instances[u]=d,p&&p!==c&&d&&d===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),d&&c&&(!p||!Ss(c,p)||!f)&&(c.enterCallbacks[u]||[]).forEach(g=>g(d))},{flush:"post"}),()=>{const d=i.value,c=n.name,u=a.value,f=u&&u.components[c];if(!f)return Kg(t.default,{Component:f,route:d});const p=u.props[c],h=p?p===!0?d.params:typeof p=="function"?p(d):p:null,m=R(f,It({},h,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(u.instances[c]=null)},ref:l}));return Kg(t.default,{Component:m,route:d})||m}}});function Kg(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const Hy=_A;function kA(n){const e=bA(n.routes,n),t=n.parseQuery||TA,r=n.stringifyQuery||Hg,i=n.history,o=Ks(),s=Ks(),a=Ks(),l=Ch(Ii);let d=Ii;os&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=qc.bind(null,W=>""+W),u=qc.bind(null,WR),f=qc.bind(null,Da);function p(W,de){let V,ue;return $y(W)?(V=e.getRecordMatcher(W),ue=de):ue=W,e.addRoute(ue,V)}function h(W){const de=e.getRecordMatcher(W);de&&e.removeRoute(de)}function g(){return e.getRoutes().map(W=>W.record)}function m(W){return!!e.getRecordMatcher(W)}function v(W,de){if(de=It({},de||l.value),typeof W=="string"){const z=Yc(t,W,de.path),ne=e.resolve({path:z.path},de),ae=i.createHref(z.fullPath);return It(z,ne,{params:f(ne.params),hash:Da(z.hash),redirectedFrom:void 0,href:ae})}let V;if(W.path!=null)V=It({},W,{path:Yc(t,W.path,de.path).path});else{const z=It({},W.params);for(const ne in z)z[ne]==null&&delete z[ne];V=It({},W,{params:u(z)}),de.params=u(de.params)}const ue=e.resolve(V,de),Pe=W.hash||"";ue.params=c(f(ue.params));const Ae=qR(r,It({},W,{hash:HR(Pe),path:ue.path})),F=i.createHref(Ae);return It({fullPath:Ae,hash:Pe,query:r===Hg?wA(W.query):W.query||{}},ue,{redirectedFrom:void 0,href:F})}function b(W){return typeof W=="string"?Yc(t,W,l.value.path):It({},W)}function y(W,de){if(d!==W)return Cs(8,{from:de,to:W})}function x(W){return S(W)}function E(W){return x(It(b(W),{replace:!0}))}function A(W){const de=W.matched[W.matched.length-1];if(de&&de.redirect){const{redirect:V}=de;let ue=typeof V=="function"?V(W):V;return typeof ue=="string"&&(ue=ue.includes("?")||ue.includes("#")?ue=b(ue):{path:ue},ue.params={}),It({query:W.query,hash:W.hash,params:ue.path!=null?{}:W.params},ue)}}function S(W,de){const V=d=v(W),ue=l.value,Pe=W.state,Ae=W.force,F=W.replace===!0,z=A(V);if(z)return S(It(b(z),{state:typeof z=="object"?It({},Pe,z.state):Pe,force:Ae,replace:F}),de||V);const ne=V;ne.redirectedFrom=de;let ae;return!Ae&&YR(r,ue,V)&&(ae=Cs(16,{to:ne,from:ue}),H(ue,ue,!0,!1)),(ae?Promise.resolve(ae):C(ne,ue)).catch(le=>ii(le)?ii(le,2)?le:Y(le):$(le,ne,ue)).then(le=>{if(le){if(ii(le,2))return S(It({replace:F},b(le.to),{state:typeof le.to=="object"?It({},Pe,le.to.state):Pe,force:Ae}),de||ne)}else le=P(ne,ue,!0,F,Pe);return L(ne,ue,le),le})}function w(W,de){const V=y(W,de);return V?Promise.reject(V):Promise.resolve()}function T(W){const de=se.values().next().value;return de&&typeof de.runWithContext=="function"?de.runWithContext(W):W()}function C(W,de){let V;const[ue,Pe,Ae]=DA(W,de);V=Xc(ue.reverse(),"beforeRouteLeave",W,de);for(const z of ue)z.leaveGuards.forEach(ne=>{V.push(Ni(ne,W,de))});const F=w.bind(null,W,de);return V.push(F),te(V).then(()=>{V=[];for(const z of o.list())V.push(Ni(z,W,de));return V.push(F),te(V)}).then(()=>{V=Xc(Pe,"beforeRouteUpdate",W,de);for(const z of Pe)z.updateGuards.forEach(ne=>{V.push(Ni(ne,W,de))});return V.push(F),te(V)}).then(()=>{V=[];for(const z of Ae)if(z.beforeEnter)if(Ir(z.beforeEnter))for(const ne of z.beforeEnter)V.push(Ni(ne,W,de));else V.push(Ni(z.beforeEnter,W,de));return V.push(F),te(V)}).then(()=>(W.matched.forEach(z=>z.enterCallbacks={}),V=Xc(Ae,"beforeRouteEnter",W,de,T),V.push(F),te(V))).then(()=>{V=[];for(const z of s.list())V.push(Ni(z,W,de));return V.push(F),te(V)}).catch(z=>ii(z,8)?z:Promise.reject(z))}function L(W,de,V){a.list().forEach(ue=>T(()=>ue(W,de,V)))}function P(W,de,V,ue,Pe){const Ae=y(W,de);if(Ae)return Ae;const F=de===Ii,z=os?history.state:{};V&&(ue||F?i.replace(W.fullPath,It({scroll:F&&z&&z.scroll},Pe)):i.push(W.fullPath,Pe)),l.value=W,H(W,de,V,F),Y()}let _;function D(){_||(_=i.listen((W,de,V)=>{if(!pe.listening)return;const ue=v(W),Pe=A(ue);if(Pe){S(It(Pe,{replace:!0,force:!0}),ue).catch(pa);return}d=ue;const Ae=l.value;os&&rA(Dg(Ae.fullPath,V.delta),tc()),C(ue,Ae).catch(F=>ii(F,12)?F:ii(F,2)?(S(It(b(F.to),{force:!0}),ue).then(z=>{ii(z,20)&&!V.delta&&V.type===Oa.pop&&i.go(-1,!1)}).catch(pa),Promise.reject()):(V.delta&&i.go(-V.delta,!1),$(F,ue,Ae))).then(F=>{F=F||P(ue,Ae,!1),F&&(V.delta&&!ii(F,8)?i.go(-V.delta,!1):V.type===Oa.pop&&ii(F,20)&&i.go(-1,!1)),L(ue,Ae,F)}).catch(pa)}))}let k=Ks(),M=Ks(),O;function $(W,de,V){Y(W);const ue=M.list();return ue.length?ue.forEach(Pe=>Pe(W,de,V)):console.error(W),Promise.reject(W)}function K(){return O&&l.value!==Ii?Promise.resolve():new Promise((W,de)=>{k.add([W,de])})}function Y(W){return O||(O=!W,D(),k.list().forEach(([de,V])=>W?V(W):de()),k.reset()),W}function H(W,de,V,ue){const{scrollBehavior:Pe}=n;if(!os||!Pe)return Promise.resolve();const Ae=!V&&iA(Dg(W.fullPath,0))||(ue||!V)&&history.state&&history.state.scroll||null;return wn().then(()=>Pe(W,de,Ae)).then(F=>F&&nA(F)).catch(F=>$(F,W,de))}const B=W=>i.go(W);let X;const se=new Set,pe={currentRoute:l,listening:!0,addRoute:p,removeRoute:h,clearRoutes:e.clearRoutes,hasRoute:m,getRoutes:g,resolve:v,options:n,push:x,replace:E,go:B,back:()=>B(-1),forward:()=>B(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:M.add,isReady:K,install(W){const de=this;W.component("RouterLink",IA),W.component("RouterView",Hy),W.config.globalProperties.$router=de,Object.defineProperty(W.config.globalProperties,"$route",{enumerable:!0,get:()=>Me(l)}),os&&!X&&l.value===Ii&&(X=!0,x(i.location).catch(Pe=>{}));const V={};for(const Pe in Ii)Object.defineProperty(V,Pe,{get:()=>l.value[Pe],enumerable:!0});W.provide(kh,de),W.provide(Uy,kb(V)),W.provide(hf,l);const ue=W.unmount;se.add(W),W.unmount=function(){se.delete(W),se.size<1&&(d=Ii,_&&_(),_=null,l.value=Ii,X=!1,O=!1),ue()}}};function te(W){return W.reduce((de,V)=>de.then(()=>T(V)),Promise.resolve())}return pe}function DA(n,e){const t=[],r=[],i=[],o=Math.max(e.matched.length,n.matched.length);for(let s=0;s<o;s++){const a=e.matched[s];a&&(n.matched.find(d=>Ss(d,a))?r.push(a):t.push(a));const l=n.matched[s];l&&(e.matched.find(d=>Ss(d,l))||i.push(l))}return[t,r,i]}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Vy;const nc=n=>Vy=n,Gy=Symbol();function pf(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var ma;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(ma||(ma={}));function OA(){const n=mb(!0),e=n.run(()=>G({}));let t=[],r=[];const i=Ia({install(o){nc(i),i._a=o,o.provide(Gy,i),o.config.globalProperties.$pinia=i,r.forEach(s=>t.push(s)),r=[]},use(o){return this._a?t.push(o):r.push(o),this},_p:t,_a:null,_e:n,_s:new Map,state:e});return i}const Wy=()=>{};function qg(n,e,t,r=Wy){n.push(e);const i=()=>{const o=n.indexOf(e);o>-1&&(n.splice(o,1),r())};return!t&&vb()&&yE(i),i}function qo(n,...e){n.slice().forEach(t=>{t(...e)})}const MA=n=>n(),Yg=Symbol(),Qc=Symbol();function gf(n,e){n instanceof Map&&e instanceof Map?e.forEach((t,r)=>n.set(r,t)):n instanceof Set&&e instanceof Set&&e.forEach(n.add,n);for(const t in e){if(!e.hasOwnProperty(t))continue;const r=e[t],i=n[t];pf(i)&&pf(r)&&n.hasOwnProperty(t)&&!Yt(r)&&!Ki(r)?n[t]=gf(i,r):n[t]=r}return n}const FA=Symbol();function $A(n){return!pf(n)||!Object.prototype.hasOwnProperty.call(n,FA)}const{assign:Mi}=Object;function BA(n){return!!(Yt(n)&&n.effect)}function NA(n,e,t,r){const{state:i,actions:o,getters:s}=e,a=t.state.value[n];let l;function d(){a||(t.state.value[n]=i?i():{});const c=UE(t.state.value[n]);return Mi(c,o,Object.keys(s||{}).reduce((u,f)=>(u[f]=Ia(U(()=>{nc(t);const p=t._s.get(n);return s[f].call(p,p)})),u),{}))}return l=jy(n,d,e,t,r,!0),l}function jy(n,e,t={},r,i,o){let s;const a=Mi({actions:{}},t),l={deep:!0};let d,c,u=[],f=[],p;const h=r.state.value[n];!o&&!h&&(r.state.value[n]={}),G({});let g;function m(w){let T;d=c=!1,typeof w=="function"?(w(r.state.value[n]),T={type:ma.patchFunction,storeId:n,events:p}):(gf(r.state.value[n],w),T={type:ma.patchObject,payload:w,storeId:n,events:p});const C=g=Symbol();wn().then(()=>{g===C&&(d=!0)}),c=!0,qo(u,T,r.state.value[n])}const v=o?function(){const{state:T}=t,C=T?T():{};this.$patch(L=>{Mi(L,C)})}:Wy;function b(){s.stop(),u=[],f=[],r._s.delete(n)}const y=(w,T="")=>{if(Yg in w)return w[Qc]=T,w;const C=function(){nc(r);const L=Array.from(arguments),P=[],_=[];function D(O){P.push(O)}function k(O){_.push(O)}qo(f,{args:L,name:C[Qc],store:E,after:D,onError:k});let M;try{M=w.apply(this&&this.$id===n?this:E,L)}catch(O){throw qo(_,O),O}return M instanceof Promise?M.then(O=>(qo(P,O),O)).catch(O=>(qo(_,O),Promise.reject(O))):(qo(P,M),M)};return C[Yg]=!0,C[Qc]=T,C},x={_p:r,$id:n,$onAction:qg.bind(null,f),$patch:m,$reset:v,$subscribe(w,T={}){const C=qg(u,w,T.detached,()=>L()),L=s.run(()=>at(()=>r.state.value[n],P=>{(T.flush==="sync"?c:d)&&w({storeId:n,type:ma.direct,events:p},P)},Mi({},l,T)));return C},$dispose:b},E=no(x);r._s.set(n,E);const S=(r._a&&r._a.runWithContext||MA)(()=>r._e.run(()=>(s=mb()).run(()=>e({action:y}))));for(const w in S){const T=S[w];if(Yt(T)&&!BA(T)||Ki(T))o||(h&&$A(T)&&(Yt(T)?T.value=h[w]:gf(T,h[w])),r.state.value[n][w]=T);else if(typeof T=="function"){const C=y(T,w);S[w]=C,a.actions[w]=T}}return Mi(E,S),Mi(gt(E),S),Object.defineProperty(E,"$state",{get:()=>r.state.value[n],set:w=>{m(T=>{Mi(T,w)})}}),r._p.forEach(w=>{Mi(E,s.run(()=>w({store:E,app:r._a,pinia:r,options:a})))}),h&&o&&t.hydrate&&t.hydrate(E.$state,h),d=!0,c=!0,E}/*! #__NO_SIDE_EFFECTS__ */function rc(n,e,t){let r;const i=typeof e=="function";r=i?t:e;function o(s,a){const l=y1();return s=s||(l?Be(Gy,null):null),s&&nc(s),s=Vy,s._s.has(n)||(i?jy(n,e,r,s):NA(n,r,s)),s._s.get(n)}return o.$id=n,o}const _o=rc("globalSettings",{state:()=>({isLoop:!1,apiUrl:"https://raw.githubusercontent.com/htfei/cmsapi/refs/heads/main/xjj_all.json",lastUpdated:null}),actions:{toggleLoop(){return this.isLoop=!this.isLoop,console.log(`循环播放状态切换为: ${this.isLoop}`),this.isLoop},setApiUrl(n){return n&&typeof n=="string"?(this.apiUrl=n,console.log(`API URL设置为: ${this.apiUrl}`),this.apiUrl):(console.error("无效的API URL"),this.apiUrl)},setLastUpdated(n){return this.lastUpdated=n,console.log(`最后更新日期设置为: ${this.lastUpdated}`),this.lastUpdated},getLastUpdated(){return this.lastUpdated}},persist:!0}),Xg=new Date().toISOString().slice(0,10).replace(/-/g,""),Dh=rc("apiList",{state:()=>({apiList:[]}),persist:!0,actions:{async loadApiList(){_o().lastUpdated&&this.apiList.length>0||(console.log("没有缓存数据，从apiUrl获取数据"),await this.fetchApiList())},async fetchApiList(){const n=_o();if(n.lastUpdated===Xg&&this.apiList.length>0)return;console.log("没有缓存数据，从apiUrl获取数据"),n.setLastUpdated(Xg);const e=n.apiUrl;if(!e){console.warn("API URL未设置");return}try{const t=await fetch(e);if(!t.ok){console.error(`HTTP error! status: ${t.status}`);return}const r=await t.json();let i=r.sites||r.list||r.data||[];if(i.length===0){console.warn("从apiUrl获取的数据为空!!!");return}this.apiList=i,console.log("从apiurl请求数据成功")}catch(t){console.error(`从apiUrl获取数据失败: ${t instanceof Error?t.message:String(t)}`)}},addApi(n){const e=this.apiList.findIndex(t=>t.id===n.id);e!==-1?this.apiList[e]=n:this.apiList.push(n)},deleteApi(n){this.apiList=this.apiList.filter(e=>e.id!==n)},updateApi(n){const e=this.apiList.findIndex(t=>t.id===n.id);e!==-1&&(this.apiList[e]=n)},updateApiStatuses(n){n.forEach(e=>{const t=this.apiList.findIndex(r=>r.id===e.id);t!==-1&&(this.apiList[t].status=e.status)})}},getters:{apiByGroup:n=>n.apiList.reduce((e,t)=>(e[t.group]||(e[t.group]=[]),e[t.group].push(t),e),{}),activeApis:n=>n.apiList.filter(e=>e.status===!0),getApiById:n=>e=>n.apiList.find(t=>t.id===e),getRandomApi:n=>()=>{const e=n.apiList.filter(r=>r.status===!0);if(e.length===0)return null;const t=Math.floor(Math.random()*e.length);return e[t]}}});class Qg{static getDefaultVideo(){return{id:Date.now(),title:"萝莉工坊系列",author:"萝莉工坊",images:[],videoUrl:"https://api.cnmpp.com/sj/?type=json.mp4"}}static async fetchApiData(e){try{const t=Dh(),r=t==null?void 0:t.getRandomApi();if(!r)return null;console.log(`获取随机API [${r.name}](${r.api})`);let i={},o=null;switch(r.type){case"auto":case"":case void 0:o=await this.handleAutoType(r);break;case"json":o=await this.handleJsonType(r);break;case"dir":o=await this.handleDirType(r);break;case"ftp":o=await this.handleFtpType(r);break;case"direct":o=this.handleDirectType(r);break;case"id_range":o=this.handleIdRangeType(r);break;case"id_list":o=this.handleIdListType(r);break;default:o=await this.handleAutoType(r)}if(!o)return null;try{o.startsWith("//")?o="https:"+o:o.startsWith("/")&&(o=r.host+o),new URL(o)}catch{return console.warn(`获取到的视频URL不是有效的URL [${r.name}](${r.api}):`,o==null?void 0:o.substring(0,100)),null}return i={id:Date.now(),title:"",author:r.name||"未知作者",images:[],videoUrl:o},console.log(`获取到的数据 [${r.name}](${r.api}):`,o),i}catch(t){return console.warn(`获取分类${e}的数据时出错:`,t),null}}static async handleAutoType(e){try{const t=await fetch(e.api,{redirect:"manual"});return t.status===0?(console.warn(`请求被CORS策略阻止，无法获取视频URL [${e.name}](${e.api})`),null):t.status===302||t.status===301?t.headers.get("Location")||null:await t.text()}catch(t){return console.warn(`处理auto类型接口时出错 [${e.name}](${e.api}):`,t),null}}static async handleJsonType(e){try{if(!e.api_parms||e.api_parms.length===0)return console.warn(`json类型接口 [${e.name}](${e.api}) 没有提供参数`),null;const t=await fetch(e.api);if(!t.ok)return console.warn(`HTTP error! status: ${t.status}`),null;const r=await t.json();let i=e.api_parms[0];i.startsWith("$.")?i=i.substring(2):i.startsWith("$")&&(i=i.substring(1));const o=i.split(".");let s=r;for(const a of o){if(a.includes("[")&&a.includes("]")){const[l,d]=a.split("["),c=parseInt(d.replace("]",""));if(s&&Array.isArray(s[l]))s=s[l][c];else if(s&&!l)s=s[c];else{console.warn(`无法在JSON响应中找到路径 [${e.name}](${e.api}): ${i}`),s=void 0;break}}else if(s&&typeof s=="object"&&a in s)s=s[a];else{console.warn(`无法在JSON响应中找到路径 [${e.name}](${e.api}): ${i}`),s=void 0;break}if(s===void 0){console.warn(`无法在JSON响应中找到路径 [${e.name}](${e.api}): ${i}`);break}}return s}catch(t){return console.warn(`处理json类型接口时出错 [${e.name}](${e.api}):`,t),null}}static async handleDirType(e){try{const t=await fetch(e.api);if(!t.ok)return console.warn(`HTTP error! status: ${t.status} [${e.name}](${e.api})`),null;const i=(await t.text()).split(`
`).filter(a=>a.trim()!=="");if(i.length===0)return null;const o=Math.floor(Math.random()*i.length);let s=i[o];if(s.includes(",")){const a=s.split(",");a.length>=2&&(s=a[1].trim())}return s}catch(t){return console.warn(`处理dir类型接口时出错 [${e.name}](${e.api}):`,t),null}}static async handleFtpType(e){return console.warn(`ftp类型接口尚未实现 [${e.name}](${e.api})`),null}static handleDirectType(e){return e.api}static handleIdRangeType(e){const t=e.api_parms;if(!t||t.length<2)return console.warn(`id_range类型接口缺少参数或参数格式错误 [${e.name}](${e.api})`),null;const r=Number(t[0]),i=Number(t[1]);if(isNaN(r)||isNaN(i))return console.warn(`id_range类型接口参数必须是数字 [${e.name}](${e.api})`),null;const o=Math.floor(Math.random()*(i-r+1))+r;return e.api.replace("{id}",o.toString())}static handleIdListType(e){const t=e.api_parms;if(!t)return console.warn(`id_list类型接口缺少参数 [${e.name}](${e.api})`),null;const r=t[Math.floor(Math.random()*t.length)];return e.api.replaceAll("{id}",r)}}const Ky=rc("dataQueueStore",()=>{const n=G([]),e=1e3,t=10,r=G(!1),i=U(()=>n.value.length===0),o=U(()=>n.value.length),s=()=>n.value.length>0?n.value.shift():Qg.getDefaultVideo(),a=u=>{u.forEach(f=>{n.value.length<e&&n.value.push(f)})},l=U(()=>n.value.length<t&&!r.value),d=async()=>{if(!r.value){r.value=!0;try{const u=t,f=[];for(let g=0;g<u;g++)f.push(Qg.fetchApiData(0));const h=(await Promise.allSettled(f)).filter(g=>g.status==="fulfilled"&&g.value!==null).map(g=>g.value);a(h),console.log(`成功补充 ${h.length} 条数据到队列`)}catch(u){console.error("补充数据到队列时出错:",u)}finally{r.value=!1}}};return{dataQueue:n,isLoading:r,isEmpty:i,queueSize:o,shouldRefill:l,dequeue:s,refillQueue:d,initializeQueue:async()=>{await d()}}},{persist:{key:"dataQueueStore",storage:localStorage,pick:["dataQueue"]}});function zA(n){let e=".",t="__",r="--",i;if(n){let h=n.blockPrefix;h&&(e=h),h=n.elementPrefix,h&&(t=h),h=n.modifierPrefix,h&&(r=h)}const o={install(h){i=h.c;const g=h.context;g.bem={},g.bem.b=null,g.bem.els=null}};function s(h){let g,m;return{before(v){g=v.bem.b,m=v.bem.els,v.bem.els=null},after(v){v.bem.b=g,v.bem.els=m},$({context:v,props:b}){return h=typeof h=="string"?h:h({context:v,props:b}),v.bem.b=h,`${(b==null?void 0:b.bPrefix)||e}${v.bem.b}`}}}function a(h){let g;return{before(m){g=m.bem.els},after(m){m.bem.els=g},$({context:m,props:v}){return h=typeof h=="string"?h:h({context:m,props:v}),m.bem.els=h.split(",").map(b=>b.trim()),m.bem.els.map(b=>`${(v==null?void 0:v.bPrefix)||e}${m.bem.b}${t}${b}`).join(", ")}}}function l(h){return{$({context:g,props:m}){h=typeof h=="string"?h:h({context:g,props:m});const v=h.split(",").map(x=>x.trim());function b(x){return v.map(E=>`&${(m==null?void 0:m.bPrefix)||e}${g.bem.b}${x!==void 0?`${t}${x}`:""}${r}${E}`).join(", ")}const y=g.bem.els;return y!==null?b(y[0]):b()}}}function d(h){return{$({context:g,props:m}){h=typeof h=="string"?h:h({context:g,props:m});const v=g.bem.els;return`&:not(${(m==null?void 0:m.bPrefix)||e}${g.bem.b}${v!==null&&v.length>0?`${t}${v[0]}`:""}${r}${h})`}}}return Object.assign(o,{cB:(...h)=>i(s(h[0]),h[1],h[2]),cE:(...h)=>i(a(h[0]),h[1],h[2]),cM:(...h)=>i(l(h[0]),h[1],h[2]),cNotM:(...h)=>i(d(h[0]),h[1],h[2])}),o}function UA(n){let e=0;for(let t=0;t<n.length;++t)n[t]==="&"&&++e;return e}const qy=/\s*,(?![^(]*\))\s*/g,HA=/\s+/g;function VA(n,e){const t=[];return e.split(qy).forEach(r=>{let i=UA(r);if(i){if(i===1){n.forEach(s=>{t.push(r.replace("&",s))});return}}else{n.forEach(s=>{t.push((s&&s+" ")+r)});return}let o=[r];for(;i--;){const s=[];o.forEach(a=>{n.forEach(l=>{s.push(a.replace("&",l))})}),o=s}o.forEach(s=>t.push(s))}),t}function GA(n,e){const t=[];return e.split(qy).forEach(r=>{n.forEach(i=>{t.push((i&&i+" ")+r)})}),t}function WA(n){let e=[""];return n.forEach(t=>{t=t&&t.trim(),t&&(t.includes("&")?e=VA(e,t):e=GA(e,t))}),e.join(", ").replace(HA," ")}function Zg(n){if(!n)return;const e=n.parentElement;e&&e.removeChild(n)}function ic(n,e){return(e??document.head).querySelector(`style[cssr-id="${n}"]`)}function jA(n){const e=document.createElement("style");return e.setAttribute("cssr-id",n),e}function pl(n){return n?/^\s*@(s|m)/.test(n):!1}const KA=/[A-Z]/g;function Yy(n){return n.replace(KA,e=>"-"+e.toLowerCase())}function qA(n,e="  "){return typeof n=="object"&&n!==null?` {
`+Object.entries(n).map(t=>e+`  ${Yy(t[0])}: ${t[1]};`).join(`
`)+`
`+e+"}":`: ${n};`}function YA(n,e,t){return typeof n=="function"?n({context:e.context,props:t}):n}function Jg(n,e,t,r){if(!e)return"";const i=YA(e,t,r);if(!i)return"";if(typeof i=="string")return`${n} {
${i}
}`;const o=Object.keys(i);if(o.length===0)return t.config.keepEmptyBlock?n+` {
}`:"";const s=n?[n+" {"]:[];return o.forEach(a=>{const l=i[a];if(a==="raw"){s.push(`
`+l+`
`);return}a=Yy(a),l!=null&&s.push(`  ${a}${qA(l)}`)}),n&&s.push("}"),s.join(`
`)}function mf(n,e,t){n&&n.forEach(r=>{if(Array.isArray(r))mf(r,e,t);else if(typeof r=="function"){const i=r(e);Array.isArray(i)?mf(i,e,t):i&&t(i)}else r&&t(r)})}function Xy(n,e,t,r,i){const o=n.$;let s="";if(!o||typeof o=="string")pl(o)?s=o:e.push(o);else if(typeof o=="function"){const d=o({context:r.context,props:i});pl(d)?s=d:e.push(d)}else if(o.before&&o.before(r.context),!o.$||typeof o.$=="string")pl(o.$)?s=o.$:e.push(o.$);else if(o.$){const d=o.$({context:r.context,props:i});pl(d)?s=d:e.push(d)}const a=WA(e),l=Jg(a,n.props,r,i);s?t.push(`${s} {`):l.length&&t.push(l),n.children&&mf(n.children,{context:r.context,props:i},d=>{if(typeof d=="string"){const c=Jg(a,{raw:d},r,i);t.push(c)}else Xy(d,e,t,r,i)}),e.pop(),s&&t.push("}"),o&&o.after&&o.after(r.context)}function XA(n,e,t){const r=[];return Xy(n,[],r,e,t),r.join(`

`)}function Ma(n){for(var e=0,t,r=0,i=n.length;i>=4;++r,i-=4)t=n.charCodeAt(r)&255|(n.charCodeAt(++r)&255)<<8|(n.charCodeAt(++r)&255)<<16|(n.charCodeAt(++r)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(n.charCodeAt(r+2)&255)<<16;case 2:e^=(n.charCodeAt(r+1)&255)<<8;case 1:e^=n.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}typeof window<"u"&&(window.__cssrContext={});function QA(n,e,t,r){const{els:i}=e;if(t===void 0)i.forEach(Zg),e.els=[];else{const o=ic(t,r);o&&i.includes(o)&&(Zg(o),e.els=i.filter(s=>s!==o))}}function em(n,e){n.push(e)}function ZA(n,e,t,r,i,o,s,a,l){let d;if(t===void 0&&(d=e.render(r),t=Ma(d)),l){l.adapter(t,d??e.render(r));return}a===void 0&&(a=document.head);const c=ic(t,a);if(c!==null&&!o)return c;const u=c??jA(t);if(d===void 0&&(d=e.render(r)),u.textContent=d,c!==null)return c;if(s){const f=a.querySelector(`meta[name="${s}"]`);if(f)return a.insertBefore(u,f),em(e.els,u),u}return i?a.insertBefore(u,a.querySelector("style, link")):a.appendChild(u),em(e.els,u),u}function JA(n){return XA(this,this.instance,n)}function eI(n={}){const{id:e,ssr:t,props:r,head:i=!1,force:o=!1,anchorMetaName:s,parent:a}=n;return ZA(this.instance,this,e,r,i,o,s,a,t)}function tI(n={}){const{id:e,parent:t}=n;QA(this.instance,this,e,t)}const gl=function(n,e,t,r){return{instance:n,$:e,props:t,children:r,els:[],render:JA,mount:eI,unmount:tI}},nI=function(n,e,t,r){return Array.isArray(e)?gl(n,{$:null},null,e):Array.isArray(t)?gl(n,e,null,t):Array.isArray(r)?gl(n,e,t,r):gl(n,e,t,null)};function Qy(n={}){const e={c:(...t)=>nI(e,...t),use:(t,...r)=>t.install(e,...r),find:ic,context:{},config:n};return e}function rI(n,e){if(n===void 0)return!1;if(e){const{context:{ids:t}}=e;return t.has(n)}return ic(n)!==null}const iI="n",Fa=`.${iI}-`,oI="__",sI="--",Zy=Qy(),Jy=zA({blockPrefix:Fa,elementPrefix:oI,modifierPrefix:sI});Zy.use(Jy);const{c:Z,find:qV}=Zy,{cB:j,cE:q,cM:ee,cNotM:Pt}=Jy;function oc(n){return Z(({props:{bPrefix:e}})=>`${e||Fa}modal, ${e||Fa}drawer`,[n])}function Oh(n){return Z(({props:{bPrefix:e}})=>`${e||Fa}popover`,[n])}function ex(n){return Z(({props:{bPrefix:e}})=>`&${e||Fa}modal`,n)}const aI=(...n)=>Z(">",[j(...n)]);function xe(n,e){return n+(e==="default"?"":e.replace(/^[a-z]/,t=>t.toUpperCase()))}let pd=[];const tx=new WeakMap;function lI(){pd.forEach(n=>n(...tx.get(n))),pd=[]}function gd(n,...e){tx.set(n,e),!pd.includes(n)&&pd.push(n)===1&&requestAnimationFrame(lI)}function hr(n,e){let{target:t}=n;for(;t;){if(t.dataset&&t.dataset[e]!==void 0)return!0;t=t.parentElement}return!1}function Ts(n){return n.composedPath()[0]||null}function pn(n){return typeof n=="string"?n.endsWith("px")?Number(n.slice(0,n.length-2)):Number(n):n}function Zt(n){if(n!=null)return typeof n=="number"?`${n}px`:n.endsWith("px")?n:`${n}px`}function Hn(n,e){const t=n.trim().split(/\s+/g),r={top:t[0]};switch(t.length){case 1:r.right=t[0],r.bottom=t[0],r.left=t[0];break;case 2:r.right=t[1],r.left=t[1],r.bottom=t[0];break;case 3:r.right=t[1],r.bottom=t[2],r.left=t[1];break;case 4:r.right=t[1],r.bottom=t[2],r.left=t[3];break;default:throw new Error("[seemly/getMargin]:"+n+" is not a valid value.")}return e===void 0?r:r[e]}const tm={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32",transparent:"#0000"};function dI(n,e,t){e/=100,t/=100;let r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5)*255,r(3)*255,r(1)*255]}function cI(n,e,t){e/=100,t/=100;let r=e*Math.min(t,1-t),i=(o,s=(o+n/30)%12)=>t-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0)*255,i(8)*255,i(4)*255]}const Zr="^\\s*",Jr="\\s*$",Yi="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))%\\s*",Qn="\\s*((\\.\\d+)|(\\d+(\\.\\d*)?))\\s*",yo="([0-9A-Fa-f])",xo="([0-9A-Fa-f]{2})",nx=new RegExp(`${Zr}hsl\\s*\\(${Qn},${Yi},${Yi}\\)${Jr}`),rx=new RegExp(`${Zr}hsv\\s*\\(${Qn},${Yi},${Yi}\\)${Jr}`),ix=new RegExp(`${Zr}hsla\\s*\\(${Qn},${Yi},${Yi},${Qn}\\)${Jr}`),ox=new RegExp(`${Zr}hsva\\s*\\(${Qn},${Yi},${Yi},${Qn}\\)${Jr}`),uI=new RegExp(`${Zr}rgb\\s*\\(${Qn},${Qn},${Qn}\\)${Jr}`),fI=new RegExp(`${Zr}rgba\\s*\\(${Qn},${Qn},${Qn},${Qn}\\)${Jr}`),hI=new RegExp(`${Zr}#${yo}${yo}${yo}${Jr}`),pI=new RegExp(`${Zr}#${xo}${xo}${xo}${Jr}`),gI=new RegExp(`${Zr}#${yo}${yo}${yo}${yo}${Jr}`),mI=new RegExp(`${Zr}#${xo}${xo}${xo}${xo}${Jr}`);function $n(n){return parseInt(n,16)}function vI(n){try{let e;if(e=ix.exec(n))return[md(e[1]),Vi(e[5]),Vi(e[9]),wo(e[13])];if(e=nx.exec(n))return[md(e[1]),Vi(e[5]),Vi(e[9]),1];throw new Error(`[seemly/hsla]: Invalid color value ${n}.`)}catch(e){throw e}}function bI(n){try{let e;if(e=ox.exec(n))return[md(e[1]),Vi(e[5]),Vi(e[9]),wo(e[13])];if(e=rx.exec(n))return[md(e[1]),Vi(e[5]),Vi(e[9]),1];throw new Error(`[seemly/hsva]: Invalid color value ${n}.`)}catch(e){throw e}}function bi(n){try{let e;if(e=pI.exec(n))return[$n(e[1]),$n(e[2]),$n(e[3]),1];if(e=uI.exec(n))return[Tn(e[1]),Tn(e[5]),Tn(e[9]),1];if(e=fI.exec(n))return[Tn(e[1]),Tn(e[5]),Tn(e[9]),wo(e[13])];if(e=hI.exec(n))return[$n(e[1]+e[1]),$n(e[2]+e[2]),$n(e[3]+e[3]),1];if(e=mI.exec(n))return[$n(e[1]),$n(e[2]),$n(e[3]),wo($n(e[4])/255)];if(e=gI.exec(n))return[$n(e[1]+e[1]),$n(e[2]+e[2]),$n(e[3]+e[3]),wo($n(e[4]+e[4])/255)];if(n in tm)return bi(tm[n]);if(nx.test(n)||ix.test(n)){const[t,r,i,o]=vI(n);return[...cI(t,r,i),o]}else if(rx.test(n)||ox.test(n)){const[t,r,i,o]=bI(n);return[...dI(t,r,i),o]}throw new Error(`[seemly/rgba]: Invalid color value ${n}.`)}catch(e){throw e}}function yI(n){return n>1?1:n<0?0:n}function vf(n,e,t,r){return`rgba(${Tn(n)}, ${Tn(e)}, ${Tn(t)}, ${yI(r)})`}function Zc(n,e,t,r,i){return Tn((n*e*(1-r)+t*r)/i)}function ze(n,e){Array.isArray(n)||(n=bi(n)),Array.isArray(e)||(e=bi(e));const t=n[3],r=e[3],i=wo(t+r-t*r);return vf(Zc(n[0],t,e[0],r,i),Zc(n[1],t,e[1],r,i),Zc(n[2],t,e[2],r,i),i)}function Te(n,e){const[t,r,i,o=1]=Array.isArray(n)?n:bi(n);return typeof e.alpha=="number"?vf(t,r,i,e.alpha):vf(t,r,i,o)}function Qt(n,e){const[t,r,i,o=1]=Array.isArray(n)?n:bi(n),{lightness:s=1,alpha:a=1}=e;return xI([t*s,r*s,i*s,o*a])}function wo(n){const e=Math.round(Number(n)*100)/100;return e>1?1:e<0?0:e}function md(n){const e=Math.round(Number(n));return e>=360||e<0?0:e}function Tn(n){const e=Math.round(Number(n));return e>255?255:e<0?0:e}function Vi(n){const e=Math.round(Number(n));return e>100?100:e<0?0:e}function xI(n){const[e,t,r]=n;return 3 in n?`rgba(${Tn(e)}, ${Tn(t)}, ${Tn(r)}, ${wo(n[3])})`:`rgba(${Tn(e)}, ${Tn(t)}, ${Tn(r)}, 1)`}function ko(n=8){return Math.random().toString(16).slice(2,2+n)}function SI(n,e){const t=[];for(let r=0;r<n;++r)t.push(e);return t}function jl(n){return n.composedPath()[0]}const CI={mousemoveoutside:new WeakMap,clickoutside:new WeakMap};function TI(n,e,t){if(n==="mousemoveoutside"){const r=i=>{e.contains(jl(i))||t(i)};return{mousemove:r,touchstart:r}}else if(n==="clickoutside"){let r=!1;const i=s=>{r=!e.contains(jl(s))},o=s=>{r&&(e.contains(jl(s))||t(s))};return{mousedown:i,mouseup:o,touchstart:i,touchend:o}}return console.error(`[evtd/create-trap-handler]: name \`${n}\` is invalid. This could be a bug of evtd.`),{}}function sx(n,e,t){const r=CI[n];let i=r.get(e);i===void 0&&r.set(e,i=new WeakMap);let o=i.get(t);return o===void 0&&i.set(t,o=TI(n,e,t)),o}function wI(n,e,t,r){if(n==="mousemoveoutside"||n==="clickoutside"){const i=sx(n,e,t);return Object.keys(i).forEach(o=>{Tt(o,document,i[o],r)}),!0}return!1}function EI(n,e,t,r){if(n==="mousemoveoutside"||n==="clickoutside"){const i=sx(n,e,t);return Object.keys(i).forEach(o=>{bt(o,document,i[o],r)}),!0}return!1}function RI(){if(typeof window>"u")return{on:()=>{},off:()=>{}};const n=new WeakMap,e=new WeakMap;function t(){n.set(this,!0)}function r(){n.set(this,!0),e.set(this,!0)}function i(S,w,T){const C=S[w];return S[w]=function(){return T.apply(S,arguments),C.apply(S,arguments)},S}function o(S,w){S[w]=Event.prototype[w]}const s=new WeakMap,a=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function l(){var S;return(S=s.get(this))!==null&&S!==void 0?S:null}function d(S,w){a!==void 0&&Object.defineProperty(S,"currentTarget",{configurable:!0,enumerable:!0,get:w??a.get})}const c={bubble:{},capture:{}},u={};function f(){const S=function(w){const{type:T,eventPhase:C,bubbles:L}=w,P=jl(w);if(C===2)return;const _=C===1?"capture":"bubble";let D=P;const k=[];for(;D===null&&(D=window),k.push(D),D!==window;)D=D.parentNode||null;const M=c.capture[T],O=c.bubble[T];if(i(w,"stopPropagation",t),i(w,"stopImmediatePropagation",r),d(w,l),_==="capture"){if(M===void 0)return;for(let $=k.length-1;$>=0&&!n.has(w);--$){const K=k[$],Y=M.get(K);if(Y!==void 0){s.set(w,K);for(const H of Y){if(e.has(w))break;H(w)}}if($===0&&!L&&O!==void 0){const H=O.get(K);if(H!==void 0)for(const B of H){if(e.has(w))break;B(w)}}}}else if(_==="bubble"){if(O===void 0)return;for(let $=0;$<k.length&&!n.has(w);++$){const K=k[$],Y=O.get(K);if(Y!==void 0){s.set(w,K);for(const H of Y){if(e.has(w))break;H(w)}}}}o(w,"stopPropagation"),o(w,"stopImmediatePropagation"),d(w)};return S.displayName="evtdUnifiedHandler",S}function p(){const S=function(w){const{type:T,eventPhase:C}=w;if(C!==2)return;const L=u[T];L!==void 0&&L.forEach(P=>P(w))};return S.displayName="evtdUnifiedWindowEventHandler",S}const h=f(),g=p();function m(S,w){const T=c[S];return T[w]===void 0&&(T[w]=new Map,window.addEventListener(w,h,S==="capture")),T[w]}function v(S){return u[S]===void 0&&(u[S]=new Set,window.addEventListener(S,g)),u[S]}function b(S,w){let T=S.get(w);return T===void 0&&S.set(w,T=new Set),T}function y(S,w,T,C){const L=c[w][T];if(L!==void 0){const P=L.get(S);if(P!==void 0&&P.has(C))return!0}return!1}function x(S,w){const T=u[S];return!!(T!==void 0&&T.has(w))}function E(S,w,T,C){let L;if(typeof C=="object"&&C.once===!0?L=M=>{A(S,w,L,C),T(M)}:L=T,wI(S,w,L,C))return;const _=C===!0||typeof C=="object"&&C.capture===!0?"capture":"bubble",D=m(_,S),k=b(D,w);if(k.has(L)||k.add(L),w===window){const M=v(S);M.has(L)||M.add(L)}}function A(S,w,T,C){if(EI(S,w,T,C))return;const P=C===!0||typeof C=="object"&&C.capture===!0,_=P?"capture":"bubble",D=m(_,S),k=b(D,w);if(w===window&&!y(w,P?"bubble":"capture",S,T)&&x(S,T)){const O=u[S];O.delete(T),O.size===0&&(window.removeEventListener(S,g),u[S]=void 0)}k.has(T)&&k.delete(T),k.size===0&&D.delete(w),D.size===0&&(window.removeEventListener(S,h,_==="capture"),c[_][S]=void 0)}return{on:E,off:A}}const{on:Tt,off:bt}=RI();function AI(n){const e=G(!!n.value);if(e.value)return Kr(e);const t=at(n,r=>{r&&(e.value=!0,t())});return Kr(e)}function At(n){const e=U(n),t=G(e.value);return at(e,r=>{t.value=r}),typeof n=="function"?t:{__v_isRef:!0,get value(){return t.value},set value(r){n.set(r)}}}function Mh(){return Bo()!==null}const Fh=typeof window<"u";let fs,va;const II=()=>{var n,e;fs=Fh?(e=(n=document)===null||n===void 0?void 0:n.fonts)===null||e===void 0?void 0:e.ready:void 0,va=!1,fs!==void 0?fs.then(()=>{va=!0}):va=!0};II();function LI(n){if(va)return;let e=!1;Nt(()=>{va||fs==null||fs.then(()=>{e||n()})}),jt(()=>{e=!0})}const ra=G(null);function nm(n){if(n.clientX>0||n.clientY>0)ra.value={x:n.clientX,y:n.clientY};else{const{target:e}=n;if(e instanceof Element){const{left:t,top:r,width:i,height:o}=e.getBoundingClientRect();t>0||r>0?ra.value={x:t+i/2,y:r+o/2}:ra.value={x:0,y:0}}else ra.value=null}}let ml=0,rm=!0;function ax(){if(!Fh)return Kr(G(null));ml===0&&Tt("click",document,nm,!0);const n=()=>{ml+=1};return rm&&(rm=Mh())?(ro(n),jt(()=>{ml-=1,ml===0&&bt("click",document,nm,!0)})):n(),Kr(ra)}const PI=G(void 0);let vl=0;function im(){PI.value=Date.now()}let om=!0;function lx(n){if(!Fh)return Kr(G(!1));const e=G(!1);let t=null;function r(){t!==null&&window.clearTimeout(t)}function i(){r(),e.value=!0,t=window.setTimeout(()=>{e.value=!1},n)}vl===0&&Tt("click",window,im,!0);const o=()=>{vl+=1,Tt("click",window,i,!0)};return om&&(om=Mh())?(ro(o),jt(()=>{vl-=1,vl===0&&bt("click",window,im,!0),bt("click",window,i,!0),r()})):o(),Kr(e)}function kn(n,e){return at(n,t=>{t!==void 0&&(e.value=t)}),U(()=>n.value===void 0?e.value:n.value)}function el(){const n=G(!1);return Nt(()=>{n.value=!0}),Kr(n)}function $h(n,e){return U(()=>{for(const t of e)if(n[t]!==void 0)return n[t];return n[e[e.length-1]]})}const _I=(typeof window>"u"?!1:/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&!window.MSStream;function kI(){return _I}function DI(n={},e){const t=no({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:r,keyup:i}=n,o=l=>{switch(l.key){case"Control":t.ctrl=!0;break;case"Meta":t.command=!0,t.win=!0;break;case"Shift":t.shift=!0;break;case"Tab":t.tab=!0;break}r!==void 0&&Object.keys(r).forEach(d=>{if(d!==l.key)return;const c=r[d];if(typeof c=="function")c(l);else{const{stop:u=!1,prevent:f=!1}=c;u&&l.stopPropagation(),f&&l.preventDefault(),c.handler(l)}})},s=l=>{switch(l.key){case"Control":t.ctrl=!1;break;case"Meta":t.command=!1,t.win=!1;break;case"Shift":t.shift=!1;break;case"Tab":t.tab=!1;break}i!==void 0&&Object.keys(i).forEach(d=>{if(d!==l.key)return;const c=i[d];if(typeof c=="function")c(l);else{const{stop:u=!1,prevent:f=!1}=c;u&&l.stopPropagation(),f&&l.preventDefault(),c.handler(l)}})},a=()=>{(e===void 0||e.value)&&(Tt("keydown",document,o),Tt("keyup",document,s)),e!==void 0&&at(e,l=>{l?(Tt("keydown",document,o),Tt("keyup",document,s)):(bt("keydown",document,o),bt("keyup",document,s))})};return Mh()?(ro(a),jt(()=>{(e===void 0||e.value)&&(bt("keydown",document,o),bt("keyup",document,s))})):a(),Kr(t)}const Bh="n-internal-select-menu",dx="n-internal-select-menu-body",sc="n-drawer-body",ac="n-modal-body",OI="n-modal-provider",cx="n-modal",tl="n-popover-body",ux="__disabled__";function Yr(n){const e=Be(ac,null),t=Be(sc,null),r=Be(tl,null),i=Be(dx,null),o=G();if(typeof document<"u"){o.value=document.fullscreenElement;const s=()=>{o.value=document.fullscreenElement};Nt(()=>{Tt("fullscreenchange",document,s)}),jt(()=>{bt("fullscreenchange",document,s)})}return At(()=>{var s;const{to:a}=n;return a!==void 0?a===!1?ux:a===!0?o.value||"body":a:e!=null&&e.value?(s=e.value.$el)!==null&&s!==void 0?s:e.value:t!=null&&t.value?t.value:r!=null&&r.value?r.value:i!=null&&i.value?i.value:a??(o.value||"body")})}Yr.tdkey=ux;Yr.propTo={type:[String,Object,Boolean],default:void 0};function MI(n,e,t){var r;const i=Be(n,null);if(i===null)return;const o=(r=Bo())===null||r===void 0?void 0:r.proxy;at(t,s),s(t.value),jt(()=>{s(void 0,t.value)});function s(d,c){if(!i)return;const u=i[e];c!==void 0&&a(u,c),d!==void 0&&l(u,d)}function a(d,c){d[c]||(d[c]=[]),d[c].splice(d[c].findIndex(u=>u===o),1)}function l(d,c){d[c]||(d[c]=[]),~d[c].findIndex(u=>u===o)||d[c].push(o)}}function FI(n,e,t){const r=G(n.value);let i=null;return at(n,o=>{i!==null&&window.clearTimeout(i),o===!0?t&&!t.value?r.value=!0:i=window.setTimeout(()=>{r.value=!0},e):r.value=!1}),r}const nl=typeof document<"u"&&typeof window<"u",Nh=G(!1);function sm(){Nh.value=!0}function am(){Nh.value=!1}let qs=0;function $I(){return nl&&(ro(()=>{qs||(window.addEventListener("compositionstart",sm),window.addEventListener("compositionend",am)),qs++}),jt(()=>{qs<=1?(window.removeEventListener("compositionstart",sm),window.removeEventListener("compositionend",am),qs=0):qs--})),Nh}let Yo=0,lm="",dm="",cm="",um="";const fm=G("0px");function BI(n){if(typeof document>"u")return;const e=document.documentElement;let t,r=!1;const i=()=>{e.style.marginRight=lm,e.style.overflow=dm,e.style.overflowX=cm,e.style.overflowY=um,fm.value="0px"};Nt(()=>{t=at(n,o=>{if(o){if(!Yo){const s=window.innerWidth-e.offsetWidth;s>0&&(lm=e.style.marginRight,e.style.marginRight=`${s}px`,fm.value=`${s}px`),dm=e.style.overflow,cm=e.style.overflowX,um=e.style.overflowY,e.style.overflow="hidden",e.style.overflowX="hidden",e.style.overflowY="hidden"}r=!0,Yo++}else Yo--,Yo||i(),r=!1},{immediate:!0})}),jt(()=>{t==null||t(),r&&(Yo--,Yo||i(),r=!1)})}function NI(n){const e={isDeactivated:!1};let t=!1;return Eh(()=>{if(e.isDeactivated=!1,!t){t=!0;return}n()}),Xd(()=>{e.isDeactivated=!0,t||(t=!0)}),e}function bf(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return r()}function yf(n,e=!0,t=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&t.push(In(String(r)));return}if(Array.isArray(r)){yf(r,e,t);return}if(r.type===mt){if(r.children===null)return;Array.isArray(r.children)&&yf(r.children,e,t)}else r.type!==un&&t.push(r)}}),t}function hm(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const i=yf(r());if(i.length===1)return i[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let Li=null;function fx(){if(Li===null&&(Li=document.getElementById("v-binder-view-measurer"),Li===null)){Li=document.createElement("div"),Li.id="v-binder-view-measurer";const{style:n}=Li;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(Li)}return Li.getBoundingClientRect()}function zI(n,e){const t=fx();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function Jc(n){const e=n.getBoundingClientRect(),t=fx();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function UI(n){return n.nodeType===9?null:n.parentNode}function hx(n){if(n===null)return null;const e=UI(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:r,overflowY:i}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+i+r))return e}return hx(e)}const zh=Ce({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;st("VBinder",(e=Bo())===null||e===void 0?void 0:e.proxy);const t=Be("VBinder",null),r=G(null),i=v=>{r.value=v,t&&n.syncTargetWithParent&&t.setTargetRef(v)};let o=[];const s=()=>{let v=r.value;for(;v=hx(v),v!==null;)o.push(v);for(const b of o)Tt("scroll",b,u,!0)},a=()=>{for(const v of o)bt("scroll",v,u,!0);o=[]},l=new Set,d=v=>{l.size===0&&s(),l.has(v)||l.add(v)},c=v=>{l.has(v)&&l.delete(v),l.size===0&&a()},u=()=>{gd(f)},f=()=>{l.forEach(v=>v())},p=new Set,h=v=>{p.size===0&&Tt("resize",window,m),p.has(v)||p.add(v)},g=v=>{p.has(v)&&p.delete(v),p.size===0&&bt("resize",window,m)},m=()=>{p.forEach(v=>v())};return jt(()=>{bt("resize",window,m),a()}),{targetRef:r,setTargetRef:i,addScrollListener:d,removeScrollListener:c,addResizeListener:h,removeResizeListener:g}},render(){return bf("binder",this.$slots)}}),Uh=Ce({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=Be("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?qi(hm("follower",this.$slots),[[e]]):hm("follower",this.$slots)}}),Xo="@@mmoContext",HI={mounted(n,{value:e}){n[Xo]={handler:void 0},typeof e=="function"&&(n[Xo].handler=e,Tt("mousemoveoutside",n,e))},updated(n,{value:e}){const t=n[Xo];typeof e=="function"?t.handler?t.handler!==e&&(bt("mousemoveoutside",n,t.handler),t.handler=e,Tt("mousemoveoutside",n,e)):(n[Xo].handler=e,Tt("mousemoveoutside",n,e)):t.handler&&(bt("mousemoveoutside",n,t.handler),t.handler=void 0)},unmounted(n){const{handler:e}=n[Xo];e&&bt("mousemoveoutside",n,e),n[Xo].handler=void 0}},Qo="@@coContext",$a={mounted(n,{value:e,modifiers:t}){n[Qo]={handler:void 0},typeof e=="function"&&(n[Qo].handler=e,Tt("clickoutside",n,e,{capture:t.capture}))},updated(n,{value:e,modifiers:t}){const r=n[Qo];typeof e=="function"?r.handler?r.handler!==e&&(bt("clickoutside",n,r.handler,{capture:t.capture}),r.handler=e,Tt("clickoutside",n,e,{capture:t.capture})):(n[Qo].handler=e,Tt("clickoutside",n,e,{capture:t.capture})):r.handler&&(bt("clickoutside",n,r.handler,{capture:t.capture}),r.handler=void 0)},unmounted(n,{modifiers:e}){const{handler:t}=n[Qo];t&&bt("clickoutside",n,t,{capture:e.capture}),n[Qo].handler=void 0}};function VI(n,e){console.error(`[vdirs/${n}]: ${e}`)}class GI{constructor(){this.elementZIndex=new Map,this.nextZIndex=2e3}get elementCount(){return this.elementZIndex.size}ensureZIndex(e,t){const{elementZIndex:r}=this;if(t!==void 0){e.style.zIndex=`${t}`,r.delete(e);return}const{nextZIndex:i}=this;r.has(e)&&r.get(e)+1===this.nextZIndex||(e.style.zIndex=`${i}`,r.set(e,i),this.nextZIndex=i+1,this.squashState())}unregister(e,t){const{elementZIndex:r}=this;r.has(e)?r.delete(e):t===void 0&&VI("z-index-manager/unregister-element","Element not found when unregistering."),this.squashState()}squashState(){const{elementCount:e}=this;e||(this.nextZIndex=2e3),this.nextZIndex-e>2500&&this.rearrange()}rearrange(){const e=Array.from(this.elementZIndex.entries());e.sort((t,r)=>t[1]-r[1]),this.nextZIndex=2e3,e.forEach(t=>{const r=t[0],i=this.nextZIndex++;`${i}`!==r.style.zIndex&&(r.style.zIndex=`${i}`)})}}const eu=new GI,Zo="@@ziContext",Hh={mounted(n,e){const{value:t={}}=e,{zIndex:r,enabled:i}=t;n[Zo]={enabled:!!i,initialized:!1},i&&(eu.ensureZIndex(n,r),n[Zo].initialized=!0)},updated(n,e){const{value:t={}}=e,{zIndex:r,enabled:i}=t,o=n[Zo].enabled;i&&!o&&(eu.ensureZIndex(n,r),n[Zo].initialized=!0),n[Zo].enabled=!!i},unmounted(n,e){if(!n[Zo].initialized)return;const{value:t={}}=e,{zIndex:r}=t;eu.unregister(n,r)}},WI="@css-render/vue3-ssr";function jI(n,e){return`<style cssr-id="${n}">
${e}
</style>`}function KI(n,e,t){const{styles:r,ids:i}=t;i.has(n)||r!==null&&(i.add(n),r.push(jI(n,e)))}const qI=typeof document<"u";function No(){if(qI)return;const n=Be(WI,null);if(n!==null)return{adapter:(e,t)=>KI(e,t,n),context:n}}function pm(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:Gi}=Qy(),Vh="vueuc-style";function gm(n){return n&-n}class px{constructor(e,t){this.l=e,this.min=t;const r=new Array(e+1);for(let i=0;i<e+1;++i)r[i]=0;this.ft=r}add(e,t){if(t===0)return;const{l:r,ft:i}=this;for(e+=1;e<=r;)i[e]+=t,e+=gm(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===void 0&&(e=this.l),e<=0)return 0;const{ft:t,min:r,l:i}=this;if(e>i)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let o=e*r;for(;e>0;)o+=t[e],e-=gm(e);return o}getBound(e){let t=0,r=this.l;for(;r>t;){const i=Math.floor((t+r)/2),o=this.sum(i);if(o>e){r=i;continue}else if(o<e){if(t===i)return this.sum(t+1)<=e?t+1:i;t=i}else return i}return t}}function mm(n){return typeof n=="string"?document.querySelector(n):n()}const gx=Ce({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:AI(Ie(n,"show")),mergedTo:U(()=>{const{to:e}=n;return e??"body"})}},render(){return this.showTeleport?this.disabled?bf("lazy-teleport",this.$slots):R(Vb,{disabled:this.disabled,to:this.mergedTo},bf("lazy-teleport",this.$slots)):null}}),bl={top:"bottom",bottom:"top",left:"right",right:"left"},vm={start:"end",center:"center",end:"start"},tu={top:"height",bottom:"height",left:"width",right:"width"},YI={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},XI={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},QI={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},bm={top:!0,bottom:!1,left:!0,right:!1},ym={top:"end",bottom:"start",left:"end",right:"start"};function ZI(n,e,t,r,i,o){if(!i||o)return{placement:n,top:0,left:0};const[s,a]=n.split("-");let l=a??"center",d={top:0,left:0};const c=(p,h,g)=>{let m=0,v=0;const b=t[p]-e[h]-e[p];return b>0&&r&&(g?v=bm[h]?b:-b:m=bm[h]?b:-b),{left:m,top:v}},u=s==="left"||s==="right";if(l!=="center"){const p=QI[n],h=bl[p],g=tu[p];if(t[g]>e[g]){if(e[p]+e[g]<t[g]){const m=(t[g]-e[g])/2;e[p]<m||e[h]<m?e[p]<e[h]?(l=vm[a],d=c(g,h,u)):d=c(g,p,u):l="center"}}else t[g]<e[g]&&e[h]<0&&e[p]>e[h]&&(l=vm[a])}else{const p=s==="bottom"||s==="top"?"left":"top",h=bl[p],g=tu[p],m=(t[g]-e[g])/2;(e[p]<m||e[h]<m)&&(e[p]>e[h]?(l=ym[p],d=c(g,p,u)):(l=ym[h],d=c(g,h,u)))}let f=s;return e[s]<t[tu[s]]&&e[s]<e[bl[s]]&&(f=bl[s]),{placement:l!=="center"?`${f}-${l}`:f,left:d.left,top:d.top}}function JI(n,e){return e?XI[n]:YI[n]}function eL(n,e,t,r,i,o){if(o)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+i)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+t.width+i)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+i)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+i)}px`,transform:"translateX(-50%)"}}}const tL=Gi([Gi(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),Gi(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[Gi("> *",{pointerEvents:"all"})])]),Gh=Ce({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=Be("VBinder"),t=At(()=>n.enabled!==void 0?n.enabled:n.show),r=G(null),i=G(null),o=()=>{const{syncTrigger:f}=n;f.includes("scroll")&&e.addScrollListener(l),f.includes("resize")&&e.addResizeListener(l)},s=()=>{e.removeScrollListener(l),e.removeResizeListener(l)};Nt(()=>{t.value&&(l(),o())});const a=No();tL.mount({id:"vueuc/binder",head:!0,anchorMetaName:Vh,ssr:a}),jt(()=>{s()}),LI(()=>{t.value&&l()});const l=()=>{if(!t.value)return;const f=r.value;if(f===null)return;const p=e.targetRef,{x:h,y:g,overlap:m}=n,v=h!==void 0&&g!==void 0?zI(h,g):Jc(p);f.style.setProperty("--v-target-width",`${Math.round(v.width)}px`),f.style.setProperty("--v-target-height",`${Math.round(v.height)}px`);const{width:b,minWidth:y,placement:x,internalShift:E,flip:A}=n;f.setAttribute("v-placement",x),m?f.setAttribute("v-overlap",""):f.removeAttribute("v-overlap");const{style:S}=f;b==="target"?S.width=`${v.width}px`:b!==void 0?S.width=b:S.width="",y==="target"?S.minWidth=`${v.width}px`:y!==void 0?S.minWidth=y:S.minWidth="";const w=Jc(f),T=Jc(i.value),{left:C,top:L,placement:P}=ZI(x,v,w,E,A,m),_=JI(P,m),{left:D,top:k,transform:M}=eL(P,T,v,L,C,m);f.setAttribute("v-placement",P),f.style.setProperty("--v-offset-left",`${Math.round(C)}px`),f.style.setProperty("--v-offset-top",`${Math.round(L)}px`),f.style.transform=`translateX(${D}) translateY(${k}) ${M}`,f.style.setProperty("--v-transform-origin",_),f.style.transformOrigin=_};at(t,f=>{f?(o(),d()):s()});const d=()=>{wn().then(l).catch(f=>console.error(f))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(f=>{at(Ie(n,f),l)}),["teleportDisabled"].forEach(f=>{at(Ie(n,f),d)}),at(Ie(n,"syncTrigger"),f=>{f.includes("resize")?e.addResizeListener(l):e.removeResizeListener(l),f.includes("scroll")?e.addScrollListener(l):e.removeScrollListener(l)});const c=el(),u=At(()=>{const{to:f}=n;if(f!==void 0)return f;c.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:i,followerRef:r,mergedTo:u,syncPosition:l}},render(){return R(gx,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=R("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[R("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?qi(t,[[Hh,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});var Eo=[],nL=function(){return Eo.some(function(n){return n.activeTargets.length>0})},rL=function(){return Eo.some(function(n){return n.skippedTargets.length>0})},xm="ResizeObserver loop completed with undelivered notifications.",iL=function(){var n;typeof ErrorEvent=="function"?n=new ErrorEvent("error",{message:xm}):(n=document.createEvent("Event"),n.initEvent("error",!1,!1),n.message=xm),window.dispatchEvent(n)},Ba;(function(n){n.BORDER_BOX="border-box",n.CONTENT_BOX="content-box",n.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Ba||(Ba={}));var Ro=function(n){return Object.freeze(n)},oL=function(){function n(e,t){this.inlineSize=e,this.blockSize=t,Ro(this)}return n}(),mx=function(){function n(e,t,r,i){return this.x=e,this.y=t,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Ro(this)}return n.prototype.toJSON=function(){var e=this,t=e.x,r=e.y,i=e.top,o=e.right,s=e.bottom,a=e.left,l=e.width,d=e.height;return{x:t,y:r,top:i,right:o,bottom:s,left:a,width:l,height:d}},n.fromRect=function(e){return new n(e.x,e.y,e.width,e.height)},n}(),Wh=function(n){return n instanceof SVGElement&&"getBBox"in n},vx=function(n){if(Wh(n)){var e=n.getBBox(),t=e.width,r=e.height;return!t&&!r}var i=n,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||n.getClientRects().length)},Sm=function(n){var e;if(n instanceof Element)return!0;var t=(e=n==null?void 0:n.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(t&&n instanceof t.Element)},sL=function(n){switch(n.tagName){case"INPUT":if(n.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},ba=typeof window<"u"?window:{},yl=new WeakMap,Cm=/auto|scroll/,aL=/^tb|vertical/,lL=/msie|trident/i.test(ba.navigator&&ba.navigator.userAgent),Or=function(n){return parseFloat(n||"0")},hs=function(n,e,t){return n===void 0&&(n=0),e===void 0&&(e=0),t===void 0&&(t=!1),new oL((t?e:n)||0,(t?n:e)||0)},Tm=Ro({devicePixelContentBoxSize:hs(),borderBoxSize:hs(),contentBoxSize:hs(),contentRect:new mx(0,0,0,0)}),bx=function(n,e){if(e===void 0&&(e=!1),yl.has(n)&&!e)return yl.get(n);if(vx(n))return yl.set(n,Tm),Tm;var t=getComputedStyle(n),r=Wh(n)&&n.ownerSVGElement&&n.getBBox(),i=!lL&&t.boxSizing==="border-box",o=aL.test(t.writingMode||""),s=!r&&Cm.test(t.overflowY||""),a=!r&&Cm.test(t.overflowX||""),l=r?0:Or(t.paddingTop),d=r?0:Or(t.paddingRight),c=r?0:Or(t.paddingBottom),u=r?0:Or(t.paddingLeft),f=r?0:Or(t.borderTopWidth),p=r?0:Or(t.borderRightWidth),h=r?0:Or(t.borderBottomWidth),g=r?0:Or(t.borderLeftWidth),m=u+d,v=l+c,b=g+p,y=f+h,x=a?n.offsetHeight-y-n.clientHeight:0,E=s?n.offsetWidth-b-n.clientWidth:0,A=i?m+b:0,S=i?v+y:0,w=r?r.width:Or(t.width)-A-E,T=r?r.height:Or(t.height)-S-x,C=w+m+E+b,L=T+v+x+y,P=Ro({devicePixelContentBoxSize:hs(Math.round(w*devicePixelRatio),Math.round(T*devicePixelRatio),o),borderBoxSize:hs(C,L,o),contentBoxSize:hs(w,T,o),contentRect:new mx(u,l,w,T)});return yl.set(n,P),P},yx=function(n,e,t){var r=bx(n,t),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case Ba.DEVICE_PIXEL_CONTENT_BOX:return s;case Ba.BORDER_BOX:return i;default:return o}},dL=function(){function n(e){var t=bx(e);this.target=e,this.contentRect=t.contentRect,this.borderBoxSize=Ro([t.borderBoxSize]),this.contentBoxSize=Ro([t.contentBoxSize]),this.devicePixelContentBoxSize=Ro([t.devicePixelContentBoxSize])}return n}(),xx=function(n){if(vx(n))return 1/0;for(var e=0,t=n.parentNode;t;)e+=1,t=t.parentNode;return e},cL=function(){var n=1/0,e=[];Eo.forEach(function(s){if(s.activeTargets.length!==0){var a=[];s.activeTargets.forEach(function(d){var c=new dL(d.target),u=xx(d.target);a.push(c),d.lastReportedSize=yx(d.target,d.observedBox),u<n&&(n=u)}),e.push(function(){s.callback.call(s.observer,a,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var t=0,r=e;t<r.length;t++){var i=r[t];i()}return n},wm=function(n){Eo.forEach(function(t){t.activeTargets.splice(0,t.activeTargets.length),t.skippedTargets.splice(0,t.skippedTargets.length),t.observationTargets.forEach(function(i){i.isActive()&&(xx(i.target)>n?t.activeTargets.push(i):t.skippedTargets.push(i))})})},uL=function(){var n=0;for(wm(n);nL();)n=cL(),wm(n);return rL()&&iL(),n>0},nu,Sx=[],fL=function(){return Sx.splice(0).forEach(function(n){return n()})},hL=function(n){if(!nu){var e=0,t=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return fL()}).observe(t,r),nu=function(){t.textContent="".concat(e?e--:e++)}}Sx.push(n),nu()},pL=function(n){hL(function(){requestAnimationFrame(n)})},Kl=0,gL=function(){return!!Kl},mL=250,vL={attributes:!0,characterData:!0,childList:!0,subtree:!0},Em=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Rm=function(n){return n===void 0&&(n=0),Date.now()+n},ru=!1,bL=function(){function n(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return n.prototype.run=function(e){var t=this;if(e===void 0&&(e=mL),!ru){ru=!0;var r=Rm(e);pL(function(){var i=!1;try{i=uL()}finally{if(ru=!1,e=r-Rm(),!gL())return;i?t.run(1e3):e>0?t.run(e):t.start()}})}},n.prototype.schedule=function(){this.stop(),this.run()},n.prototype.observe=function(){var e=this,t=function(){return e.observer&&e.observer.observe(document.body,vL)};document.body?t():ba.addEventListener("DOMContentLoaded",t)},n.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Em.forEach(function(t){return ba.addEventListener(t,e.listener,!0)}))},n.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),Em.forEach(function(t){return ba.removeEventListener(t,e.listener,!0)}),this.stopped=!0)},n}(),xf=new bL,Am=function(n){!Kl&&n>0&&xf.start(),Kl+=n,!Kl&&xf.stop()},yL=function(n){return!Wh(n)&&!sL(n)&&getComputedStyle(n).display==="inline"},xL=function(){function n(e,t){this.target=e,this.observedBox=t||Ba.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return n.prototype.isActive=function(){var e=yx(this.target,this.observedBox,!0);return yL(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},n}(),SL=function(){function n(e,t){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=t}return n}(),xl=new WeakMap,Im=function(n,e){for(var t=0;t<n.length;t+=1)if(n[t].target===e)return t;return-1},Sl=function(){function n(){}return n.connect=function(e,t){var r=new SL(e,t);xl.set(e,r)},n.observe=function(e,t,r){var i=xl.get(e),o=i.observationTargets.length===0;Im(i.observationTargets,t)<0&&(o&&Eo.push(i),i.observationTargets.push(new xL(t,r&&r.box)),Am(1),xf.schedule())},n.unobserve=function(e,t){var r=xl.get(e),i=Im(r.observationTargets,t),o=r.observationTargets.length===1;i>=0&&(o&&Eo.splice(Eo.indexOf(r),1),r.observationTargets.splice(i,1),Am(-1))},n.disconnect=function(e){var t=this,r=xl.get(e);r.observationTargets.slice().forEach(function(i){return t.unobserve(e,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},n}(),CL=function(){function n(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Sl.connect(this,e)}return n.prototype.observe=function(e,t){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Sm(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Sl.observe(this,e,t)},n.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Sm(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Sl.unobserve(this,e)},n.prototype.disconnect=function(){Sl.disconnect(this)},n.toString=function(){return"function ResizeObserver () { [polyfill code] }"},n}();class TL{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new(typeof window<"u"&&window.ResizeObserver||CL)(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const r=this.elHandlersMap.get(t.target);r!==void 0&&r(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){this.elHandlersMap.has(e)&&(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}const ya=new TL,ws=Ce({name:"ResizeObserver",props:{onResize:Function},setup(n){let e=!1;const t=Bo().proxy;function r(i){const{onResize:o}=n;o!==void 0&&o(i)}Nt(()=>{const i=t.$el;if(i===void 0){pm("resize-observer","$el does not exist.");return}if(i.nextElementSibling!==i.nextSibling&&i.nodeType===3&&i.nodeValue!==""){pm("resize-observer","$el can not be observed (it may be a text node).");return}i.nextElementSibling!==null&&(ya.registerHandler(i.nextElementSibling,r),e=!0)}),jt(()=>{e&&ya.unregisterHandler(t.$el.nextElementSibling)})},render(){return Jb(this.$slots,"default")}});let Cl;function wL(){return typeof document>"u"?!1:(Cl===void 0&&("matchMedia"in window?Cl=window.matchMedia("(pointer:coarse)").matches:Cl=!1),Cl)}let iu;function Lm(){return typeof document>"u"?1:(iu===void 0&&(iu="chrome"in window?window.devicePixelRatio:1),iu)}const Cx="VVirtualListXScroll";function EL({columnsRef:n,renderColRef:e,renderItemWithColsRef:t}){const r=G(0),i=G(0),o=U(()=>{const d=n.value;if(d.length===0)return null;const c=new px(d.length,0);return d.forEach((u,f)=>{c.add(f,u.width)}),c}),s=At(()=>{const d=o.value;return d!==null?Math.max(d.getBound(i.value)-1,0):0}),a=d=>{const c=o.value;return c!==null?c.sum(d):0},l=At(()=>{const d=o.value;return d!==null?Math.min(d.getBound(i.value+r.value)+1,n.value.length-1):0});return st(Cx,{startIndexRef:s,endIndexRef:l,columnsRef:n,renderColRef:e,renderItemWithColsRef:t,getLeft:a}),{listWidthRef:r,scrollLeftRef:i}}const Pm=Ce({name:"VirtualListRow",props:{index:{type:Number,required:!0},item:{type:Object,required:!0}},setup(){const{startIndexRef:n,endIndexRef:e,columnsRef:t,getLeft:r,renderColRef:i,renderItemWithColsRef:o}=Be(Cx);return{startIndex:n,endIndex:e,columns:t,renderCol:i,renderItemWithCols:o,getLeft:r}},render(){const{startIndex:n,endIndex:e,columns:t,renderCol:r,renderItemWithCols:i,getLeft:o,item:s}=this;if(i!=null)return i({itemIndex:this.index,startColIndex:n,endColIndex:e,allColumns:t,item:s,getLeft:o});if(r!=null){const a=[];for(let l=n;l<=e;++l){const d=t[l];a.push(r({column:d,left:o(l),item:s}))}return a}return null}}),RL=Gi(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[Gi("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[Gi("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]),jh=Ce({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},columns:{type:Array,default:()=>[]},renderCol:Function,renderItemWithCols:Function,items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=No();RL.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:Vh,ssr:e}),Nt(()=>{const{defaultScrollIndex:_,defaultScrollKey:D}=n;_!=null?m({index:_}):D!=null&&m({key:D})});let t=!1,r=!1;Eh(()=>{if(t=!1,!r){r=!0;return}m({top:p.value,left:s.value})}),Xd(()=>{t=!0,r||(r=!0)});const i=At(()=>{if(n.renderCol==null&&n.renderItemWithCols==null||n.columns.length===0)return;let _=0;return n.columns.forEach(D=>{_+=D.width}),_}),o=U(()=>{const _=new Map,{keyField:D}=n;return n.items.forEach((k,M)=>{_.set(k[D],M)}),_}),{scrollLeftRef:s,listWidthRef:a}=EL({columnsRef:Ie(n,"columns"),renderColRef:Ie(n,"renderCol"),renderItemWithColsRef:Ie(n,"renderItemWithCols")}),l=G(null),d=G(void 0),c=new Map,u=U(()=>{const{items:_,itemSize:D,keyField:k}=n,M=new px(_.length,D);return _.forEach((O,$)=>{const K=O[k],Y=c.get(K);Y!==void 0&&M.add($,Y)}),M}),f=G(0),p=G(0),h=At(()=>Math.max(u.value.getBound(p.value-pn(n.paddingTop))-1,0)),g=U(()=>{const{value:_}=d;if(_===void 0)return[];const{items:D,itemSize:k}=n,M=h.value,O=Math.min(M+Math.ceil(_/k+1),D.length-1),$=[];for(let K=M;K<=O;++K)$.push(D[K]);return $}),m=(_,D)=>{if(typeof _=="number"){x(_,D,"auto");return}const{left:k,top:M,index:O,key:$,position:K,behavior:Y,debounce:H=!0}=_;if(k!==void 0||M!==void 0)x(k,M,Y);else if(O!==void 0)y(O,Y,H);else if($!==void 0){const B=o.value.get($);B!==void 0&&y(B,Y,H)}else K==="bottom"?x(0,Number.MAX_SAFE_INTEGER,Y):K==="top"&&x(0,0,Y)};let v,b=null;function y(_,D,k){const{value:M}=u,O=M.sum(_)+pn(n.paddingTop);if(!k)l.value.scrollTo({left:0,top:O,behavior:D});else{v=_,b!==null&&window.clearTimeout(b),b=window.setTimeout(()=>{v=void 0,b=null},16);const{scrollTop:$,offsetHeight:K}=l.value;if(O>$){const Y=M.get(_);O+Y<=$+K||l.value.scrollTo({left:0,top:O+Y-K,behavior:D})}else l.value.scrollTo({left:0,top:O,behavior:D})}}function x(_,D,k){l.value.scrollTo({left:_,top:D,behavior:k})}function E(_,D){var k,M,O;if(t||n.ignoreItemResize||P(D.target))return;const{value:$}=u,K=o.value.get(_),Y=$.get(K),H=(O=(M=(k=D.borderBoxSize)===null||k===void 0?void 0:k[0])===null||M===void 0?void 0:M.blockSize)!==null&&O!==void 0?O:D.contentRect.height;if(H===Y)return;H-n.itemSize===0?c.delete(_):c.set(_,H-n.itemSize);const X=H-Y;if(X===0)return;$.add(K,X);const se=l.value;if(se!=null){if(v===void 0){const pe=$.sum(K);se.scrollTop>pe&&se.scrollBy(0,X)}else if(K<v)se.scrollBy(0,X);else if(K===v){const pe=$.sum(K);H+pe>se.scrollTop+se.offsetHeight&&se.scrollBy(0,X)}L()}f.value++}const A=!wL();let S=!1;function w(_){var D;(D=n.onScroll)===null||D===void 0||D.call(n,_),(!A||!S)&&L()}function T(_){var D;if((D=n.onWheel)===null||D===void 0||D.call(n,_),A){const k=l.value;if(k!=null){if(_.deltaX===0&&(k.scrollTop===0&&_.deltaY<=0||k.scrollTop+k.offsetHeight>=k.scrollHeight&&_.deltaY>=0))return;_.preventDefault(),k.scrollTop+=_.deltaY/Lm(),k.scrollLeft+=_.deltaX/Lm(),L(),S=!0,gd(()=>{S=!1})}}}function C(_){if(t||P(_.target))return;if(n.renderCol==null&&n.renderItemWithCols==null){if(_.contentRect.height===d.value)return}else if(_.contentRect.height===d.value&&_.contentRect.width===a.value)return;d.value=_.contentRect.height,a.value=_.contentRect.width;const{onResize:D}=n;D!==void 0&&D(_)}function L(){const{value:_}=l;_!=null&&(p.value=_.scrollTop,s.value=_.scrollLeft)}function P(_){let D=_;for(;D!==null;){if(D.style.display==="none")return!0;D=D.parentElement}return!1}return{listHeight:d,listStyle:{overflow:"auto"},keyToIndex:o,itemsStyle:U(()=>{const{itemResizable:_}=n,D=Zt(u.value.sum());return f.value,[n.itemsStyle,{boxSizing:"content-box",width:Zt(i.value),height:_?"":D,minHeight:_?D:"",paddingTop:Zt(n.paddingTop),paddingBottom:Zt(n.paddingBottom)}]}),visibleItemsStyle:U(()=>(f.value,{transform:`translateY(${Zt(u.value.sum(h.value))})`})),viewportItems:g,listElRef:l,itemsElRef:G(null),scrollTo:m,handleListResize:C,handleListScroll:w,handleListWheel:T,handleItemResize:E}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:r}=this;return R(ws,{onResize:this.handleListResize},{default:()=>{var i,o;return R("div",Ar(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.handleListWheel,ref:"listElRef"}),[this.items.length!==0?R("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[R(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>{const{renderCol:s,renderItemWithCols:a}=this;return this.viewportItems.map(l=>{const d=l[e],c=t.get(d),u=s!=null?R(Pm,{index:c,item:l}):void 0,f=a!=null?R(Pm,{index:c,item:l}):void 0,p=this.$slots.default({item:l,renderedCols:u,renderedItemWithCols:f,index:c})[0];return n?R(ws,{key:d,onResize:h=>this.handleItemResize(d,h)},{default:()=>p}):(p.key=d,p)})}})]):(o=(i=this.$slots).empty)===null||o===void 0?void 0:o.call(i)])}})}}),oi="v-hidden",AL=Gi("[v-hidden]",{display:"none!important"}),_m=Ce({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateCount:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=G(null),r=G(null);function i(s){const{value:a}=t,{getCounter:l,getTail:d}=n;let c;if(l!==void 0?c=l():c=r.value,!a||!c)return;c.hasAttribute(oi)&&c.removeAttribute(oi);const{children:u}=a;if(s.showAllItemsBeforeCalculate)for(const y of u)y.hasAttribute(oi)&&y.removeAttribute(oi);const f=a.offsetWidth,p=[],h=e.tail?d==null?void 0:d():null;let g=h?h.offsetWidth:0,m=!1;const v=a.children.length-(e.tail?1:0);for(let y=0;y<v-1;++y){if(y<0)continue;const x=u[y];if(m){x.hasAttribute(oi)||x.setAttribute(oi,"");continue}else x.hasAttribute(oi)&&x.removeAttribute(oi);const E=x.offsetWidth;if(g+=E,p[y]=E,g>f){const{updateCounter:A}=n;for(let S=y;S>=0;--S){const w=v-1-S;A!==void 0?A(w):c.textContent=`${w}`;const T=c.offsetWidth;if(g-=p[S],g+T<=f||S===0){m=!0,y=S-1,h&&(y===-1?(h.style.maxWidth=`${f-T}px`,h.style.boxSizing="border-box"):h.style.maxWidth="");const{onUpdateCount:C}=n;C&&C(w);break}}}}const{onUpdateOverflow:b}=n;m?b!==void 0&&b(!0):(b!==void 0&&b(!1),c.setAttribute(oi,""))}const o=No();return AL.mount({id:"vueuc/overflow",head:!0,anchorMetaName:Vh,ssr:o}),Nt(()=>i({showAllItemsBeforeCalculate:!1})),{selfRef:t,counterRef:r,sync:i}},render(){const{$slots:n}=this;return wn(()=>this.sync({showAllItemsBeforeCalculate:!1})),R("div",{class:"v-overflow",ref:"selfRef"},[Jb(n,"default"),n.counter?n.counter():R("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});function Tx(n){return n instanceof HTMLElement}function wx(n){for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(Tx(t)&&(Rx(t)||wx(t)))return!0}return!1}function Ex(n){for(let e=n.childNodes.length-1;e>=0;e--){const t=n.childNodes[e];if(Tx(t)&&(Rx(t)||Ex(t)))return!0}return!1}function Rx(n){if(!IL(n))return!1;try{n.focus({preventScroll:!0})}catch{}return document.activeElement===n}function IL(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let Ys=[];const Ax=Ce({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=ko(),t=G(null),r=G(null);let i=!1,o=!1;const s=typeof document>"u"?null:document.activeElement;function a(){return Ys[Ys.length-1]===e}function l(m){var v;m.code==="Escape"&&a()&&((v=n.onEsc)===null||v===void 0||v.call(n,m))}Nt(()=>{at(()=>n.active,m=>{m?(u(),Tt("keydown",document,l)):(bt("keydown",document,l),i&&f())},{immediate:!0})}),jt(()=>{bt("keydown",document,l),i&&f()});function d(m){if(!o&&a()){const v=c();if(v===null||v.contains(Ts(m)))return;p("first")}}function c(){const m=t.value;if(m===null)return null;let v=m;for(;v=v.nextSibling,!(v===null||v instanceof Element&&v.tagName==="DIV"););return v}function u(){var m;if(!n.disabled){if(Ys.push(e),n.autoFocus){const{initialFocusTo:v}=n;v===void 0?p("first"):(m=mm(v))===null||m===void 0||m.focus({preventScroll:!0})}i=!0,document.addEventListener("focus",d,!0)}}function f(){var m;if(n.disabled||(document.removeEventListener("focus",d,!0),Ys=Ys.filter(b=>b!==e),a()))return;const{finalFocusTo:v}=n;v!==void 0?(m=mm(v))===null||m===void 0||m.focus({preventScroll:!0}):n.returnFocusOnDeactivated&&s instanceof HTMLElement&&(o=!0,s.focus({preventScroll:!0}),o=!1)}function p(m){if(a()&&n.active){const v=t.value,b=r.value;if(v!==null&&b!==null){const y=c();if(y==null||y===b){o=!0,v.focus({preventScroll:!0}),o=!1;return}o=!0;const x=m==="first"?wx(y):Ex(y);o=!1,x||(o=!0,v.focus({preventScroll:!0}),o=!1)}}}function h(m){if(o)return;const v=c();v!==null&&(m.relatedTarget!==null&&v.contains(m.relatedTarget)?p("last"):p("first"))}function g(m){o||(m.relatedTarget!==null&&m.relatedTarget===t.value?p("last"):p("first"))}return{focusableStartRef:t,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:h,handleEndFocus:g}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return R(mt,null,[R("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),R("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});function Ix(n,e){e&&(Nt(()=>{const{value:t}=n;t&&ya.registerHandler(t,e)}),at(n,(t,r)=>{r&&ya.unregisterHandler(r)},{deep:!1}),jt(()=>{const{value:t}=n;t&&ya.unregisterHandler(t)}))}function vd(n){return n.replace(/#|\(|\)|,|\s|\./g,"_")}const LL=/^(\d|\.)+$/,km=/(\d|\.)+/;function an(n,{c:e=1,offset:t=0,attachPx:r=!0}={}){if(typeof n=="number"){const i=(n+t)*e;return i===0?"0":`${i}px`}else if(typeof n=="string")if(LL.test(n)){const i=(Number(n)+t)*e;return r?i===0?"0":`${i}px`:`${i}`}else{const i=km.exec(n);return i?n.replace(km,String((Number(i[0])+t)*e)):n}return n}function Dm(n){const{left:e,right:t,top:r,bottom:i}=Hn(n);return`${r} ${e} ${i} ${t}`}function PL(n,e){if(!n)return;const t=document.createElement("a");t.href=n,e!==void 0&&(t.download=e),document.body.appendChild(t),t.click(),document.body.removeChild(t)}let ou;function _L(){return ou===void 0&&(ou=navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),ou}const Lx=new WeakSet;function kL(n){Lx.add(n)}function DL(n){return!Lx.has(n)}function Om(n){switch(typeof n){case"string":return n||void 0;case"number":return String(n);default:return}}function Mm(n){switch(n){case"tiny":return"mini";case"small":return"tiny";case"medium":return"small";case"large":return"medium";case"huge":return"large"}throw new Error(`${n} has no smaller size.`)}function Lr(n,e){console.error(`[naive/${n}]: ${e}`)}function Kh(n,e){throw new Error(`[naive/${n}]: ${e}`)}function we(n,...e){if(Array.isArray(n))n.forEach(t=>we(t,...e));else return n(...e)}function Px(n){return e=>{e?n.value=e.$el:n.value=null}}function Na(n,e=!0,t=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&t.push(In(String(r)));return}if(Array.isArray(r)){Na(r,e,t);return}if(r.type===mt){if(r.children===null)return;Array.isArray(r.children)&&Na(r.children,e,t)}else{if(r.type===un&&e)return;t.push(r)}}}),t}function OL(n,e="default",t=void 0){const r=n[e];if(!r)return Lr("getFirstSlotVNode",`slot[${e}] is empty`),null;const i=Na(r(t));return i.length===1?i[0]:(Lr("getFirstSlotVNode",`slot[${e}] should have exactly one child`),null)}function ML(n,e,t){if(!e)return null;const r=Na(e(t));return r.length===1?r[0]:(Lr("getFirstSlotVNode",`slot[${n}] should have exactly one child`),null)}function FL(n,e="default",t=[]){const i=n.$slots[e];return i===void 0?t:i()}function Do(n,e=[],t){const r={};return e.forEach(i=>{r[i]=n[i]}),Object.assign(r,t)}function Es(n){return Object.keys(n)}function xa(n){const e=n.filter(t=>t!==void 0);if(e.length!==0)return e.length===1?e[0]:t=>{n.forEach(r=>{r&&r(t)})}}function lc(n,e=[],t){const r={};return Object.getOwnPropertyNames(n).forEach(o=>{e.includes(o)||(r[o]=n[o])}),Object.assign(r,t)}function gn(n,...e){return typeof n=="function"?n(...e):typeof n=="string"?In(n):typeof n=="number"?In(String(n)):null}function Sr(n){return n.some(e=>ys(e)?!(e.type===un||e.type===mt&&!Sr(e.children)):!0)?n:null}function Er(n,e){return n&&Sr(n())||e()}function $L(n,e,t){return n&&Sr(n(e))||t(e)}function Ct(n,e){const t=n&&Sr(n());return e(t||null)}function ps(n){return!(n&&Sr(n()))}const Sf=Ce({render(){var n,e;return(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n)}}),Pr="n-config-provider",bd="n";function yt(n={},e={defaultBordered:!0}){const t=Be(Pr,null);return{inlineThemeDisabled:t==null?void 0:t.inlineThemeDisabled,mergedRtlRef:t==null?void 0:t.mergedRtlRef,mergedComponentPropsRef:t==null?void 0:t.mergedComponentPropsRef,mergedBreakpointsRef:t==null?void 0:t.mergedBreakpointsRef,mergedBorderedRef:U(()=>{var r,i;const{bordered:o}=n;return o!==void 0?o:(i=(r=t==null?void 0:t.mergedBorderedRef.value)!==null&&r!==void 0?r:e.defaultBordered)!==null&&i!==void 0?i:!0}),mergedClsPrefixRef:t?t.mergedClsPrefixRef:Ch(bd),namespaceRef:U(()=>t==null?void 0:t.mergedNamespaceRef.value)}}function _x(){const n=Be(Pr,null);return n?n.mergedClsPrefixRef:Ch(bd)}function Gt(n,e,t,r){t||Kh("useThemeClass","cssVarsRef is not passed");const i=Be(Pr,null),o=i==null?void 0:i.mergedThemeHashRef,s=i==null?void 0:i.styleMountTarget,a=G(""),l=No();let d;const c=`__${n}`,u=()=>{let f=c;const p=e?e.value:void 0,h=o==null?void 0:o.value;h&&(f+=`-${h}`),p&&(f+=`-${p}`);const{themeOverrides:g,builtinThemeOverrides:m}=r;g&&(f+=`-${Ma(JSON.stringify(g))}`),m&&(f+=`-${Ma(JSON.stringify(m))}`),a.value=f,d=()=>{const v=t.value;let b="";for(const y in v)b+=`${y}: ${v[y]};`;Z(`.${f}`,b).mount({id:f,ssr:l,parent:s}),d=void 0}};return Vn(()=>{u()}),{themeClass:a,onRender:()=>{d==null||d()}}}const Cf="n-form-item";function oo(n,{defaultSize:e="medium",mergedSize:t,mergedDisabled:r}={}){const i=Be(Cf,null);st(Cf,null);const o=U(t?()=>t(i):()=>{const{size:l}=n;if(l)return l;if(i){const{mergedSize:d}=i;if(d.value!==void 0)return d.value}return e}),s=U(r?()=>r(i):()=>{const{disabled:l}=n;return l!==void 0?l:i?i.disabled.value:!1}),a=U(()=>{const{status:l}=n;return l||(i==null?void 0:i.mergedValidationStatus.value)});return jt(()=>{i&&i.restoreValidation()}),{mergedSizeRef:o,mergedDisabledRef:s,mergedStatusRef:a,nTriggerFormBlur(){i&&i.handleContentBlur()},nTriggerFormChange(){i&&i.handleContentChange()},nTriggerFormFocus(){i&&i.handleContentFocus()},nTriggerFormInput(){i&&i.handleContentInput()}}}const BL={name:"en-US",global:{undo:"Undo",redo:"Redo",confirm:"Confirm",clear:"Clear"},Popconfirm:{positiveText:"Confirm",negativeText:"Cancel"},Cascader:{placeholder:"Please Select",loading:"Loading",loadingRequiredMessage:n=>`Please load all ${n}'s descendants before checking it.`},Time:{dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss"},DatePicker:{yearFormat:"yyyy",monthFormat:"MMM",dayFormat:"eeeeee",yearTypeFormat:"yyyy",monthTypeFormat:"yyyy-MM",dateFormat:"yyyy-MM-dd",dateTimeFormat:"yyyy-MM-dd HH:mm:ss",quarterFormat:"yyyy-qqq",weekFormat:"YYYY-w",clear:"Clear",now:"Now",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",datePlaceholder:"Select Date",datetimePlaceholder:"Select Date and Time",monthPlaceholder:"Select Month",yearPlaceholder:"Select Year",quarterPlaceholder:"Select Quarter",weekPlaceholder:"Select Week",startDatePlaceholder:"Start Date",endDatePlaceholder:"End Date",startDatetimePlaceholder:"Start Date and Time",endDatetimePlaceholder:"End Date and Time",startMonthPlaceholder:"Start Month",endMonthPlaceholder:"End Month",monthBeforeYear:!0,firstDayOfWeek:6,today:"Today"},DataTable:{checkTableAll:"Select all in the table",uncheckTableAll:"Unselect all in the table",confirm:"Confirm",clear:"Clear"},LegacyTransfer:{sourceTitle:"Source",targetTitle:"Target"},Transfer:{selectAll:"Select all",unselectAll:"Unselect all",clearAll:"Clear",total:n=>`Total ${n} items`,selected:n=>`${n} items selected`},Empty:{description:"No Data"},Select:{placeholder:"Please Select"},TimePicker:{placeholder:"Select Time",positiveText:"OK",negativeText:"Cancel",now:"Now",clear:"Clear"},Pagination:{goto:"Goto",selectionSuffix:"page"},DynamicTags:{add:"Add"},Log:{loading:"Loading"},Input:{placeholder:"Please Input"},InputNumber:{placeholder:"Please Input"},DynamicInput:{create:"Create"},ThemeEditor:{title:"Theme Editor",clearAllVars:"Clear All Variables",clearSearch:"Clear Search",filterCompName:"Filter Component Name",filterVarName:"Filter Variable Name",import:"Import",export:"Export",restore:"Reset to Default"},Image:{tipPrevious:"Previous picture (←)",tipNext:"Next picture (→)",tipCounterclockwise:"Counterclockwise",tipClockwise:"Clockwise",tipZoomOut:"Zoom out",tipZoomIn:"Zoom in",tipDownload:"Download",tipClose:"Close (Esc)",tipOriginalSize:"Zoom to original size"}};function su(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}function Xs(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let i;if(r==="formatting"&&n.formattingValues){const s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;i=n.formattingValues[a]||n.formattingValues[s]}else{const s=n.defaultWidth,a=t!=null&&t.width?String(t.width):n.defaultWidth;i=n.values[a]||n.values[s]}const o=n.argumentCallback?n.argumentCallback(e):e;return i[o]}}function Qs(n){return(e,t={})=>{const r=t.width,i=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],o=e.match(i);if(!o)return null;const s=o[0],a=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(a)?zL(a,u=>u.test(s)):NL(a,u=>u.test(s));let d;d=n.valueCallback?n.valueCallback(l):l,d=t.valueCallback?t.valueCallback(d):d;const c=e.slice(s.length);return{value:d,rest:c}}}function NL(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function zL(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function UL(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const i=r[0],o=e.match(n.parsePattern);if(!o)return null;let s=n.valueCallback?n.valueCallback(o[0]):o[0];s=t.valueCallback?t.valueCallback(s):s;const a=e.slice(i.length);return{value:s,rest:a}}}const HL={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},VL=(n,e,t)=>{let r;const i=HL[n];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r},GL={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},WL=(n,e,t,r)=>GL[n],jL={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},KL={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qL={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},YL={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},XL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},QL={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ZL=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},JL={ordinalNumber:ZL,era:Xs({values:jL,defaultWidth:"wide"}),quarter:Xs({values:KL,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Xs({values:qL,defaultWidth:"wide"}),day:Xs({values:YL,defaultWidth:"wide"}),dayPeriod:Xs({values:XL,defaultWidth:"wide",formattingValues:QL,defaultFormattingWidth:"wide"})},eP=/^(\d+)(th|st|nd|rd)?/i,tP=/\d+/i,nP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},rP={any:[/^b/i,/^(a|c)/i]},iP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oP={any:[/1/i,/2/i,/3/i,/4/i]},sP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},aP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},lP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},uP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},fP={ordinalNumber:UL({matchPattern:eP,parsePattern:tP,valueCallback:n=>parseInt(n,10)}),era:Qs({matchPatterns:nP,defaultMatchWidth:"wide",parsePatterns:rP,defaultParseWidth:"any"}),quarter:Qs({matchPatterns:iP,defaultMatchWidth:"wide",parsePatterns:oP,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Qs({matchPatterns:sP,defaultMatchWidth:"wide",parsePatterns:aP,defaultParseWidth:"any"}),day:Qs({matchPatterns:lP,defaultMatchWidth:"wide",parsePatterns:dP,defaultParseWidth:"any"}),dayPeriod:Qs({matchPatterns:cP,defaultMatchWidth:"any",parsePatterns:uP,defaultParseWidth:"any"})},hP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},pP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},gP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mP={date:su({formats:hP,defaultWidth:"full"}),time:su({formats:pP,defaultWidth:"full"}),dateTime:su({formats:gP,defaultWidth:"full"})},vP={code:"en-US",formatDistance:VL,formatLong:mP,formatRelative:WL,localize:JL,match:fP,options:{weekStartsOn:0,firstWeekContainsDate:1}},bP={name:"en-US",locale:vP};var kx=typeof global=="object"&&global&&global.Object===Object&&global,yP=typeof self=="object"&&self&&self.Object===Object&&self,ei=kx||yP||Function("return this")(),Xi=ei.Symbol,Dx=Object.prototype,xP=Dx.hasOwnProperty,SP=Dx.toString,Zs=Xi?Xi.toStringTag:void 0;function CP(n){var e=xP.call(n,Zs),t=n[Zs];try{n[Zs]=void 0;var r=!0}catch{}var i=SP.call(n);return r&&(e?n[Zs]=t:delete n[Zs]),i}var TP=Object.prototype,wP=TP.toString;function EP(n){return wP.call(n)}var RP="[object Null]",AP="[object Undefined]",Fm=Xi?Xi.toStringTag:void 0;function zo(n){return n==null?n===void 0?AP:RP:Fm&&Fm in Object(n)?CP(n):EP(n)}function Qi(n){return n!=null&&typeof n=="object"}var IP="[object Symbol]";function qh(n){return typeof n=="symbol"||Qi(n)&&zo(n)==IP}function Ox(n,e){for(var t=-1,r=n==null?0:n.length,i=Array(r);++t<r;)i[t]=e(n[t],t,n);return i}var gr=Array.isArray,LP=1/0,$m=Xi?Xi.prototype:void 0,Bm=$m?$m.toString:void 0;function Mx(n){if(typeof n=="string")return n;if(gr(n))return Ox(n,Mx)+"";if(qh(n))return Bm?Bm.call(n):"";var e=n+"";return e=="0"&&1/n==-LP?"-0":e}function so(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}function Yh(n){return n}var PP="[object AsyncFunction]",_P="[object Function]",kP="[object GeneratorFunction]",DP="[object Proxy]";function Xh(n){if(!so(n))return!1;var e=zo(n);return e==_P||e==kP||e==PP||e==DP}var au=ei["__core-js_shared__"],Nm=function(){var n=/[^.]+$/.exec(au&&au.keys&&au.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function OP(n){return!!Nm&&Nm in n}var MP=Function.prototype,FP=MP.toString;function Uo(n){if(n!=null){try{return FP.call(n)}catch{}try{return n+""}catch{}}return""}var $P=/[\\^$.*+?()[\]{}|]/g,BP=/^\[object .+?Constructor\]$/,NP=Function.prototype,zP=Object.prototype,UP=NP.toString,HP=zP.hasOwnProperty,VP=RegExp("^"+UP.call(HP).replace($P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function GP(n){if(!so(n)||OP(n))return!1;var e=Xh(n)?VP:BP;return e.test(Uo(n))}function WP(n,e){return n==null?void 0:n[e]}function Ho(n,e){var t=WP(n,e);return GP(t)?t:void 0}var Tf=Ho(ei,"WeakMap"),zm=Object.create,jP=function(){function n(){}return function(e){if(!so(e))return{};if(zm)return zm(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}();function KP(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}function qP(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var YP=800,XP=16,QP=Date.now;function ZP(n){var e=0,t=0;return function(){var r=QP(),i=XP-(r-t);if(t=r,i>0){if(++e>=YP)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}function JP(n){return function(){return n}}var yd=function(){try{var n=Ho(Object,"defineProperty");return n({},"",{}),n}catch{}}(),e_=yd?function(n,e){return yd(n,"toString",{configurable:!0,enumerable:!1,value:JP(e),writable:!0})}:Yh,t_=ZP(e_),n_=9007199254740991,r_=/^(?:0|[1-9]\d*)$/;function Qh(n,e){var t=typeof n;return e=e??n_,!!e&&(t=="number"||t!="symbol"&&r_.test(n))&&n>-1&&n%1==0&&n<e}function Zh(n,e,t){e=="__proto__"&&yd?yd(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}function rl(n,e){return n===e||n!==n&&e!==e}var i_=Object.prototype,o_=i_.hasOwnProperty;function s_(n,e,t){var r=n[e];(!(o_.call(n,e)&&rl(r,t))||t===void 0&&!(e in n))&&Zh(n,e,t)}function a_(n,e,t,r){var i=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=void 0;l===void 0&&(l=n[a]),i?Zh(t,a,l):s_(t,a,l)}return t}var Um=Math.max;function l_(n,e,t){return e=Um(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,o=Um(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(s),KP(n,this,a)}}function d_(n,e){return t_(l_(n,e,Yh),n+"")}var c_=9007199254740991;function Jh(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=c_}function Ds(n){return n!=null&&Jh(n.length)&&!Xh(n)}function u_(n,e,t){if(!so(t))return!1;var r=typeof e;return(r=="number"?Ds(t)&&Qh(e,t.length):r=="string"&&e in t)?rl(t[e],n):!1}function f_(n){return d_(function(e,t){var r=-1,i=t.length,o=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(o=n.length>3&&typeof o=="function"?(i--,o):void 0,s&&u_(t[0],t[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,o)}return e})}var h_=Object.prototype;function ep(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||h_;return n===t}function p_(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var g_="[object Arguments]";function Hm(n){return Qi(n)&&zo(n)==g_}var Fx=Object.prototype,m_=Fx.hasOwnProperty,v_=Fx.propertyIsEnumerable,xd=Hm(function(){return arguments}())?Hm:function(n){return Qi(n)&&m_.call(n,"callee")&&!v_.call(n,"callee")};function b_(){return!1}var $x=typeof er=="object"&&er&&!er.nodeType&&er,Vm=$x&&typeof tr=="object"&&tr&&!tr.nodeType&&tr,y_=Vm&&Vm.exports===$x,Gm=y_?ei.Buffer:void 0,x_=Gm?Gm.isBuffer:void 0,Sd=x_||b_,S_="[object Arguments]",C_="[object Array]",T_="[object Boolean]",w_="[object Date]",E_="[object Error]",R_="[object Function]",A_="[object Map]",I_="[object Number]",L_="[object Object]",P_="[object RegExp]",__="[object Set]",k_="[object String]",D_="[object WeakMap]",O_="[object ArrayBuffer]",M_="[object DataView]",F_="[object Float32Array]",$_="[object Float64Array]",B_="[object Int8Array]",N_="[object Int16Array]",z_="[object Int32Array]",U_="[object Uint8Array]",H_="[object Uint8ClampedArray]",V_="[object Uint16Array]",G_="[object Uint32Array]",zt={};zt[F_]=zt[$_]=zt[B_]=zt[N_]=zt[z_]=zt[U_]=zt[H_]=zt[V_]=zt[G_]=!0;zt[S_]=zt[C_]=zt[O_]=zt[T_]=zt[M_]=zt[w_]=zt[E_]=zt[R_]=zt[A_]=zt[I_]=zt[L_]=zt[P_]=zt[__]=zt[k_]=zt[D_]=!1;function W_(n){return Qi(n)&&Jh(n.length)&&!!zt[zo(n)]}function j_(n){return function(e){return n(e)}}var Bx=typeof er=="object"&&er&&!er.nodeType&&er,Sa=Bx&&typeof tr=="object"&&tr&&!tr.nodeType&&tr,K_=Sa&&Sa.exports===Bx,lu=K_&&kx.process,Wm=function(){try{var n=Sa&&Sa.require&&Sa.require("util").types;return n||lu&&lu.binding&&lu.binding("util")}catch{}}(),jm=Wm&&Wm.isTypedArray,tp=jm?j_(jm):W_,q_=Object.prototype,Y_=q_.hasOwnProperty;function Nx(n,e){var t=gr(n),r=!t&&xd(n),i=!t&&!r&&Sd(n),o=!t&&!r&&!i&&tp(n),s=t||r||i||o,a=s?p_(n.length,String):[],l=a.length;for(var d in n)(e||Y_.call(n,d))&&!(s&&(d=="length"||i&&(d=="offset"||d=="parent")||o&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Qh(d,l)))&&a.push(d);return a}function zx(n,e){return function(t){return n(e(t))}}var X_=zx(Object.keys,Object),Q_=Object.prototype,Z_=Q_.hasOwnProperty;function J_(n){if(!ep(n))return X_(n);var e=[];for(var t in Object(n))Z_.call(n,t)&&t!="constructor"&&e.push(t);return e}function np(n){return Ds(n)?Nx(n):J_(n)}function ek(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var tk=Object.prototype,nk=tk.hasOwnProperty;function rk(n){if(!so(n))return ek(n);var e=ep(n),t=[];for(var r in n)r=="constructor"&&(e||!nk.call(n,r))||t.push(r);return t}function Ux(n){return Ds(n)?Nx(n,!0):rk(n)}var ik=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ok=/^\w*$/;function rp(n,e){if(gr(n))return!1;var t=typeof n;return t=="number"||t=="symbol"||t=="boolean"||n==null||qh(n)?!0:ok.test(n)||!ik.test(n)||e!=null&&n in Object(e)}var za=Ho(Object,"create");function sk(){this.__data__=za?za(null):{},this.size=0}function ak(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var lk="__lodash_hash_undefined__",dk=Object.prototype,ck=dk.hasOwnProperty;function uk(n){var e=this.__data__;if(za){var t=e[n];return t===lk?void 0:t}return ck.call(e,n)?e[n]:void 0}var fk=Object.prototype,hk=fk.hasOwnProperty;function pk(n){var e=this.__data__;return za?e[n]!==void 0:hk.call(e,n)}var gk="__lodash_hash_undefined__";function mk(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=za&&e===void 0?gk:e,this}function Oo(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Oo.prototype.clear=sk;Oo.prototype.delete=ak;Oo.prototype.get=uk;Oo.prototype.has=pk;Oo.prototype.set=mk;function vk(){this.__data__=[],this.size=0}function dc(n,e){for(var t=n.length;t--;)if(rl(n[t][0],e))return t;return-1}var bk=Array.prototype,yk=bk.splice;function xk(n){var e=this.__data__,t=dc(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():yk.call(e,t,1),--this.size,!0}function Sk(n){var e=this.__data__,t=dc(e,n);return t<0?void 0:e[t][1]}function Ck(n){return dc(this.__data__,n)>-1}function Tk(n,e){var t=this.__data__,r=dc(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}function Si(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Si.prototype.clear=vk;Si.prototype.delete=xk;Si.prototype.get=Sk;Si.prototype.has=Ck;Si.prototype.set=Tk;var Ua=Ho(ei,"Map");function wk(){this.size=0,this.__data__={hash:new Oo,map:new(Ua||Si),string:new Oo}}function Ek(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}function cc(n,e){var t=n.__data__;return Ek(e)?t[typeof e=="string"?"string":"hash"]:t.map}function Rk(n){var e=cc(this,n).delete(n);return this.size-=e?1:0,e}function Ak(n){return cc(this,n).get(n)}function Ik(n){return cc(this,n).has(n)}function Lk(n,e){var t=cc(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}function Ci(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ci.prototype.clear=wk;Ci.prototype.delete=Rk;Ci.prototype.get=Ak;Ci.prototype.has=Ik;Ci.prototype.set=Lk;var Pk="Expected a function";function ip(n,e){if(typeof n!="function"||e!=null&&typeof e!="function")throw new TypeError(Pk);var t=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=t.cache;if(o.has(i))return o.get(i);var s=n.apply(this,r);return t.cache=o.set(i,s)||o,s};return t.cache=new(ip.Cache||Ci),t}ip.Cache=Ci;var _k=500;function kk(n){var e=ip(n,function(r){return t.size===_k&&t.clear(),r}),t=e.cache;return e}var Dk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ok=/\\(\\)?/g,Mk=kk(function(n){var e=[];return n.charCodeAt(0)===46&&e.push(""),n.replace(Dk,function(t,r,i,o){e.push(i?o.replace(Ok,"$1"):r||t)}),e});function Hx(n){return n==null?"":Mx(n)}function Vx(n,e){return gr(n)?n:rp(n,e)?[n]:Mk(Hx(n))}var Fk=1/0;function uc(n){if(typeof n=="string"||qh(n))return n;var e=n+"";return e=="0"&&1/n==-Fk?"-0":e}function Gx(n,e){e=Vx(e,n);for(var t=0,r=e.length;n!=null&&t<r;)n=n[uc(e[t++])];return t&&t==r?n:void 0}function Ha(n,e,t){var r=n==null?void 0:Gx(n,e);return r===void 0?t:r}function $k(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}var Wx=zx(Object.getPrototypeOf,Object),Bk="[object Object]",Nk=Function.prototype,zk=Object.prototype,jx=Nk.toString,Uk=zk.hasOwnProperty,Hk=jx.call(Object);function Vk(n){if(!Qi(n)||zo(n)!=Bk)return!1;var e=Wx(n);if(e===null)return!0;var t=Uk.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&jx.call(t)==Hk}function Gk(n,e,t){var r=-1,i=n.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=n[r+e];return o}function Wk(n,e,t){var r=n.length;return t=t===void 0?r:t,!e&&t>=r?n:Gk(n,e,t)}var jk="\\ud800-\\udfff",Kk="\\u0300-\\u036f",qk="\\ufe20-\\ufe2f",Yk="\\u20d0-\\u20ff",Xk=Kk+qk+Yk,Qk="\\ufe0e\\ufe0f",Zk="\\u200d",Jk=RegExp("["+Zk+jk+Xk+Qk+"]");function Kx(n){return Jk.test(n)}function eD(n){return n.split("")}var qx="\\ud800-\\udfff",tD="\\u0300-\\u036f",nD="\\ufe20-\\ufe2f",rD="\\u20d0-\\u20ff",iD=tD+nD+rD,oD="\\ufe0e\\ufe0f",sD="["+qx+"]",wf="["+iD+"]",Ef="\\ud83c[\\udffb-\\udfff]",aD="(?:"+wf+"|"+Ef+")",Yx="[^"+qx+"]",Xx="(?:\\ud83c[\\udde6-\\uddff]){2}",Qx="[\\ud800-\\udbff][\\udc00-\\udfff]",lD="\\u200d",Zx=aD+"?",Jx="["+oD+"]?",dD="(?:"+lD+"(?:"+[Yx,Xx,Qx].join("|")+")"+Jx+Zx+")*",cD=Jx+Zx+dD,uD="(?:"+[Yx+wf+"?",wf,Xx,Qx,sD].join("|")+")",fD=RegExp(Ef+"(?="+Ef+")|"+uD+cD,"g");function hD(n){return n.match(fD)||[]}function pD(n){return Kx(n)?hD(n):eD(n)}function gD(n){return function(e){e=Hx(e);var t=Kx(e)?pD(e):void 0,r=t?t[0]:e.charAt(0),i=t?Wk(t,1).join(""):e.slice(1);return r[n]()+i}}var mD=gD("toUpperCase");function vD(){this.__data__=new Si,this.size=0}function bD(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}function yD(n){return this.__data__.get(n)}function xD(n){return this.__data__.has(n)}var SD=200;function CD(n,e){var t=this.__data__;if(t instanceof Si){var r=t.__data__;if(!Ua||r.length<SD-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new Ci(r)}return t.set(n,e),this.size=t.size,this}function jr(n){var e=this.__data__=new Si(n);this.size=e.size}jr.prototype.clear=vD;jr.prototype.delete=bD;jr.prototype.get=yD;jr.prototype.has=xD;jr.prototype.set=CD;var eS=typeof er=="object"&&er&&!er.nodeType&&er,Km=eS&&typeof tr=="object"&&tr&&!tr.nodeType&&tr,TD=Km&&Km.exports===eS,qm=TD?ei.Buffer:void 0;qm&&qm.allocUnsafe;function wD(n,e){return n.slice()}function ED(n,e){for(var t=-1,r=n==null?0:n.length,i=0,o=[];++t<r;){var s=n[t];e(s,t,n)&&(o[i++]=s)}return o}function RD(){return[]}var AD=Object.prototype,ID=AD.propertyIsEnumerable,Ym=Object.getOwnPropertySymbols,LD=Ym?function(n){return n==null?[]:(n=Object(n),ED(Ym(n),function(e){return ID.call(n,e)}))}:RD;function PD(n,e,t){var r=e(n);return gr(n)?r:$k(r,t(n))}function Xm(n){return PD(n,np,LD)}var Rf=Ho(ei,"DataView"),Af=Ho(ei,"Promise"),If=Ho(ei,"Set"),Qm="[object Map]",_D="[object Object]",Zm="[object Promise]",Jm="[object Set]",ev="[object WeakMap]",tv="[object DataView]",kD=Uo(Rf),DD=Uo(Ua),OD=Uo(Af),MD=Uo(If),FD=Uo(Tf),zi=zo;(Rf&&zi(new Rf(new ArrayBuffer(1)))!=tv||Ua&&zi(new Ua)!=Qm||Af&&zi(Af.resolve())!=Zm||If&&zi(new If)!=Jm||Tf&&zi(new Tf)!=ev)&&(zi=function(n){var e=zo(n),t=e==_D?n.constructor:void 0,r=t?Uo(t):"";if(r)switch(r){case kD:return tv;case DD:return Qm;case OD:return Zm;case MD:return Jm;case FD:return ev}return e});var Cd=ei.Uint8Array;function $D(n){var e=new n.constructor(n.byteLength);return new Cd(e).set(new Cd(n)),e}function BD(n,e){var t=$D(n.buffer);return new n.constructor(t,n.byteOffset,n.length)}function ND(n){return typeof n.constructor=="function"&&!ep(n)?jP(Wx(n)):{}}var zD="__lodash_hash_undefined__";function UD(n){return this.__data__.set(n,zD),this}function HD(n){return this.__data__.has(n)}function Td(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new Ci;++e<t;)this.add(n[e])}Td.prototype.add=Td.prototype.push=UD;Td.prototype.has=HD;function VD(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function GD(n,e){return n.has(e)}var WD=1,jD=2;function tS(n,e,t,r,i,o){var s=t&WD,a=n.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var d=o.get(n),c=o.get(e);if(d&&c)return d==e&&c==n;var u=-1,f=!0,p=t&jD?new Td:void 0;for(o.set(n,e),o.set(e,n);++u<a;){var h=n[u],g=e[u];if(r)var m=s?r(g,h,u,e,n,o):r(h,g,u,n,e,o);if(m!==void 0){if(m)continue;f=!1;break}if(p){if(!VD(e,function(v,b){if(!GD(p,b)&&(h===v||i(h,v,t,r,o)))return p.push(b)})){f=!1;break}}else if(!(h===g||i(h,g,t,r,o))){f=!1;break}}return o.delete(n),o.delete(e),f}function KD(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}function qD(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}var YD=1,XD=2,QD="[object Boolean]",ZD="[object Date]",JD="[object Error]",eO="[object Map]",tO="[object Number]",nO="[object RegExp]",rO="[object Set]",iO="[object String]",oO="[object Symbol]",sO="[object ArrayBuffer]",aO="[object DataView]",nv=Xi?Xi.prototype:void 0,du=nv?nv.valueOf:void 0;function lO(n,e,t,r,i,o,s){switch(t){case aO:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case sO:return!(n.byteLength!=e.byteLength||!o(new Cd(n),new Cd(e)));case QD:case ZD:case tO:return rl(+n,+e);case JD:return n.name==e.name&&n.message==e.message;case nO:case iO:return n==e+"";case eO:var a=KD;case rO:var l=r&YD;if(a||(a=qD),n.size!=e.size&&!l)return!1;var d=s.get(n);if(d)return d==e;r|=XD,s.set(n,e);var c=tS(a(n),a(e),r,i,o,s);return s.delete(n),c;case oO:if(du)return du.call(n)==du.call(e)}return!1}var dO=1,cO=Object.prototype,uO=cO.hasOwnProperty;function fO(n,e,t,r,i,o){var s=t&dO,a=Xm(n),l=a.length,d=Xm(e),c=d.length;if(l!=c&&!s)return!1;for(var u=l;u--;){var f=a[u];if(!(s?f in e:uO.call(e,f)))return!1}var p=o.get(n),h=o.get(e);if(p&&h)return p==e&&h==n;var g=!0;o.set(n,e),o.set(e,n);for(var m=s;++u<l;){f=a[u];var v=n[f],b=e[f];if(r)var y=s?r(b,v,f,e,n,o):r(v,b,f,n,e,o);if(!(y===void 0?v===b||i(v,b,t,r,o):y)){g=!1;break}m||(m=f=="constructor")}if(g&&!m){var x=n.constructor,E=e.constructor;x!=E&&"constructor"in n&&"constructor"in e&&!(typeof x=="function"&&x instanceof x&&typeof E=="function"&&E instanceof E)&&(g=!1)}return o.delete(n),o.delete(e),g}var hO=1,rv="[object Arguments]",iv="[object Array]",Tl="[object Object]",pO=Object.prototype,ov=pO.hasOwnProperty;function gO(n,e,t,r,i,o){var s=gr(n),a=gr(e),l=s?iv:zi(n),d=a?iv:zi(e);l=l==rv?Tl:l,d=d==rv?Tl:d;var c=l==Tl,u=d==Tl,f=l==d;if(f&&Sd(n)){if(!Sd(e))return!1;s=!0,c=!1}if(f&&!c)return o||(o=new jr),s||tp(n)?tS(n,e,t,r,i,o):lO(n,e,l,t,r,i,o);if(!(t&hO)){var p=c&&ov.call(n,"__wrapped__"),h=u&&ov.call(e,"__wrapped__");if(p||h){var g=p?n.value():n,m=h?e.value():e;return o||(o=new jr),i(g,m,t,r,o)}}return f?(o||(o=new jr),fO(n,e,t,r,i,o)):!1}function op(n,e,t,r,i){return n===e?!0:n==null||e==null||!Qi(n)&&!Qi(e)?n!==n&&e!==e:gO(n,e,t,r,op,i)}var mO=1,vO=2;function bO(n,e,t,r){var i=t.length,o=i;if(n==null)return!o;for(n=Object(n);i--;){var s=t[i];if(s[2]?s[1]!==n[s[0]]:!(s[0]in n))return!1}for(;++i<o;){s=t[i];var a=s[0],l=n[a],d=s[1];if(s[2]){if(l===void 0&&!(a in n))return!1}else{var c=new jr,u;if(!(u===void 0?op(d,l,mO|vO,r,c):u))return!1}}return!0}function nS(n){return n===n&&!so(n)}function yO(n){for(var e=np(n),t=e.length;t--;){var r=e[t],i=n[r];e[t]=[r,i,nS(i)]}return e}function rS(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function xO(n){var e=yO(n);return e.length==1&&e[0][2]?rS(e[0][0],e[0][1]):function(t){return t===n||bO(t,n,e)}}function SO(n,e){return n!=null&&e in Object(n)}function CO(n,e,t){e=Vx(e,n);for(var r=-1,i=e.length,o=!1;++r<i;){var s=uc(e[r]);if(!(o=n!=null&&t(n,s)))break;n=n[s]}return o||++r!=i?o:(i=n==null?0:n.length,!!i&&Jh(i)&&Qh(s,i)&&(gr(n)||xd(n)))}function TO(n,e){return n!=null&&CO(n,e,SO)}var wO=1,EO=2;function RO(n,e){return rp(n)&&nS(e)?rS(uc(n),e):function(t){var r=Ha(t,n);return r===void 0&&r===e?TO(t,n):op(e,r,wO|EO)}}function AO(n){return function(e){return e==null?void 0:e[n]}}function IO(n){return function(e){return Gx(e,n)}}function LO(n){return rp(n)?AO(uc(n)):IO(n)}function PO(n){return typeof n=="function"?n:n==null?Yh:typeof n=="object"?gr(n)?RO(n[0],n[1]):xO(n):LO(n)}function _O(n){return function(e,t,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var l=s[++i];if(t(o[l],l,o)===!1)break}return e}}var iS=_O();function kO(n,e){return n&&iS(n,e,np)}function DO(n,e){return function(t,r){if(t==null)return t;if(!Ds(t))return n(t,r);for(var i=t.length,o=-1,s=Object(t);++o<i&&r(s[o],o,s)!==!1;);return t}}var OO=DO(kO);function Lf(n,e,t){(t!==void 0&&!rl(n[e],t)||t===void 0&&!(e in n))&&Zh(n,e,t)}function MO(n){return Qi(n)&&Ds(n)}function Pf(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}function FO(n){return a_(n,Ux(n))}function $O(n,e,t,r,i,o,s){var a=Pf(n,t),l=Pf(e,t),d=s.get(l);if(d){Lf(n,t,d);return}var c=o?o(a,l,t+"",n,e,s):void 0,u=c===void 0;if(u){var f=gr(l),p=!f&&Sd(l),h=!f&&!p&&tp(l);c=l,f||p||h?gr(a)?c=a:MO(a)?c=qP(a):p?(u=!1,c=wD(l)):h?(u=!1,c=BD(l)):c=[]:Vk(l)||xd(l)?(c=a,xd(a)?c=FO(a):(!so(a)||Xh(a))&&(c=ND(l))):u=!1}u&&(s.set(l,c),i(c,l,r,o,s),s.delete(l)),Lf(n,t,c)}function oS(n,e,t,r,i){n!==e&&iS(e,function(o,s){if(i||(i=new jr),so(o))$O(n,e,s,t,oS,r,i);else{var a=r?r(Pf(n,s),o,s+"",n,e,i):void 0;a===void 0&&(a=o),Lf(n,s,a)}},Ux)}function BO(n,e){var t=-1,r=Ds(n)?Array(n.length):[];return OO(n,function(i,o,s){r[++t]=e(i,o,s)}),r}function NO(n,e){var t=gr(n)?Ox:BO;return t(n,PO(e))}var ia=f_(function(n,e,t){oS(n,e,t)});function il(n){const{mergedLocaleRef:e,mergedDateLocaleRef:t}=Be(Pr,null)||{},r=U(()=>{var o,s;return(s=(o=e==null?void 0:e.value)===null||o===void 0?void 0:o[n])!==null&&s!==void 0?s:BL[n]});return{dateLocaleRef:U(()=>{var o;return(o=t==null?void 0:t.value)!==null&&o!==void 0?o:bP}),localeRef:r}}const Rs="naive-ui-style";function Dn(n,e,t){if(!e)return;const r=No(),i=U(()=>{const{value:a}=e;if(!a)return;const l=a[n];if(l)return l}),o=Be(Pr,null),s=()=>{Vn(()=>{const{value:a}=t,l=`${a}${n}Rtl`;if(rI(l,r))return;const{value:d}=i;d&&d.style.mount({id:l,head:!0,anchorMetaName:Rs,props:{bPrefix:a?`.${a}-`:void 0},ssr:r,parent:o==null?void 0:o.styleMountTarget})})};return r?s():ro(s),i}const Ti={fontFamily:'v-sans, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',fontFamilyMono:"v-mono, SFMono-Regular, Menlo, Consolas, Courier, monospace",fontWeight:"400",fontWeightStrong:"500",cubicBezierEaseInOut:"cubic-bezier(.4, 0, .2, 1)",cubicBezierEaseOut:"cubic-bezier(0, 0, .2, 1)",cubicBezierEaseIn:"cubic-bezier(.4, 0, 1, 1)",borderRadius:"3px",borderRadiusSmall:"2px",fontSize:"14px",fontSizeMini:"12px",fontSizeTiny:"12px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",lineHeight:"1.6",heightMini:"16px",heightTiny:"22px",heightSmall:"28px",heightMedium:"34px",heightLarge:"40px",heightHuge:"46px"},{fontSize:zO,fontFamily:UO,lineHeight:HO}=Ti,sS=Z("body",`
 margin: 0;
 font-size: ${zO};
 font-family: ${UO};
 line-height: ${HO};
 -webkit-text-size-adjust: 100%;
 -webkit-tap-highlight-color: transparent;
`,[Z("input",`
 font-family: inherit;
 font-size: inherit;
 `)]);function Vo(n,e,t){if(!e)return;const r=No(),i=Be(Pr,null),o=()=>{const s=t.value;e.mount({id:s===void 0?n:s+n,head:!0,anchorMetaName:Rs,props:{bPrefix:s?`.${s}-`:void 0},ssr:r,parent:i==null?void 0:i.styleMountTarget}),i!=null&&i.preflightStyleDisabled||sS.mount({id:"n-global",head:!0,anchorMetaName:Rs,ssr:r,parent:i==null?void 0:i.styleMountTarget})};r?o():ro(o)}function Ke(n,e,t,r,i,o){const s=No(),a=Be(Pr,null);if(t){const d=()=>{const c=o==null?void 0:o.value;t.mount({id:c===void 0?e:c+e,head:!0,props:{bPrefix:c?`.${c}-`:void 0},anchorMetaName:Rs,ssr:s,parent:a==null?void 0:a.styleMountTarget}),a!=null&&a.preflightStyleDisabled||sS.mount({id:"n-global",head:!0,anchorMetaName:Rs,ssr:s,parent:a==null?void 0:a.styleMountTarget})};s?d():ro(d)}return U(()=>{var d;const{theme:{common:c,self:u,peers:f={}}={},themeOverrides:p={},builtinThemeOverrides:h={}}=i,{common:g,peers:m}=p,{common:v=void 0,[n]:{common:b=void 0,self:y=void 0,peers:x={}}={}}=(a==null?void 0:a.mergedThemeRef.value)||{},{common:E=void 0,[n]:A={}}=(a==null?void 0:a.mergedThemeOverridesRef.value)||{},{common:S,peers:w={}}=A,T=ia({},c||b||v||r.common,E,S,g),C=ia((d=u||y||r.self)===null||d===void 0?void 0:d(T),h,A,p);return{common:T,self:C,peers:ia({},r.peers,x,f),peerOverrides:ia({},h.peers,w,m)}})}Ke.props={theme:Object,themeOverrides:Object,builtinThemeOverrides:Object};const VO=j("base-icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
`,[Z("svg",`
 height: 1em;
 width: 1em;
 `)]),on=Ce({name:"BaseIcon",props:{role:String,ariaLabel:String,ariaDisabled:{type:Boolean,default:void 0},ariaHidden:{type:Boolean,default:void 0},clsPrefix:{type:String,required:!0},onClick:Function,onMousedown:Function,onMouseup:Function},setup(n){Vo("-base-icon",VO,Ie(n,"clsPrefix"))},render(){return R("i",{class:`${this.clsPrefix}-base-icon`,onClick:this.onClick,onMousedown:this.onMousedown,onMouseup:this.onMouseup,role:this.role,"aria-label":this.ariaLabel,"aria-hidden":this.ariaHidden,"aria-disabled":this.ariaDisabled},this.$slots)}}),Go=Ce({name:"BaseIconSwitchTransition",setup(n,{slots:e}){const t=el();return()=>R(ir,{name:"icon-switch-transition",appear:t.value},e)}}),GO=Ce({name:"ArrowDown",render(){return R("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},R("g",{"fill-rule":"nonzero"},R("path",{d:"M23.7916,15.2664 C24.0788,14.9679 24.0696,14.4931 23.7711,14.206 C23.4726,13.9188 22.9978,13.928 22.7106,14.2265 L14.7511,22.5007 L14.7511,3.74792 C14.7511,3.33371 14.4153,2.99792 14.0011,2.99792 C13.5869,2.99792 13.2511,3.33371 13.2511,3.74793 L13.2511,22.4998 L5.29259,14.2265 C5.00543,13.928 4.53064,13.9188 4.23213,14.206 C3.93361,14.4931 3.9244,14.9679 4.21157,15.2664 L13.2809,24.6944 C13.6743,25.1034 14.3289,25.1034 14.7223,24.6944 L23.7916,15.2664 Z"}))))}});function Os(n,e){const t=Ce({render(){return e()}});return Ce({name:mD(n),setup(){var r;const i=(r=Be(Pr,null))===null||r===void 0?void 0:r.mergedIconsRef;return()=>{var o;const s=(o=i==null?void 0:i.value)===null||o===void 0?void 0:o[n];return s?s():R(t,null)}}})}const sv=Ce({name:"Backward",render(){return R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M12.2674 15.793C11.9675 16.0787 11.4927 16.0672 11.2071 15.7673L6.20572 10.5168C5.9298 10.2271 5.9298 9.7719 6.20572 9.48223L11.2071 4.23177C11.4927 3.93184 11.9675 3.92031 12.2674 4.206C12.5673 4.49169 12.5789 4.96642 12.2932 5.26634L7.78458 9.99952L12.2932 14.7327C12.5789 15.0326 12.5673 15.5074 12.2674 15.793Z",fill:"currentColor"}))}}),WO=Ce({name:"Checkmark",render(){return R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},R("g",{fill:"none"},R("path",{d:"M14.046 3.486a.75.75 0 0 1-.032 1.06l-7.93 7.474a.85.85 0 0 1-1.188-.022l-2.68-2.72a.75.75 0 1 1 1.068-1.053l2.234 2.267l7.468-7.038a.75.75 0 0 1 1.06.032z",fill:"currentColor"})))}}),aS=Ce({name:"ChevronDown",render(){return R("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M3.14645 5.64645C3.34171 5.45118 3.65829 5.45118 3.85355 5.64645L8 9.79289L12.1464 5.64645C12.3417 5.45118 12.6583 5.45118 12.8536 5.64645C13.0488 5.84171 13.0488 6.15829 12.8536 6.35355L8.35355 10.8536C8.15829 11.0488 7.84171 11.0488 7.64645 10.8536L3.14645 6.35355C2.95118 6.15829 2.95118 5.84171 3.14645 5.64645Z",fill:"currentColor"}))}}),lS=Ce({name:"ChevronRight",render(){return R("svg",{viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M5.64645 3.14645C5.45118 3.34171 5.45118 3.65829 5.64645 3.85355L9.79289 8L5.64645 12.1464C5.45118 12.3417 5.45118 12.6583 5.64645 12.8536C5.84171 13.0488 6.15829 13.0488 6.35355 12.8536L10.8536 8.35355C11.0488 8.15829 11.0488 7.84171 10.8536 7.64645L6.35355 3.14645C6.15829 2.95118 5.84171 2.95118 5.64645 3.14645Z",fill:"currentColor"}))}}),jO=Os("clear",()=>R("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},R("g",{fill:"currentColor","fill-rule":"nonzero"},R("path",{d:"M8,2 C11.3137085,2 14,4.6862915 14,8 C14,11.3137085 11.3137085,14 8,14 C4.6862915,14 2,11.3137085 2,8 C2,4.6862915 4.6862915,2 8,2 Z M6.5343055,5.83859116 C6.33943736,5.70359511 6.07001296,5.72288026 5.89644661,5.89644661 L5.89644661,5.89644661 L5.83859116,5.9656945 C5.70359511,6.16056264 5.72288026,6.42998704 5.89644661,6.60355339 L5.89644661,6.60355339 L7.293,8 L5.89644661,9.39644661 L5.83859116,9.4656945 C5.70359511,9.66056264 5.72288026,9.92998704 5.89644661,10.1035534 L5.89644661,10.1035534 L5.9656945,10.1614088 C6.16056264,10.2964049 6.42998704,10.2771197 6.60355339,10.1035534 L6.60355339,10.1035534 L8,8.707 L9.39644661,10.1035534 L9.4656945,10.1614088 C9.66056264,10.2964049 9.92998704,10.2771197 10.1035534,10.1035534 L10.1035534,10.1035534 L10.1614088,10.0343055 C10.2964049,9.83943736 10.2771197,9.57001296 10.1035534,9.39644661 L10.1035534,9.39644661 L8.707,8 L10.1035534,6.60355339 L10.1614088,6.5343055 C10.2964049,6.33943736 10.2771197,6.07001296 10.1035534,5.89644661 L10.1035534,5.89644661 L10.0343055,5.83859116 C9.83943736,5.70359511 9.57001296,5.72288026 9.39644661,5.89644661 L9.39644661,5.89644661 L8,7.293 L6.60355339,5.89644661 Z"}))))),KO=Os("close",()=>R("svg",{viewBox:"0 0 12 12",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0},R("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},R("g",{fill:"currentColor","fill-rule":"nonzero"},R("path",{d:"M2.08859116,2.2156945 L2.14644661,2.14644661 C2.32001296,1.97288026 2.58943736,1.95359511 2.7843055,2.08859116 L2.85355339,2.14644661 L6,5.293 L9.14644661,2.14644661 C9.34170876,1.95118446 9.65829124,1.95118446 9.85355339,2.14644661 C10.0488155,2.34170876 10.0488155,2.65829124 9.85355339,2.85355339 L6.707,6 L9.85355339,9.14644661 C10.0271197,9.32001296 10.0464049,9.58943736 9.91140884,9.7843055 L9.85355339,9.85355339 C9.67998704,10.0271197 9.41056264,10.0464049 9.2156945,9.91140884 L9.14644661,9.85355339 L6,6.707 L2.85355339,9.85355339 C2.65829124,10.0488155 2.34170876,10.0488155 2.14644661,9.85355339 C1.95118446,9.65829124 1.95118446,9.34170876 2.14644661,9.14644661 L5.293,6 L2.14644661,2.85355339 C1.97288026,2.67998704 1.95359511,2.41056264 2.08859116,2.2156945 L2.14644661,2.14644661 L2.08859116,2.2156945 Z"}))))),qO=Ce({name:"Empty",render(){return R("svg",{viewBox:"0 0 28 28",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M26 7.5C26 11.0899 23.0899 14 19.5 14C15.9101 14 13 11.0899 13 7.5C13 3.91015 15.9101 1 19.5 1C23.0899 1 26 3.91015 26 7.5ZM16.8536 4.14645C16.6583 3.95118 16.3417 3.95118 16.1464 4.14645C15.9512 4.34171 15.9512 4.65829 16.1464 4.85355L18.7929 7.5L16.1464 10.1464C15.9512 10.3417 15.9512 10.6583 16.1464 10.8536C16.3417 11.0488 16.6583 11.0488 16.8536 10.8536L19.5 8.20711L22.1464 10.8536C22.3417 11.0488 22.6583 11.0488 22.8536 10.8536C23.0488 10.6583 23.0488 10.3417 22.8536 10.1464L20.2071 7.5L22.8536 4.85355C23.0488 4.65829 23.0488 4.34171 22.8536 4.14645C22.6583 3.95118 22.3417 3.95118 22.1464 4.14645L19.5 6.79289L16.8536 4.14645Z",fill:"currentColor"}),R("path",{d:"M25 22.75V12.5991C24.5572 13.0765 24.053 13.4961 23.5 13.8454V16H17.5L17.3982 16.0068C17.0322 16.0565 16.75 16.3703 16.75 16.75C16.75 18.2688 15.5188 19.5 14 19.5C12.4812 19.5 11.25 18.2688 11.25 16.75L11.2432 16.6482C11.1935 16.2822 10.8797 16 10.5 16H4.5V7.25C4.5 6.2835 5.2835 5.5 6.25 5.5H12.2696C12.4146 4.97463 12.6153 4.47237 12.865 4H6.25C4.45507 4 3 5.45507 3 7.25V22.75C3 24.5449 4.45507 26 6.25 26H21.75C23.5449 26 25 24.5449 25 22.75ZM4.5 22.75V17.5H9.81597L9.85751 17.7041C10.2905 19.5919 11.9808 21 14 21L14.215 20.9947C16.2095 20.8953 17.842 19.4209 18.184 17.5H23.5V22.75C23.5 23.7165 22.7165 24.5 21.75 24.5H6.25C5.2835 24.5 4.5 23.7165 4.5 22.75Z",fill:"currentColor"}))}}),dS=Os("error",()=>R("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},R("g",{"fill-rule":"nonzero"},R("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M17.8838835,16.1161165 L17.7823881,16.0249942 C17.3266086,15.6583353 16.6733914,15.6583353 16.2176119,16.0249942 L16.1161165,16.1161165 L16.0249942,16.2176119 C15.6583353,16.6733914 15.6583353,17.3266086 16.0249942,17.7823881 L16.1161165,17.8838835 L22.233,24 L16.1161165,30.1161165 L16.0249942,30.2176119 C15.6583353,30.6733914 15.6583353,31.3266086 16.0249942,31.7823881 L16.1161165,31.8838835 L16.2176119,31.9750058 C16.6733914,32.3416647 17.3266086,32.3416647 17.7823881,31.9750058 L17.8838835,31.8838835 L24,25.767 L30.1161165,31.8838835 L30.2176119,31.9750058 C30.6733914,32.3416647 31.3266086,32.3416647 31.7823881,31.9750058 L31.8838835,31.8838835 L31.9750058,31.7823881 C32.3416647,31.3266086 32.3416647,30.6733914 31.9750058,30.2176119 L31.8838835,30.1161165 L25.767,24 L31.8838835,17.8838835 L31.9750058,17.7823881 C32.3416647,17.3266086 32.3416647,16.6733914 31.9750058,16.2176119 L31.8838835,16.1161165 L31.7823881,16.0249942 C31.3266086,15.6583353 30.6733914,15.6583353 30.2176119,16.0249942 L30.1161165,16.1161165 L24,22.233 L17.8838835,16.1161165 L17.7823881,16.0249942 L17.8838835,16.1161165 Z"}))))),YO=Ce({name:"Eye",render(){return R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},R("path",{d:"M255.66 112c-77.94 0-157.89 45.11-220.83 135.33a16 16 0 0 0-.27 17.77C82.92 340.8 161.8 400 255.66 400c92.84 0 173.34-59.38 221.79-135.25a16.14 16.14 0 0 0 0-17.47C428.89 172.28 347.8 112 255.66 112z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"}),R("circle",{cx:"256",cy:"256",r:"80",fill:"none",stroke:"currentColor","stroke-miterlimit":"10","stroke-width":"32"}))}}),XO=Ce({name:"EyeOff",render(){return R("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},R("path",{d:"M432 448a15.92 15.92 0 0 1-11.31-4.69l-352-352a16 16 0 0 1 22.62-22.62l352 352A16 16 0 0 1 432 448z",fill:"currentColor"}),R("path",{d:"M255.66 384c-41.49 0-81.5-12.28-118.92-36.5c-34.07-22-64.74-53.51-88.7-91v-.08c19.94-28.57 41.78-52.73 65.24-72.21a2 2 0 0 0 .14-2.94L93.5 161.38a2 2 0 0 0-2.71-.12c-24.92 21-48.05 46.76-69.08 76.92a31.92 31.92 0 0 0-.64 35.54c26.41 41.33 60.4 76.14 98.28 100.65C162 402 207.9 416 255.66 416a239.13 239.13 0 0 0 75.8-12.58a2 2 0 0 0 .77-3.31l-21.58-21.58a4 4 0 0 0-3.83-1a204.8 204.8 0 0 1-51.16 6.47z",fill:"currentColor"}),R("path",{d:"M490.84 238.6c-26.46-40.92-60.79-75.68-99.27-100.53C349 110.55 302 96 255.66 96a227.34 227.34 0 0 0-74.89 12.83a2 2 0 0 0-.75 3.31l21.55 21.55a4 4 0 0 0 3.88 1a192.82 192.82 0 0 1 50.21-6.69c40.69 0 80.58 12.43 118.55 37c34.71 22.4 65.74 53.88 89.76 91a.13.13 0 0 1 0 .16a310.72 310.72 0 0 1-64.12 72.73a2 2 0 0 0-.15 2.95l19.9 19.89a2 2 0 0 0 2.7.13a343.49 343.49 0 0 0 68.64-78.48a32.2 32.2 0 0 0-.1-34.78z",fill:"currentColor"}),R("path",{d:"M256 160a95.88 95.88 0 0 0-21.37 2.4a2 2 0 0 0-1 3.38l112.59 112.56a2 2 0 0 0 3.38-1A96 96 0 0 0 256 160z",fill:"currentColor"}),R("path",{d:"M165.78 233.66a2 2 0 0 0-3.38 1a96 96 0 0 0 115 115a2 2 0 0 0 1-3.38z",fill:"currentColor"}))}}),av=Ce({name:"FastBackward",render(){return R("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},R("g",{fill:"currentColor","fill-rule":"nonzero"},R("path",{d:"M8.73171,16.7949 C9.03264,17.0795 9.50733,17.0663 9.79196,16.7654 C10.0766,16.4644 10.0634,15.9897 9.76243,15.7051 L4.52339,10.75 L17.2471,10.75 C17.6613,10.75 17.9971,10.4142 17.9971,10 C17.9971,9.58579 17.6613,9.25 17.2471,9.25 L4.52112,9.25 L9.76243,4.29275 C10.0634,4.00812 10.0766,3.53343 9.79196,3.2325 C9.50733,2.93156 9.03264,2.91834 8.73171,3.20297 L2.31449,9.27241 C2.14819,9.4297 2.04819,9.62981 2.01448,9.8386 C2.00308,9.89058 1.99707,9.94459 1.99707,10 C1.99707,10.0576 2.00356,10.1137 2.01585,10.1675 C2.05084,10.3733 2.15039,10.5702 2.31449,10.7254 L8.73171,16.7949 Z"}))))}}),lv=Ce({name:"FastForward",render(){return R("svg",{viewBox:"0 0 20 20",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},R("g",{fill:"currentColor","fill-rule":"nonzero"},R("path",{d:"M11.2654,3.20511 C10.9644,2.92049 10.4897,2.93371 10.2051,3.23464 C9.92049,3.53558 9.93371,4.01027 10.2346,4.29489 L15.4737,9.25 L2.75,9.25 C2.33579,9.25 2,9.58579 2,10.0000012 C2,10.4142 2.33579,10.75 2.75,10.75 L15.476,10.75 L10.2346,15.7073 C9.93371,15.9919 9.92049,16.4666 10.2051,16.7675 C10.4897,17.0684 10.9644,17.0817 11.2654,16.797 L17.6826,10.7276 C17.8489,10.5703 17.9489,10.3702 17.9826,10.1614 C17.994,10.1094 18,10.0554 18,10.0000012 C18,9.94241 17.9935,9.88633 17.9812,9.83246 C17.9462,9.62667 17.8467,9.42976 17.6826,9.27455 L11.2654,3.20511 Z"}))))}}),QO=Ce({name:"Filter",render(){return R("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},R("g",{"fill-rule":"nonzero"},R("path",{d:"M17,19 C17.5522847,19 18,19.4477153 18,20 C18,20.5522847 17.5522847,21 17,21 L11,21 C10.4477153,21 10,20.5522847 10,20 C10,19.4477153 10.4477153,19 11,19 L17,19 Z M21,13 C21.5522847,13 22,13.4477153 22,14 C22,14.5522847 21.5522847,15 21,15 L7,15 C6.44771525,15 6,14.5522847 6,14 C6,13.4477153 6.44771525,13 7,13 L21,13 Z M24,7 C24.5522847,7 25,7.44771525 25,8 C25,8.55228475 24.5522847,9 24,9 L4,9 C3.44771525,9 3,8.55228475 3,8 C3,7.44771525 3.44771525,7 4,7 L24,7 Z"}))))}}),dv=Ce({name:"Forward",render(){return R("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},R("path",{d:"M7.73271 4.20694C8.03263 3.92125 8.50737 3.93279 8.79306 4.23271L13.7944 9.48318C14.0703 9.77285 14.0703 10.2281 13.7944 10.5178L8.79306 15.7682C8.50737 16.0681 8.03263 16.0797 7.73271 15.794C7.43279 15.5083 7.42125 15.0336 7.70694 14.7336L12.2155 10.0005L7.70694 5.26729C7.42125 4.96737 7.43279 4.49264 7.73271 4.20694Z",fill:"currentColor"}))}}),_f=Os("info",()=>R("svg",{viewBox:"0 0 28 28",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},R("g",{"fill-rule":"nonzero"},R("path",{d:"M14,2 C20.6274,2 26,7.37258 26,14 C26,20.6274 20.6274,26 14,26 C7.37258,26 2,20.6274 2,14 C2,7.37258 7.37258,2 14,2 Z M14,11 C13.4477,11 13,11.4477 13,12 L13,12 L13,20 C13,20.5523 13.4477,21 14,21 C14.5523,21 15,20.5523 15,20 L15,20 L15,12 C15,11.4477 14.5523,11 14,11 Z M14,6.75 C13.3096,6.75 12.75,7.30964 12.75,8 C12.75,8.69036 13.3096,9.25 14,9.25 C14.6904,9.25 15.25,8.69036 15.25,8 C15.25,7.30964 14.6904,6.75 14,6.75 Z"}))))),cv=Ce({name:"More",render(){return R("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},R("g",{fill:"currentColor","fill-rule":"nonzero"},R("path",{d:"M4,7 C4.55228,7 5,7.44772 5,8 C5,8.55229 4.55228,9 4,9 C3.44772,9 3,8.55229 3,8 C3,7.44772 3.44772,7 4,7 Z M8,7 C8.55229,7 9,7.44772 9,8 C9,8.55229 8.55229,9 8,9 C7.44772,9 7,8.55229 7,8 C7,7.44772 7.44772,7 8,7 Z M12,7 C12.5523,7 13,7.44772 13,8 C13,8.55229 12.5523,9 12,9 C11.4477,9 11,8.55229 11,8 C11,7.44772 11.4477,7 12,7 Z"}))))}}),cS=Os("success",()=>R("svg",{viewBox:"0 0 48 48",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},R("g",{"fill-rule":"nonzero"},R("path",{d:"M24,4 C35.045695,4 44,12.954305 44,24 C44,35.045695 35.045695,44 24,44 C12.954305,44 4,35.045695 4,24 C4,12.954305 12.954305,4 24,4 Z M32.6338835,17.6161165 C32.1782718,17.1605048 31.4584514,17.1301307 30.9676119,17.5249942 L30.8661165,17.6161165 L20.75,27.732233 L17.1338835,24.1161165 C16.6457281,23.6279612 15.8542719,23.6279612 15.3661165,24.1161165 C14.9105048,24.5717282 14.8801307,25.2915486 15.2749942,25.7823881 L15.3661165,25.8838835 L19.8661165,30.3838835 C20.3217282,30.8394952 21.0415486,30.8698693 21.5323881,30.4750058 L21.6338835,30.3838835 L32.6338835,19.3838835 C33.1220388,18.8957281 33.1220388,18.1042719 32.6338835,17.6161165 Z"}))))),uS=Os("warning",()=>R("svg",{viewBox:"0 0 24 24",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},R("g",{stroke:"none","stroke-width":"1","fill-rule":"evenodd"},R("g",{"fill-rule":"nonzero"},R("path",{d:"M12,2 C17.523,2 22,6.478 22,12 C22,17.522 17.523,22 12,22 C6.477,22 2,17.522 2,12 C2,6.478 6.477,2 12,2 Z M12.0018002,15.0037242 C11.450254,15.0037242 11.0031376,15.4508407 11.0031376,16.0023869 C11.0031376,16.553933 11.450254,17.0010495 12.0018002,17.0010495 C12.5533463,17.0010495 13.0004628,16.553933 13.0004628,16.0023869 C13.0004628,15.4508407 12.5533463,15.0037242 12.0018002,15.0037242 Z M11.99964,7 C11.4868042,7.00018474 11.0642719,7.38637706 11.0066858,7.8837365 L11,8.00036004 L11.0018003,13.0012393 L11.00857,13.117858 C11.0665141,13.6151758 11.4893244,14.0010638 12.0021602,14.0008793 C12.514996,14.0006946 12.9375283,13.6145023 12.9951144,13.1171428 L13.0018002,13.0005193 L13,7.99964009 L12.9932303,7.8830214 C12.9352861,7.38570354 12.5124758,6.99981552 11.99964,7 Z"}))))),{cubicBezierEaseInOut:ZO}=Ti;function Yn({originalTransform:n="",left:e=0,top:t=0,transition:r=`all .3s ${ZO} !important`}={}){return[Z("&.icon-switch-transition-enter-from, &.icon-switch-transition-leave-to",{transform:`${n} scale(0.75)`,left:e,top:t,opacity:0}),Z("&.icon-switch-transition-enter-to, &.icon-switch-transition-leave-from",{transform:`scale(1) ${n}`,left:e,top:t,opacity:1}),Z("&.icon-switch-transition-enter-active, &.icon-switch-transition-leave-active",{transformOrigin:"center",position:"absolute",left:e,top:t,transition:r})]}const JO=j("base-clear",`
 flex-shrink: 0;
 height: 1em;
 width: 1em;
 position: relative;
`,[Z(">",[q("clear",`
 font-size: var(--n-clear-size);
 height: 1em;
 width: 1em;
 cursor: pointer;
 color: var(--n-clear-color);
 transition: color .3s var(--n-bezier);
 display: flex;
 `,[Z("&:hover",`
 color: var(--n-clear-color-hover)!important;
 `),Z("&:active",`
 color: var(--n-clear-color-pressed)!important;
 `)]),q("placeholder",`
 display: flex;
 `),q("clear, placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[Yn({originalTransform:"translateX(-50%) translateY(-50%)",left:"50%",top:"50%"})])])]),kf=Ce({name:"BaseClear",props:{clsPrefix:{type:String,required:!0},show:Boolean,onClear:Function},setup(n){return Vo("-base-clear",JO,Ie(n,"clsPrefix")),{handleMouseDown(e){e.preventDefault()}}},render(){const{clsPrefix:n}=this;return R("div",{class:`${n}-base-clear`},R(Go,null,{default:()=>{var e,t;return this.show?R("div",{key:"dismiss",class:`${n}-base-clear__clear`,onClick:this.onClear,onMousedown:this.handleMouseDown,"data-clear":!0},Er(this.$slots.icon,()=>[R(on,{clsPrefix:n},{default:()=>R(jO,null)})])):R("div",{key:"icon",class:`${n}-base-clear__placeholder`},(t=(e=this.$slots).placeholder)===null||t===void 0?void 0:t.call(e))}}))}}),eM=j("base-close",`
 display: flex;
 align-items: center;
 justify-content: center;
 cursor: pointer;
 background-color: transparent;
 color: var(--n-close-icon-color);
 border-radius: var(--n-close-border-radius);
 height: var(--n-close-size);
 width: var(--n-close-size);
 font-size: var(--n-close-icon-size);
 outline: none;
 border: none;
 position: relative;
 padding: 0;
`,[ee("absolute",`
 height: var(--n-close-icon-size);
 width: var(--n-close-icon-size);
 `),Z("&::before",`
 content: "";
 position: absolute;
 width: var(--n-close-size);
 height: var(--n-close-size);
 left: 50%;
 top: 50%;
 transform: translateY(-50%) translateX(-50%);
 transition: inherit;
 border-radius: inherit;
 `),Pt("disabled",[Z("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),Z("&:hover::before",`
 background-color: var(--n-close-color-hover);
 `),Z("&:focus::before",`
 background-color: var(--n-close-color-hover);
 `),Z("&:active",`
 color: var(--n-close-icon-color-pressed);
 `),Z("&:active::before",`
 background-color: var(--n-close-color-pressed);
 `)]),ee("disabled",`
 cursor: not-allowed;
 color: var(--n-close-icon-color-disabled);
 background-color: transparent;
 `),ee("round",[Z("&::before",`
 border-radius: 50%;
 `)])]),fc=Ce({name:"BaseClose",props:{isButtonTag:{type:Boolean,default:!0},clsPrefix:{type:String,required:!0},disabled:{type:Boolean,default:void 0},focusable:{type:Boolean,default:!0},round:Boolean,onClick:Function,absolute:Boolean},setup(n){return Vo("-base-close",eM,Ie(n,"clsPrefix")),()=>{const{clsPrefix:e,disabled:t,absolute:r,round:i,isButtonTag:o}=n;return R(o?"button":"div",{type:o?"button":void 0,tabindex:t||!n.focusable?-1:0,"aria-disabled":t,"aria-label":"close",role:o?void 0:"button",disabled:t,class:[`${e}-base-close`,r&&`${e}-base-close--absolute`,t&&`${e}-base-close--disabled`,i&&`${e}-base-close--round`],onMousedown:a=>{n.focusable||a.preventDefault()},onClick:n.onClick},R(on,{clsPrefix:e},{default:()=>R(KO,null)}))}}}),fS=Ce({name:"FadeInExpandTransition",props:{appear:Boolean,group:Boolean,mode:String,onLeave:Function,onAfterLeave:Function,onAfterEnter:Function,width:Boolean,reverse:Boolean},setup(n,{slots:e}){function t(a){n.width?a.style.maxWidth=`${a.offsetWidth}px`:a.style.maxHeight=`${a.offsetHeight}px`,a.offsetWidth}function r(a){n.width?a.style.maxWidth="0":a.style.maxHeight="0",a.offsetWidth;const{onLeave:l}=n;l&&l()}function i(a){n.width?a.style.maxWidth="":a.style.maxHeight="";const{onAfterLeave:l}=n;l&&l()}function o(a){if(a.style.transition="none",n.width){const l=a.offsetWidth;a.style.maxWidth="0",a.offsetWidth,a.style.transition="",a.style.maxWidth=`${l}px`}else if(n.reverse)a.style.maxHeight=`${a.offsetHeight}px`,a.offsetHeight,a.style.transition="",a.style.maxHeight="0";else{const l=a.offsetHeight;a.style.maxHeight="0",a.offsetWidth,a.style.transition="",a.style.maxHeight=`${l}px`}a.offsetWidth}function s(a){var l;n.width?a.style.maxWidth="":n.reverse||(a.style.maxHeight=""),(l=n.onAfterEnter)===null||l===void 0||l.call(n)}return()=>{const{group:a,width:l,appear:d,mode:c}=n,u=a?CR:ir,f={name:l?"fade-in-width-expand-transition":"fade-in-height-expand-transition",appear:d,onEnter:o,onAfterEnter:s,onBeforeLeave:t,onLeave:r,onAfterLeave:i};return a||(f.mode=c),R(u,f,e)}}}),tM=Ce({props:{onFocus:Function,onBlur:Function},setup(n){return()=>R("div",{style:"width: 0; height: 0",tabindex:0,onFocus:n.onFocus,onBlur:n.onBlur})}}),nM=Z([Z("@keyframes rotator",`
 0% {
 -webkit-transform: rotate(0deg);
 transform: rotate(0deg);
 }
 100% {
 -webkit-transform: rotate(360deg);
 transform: rotate(360deg);
 }`),j("base-loading",`
 position: relative;
 line-height: 0;
 width: 1em;
 height: 1em;
 `,[q("transition-wrapper",`
 position: absolute;
 width: 100%;
 height: 100%;
 `,[Yn()]),q("placeholder",`
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[Yn({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),q("container",`
 animation: rotator 3s linear infinite both;
 `,[q("icon",`
 height: 1em;
 width: 1em;
 `)])])]),cu="1.6s",rM={strokeWidth:{type:Number,default:28},stroke:{type:String,default:void 0}},ao=Ce({name:"BaseLoading",props:Object.assign({clsPrefix:{type:String,required:!0},show:{type:Boolean,default:!0},scale:{type:Number,default:1},radius:{type:Number,default:100}},rM),setup(n){Vo("-base-loading",nM,Ie(n,"clsPrefix"))},render(){const{clsPrefix:n,radius:e,strokeWidth:t,stroke:r,scale:i}=this,o=e/i;return R("div",{class:`${n}-base-loading`,role:"img","aria-label":"loading"},R(Go,null,{default:()=>this.show?R("div",{key:"icon",class:`${n}-base-loading__transition-wrapper`},R("div",{class:`${n}-base-loading__container`},R("svg",{class:`${n}-base-loading__icon`,viewBox:`0 0 ${2*o} ${2*o}`,xmlns:"http://www.w3.org/2000/svg",style:{color:r}},R("g",null,R("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${o} ${o};270 ${o} ${o}`,begin:"0s",dur:cu,fill:"freeze",repeatCount:"indefinite"}),R("circle",{class:`${n}-base-loading__icon`,fill:"none",stroke:"currentColor","stroke-width":t,"stroke-linecap":"round",cx:o,cy:o,r:e-t/2,"stroke-dasharray":5.67*e,"stroke-dashoffset":18.48*e},R("animateTransform",{attributeName:"transform",type:"rotate",values:`0 ${o} ${o};135 ${o} ${o};450 ${o} ${o}`,begin:"0s",dur:cu,fill:"freeze",repeatCount:"indefinite"}),R("animate",{attributeName:"stroke-dashoffset",values:`${5.67*e};${1.42*e};${5.67*e}`,begin:"0s",dur:cu,fill:"freeze",repeatCount:"indefinite"})))))):R("div",{key:"placeholder",class:`${n}-base-loading__placeholder`},this.$slots)}))}}),{cubicBezierEaseInOut:uv}=Ti;function sp({name:n="fade-in",enterDuration:e="0.2s",leaveDuration:t="0.2s",enterCubicBezier:r=uv,leaveCubicBezier:i=uv}={}){return[Z(`&.${n}-transition-enter-active`,{transition:`all ${e} ${r}!important`}),Z(`&.${n}-transition-leave-active`,{transition:`all ${t} ${i}!important`}),Z(`&.${n}-transition-enter-from, &.${n}-transition-leave-to`,{opacity:0}),Z(`&.${n}-transition-leave-from, &.${n}-transition-enter-to`,{opacity:1})]}const Fe={neutralBase:"#000",neutralInvertBase:"#fff",neutralTextBase:"#fff",neutralPopover:"rgb(72, 72, 78)",neutralCard:"rgb(24, 24, 28)",neutralModal:"rgb(44, 44, 50)",neutralBody:"rgb(16, 16, 20)",alpha1:"0.9",alpha2:"0.82",alpha3:"0.52",alpha4:"0.38",alpha5:"0.28",alphaClose:"0.52",alphaDisabled:"0.38",alphaDisabledInput:"0.06",alphaPending:"0.09",alphaTablePending:"0.06",alphaTableStriped:"0.05",alphaPressed:"0.05",alphaAvatar:"0.18",alphaRail:"0.2",alphaProgressRail:"0.12",alphaBorder:"0.24",alphaDivider:"0.09",alphaInput:"0.1",alphaAction:"0.06",alphaTab:"0.04",alphaScrollbar:"0.2",alphaScrollbarHover:"0.3",alphaCode:"0.12",alphaTag:"0.2",primaryHover:"#7fe7c4",primaryDefault:"#63e2b7",primaryActive:"#5acea7",primarySuppl:"rgb(42, 148, 125)",infoHover:"#8acbec",infoDefault:"#70c0e8",infoActive:"#66afd3",infoSuppl:"rgb(56, 137, 197)",errorHover:"#e98b8b",errorDefault:"#e88080",errorActive:"#e57272",errorSuppl:"rgb(208, 58, 82)",warningHover:"#f5d599",warningDefault:"#f2c97d",warningActive:"#e6c260",warningSuppl:"rgb(240, 138, 0)",successHover:"#7fe7c4",successDefault:"#63e2b7",successActive:"#5acea7",successSuppl:"rgb(42, 148, 125)"},iM=bi(Fe.neutralBase),hS=bi(Fe.neutralInvertBase),oM=`rgba(${hS.slice(0,3).join(", ")}, `;function vt(n){return`${oM+String(n)})`}function sM(n){const e=Array.from(hS);return e[3]=Number(n),ze(iM,e)}const Re=Object.assign(Object.assign({name:"common"},Ti),{baseColor:Fe.neutralBase,primaryColor:Fe.primaryDefault,primaryColorHover:Fe.primaryHover,primaryColorPressed:Fe.primaryActive,primaryColorSuppl:Fe.primarySuppl,infoColor:Fe.infoDefault,infoColorHover:Fe.infoHover,infoColorPressed:Fe.infoActive,infoColorSuppl:Fe.infoSuppl,successColor:Fe.successDefault,successColorHover:Fe.successHover,successColorPressed:Fe.successActive,successColorSuppl:Fe.successSuppl,warningColor:Fe.warningDefault,warningColorHover:Fe.warningHover,warningColorPressed:Fe.warningActive,warningColorSuppl:Fe.warningSuppl,errorColor:Fe.errorDefault,errorColorHover:Fe.errorHover,errorColorPressed:Fe.errorActive,errorColorSuppl:Fe.errorSuppl,textColorBase:Fe.neutralTextBase,textColor1:vt(Fe.alpha1),textColor2:vt(Fe.alpha2),textColor3:vt(Fe.alpha3),textColorDisabled:vt(Fe.alpha4),placeholderColor:vt(Fe.alpha4),placeholderColorDisabled:vt(Fe.alpha5),iconColor:vt(Fe.alpha4),iconColorDisabled:vt(Fe.alpha5),iconColorHover:vt(Number(Fe.alpha4)*1.25),iconColorPressed:vt(Number(Fe.alpha4)*.8),opacity1:Fe.alpha1,opacity2:Fe.alpha2,opacity3:Fe.alpha3,opacity4:Fe.alpha4,opacity5:Fe.alpha5,dividerColor:vt(Fe.alphaDivider),borderColor:vt(Fe.alphaBorder),closeIconColorHover:vt(Number(Fe.alphaClose)),closeIconColor:vt(Number(Fe.alphaClose)),closeIconColorPressed:vt(Number(Fe.alphaClose)),closeColorHover:"rgba(255, 255, 255, .12)",closeColorPressed:"rgba(255, 255, 255, .08)",clearColor:vt(Fe.alpha4),clearColorHover:Qt(vt(Fe.alpha4),{alpha:1.25}),clearColorPressed:Qt(vt(Fe.alpha4),{alpha:.8}),scrollbarColor:vt(Fe.alphaScrollbar),scrollbarColorHover:vt(Fe.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:vt(Fe.alphaProgressRail),railColor:vt(Fe.alphaRail),popoverColor:Fe.neutralPopover,tableColor:Fe.neutralCard,cardColor:Fe.neutralCard,modalColor:Fe.neutralModal,bodyColor:Fe.neutralBody,tagColor:sM(Fe.alphaTag),avatarColor:vt(Fe.alphaAvatar),invertedColor:Fe.neutralBase,inputColor:vt(Fe.alphaInput),codeColor:vt(Fe.alphaCode),tabColor:vt(Fe.alphaTab),actionColor:vt(Fe.alphaAction),tableHeaderColor:vt(Fe.alphaAction),hoverColor:vt(Fe.alphaPending),tableColorHover:vt(Fe.alphaTablePending),tableColorStriped:vt(Fe.alphaTableStriped),pressedColor:vt(Fe.alphaPressed),opacityDisabled:Fe.alphaDisabled,inputColorDisabled:vt(Fe.alphaDisabledInput),buttonColor2:"rgba(255, 255, 255, .08)",buttonColor2Hover:"rgba(255, 255, 255, .12)",buttonColor2Pressed:"rgba(255, 255, 255, .08)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .24), 0 3px 6px 0 rgba(0, 0, 0, .18), 0 5px 12px 4px rgba(0, 0, 0, .12)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .24), 0 6px 12px 0 rgba(0, 0, 0, .16), 0 9px 18px 8px rgba(0, 0, 0, .10)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),Ye={neutralBase:"#FFF",neutralInvertBase:"#000",neutralTextBase:"#000",neutralPopover:"#fff",neutralCard:"#fff",neutralModal:"#fff",neutralBody:"#fff",alpha1:"0.82",alpha2:"0.72",alpha3:"0.38",alpha4:"0.24",alpha5:"0.18",alphaClose:"0.6",alphaDisabled:"0.5",alphaDisabledInput:"0.02",alphaPending:"0.05",alphaTablePending:"0.02",alphaPressed:"0.07",alphaAvatar:"0.2",alphaRail:"0.14",alphaProgressRail:".08",alphaBorder:"0.12",alphaDivider:"0.06",alphaInput:"0",alphaAction:"0.02",alphaTab:"0.04",alphaScrollbar:"0.25",alphaScrollbarHover:"0.4",alphaCode:"0.05",alphaTag:"0.02",primaryHover:"#36ad6a",primaryDefault:"#18a058",primaryActive:"#0c7a43",primarySuppl:"#36ad6a",infoHover:"#4098fc",infoDefault:"#2080f0",infoActive:"#1060c9",infoSuppl:"#4098fc",errorHover:"#de576d",errorDefault:"#d03050",errorActive:"#ab1f3f",errorSuppl:"#de576d",warningHover:"#fcb040",warningDefault:"#f0a020",warningActive:"#c97c10",warningSuppl:"#fcb040",successHover:"#36ad6a",successDefault:"#18a058",successActive:"#0c7a43",successSuppl:"#36ad6a"},aM=bi(Ye.neutralBase),pS=bi(Ye.neutralInvertBase),lM=`rgba(${pS.slice(0,3).join(", ")}, `;function fv(n){return`${lM+String(n)})`}function bn(n){const e=Array.from(pS);return e[3]=Number(n),ze(aM,e)}const Ht=Object.assign(Object.assign({name:"common"},Ti),{baseColor:Ye.neutralBase,primaryColor:Ye.primaryDefault,primaryColorHover:Ye.primaryHover,primaryColorPressed:Ye.primaryActive,primaryColorSuppl:Ye.primarySuppl,infoColor:Ye.infoDefault,infoColorHover:Ye.infoHover,infoColorPressed:Ye.infoActive,infoColorSuppl:Ye.infoSuppl,successColor:Ye.successDefault,successColorHover:Ye.successHover,successColorPressed:Ye.successActive,successColorSuppl:Ye.successSuppl,warningColor:Ye.warningDefault,warningColorHover:Ye.warningHover,warningColorPressed:Ye.warningActive,warningColorSuppl:Ye.warningSuppl,errorColor:Ye.errorDefault,errorColorHover:Ye.errorHover,errorColorPressed:Ye.errorActive,errorColorSuppl:Ye.errorSuppl,textColorBase:Ye.neutralTextBase,textColor1:"rgb(31, 34, 37)",textColor2:"rgb(51, 54, 57)",textColor3:"rgb(118, 124, 130)",textColorDisabled:bn(Ye.alpha4),placeholderColor:bn(Ye.alpha4),placeholderColorDisabled:bn(Ye.alpha5),iconColor:bn(Ye.alpha4),iconColorHover:Qt(bn(Ye.alpha4),{lightness:.75}),iconColorPressed:Qt(bn(Ye.alpha4),{lightness:.9}),iconColorDisabled:bn(Ye.alpha5),opacity1:Ye.alpha1,opacity2:Ye.alpha2,opacity3:Ye.alpha3,opacity4:Ye.alpha4,opacity5:Ye.alpha5,dividerColor:"rgb(239, 239, 245)",borderColor:"rgb(224, 224, 230)",closeIconColor:bn(Number(Ye.alphaClose)),closeIconColorHover:bn(Number(Ye.alphaClose)),closeIconColorPressed:bn(Number(Ye.alphaClose)),closeColorHover:"rgba(0, 0, 0, .09)",closeColorPressed:"rgba(0, 0, 0, .13)",clearColor:bn(Ye.alpha4),clearColorHover:Qt(bn(Ye.alpha4),{lightness:.75}),clearColorPressed:Qt(bn(Ye.alpha4),{lightness:.9}),scrollbarColor:fv(Ye.alphaScrollbar),scrollbarColorHover:fv(Ye.alphaScrollbarHover),scrollbarWidth:"5px",scrollbarHeight:"5px",scrollbarBorderRadius:"5px",progressRailColor:bn(Ye.alphaProgressRail),railColor:"rgb(219, 219, 223)",popoverColor:Ye.neutralPopover,tableColor:Ye.neutralCard,cardColor:Ye.neutralCard,modalColor:Ye.neutralModal,bodyColor:Ye.neutralBody,tagColor:"#eee",avatarColor:bn(Ye.alphaAvatar),invertedColor:"rgb(0, 20, 40)",inputColor:bn(Ye.alphaInput),codeColor:"rgb(244, 244, 248)",tabColor:"rgb(247, 247, 250)",actionColor:"rgb(250, 250, 252)",tableHeaderColor:"rgb(250, 250, 252)",hoverColor:"rgb(243, 243, 245)",tableColorHover:"rgba(0, 0, 100, 0.03)",tableColorStriped:"rgba(0, 0, 100, 0.02)",pressedColor:"rgb(237, 237, 239)",opacityDisabled:Ye.alphaDisabled,inputColorDisabled:"rgb(250, 250, 252)",buttonColor2:"rgba(46, 51, 56, .05)",buttonColor2Hover:"rgba(46, 51, 56, .09)",buttonColor2Pressed:"rgba(46, 51, 56, .13)",boxShadow1:"0 1px 2px -2px rgba(0, 0, 0, .08), 0 3px 6px 0 rgba(0, 0, 0, .06), 0 5px 12px 4px rgba(0, 0, 0, .04)",boxShadow2:"0 3px 6px -4px rgba(0, 0, 0, .12), 0 6px 16px 0 rgba(0, 0, 0, .08), 0 9px 28px 8px rgba(0, 0, 0, .05)",boxShadow3:"0 6px 16px -9px rgba(0, 0, 0, .08), 0 9px 28px 0 rgba(0, 0, 0, .05), 0 12px 48px 16px rgba(0, 0, 0, .03)"}),dM={railInsetHorizontalBottom:"auto 2px 4px 2px",railInsetHorizontalTop:"4px 2px auto 2px",railInsetVerticalRight:"2px 4px 2px auto",railInsetVerticalLeft:"2px auto 2px 4px",railColor:"transparent"};function gS(n){const{scrollbarColor:e,scrollbarColorHover:t,scrollbarHeight:r,scrollbarWidth:i,scrollbarBorderRadius:o}=n;return Object.assign(Object.assign({},dM),{height:r,width:i,borderRadius:o,color:e,colorHover:t})}const hc={name:"Scrollbar",common:Ht,self:gS},Gn={name:"Scrollbar",common:Re,self:gS},cM=j("scrollbar",`
 overflow: hidden;
 position: relative;
 z-index: auto;
 height: 100%;
 width: 100%;
`,[Z(">",[j("scrollbar-container",`
 width: 100%;
 overflow: scroll;
 height: 100%;
 min-height: inherit;
 max-height: inherit;
 scrollbar-width: none;
 `,[Z("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),Z(">",[j("scrollbar-content",`
 box-sizing: border-box;
 min-width: 100%;
 `)])])]),Z(">, +",[j("scrollbar-rail",`
 position: absolute;
 pointer-events: none;
 user-select: none;
 background: var(--n-scrollbar-rail-color);
 -webkit-user-select: none;
 `,[ee("horizontal",`
 height: var(--n-scrollbar-height);
 `,[Z(">",[q("scrollbar",`
 height: var(--n-scrollbar-height);
 border-radius: var(--n-scrollbar-border-radius);
 right: 0;
 `)])]),ee("horizontal--top",`
 top: var(--n-scrollbar-rail-top-horizontal-top); 
 right: var(--n-scrollbar-rail-right-horizontal-top); 
 bottom: var(--n-scrollbar-rail-bottom-horizontal-top); 
 left: var(--n-scrollbar-rail-left-horizontal-top); 
 `),ee("horizontal--bottom",`
 top: var(--n-scrollbar-rail-top-horizontal-bottom); 
 right: var(--n-scrollbar-rail-right-horizontal-bottom); 
 bottom: var(--n-scrollbar-rail-bottom-horizontal-bottom); 
 left: var(--n-scrollbar-rail-left-horizontal-bottom); 
 `),ee("vertical",`
 width: var(--n-scrollbar-width);
 `,[Z(">",[q("scrollbar",`
 width: var(--n-scrollbar-width);
 border-radius: var(--n-scrollbar-border-radius);
 bottom: 0;
 `)])]),ee("vertical--left",`
 top: var(--n-scrollbar-rail-top-vertical-left); 
 right: var(--n-scrollbar-rail-right-vertical-left); 
 bottom: var(--n-scrollbar-rail-bottom-vertical-left); 
 left: var(--n-scrollbar-rail-left-vertical-left); 
 `),ee("vertical--right",`
 top: var(--n-scrollbar-rail-top-vertical-right); 
 right: var(--n-scrollbar-rail-right-vertical-right); 
 bottom: var(--n-scrollbar-rail-bottom-vertical-right); 
 left: var(--n-scrollbar-rail-left-vertical-right); 
 `),ee("disabled",[Z(">",[q("scrollbar","pointer-events: none;")])]),Z(">",[q("scrollbar",`
 z-index: 1;
 position: absolute;
 cursor: pointer;
 pointer-events: all;
 background-color: var(--n-scrollbar-color);
 transition: background-color .2s var(--n-scrollbar-bezier);
 `,[sp(),Z("&:hover","background-color: var(--n-scrollbar-color-hover);")])])])])]),uM=Object.assign(Object.assign({},Ke.props),{duration:{type:Number,default:0},scrollable:{type:Boolean,default:!0},xScrollable:Boolean,trigger:{type:String,default:"hover"},useUnifiedContainer:Boolean,triggerDisplayManually:Boolean,container:Function,content:Function,containerClass:String,containerStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],horizontalRailStyle:[String,Object],verticalRailStyle:[String,Object],onScroll:Function,onWheel:Function,onResize:Function,internalOnUpdateScrollLeft:Function,internalHoistYRail:Boolean,yPlacement:{type:String,default:"right"},xPlacement:{type:String,default:"bottom"}}),Ms=Ce({name:"Scrollbar",props:uM,inheritAttrs:!1,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t,mergedRtlRef:r}=yt(n),i=Dn("Scrollbar",r,e),o=G(null),s=G(null),a=G(null),l=G(null),d=G(null),c=G(null),u=G(null),f=G(null),p=G(null),h=G(null),g=G(null),m=G(0),v=G(0),b=G(!1),y=G(!1);let x=!1,E=!1,A,S,w=0,T=0,C=0,L=0;const P=kI(),_=Ke("Scrollbar","-scrollbar",cM,hc,n,e),D=U(()=>{const{value:N}=f,{value:Q}=c,{value:be}=h;return N===null||Q===null||be===null?0:Math.min(N,be*N/Q+pn(_.value.self.width)*1.5)}),k=U(()=>`${D.value}px`),M=U(()=>{const{value:N}=p,{value:Q}=u,{value:be}=g;return N===null||Q===null||be===null?0:be*N/Q+pn(_.value.self.height)*1.5}),O=U(()=>`${M.value}px`),$=U(()=>{const{value:N}=f,{value:Q}=m,{value:be}=c,{value:Le}=h;if(N===null||be===null||Le===null)return 0;{const De=be-N;return De?Q/De*(Le-D.value):0}}),K=U(()=>`${$.value}px`),Y=U(()=>{const{value:N}=p,{value:Q}=v,{value:be}=u,{value:Le}=g;if(N===null||be===null||Le===null)return 0;{const De=be-N;return De?Q/De*(Le-M.value):0}}),H=U(()=>`${Y.value}px`),B=U(()=>{const{value:N}=f,{value:Q}=c;return N!==null&&Q!==null&&Q>N}),X=U(()=>{const{value:N}=p,{value:Q}=u;return N!==null&&Q!==null&&Q>N}),se=U(()=>{const{trigger:N}=n;return N==="none"||b.value}),pe=U(()=>{const{trigger:N}=n;return N==="none"||y.value}),te=U(()=>{const{container:N}=n;return N?N():s.value}),W=U(()=>{const{content:N}=n;return N?N():a.value}),de=(N,Q)=>{if(!n.scrollable)return;if(typeof N=="number"){F(N,Q??0,0,!1,"auto");return}const{left:be,top:Le,index:De,elSize:$e,position:Ne,behavior:je,el:ht,debounce:Dt=!0}=N;(be!==void 0||Le!==void 0)&&F(be??0,Le??0,0,!1,je),ht!==void 0?F(0,ht.offsetTop,ht.offsetHeight,Dt,je):De!==void 0&&$e!==void 0?F(0,De*$e,$e,Dt,je):Ne==="bottom"?F(0,Number.MAX_SAFE_INTEGER,0,!1,je):Ne==="top"&&F(0,0,0,!1,je)},V=NI(()=>{n.container||de({top:m.value,left:v.value})}),ue=()=>{V.isDeactivated||ge()},Pe=N=>{if(V.isDeactivated)return;const{onResize:Q}=n;Q&&Q(N),ge()},Ae=(N,Q)=>{if(!n.scrollable)return;const{value:be}=te;be&&(typeof N=="object"?be.scrollBy(N):be.scrollBy(N,Q||0))};function F(N,Q,be,Le,De){const{value:$e}=te;if($e){if(Le){const{scrollTop:Ne,offsetHeight:je}=$e;if(Q>Ne){Q+be<=Ne+je||$e.scrollTo({left:N,top:Q+be-je,behavior:De});return}}$e.scrollTo({left:N,top:Q,behavior:De})}}function z(){fe(),ce(),ge()}function ne(){ae()}function ae(){le(),me()}function le(){S!==void 0&&window.clearTimeout(S),S=window.setTimeout(()=>{y.value=!1},n.duration)}function me(){A!==void 0&&window.clearTimeout(A),A=window.setTimeout(()=>{b.value=!1},n.duration)}function fe(){A!==void 0&&window.clearTimeout(A),b.value=!0}function ce(){S!==void 0&&window.clearTimeout(S),y.value=!0}function ve(N){const{onScroll:Q}=n;Q&&Q(N),he()}function he(){const{value:N}=te;N&&(m.value=N.scrollTop,v.value=N.scrollLeft*(i!=null&&i.value?-1:1))}function _e(){const{value:N}=W;N&&(c.value=N.offsetHeight,u.value=N.offsetWidth);const{value:Q}=te;Q&&(f.value=Q.offsetHeight,p.value=Q.offsetWidth);const{value:be}=d,{value:Le}=l;be&&(g.value=be.offsetWidth),Le&&(h.value=Le.offsetHeight)}function re(){const{value:N}=te;N&&(m.value=N.scrollTop,v.value=N.scrollLeft*(i!=null&&i.value?-1:1),f.value=N.offsetHeight,p.value=N.offsetWidth,c.value=N.scrollHeight,u.value=N.scrollWidth);const{value:Q}=d,{value:be}=l;Q&&(g.value=Q.offsetWidth),be&&(h.value=be.offsetHeight)}function ge(){n.scrollable&&(n.useUnifiedContainer?re():(_e(),he()))}function Ee(N){var Q;return!(!((Q=o.value)===null||Q===void 0)&&Q.contains(Ts(N)))}function He(N){N.preventDefault(),N.stopPropagation(),E=!0,Tt("mousemove",window,et,!0),Tt("mouseup",window,Xe,!0),T=v.value,C=i!=null&&i.value?window.innerWidth-N.clientX:N.clientX}function et(N){if(!E)return;A!==void 0&&window.clearTimeout(A),S!==void 0&&window.clearTimeout(S);const{value:Q}=p,{value:be}=u,{value:Le}=M;if(Q===null||be===null)return;const $e=(i!=null&&i.value?window.innerWidth-N.clientX-C:N.clientX-C)*(be-Q)/(Q-Le),Ne=be-Q;let je=T+$e;je=Math.min(Ne,je),je=Math.max(je,0);const{value:ht}=te;if(ht){ht.scrollLeft=je*(i!=null&&i.value?-1:1);const{internalOnUpdateScrollLeft:Dt}=n;Dt&&Dt(je)}}function Xe(N){N.preventDefault(),N.stopPropagation(),bt("mousemove",window,et,!0),bt("mouseup",window,Xe,!0),E=!1,ge(),Ee(N)&&ae()}function lt(N){N.preventDefault(),N.stopPropagation(),x=!0,Tt("mousemove",window,Qe,!0),Tt("mouseup",window,xt,!0),w=m.value,L=N.clientY}function Qe(N){if(!x)return;A!==void 0&&window.clearTimeout(A),S!==void 0&&window.clearTimeout(S);const{value:Q}=f,{value:be}=c,{value:Le}=D;if(Q===null||be===null)return;const $e=(N.clientY-L)*(be-Q)/(Q-Le),Ne=be-Q;let je=w+$e;je=Math.min(Ne,je),je=Math.max(je,0);const{value:ht}=te;ht&&(ht.scrollTop=je)}function xt(N){N.preventDefault(),N.stopPropagation(),bt("mousemove",window,Qe,!0),bt("mouseup",window,xt,!0),x=!1,ge(),Ee(N)&&ae()}Vn(()=>{const{value:N}=X,{value:Q}=B,{value:be}=e,{value:Le}=d,{value:De}=l;Le&&(N?Le.classList.remove(`${be}-scrollbar-rail--disabled`):Le.classList.add(`${be}-scrollbar-rail--disabled`)),De&&(Q?De.classList.remove(`${be}-scrollbar-rail--disabled`):De.classList.add(`${be}-scrollbar-rail--disabled`))}),Nt(()=>{n.container||ge()}),jt(()=>{A!==void 0&&window.clearTimeout(A),S!==void 0&&window.clearTimeout(S),bt("mousemove",window,Qe,!0),bt("mouseup",window,xt,!0)});const it=U(()=>{const{common:{cubicBezierEaseInOut:N},self:{color:Q,colorHover:be,height:Le,width:De,borderRadius:$e,railInsetHorizontalTop:Ne,railInsetHorizontalBottom:je,railInsetVerticalRight:ht,railInsetVerticalLeft:Dt,railColor:St}}=_.value,{top:vn,right:En,bottom:Rn,left:On}=Hn(Ne),{top:Mn,right:sr,bottom:Fn,left:J}=Hn(je),{top:Se,right:Ve,bottom:ot,left:Et}=Hn(i!=null&&i.value?Dm(ht):ht),{top:pt,right:Ft,bottom:Vt,left:jn}=Hn(i!=null&&i.value?Dm(Dt):Dt);return{"--n-scrollbar-bezier":N,"--n-scrollbar-color":Q,"--n-scrollbar-color-hover":be,"--n-scrollbar-border-radius":$e,"--n-scrollbar-width":De,"--n-scrollbar-height":Le,"--n-scrollbar-rail-top-horizontal-top":vn,"--n-scrollbar-rail-right-horizontal-top":En,"--n-scrollbar-rail-bottom-horizontal-top":Rn,"--n-scrollbar-rail-left-horizontal-top":On,"--n-scrollbar-rail-top-horizontal-bottom":Mn,"--n-scrollbar-rail-right-horizontal-bottom":sr,"--n-scrollbar-rail-bottom-horizontal-bottom":Fn,"--n-scrollbar-rail-left-horizontal-bottom":J,"--n-scrollbar-rail-top-vertical-right":Se,"--n-scrollbar-rail-right-vertical-right":Ve,"--n-scrollbar-rail-bottom-vertical-right":ot,"--n-scrollbar-rail-left-vertical-right":Et,"--n-scrollbar-rail-top-vertical-left":pt,"--n-scrollbar-rail-right-vertical-left":Ft,"--n-scrollbar-rail-bottom-vertical-left":Vt,"--n-scrollbar-rail-left-vertical-left":jn,"--n-scrollbar-rail-color":St}}),ke=t?Gt("scrollbar",void 0,it,n):void 0;return Object.assign(Object.assign({},{scrollTo:de,scrollBy:Ae,sync:ge,syncUnifiedContainer:re,handleMouseEnterWrapper:z,handleMouseLeaveWrapper:ne}),{mergedClsPrefix:e,rtlEnabled:i,containerScrollTop:m,wrapperRef:o,containerRef:s,contentRef:a,yRailRef:l,xRailRef:d,needYBar:B,needXBar:X,yBarSizePx:k,xBarSizePx:O,yBarTopPx:K,xBarLeftPx:H,isShowXBar:se,isShowYBar:pe,isIos:P,handleScroll:ve,handleContentResize:ue,handleContainerResize:Pe,handleYScrollMouseDown:lt,handleXScrollMouseDown:He,cssVars:t?void 0:it,themeClass:ke==null?void 0:ke.themeClass,onRender:ke==null?void 0:ke.onRender})},render(){var n;const{$slots:e,mergedClsPrefix:t,triggerDisplayManually:r,rtlEnabled:i,internalHoistYRail:o,yPlacement:s,xPlacement:a,xScrollable:l}=this;if(!this.scrollable)return(n=e.default)===null||n===void 0?void 0:n.call(e);const d=this.trigger==="none",c=(p,h)=>R("div",{ref:"yRailRef",class:[`${t}-scrollbar-rail`,`${t}-scrollbar-rail--vertical`,`${t}-scrollbar-rail--vertical--${s}`,p],"data-scrollbar-rail":!0,style:[h||"",this.verticalRailStyle],"aria-hidden":!0},R(d?Sf:ir,d?null:{name:"fade-in-transition"},{default:()=>this.needYBar&&this.isShowYBar&&!this.isIos?R("div",{class:`${t}-scrollbar-rail__scrollbar`,style:{height:this.yBarSizePx,top:this.yBarTopPx},onMousedown:this.handleYScrollMouseDown}):null})),u=()=>{var p,h;return(p=this.onRender)===null||p===void 0||p.call(this),R("div",Ar(this.$attrs,{role:"none",ref:"wrapperRef",class:[`${t}-scrollbar`,this.themeClass,i&&`${t}-scrollbar--rtl`],style:this.cssVars,onMouseenter:r?void 0:this.handleMouseEnterWrapper,onMouseleave:r?void 0:this.handleMouseLeaveWrapper}),[this.container?(h=e.default)===null||h===void 0?void 0:h.call(e):R("div",{role:"none",ref:"containerRef",class:[`${t}-scrollbar-container`,this.containerClass],style:this.containerStyle,onScroll:this.handleScroll,onWheel:this.onWheel},R(ws,{onResize:this.handleContentResize},{default:()=>R("div",{ref:"contentRef",role:"none",style:[{width:this.xScrollable?"fit-content":null},this.contentStyle],class:[`${t}-scrollbar-content`,this.contentClass]},e)})),o?null:c(void 0,void 0),l&&R("div",{ref:"xRailRef",class:[`${t}-scrollbar-rail`,`${t}-scrollbar-rail--horizontal`,`${t}-scrollbar-rail--horizontal--${a}`],style:this.horizontalRailStyle,"data-scrollbar-rail":!0,"aria-hidden":!0},R(d?Sf:ir,d?null:{name:"fade-in-transition"},{default:()=>this.needXBar&&this.isShowXBar&&!this.isIos?R("div",{class:`${t}-scrollbar-rail__scrollbar`,style:{width:this.xBarSizePx,right:i?this.xBarLeftPx:void 0,left:i?void 0:this.xBarLeftPx},onMousedown:this.handleXScrollMouseDown}):null}))])},f=this.container?u():R(ws,{onResize:this.handleContainerResize},{default:u});return o?R(mt,null,f,c(this.themeClass,this.cssVars)):f}}),mS=Ms;function hv(n){return Array.isArray(n)?n:[n]}const Df={STOP:"STOP"};function vS(n,e){const t=e(n);n.children!==void 0&&t!==Df.STOP&&n.children.forEach(r=>vS(r,e))}function fM(n,e={}){const{preserveGroup:t=!1}=e,r=[],i=t?s=>{s.isLeaf||(r.push(s.key),o(s.children))}:s=>{s.isLeaf||(s.isGroup||r.push(s.key),o(s.children))};function o(s){s.forEach(i)}return o(n),r}function hM(n,e){const{isLeaf:t}=n;return t!==void 0?t:!e(n)}function pM(n){return n.children}function gM(n){return n.key}function mM(){return!1}function vM(n,e){const{isLeaf:t}=n;return!(t===!1&&!Array.isArray(e(n)))}function bM(n){return n.disabled===!0}function yM(n,e){return n.isLeaf===!1&&!Array.isArray(e(n))}function uu(n){var e;return n==null?[]:Array.isArray(n)?n:(e=n.checkedKeys)!==null&&e!==void 0?e:[]}function fu(n){var e;return n==null||Array.isArray(n)?[]:(e=n.indeterminateKeys)!==null&&e!==void 0?e:[]}function xM(n,e){const t=new Set(n);return e.forEach(r=>{t.has(r)||t.add(r)}),Array.from(t)}function SM(n,e){const t=new Set(n);return e.forEach(r=>{t.has(r)&&t.delete(r)}),Array.from(t)}function CM(n){return(n==null?void 0:n.type)==="group"}function TM(n){const e=new Map;return n.forEach((t,r)=>{e.set(t.key,r)}),t=>{var r;return(r=e.get(t))!==null&&r!==void 0?r:null}}class wM extends Error{constructor(){super(),this.message="SubtreeNotLoadedError: checking a subtree whose required nodes are not fully loaded."}}function EM(n,e,t,r){return wd(e.concat(n),t,r,!1)}function RM(n,e){const t=new Set;return n.forEach(r=>{const i=e.treeNodeMap.get(r);if(i!==void 0){let o=i.parent;for(;o!==null&&!(o.disabled||t.has(o.key));)t.add(o.key),o=o.parent}}),t}function AM(n,e,t,r){const i=wd(e,t,r,!1),o=wd(n,t,r,!0),s=RM(n,t),a=[];return i.forEach(l=>{(o.has(l)||s.has(l))&&a.push(l)}),a.forEach(l=>i.delete(l)),i}function hu(n,e){const{checkedKeys:t,keysToCheck:r,keysToUncheck:i,indeterminateKeys:o,cascade:s,leafOnly:a,checkStrategy:l,allowNotLoaded:d}=n;if(!s)return r!==void 0?{checkedKeys:xM(t,r),indeterminateKeys:Array.from(o)}:i!==void 0?{checkedKeys:SM(t,i),indeterminateKeys:Array.from(o)}:{checkedKeys:Array.from(t),indeterminateKeys:Array.from(o)};const{levelTreeNodeMap:c}=e;let u;i!==void 0?u=AM(i,t,e,d):r!==void 0?u=EM(r,t,e,d):u=wd(t,e,d,!1);const f=l==="parent",p=l==="child"||a,h=u,g=new Set,m=Math.max.apply(null,Array.from(c.keys()));for(let v=m;v>=0;v-=1){const b=v===0,y=c.get(v);for(const x of y){if(x.isLeaf)continue;const{key:E,shallowLoaded:A}=x;if(p&&A&&x.children.forEach(C=>{!C.disabled&&!C.isLeaf&&C.shallowLoaded&&h.has(C.key)&&h.delete(C.key)}),x.disabled||!A)continue;let S=!0,w=!1,T=!0;for(const C of x.children){const L=C.key;if(!C.disabled){if(T&&(T=!1),h.has(L))w=!0;else if(g.has(L)){w=!0,S=!1;break}else if(S=!1,w)break}}S&&!T?(f&&x.children.forEach(C=>{!C.disabled&&h.has(C.key)&&h.delete(C.key)}),h.add(E)):w&&g.add(E),b&&p&&h.has(E)&&h.delete(E)}}return{checkedKeys:Array.from(h),indeterminateKeys:Array.from(g)}}function wd(n,e,t,r){const{treeNodeMap:i,getChildren:o}=e,s=new Set,a=new Set(n);return n.forEach(l=>{const d=i.get(l);d!==void 0&&vS(d,c=>{if(c.disabled)return Df.STOP;const{key:u}=c;if(!s.has(u)&&(s.add(u),a.add(u),yM(c.rawNode,o))){if(r)return Df.STOP;if(!t)throw new wM}})}),a}function IM(n,{includeGroup:e=!1,includeSelf:t=!0},r){var i;const o=r.treeNodeMap;let s=n==null?null:(i=o.get(n))!==null&&i!==void 0?i:null;const a={keyPath:[],treeNodePath:[],treeNode:s};if(s!=null&&s.ignored)return a.treeNode=null,a;for(;s;)!s.ignored&&(e||!s.isGroup)&&a.treeNodePath.push(s),s=s.parent;return a.treeNodePath.reverse(),t||a.treeNodePath.pop(),a.keyPath=a.treeNodePath.map(l=>l.key),a}function LM(n){if(n.length===0)return null;const e=n[0];return e.isGroup||e.ignored||e.disabled?e.getNext():e}function PM(n,e){const t=n.siblings,r=t.length,{index:i}=n;return e?t[(i+1)%r]:i===t.length-1?null:t[i+1]}function pv(n,e,{loop:t=!1,includeDisabled:r=!1}={}){const i=e==="prev"?_M:PM,o={reverse:e==="prev"};let s=!1,a=null;function l(d){if(d!==null){if(d===n){if(!s)s=!0;else if(!n.disabled&&!n.isGroup){a=n;return}}else if((!d.disabled||r)&&!d.ignored&&!d.isGroup){a=d;return}if(d.isGroup){const c=ap(d,o);c!==null?a=c:l(i(d,t))}else{const c=i(d,!1);if(c!==null)l(c);else{const u=kM(d);u!=null&&u.isGroup?l(i(u,t)):t&&l(i(d,!0))}}}}return l(n),a}function _M(n,e){const t=n.siblings,r=t.length,{index:i}=n;return e?t[(i-1+r)%r]:i===0?null:t[i-1]}function kM(n){return n.parent}function ap(n,e={}){const{reverse:t=!1}=e,{children:r}=n;if(r){const{length:i}=r,o=t?i-1:0,s=t?-1:i,a=t?-1:1;for(let l=o;l!==s;l+=a){const d=r[l];if(!d.disabled&&!d.ignored)if(d.isGroup){const c=ap(d,e);if(c!==null)return c}else return d}}return null}const DM={getChild(){return this.ignored?null:ap(this)},getParent(){const{parent:n}=this;return n!=null&&n.isGroup?n.getParent():n},getNext(n={}){return pv(this,"next",n)},getPrev(n={}){return pv(this,"prev",n)}};function OM(n,e){const t=e?new Set(e):void 0,r=[];function i(o){o.forEach(s=>{r.push(s),!(s.isLeaf||!s.children||s.ignored)&&(s.isGroup||t===void 0||t.has(s.key))&&i(s.children)})}return i(n),r}function MM(n,e){const t=n.key;for(;e;){if(e.key===t)return!0;e=e.parent}return!1}function bS(n,e,t,r,i,o=null,s=0){const a=[];return n.forEach((l,d)=>{var c;const u=Object.create(r);if(u.rawNode=l,u.siblings=a,u.level=s,u.index=d,u.isFirstChild=d===0,u.isLastChild=d+1===n.length,u.parent=o,!u.ignored){const f=i(l);Array.isArray(f)&&(u.children=bS(f,e,t,r,i,u,s+1))}a.push(u),e.set(u.key,u),t.has(s)||t.set(s,[]),(c=t.get(s))===null||c===void 0||c.push(u)}),a}function pc(n,e={}){var t;const r=new Map,i=new Map,{getDisabled:o=bM,getIgnored:s=mM,getIsGroup:a=CM,getKey:l=gM}=e,d=(t=e.getChildren)!==null&&t!==void 0?t:pM,c=e.ignoreEmptyChildren?x=>{const E=d(x);return Array.isArray(E)?E.length?E:null:E}:d,u=Object.assign({get key(){return l(this.rawNode)},get disabled(){return o(this.rawNode)},get isGroup(){return a(this.rawNode)},get isLeaf(){return hM(this.rawNode,c)},get shallowLoaded(){return vM(this.rawNode,c)},get ignored(){return s(this.rawNode)},contains(x){return MM(this,x)}},DM),f=bS(n,r,i,u,c);function p(x){if(x==null)return null;const E=r.get(x);return E&&!E.isGroup&&!E.ignored?E:null}function h(x){if(x==null)return null;const E=r.get(x);return E&&!E.ignored?E:null}function g(x,E){const A=h(x);return A?A.getPrev(E):null}function m(x,E){const A=h(x);return A?A.getNext(E):null}function v(x){const E=h(x);return E?E.getParent():null}function b(x){const E=h(x);return E?E.getChild():null}const y={treeNodes:f,treeNodeMap:r,levelTreeNodeMap:i,maxLevel:Math.max(...i.keys()),getChildren:c,getFlattenedNodes(x){return OM(f,x)},getNode:p,getPrev:g,getNext:m,getParent:v,getChild:b,getFirstAvailableNode(){return LM(f)},getPath(x,E={}){return IM(x,E,y)},getCheckedKeys(x,E={}){const{cascade:A=!0,leafOnly:S=!1,checkStrategy:w="all",allowNotLoaded:T=!1}=E;return hu({checkedKeys:uu(x),indeterminateKeys:fu(x),cascade:A,leafOnly:S,checkStrategy:w,allowNotLoaded:T},y)},check(x,E,A={}){const{cascade:S=!0,leafOnly:w=!1,checkStrategy:T="all",allowNotLoaded:C=!1}=A;return hu({checkedKeys:uu(E),indeterminateKeys:fu(E),keysToCheck:x==null?[]:hv(x),cascade:S,leafOnly:w,checkStrategy:T,allowNotLoaded:C},y)},uncheck(x,E,A={}){const{cascade:S=!0,leafOnly:w=!1,checkStrategy:T="all",allowNotLoaded:C=!1}=A;return hu({checkedKeys:uu(E),indeterminateKeys:fu(E),keysToUncheck:x==null?[]:hv(x),cascade:S,leafOnly:w,checkStrategy:T,allowNotLoaded:C},y)},getNonLeafKeys(x={}){return fM(f,x)}};return y}const FM={iconSizeTiny:"28px",iconSizeSmall:"34px",iconSizeMedium:"40px",iconSizeLarge:"46px",iconSizeHuge:"52px"};function yS(n){const{textColorDisabled:e,iconColor:t,textColor2:r,fontSizeTiny:i,fontSizeSmall:o,fontSizeMedium:s,fontSizeLarge:a,fontSizeHuge:l}=n;return Object.assign(Object.assign({},FM),{fontSizeTiny:i,fontSizeSmall:o,fontSizeMedium:s,fontSizeLarge:a,fontSizeHuge:l,textColor:e,iconColor:t,extraTextColor:r})}const gc={name:"Empty",common:Ht,self:yS},Wo={name:"Empty",common:Re,self:yS},$M=j("empty",`
 display: flex;
 flex-direction: column;
 align-items: center;
 font-size: var(--n-font-size);
`,[q("icon",`
 width: var(--n-icon-size);
 height: var(--n-icon-size);
 font-size: var(--n-icon-size);
 line-height: var(--n-icon-size);
 color: var(--n-icon-color);
 transition:
 color .3s var(--n-bezier);
 `,[Z("+",[q("description",`
 margin-top: 8px;
 `)])]),q("description",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),q("extra",`
 text-align: center;
 transition: color .3s var(--n-bezier);
 margin-top: 12px;
 color: var(--n-extra-text-color);
 `)]),BM=Object.assign(Object.assign({},Ke.props),{description:String,showDescription:{type:Boolean,default:!0},showIcon:{type:Boolean,default:!0},size:{type:String,default:"medium"},renderIcon:Function}),Ed=Ce({name:"Empty",props:BM,slots:Object,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t,mergedComponentPropsRef:r}=yt(n),i=Ke("Empty","-empty",$M,gc,n,e),{localeRef:o}=il("Empty"),s=U(()=>{var c,u,f;return(c=n.description)!==null&&c!==void 0?c:(f=(u=r==null?void 0:r.value)===null||u===void 0?void 0:u.Empty)===null||f===void 0?void 0:f.description}),a=U(()=>{var c,u;return((u=(c=r==null?void 0:r.value)===null||c===void 0?void 0:c.Empty)===null||u===void 0?void 0:u.renderIcon)||(()=>R(qO,null))}),l=U(()=>{const{size:c}=n,{common:{cubicBezierEaseInOut:u},self:{[xe("iconSize",c)]:f,[xe("fontSize",c)]:p,textColor:h,iconColor:g,extraTextColor:m}}=i.value;return{"--n-icon-size":f,"--n-font-size":p,"--n-bezier":u,"--n-text-color":h,"--n-icon-color":g,"--n-extra-text-color":m}}),d=t?Gt("empty",U(()=>{let c="";const{size:u}=n;return c+=u[0],c}),l,n):void 0;return{mergedClsPrefix:e,mergedRenderIcon:a,localizedDescription:U(()=>s.value||o.value.description),cssVars:t?void 0:l,themeClass:d==null?void 0:d.themeClass,onRender:d==null?void 0:d.onRender}},render(){const{$slots:n,mergedClsPrefix:e,onRender:t}=this;return t==null||t(),R("div",{class:[`${e}-empty`,this.themeClass],style:this.cssVars},this.showIcon?R("div",{class:`${e}-empty__icon`},n.icon?n.icon():R(on,{clsPrefix:e},{default:this.mergedRenderIcon})):null,this.showDescription?R("div",{class:`${e}-empty__description`},n.default?n.default():this.localizedDescription):null,n.extra?R("div",{class:`${e}-empty__extra`},n.extra()):null)}}),NM={height:"calc(var(--n-option-height) * 7.6)",paddingTiny:"4px 0",paddingSmall:"4px 0",paddingMedium:"4px 0",paddingLarge:"4px 0",paddingHuge:"4px 0",optionPaddingTiny:"0 12px",optionPaddingSmall:"0 12px",optionPaddingMedium:"0 12px",optionPaddingLarge:"0 12px",optionPaddingHuge:"0 12px",loadingSize:"18px"};function xS(n){const{borderRadius:e,popoverColor:t,textColor3:r,dividerColor:i,textColor2:o,primaryColorPressed:s,textColorDisabled:a,primaryColor:l,opacityDisabled:d,hoverColor:c,fontSizeTiny:u,fontSizeSmall:f,fontSizeMedium:p,fontSizeLarge:h,fontSizeHuge:g,heightTiny:m,heightSmall:v,heightMedium:b,heightLarge:y,heightHuge:x}=n;return Object.assign(Object.assign({},NM),{optionFontSizeTiny:u,optionFontSizeSmall:f,optionFontSizeMedium:p,optionFontSizeLarge:h,optionFontSizeHuge:g,optionHeightTiny:m,optionHeightSmall:v,optionHeightMedium:b,optionHeightLarge:y,optionHeightHuge:x,borderRadius:e,color:t,groupHeaderTextColor:r,actionDividerColor:i,optionTextColor:o,optionTextColorPressed:s,optionTextColorDisabled:a,optionTextColorActive:l,optionOpacityDisabled:d,optionCheckColor:l,optionColorPending:c,optionColorActive:"rgba(0, 0, 0, 0)",optionColorActivePending:c,actionTextColor:o,loadingColor:l})}const lp={name:"InternalSelectMenu",common:Ht,peers:{Scrollbar:hc,Empty:gc},self:xS},ol={name:"InternalSelectMenu",common:Re,peers:{Scrollbar:Gn,Empty:Wo},self:xS},gv=Ce({name:"NBaseSelectGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{renderLabelRef:n,renderOptionRef:e,labelFieldRef:t,nodePropsRef:r}=Be(Bh);return{labelField:t,nodeProps:r,renderLabel:n,renderOption:e}},render(){const{clsPrefix:n,renderLabel:e,renderOption:t,nodeProps:r,tmNode:{rawNode:i}}=this,o=r==null?void 0:r(i),s=e?e(i,!1):gn(i[this.labelField],i,!1),a=R("div",Object.assign({},o,{class:[`${n}-base-select-group-header`,o==null?void 0:o.class]}),s);return i.render?i.render({node:a,option:i}):t?t({node:a,option:i,selected:!1}):a}});function zM(n,e){return R(ir,{name:"fade-in-scale-up-transition"},{default:()=>n?R(on,{clsPrefix:e,class:`${e}-base-select-option__check`},{default:()=>R(WO)}):null})}const mv=Ce({name:"NBaseSelectOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(n){const{valueRef:e,pendingTmNodeRef:t,multipleRef:r,valueSetRef:i,renderLabelRef:o,renderOptionRef:s,labelFieldRef:a,valueFieldRef:l,showCheckmarkRef:d,nodePropsRef:c,handleOptionClick:u,handleOptionMouseEnter:f}=Be(Bh),p=At(()=>{const{value:v}=t;return v?n.tmNode.key===v.key:!1});function h(v){const{tmNode:b}=n;b.disabled||u(v,b)}function g(v){const{tmNode:b}=n;b.disabled||f(v,b)}function m(v){const{tmNode:b}=n,{value:y}=p;b.disabled||y||f(v,b)}return{multiple:r,isGrouped:At(()=>{const{tmNode:v}=n,{parent:b}=v;return b&&b.rawNode.type==="group"}),showCheckmark:d,nodeProps:c,isPending:p,isSelected:At(()=>{const{value:v}=e,{value:b}=r;if(v===null)return!1;const y=n.tmNode.rawNode[l.value];if(b){const{value:x}=i;return x.has(y)}else return v===y}),labelField:a,renderLabel:o,renderOption:s,handleMouseMove:m,handleMouseEnter:g,handleClick:h}},render(){const{clsPrefix:n,tmNode:{rawNode:e},isSelected:t,isPending:r,isGrouped:i,showCheckmark:o,nodeProps:s,renderOption:a,renderLabel:l,handleClick:d,handleMouseEnter:c,handleMouseMove:u}=this,f=zM(t,n),p=l?[l(e,t),o&&f]:[gn(e[this.labelField],e,t),o&&f],h=s==null?void 0:s(e),g=R("div",Object.assign({},h,{class:[`${n}-base-select-option`,e.class,h==null?void 0:h.class,{[`${n}-base-select-option--disabled`]:e.disabled,[`${n}-base-select-option--selected`]:t,[`${n}-base-select-option--grouped`]:i,[`${n}-base-select-option--pending`]:r,[`${n}-base-select-option--show-checkmark`]:o}],style:[(h==null?void 0:h.style)||"",e.style||""],onClick:xa([d,h==null?void 0:h.onClick]),onMouseenter:xa([c,h==null?void 0:h.onMouseenter]),onMousemove:xa([u,h==null?void 0:h.onMousemove])}),R("div",{class:`${n}-base-select-option__content`},p));return e.render?e.render({node:g,option:e,selected:t}):a?a({node:g,option:e,selected:t}):g}}),{cubicBezierEaseIn:vv,cubicBezierEaseOut:bv}=Ti;function sl({transformOrigin:n="inherit",duration:e=".2s",enterScale:t=".9",originalTransform:r="",originalTransition:i=""}={}){return[Z("&.fade-in-scale-up-transition-leave-active",{transformOrigin:n,transition:`opacity ${e} ${vv}, transform ${e} ${vv} ${i&&`,${i}`}`}),Z("&.fade-in-scale-up-transition-enter-active",{transformOrigin:n,transition:`opacity ${e} ${bv}, transform ${e} ${bv} ${i&&`,${i}`}`}),Z("&.fade-in-scale-up-transition-enter-from, &.fade-in-scale-up-transition-leave-to",{opacity:0,transform:`${r} scale(${t})`}),Z("&.fade-in-scale-up-transition-leave-from, &.fade-in-scale-up-transition-enter-to",{opacity:1,transform:`${r} scale(1)`})]}const UM=j("base-select-menu",`
 line-height: 1.5;
 outline: none;
 z-index: 0;
 position: relative;
 border-radius: var(--n-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-color);
`,[j("scrollbar",`
 max-height: var(--n-height);
 `),j("virtual-list",`
 max-height: var(--n-height);
 `),j("base-select-option",`
 min-height: var(--n-option-height);
 font-size: var(--n-option-font-size);
 display: flex;
 align-items: center;
 `,[q("content",`
 z-index: 1;
 white-space: nowrap;
 text-overflow: ellipsis;
 overflow: hidden;
 `)]),j("base-select-group-header",`
 min-height: var(--n-option-height);
 font-size: .93em;
 display: flex;
 align-items: center;
 `),j("base-select-menu-option-wrapper",`
 position: relative;
 width: 100%;
 `),q("loading, empty",`
 display: flex;
 padding: 12px 32px;
 flex: 1;
 justify-content: center;
 `),q("loading",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 `),q("header",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),q("action",`
 padding: 8px var(--n-option-padding-left);
 font-size: var(--n-option-font-size);
 transition: 
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 border-top: 1px solid var(--n-action-divider-color);
 color: var(--n-action-text-color);
 `),j("base-select-group-header",`
 position: relative;
 cursor: default;
 padding: var(--n-option-padding);
 color: var(--n-group-header-text-color);
 `),j("base-select-option",`
 cursor: pointer;
 position: relative;
 padding: var(--n-option-padding);
 transition:
 color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 box-sizing: border-box;
 color: var(--n-option-text-color);
 opacity: 1;
 `,[ee("show-checkmark",`
 padding-right: calc(var(--n-option-padding-right) + 20px);
 `),Z("&::before",`
 content: "";
 position: absolute;
 left: 4px;
 right: 4px;
 top: 0;
 bottom: 0;
 border-radius: var(--n-border-radius);
 transition: background-color .3s var(--n-bezier);
 `),Z("&:active",`
 color: var(--n-option-text-color-pressed);
 `),ee("grouped",`
 padding-left: calc(var(--n-option-padding-left) * 1.5);
 `),ee("pending",[Z("&::before",`
 background-color: var(--n-option-color-pending);
 `)]),ee("selected",`
 color: var(--n-option-text-color-active);
 `,[Z("&::before",`
 background-color: var(--n-option-color-active);
 `),ee("pending",[Z("&::before",`
 background-color: var(--n-option-color-active-pending);
 `)])]),ee("disabled",`
 cursor: not-allowed;
 `,[Pt("selected",`
 color: var(--n-option-text-color-disabled);
 `),ee("selected",`
 opacity: var(--n-option-opacity-disabled);
 `)]),q("check",`
 font-size: 16px;
 position: absolute;
 right: calc(var(--n-option-padding-right) - 4px);
 top: calc(50% - 7px);
 color: var(--n-option-check-color);
 transition: color .3s var(--n-bezier);
 `,[sl({enterScale:"0.5"})])])]),SS=Ce({name:"InternalSelectMenu",props:Object.assign(Object.assign({},Ke.props),{clsPrefix:{type:String,required:!0},scrollable:{type:Boolean,default:!0},treeMate:{type:Object,required:!0},multiple:Boolean,size:{type:String,default:"medium"},value:{type:[String,Number,Array],default:null},autoPending:Boolean,virtualScroll:{type:Boolean,default:!0},show:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},loading:Boolean,focusable:Boolean,renderLabel:Function,renderOption:Function,nodeProps:Function,showCheckmark:{type:Boolean,default:!0},onMousedown:Function,onScroll:Function,onFocus:Function,onBlur:Function,onKeyup:Function,onKeydown:Function,onTabOut:Function,onMouseenter:Function,onMouseleave:Function,onResize:Function,resetMenuOnOptionsChange:{type:Boolean,default:!0},inlineThemeDisabled:Boolean,onToggle:Function}),setup(n){const{mergedClsPrefixRef:e,mergedRtlRef:t}=yt(n),r=Dn("InternalSelectMenu",t,e),i=Ke("InternalSelectMenu","-internal-select-menu",UM,lp,n,Ie(n,"clsPrefix")),o=G(null),s=G(null),a=G(null),l=U(()=>n.treeMate.getFlattenedNodes()),d=U(()=>TM(l.value)),c=G(null);function u(){const{treeMate:B}=n;let X=null;const{value:se}=n;se===null?X=B.getFirstAvailableNode():(n.multiple?X=B.getNode((se||[])[(se||[]).length-1]):X=B.getNode(se),(!X||X.disabled)&&(X=B.getFirstAvailableNode())),D(X||null)}function f(){const{value:B}=c;B&&!n.treeMate.getNode(B.key)&&(c.value=null)}let p;at(()=>n.show,B=>{B?p=at(()=>n.treeMate,()=>{n.resetMenuOnOptionsChange?(n.autoPending?u():f(),wn(k)):f()},{immediate:!0}):p==null||p()},{immediate:!0}),jt(()=>{p==null||p()});const h=U(()=>pn(i.value.self[xe("optionHeight",n.size)])),g=U(()=>Hn(i.value.self[xe("padding",n.size)])),m=U(()=>n.multiple&&Array.isArray(n.value)?new Set(n.value):new Set),v=U(()=>{const B=l.value;return B&&B.length===0});function b(B){const{onToggle:X}=n;X&&X(B)}function y(B){const{onScroll:X}=n;X&&X(B)}function x(B){var X;(X=a.value)===null||X===void 0||X.sync(),y(B)}function E(){var B;(B=a.value)===null||B===void 0||B.sync()}function A(){const{value:B}=c;return B||null}function S(B,X){X.disabled||D(X,!1)}function w(B,X){X.disabled||b(X)}function T(B){var X;hr(B,"action")||(X=n.onKeyup)===null||X===void 0||X.call(n,B)}function C(B){var X;hr(B,"action")||(X=n.onKeydown)===null||X===void 0||X.call(n,B)}function L(B){var X;(X=n.onMousedown)===null||X===void 0||X.call(n,B),!n.focusable&&B.preventDefault()}function P(){const{value:B}=c;B&&D(B.getNext({loop:!0}),!0)}function _(){const{value:B}=c;B&&D(B.getPrev({loop:!0}),!0)}function D(B,X=!1){c.value=B,X&&k()}function k(){var B,X;const se=c.value;if(!se)return;const pe=d.value(se.key);pe!==null&&(n.virtualScroll?(B=s.value)===null||B===void 0||B.scrollTo({index:pe}):(X=a.value)===null||X===void 0||X.scrollTo({index:pe,elSize:h.value}))}function M(B){var X,se;!((X=o.value)===null||X===void 0)&&X.contains(B.target)&&((se=n.onFocus)===null||se===void 0||se.call(n,B))}function O(B){var X,se;!((X=o.value)===null||X===void 0)&&X.contains(B.relatedTarget)||(se=n.onBlur)===null||se===void 0||se.call(n,B)}st(Bh,{handleOptionMouseEnter:S,handleOptionClick:w,valueSetRef:m,pendingTmNodeRef:c,nodePropsRef:Ie(n,"nodeProps"),showCheckmarkRef:Ie(n,"showCheckmark"),multipleRef:Ie(n,"multiple"),valueRef:Ie(n,"value"),renderLabelRef:Ie(n,"renderLabel"),renderOptionRef:Ie(n,"renderOption"),labelFieldRef:Ie(n,"labelField"),valueFieldRef:Ie(n,"valueField")}),st(dx,o),Nt(()=>{const{value:B}=a;B&&B.sync()});const $=U(()=>{const{size:B}=n,{common:{cubicBezierEaseInOut:X},self:{height:se,borderRadius:pe,color:te,groupHeaderTextColor:W,actionDividerColor:de,optionTextColorPressed:V,optionTextColor:ue,optionTextColorDisabled:Pe,optionTextColorActive:Ae,optionOpacityDisabled:F,optionCheckColor:z,actionTextColor:ne,optionColorPending:ae,optionColorActive:le,loadingColor:me,loadingSize:fe,optionColorActivePending:ce,[xe("optionFontSize",B)]:ve,[xe("optionHeight",B)]:he,[xe("optionPadding",B)]:_e}}=i.value;return{"--n-height":se,"--n-action-divider-color":de,"--n-action-text-color":ne,"--n-bezier":X,"--n-border-radius":pe,"--n-color":te,"--n-option-font-size":ve,"--n-group-header-text-color":W,"--n-option-check-color":z,"--n-option-color-pending":ae,"--n-option-color-active":le,"--n-option-color-active-pending":ce,"--n-option-height":he,"--n-option-opacity-disabled":F,"--n-option-text-color":ue,"--n-option-text-color-active":Ae,"--n-option-text-color-disabled":Pe,"--n-option-text-color-pressed":V,"--n-option-padding":_e,"--n-option-padding-left":Hn(_e,"left"),"--n-option-padding-right":Hn(_e,"right"),"--n-loading-color":me,"--n-loading-size":fe}}),{inlineThemeDisabled:K}=n,Y=K?Gt("internal-select-menu",U(()=>n.size[0]),$,n):void 0,H={selfRef:o,next:P,prev:_,getPendingTmNode:A};return Ix(o,n.onResize),Object.assign({mergedTheme:i,mergedClsPrefix:e,rtlEnabled:r,virtualListRef:s,scrollbarRef:a,itemSize:h,padding:g,flattenedNodes:l,empty:v,virtualListContainer(){const{value:B}=s;return B==null?void 0:B.listElRef},virtualListContent(){const{value:B}=s;return B==null?void 0:B.itemsElRef},doScroll:y,handleFocusin:M,handleFocusout:O,handleKeyUp:T,handleKeyDown:C,handleMouseDown:L,handleVirtualListResize:E,handleVirtualListScroll:x,cssVars:K?void 0:$,themeClass:Y==null?void 0:Y.themeClass,onRender:Y==null?void 0:Y.onRender},H)},render(){const{$slots:n,virtualScroll:e,clsPrefix:t,mergedTheme:r,themeClass:i,onRender:o}=this;return o==null||o(),R("div",{ref:"selfRef",tabindex:this.focusable?0:-1,class:[`${t}-base-select-menu`,this.rtlEnabled&&`${t}-base-select-menu--rtl`,i,this.multiple&&`${t}-base-select-menu--multiple`],style:this.cssVars,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onKeyup:this.handleKeyUp,onKeydown:this.handleKeyDown,onMousedown:this.handleMouseDown,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},Ct(n.header,s=>s&&R("div",{class:`${t}-base-select-menu__header`,"data-header":!0,key:"header"},s)),this.loading?R("div",{class:`${t}-base-select-menu__loading`},R(ao,{clsPrefix:t,strokeWidth:20})):this.empty?R("div",{class:`${t}-base-select-menu__empty`,"data-empty":!0},Er(n.empty,()=>[R(Ed,{theme:r.peers.Empty,themeOverrides:r.peerOverrides.Empty,size:this.size})])):R(Ms,{ref:"scrollbarRef",theme:r.peers.Scrollbar,themeOverrides:r.peerOverrides.Scrollbar,scrollable:this.scrollable,container:e?this.virtualListContainer:void 0,content:e?this.virtualListContent:void 0,onScroll:e?void 0:this.doScroll},{default:()=>e?R(jh,{ref:"virtualListRef",class:`${t}-virtual-list`,items:this.flattenedNodes,itemSize:this.itemSize,showScrollbar:!1,paddingTop:this.padding.top,paddingBottom:this.padding.bottom,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemResizable:!0},{default:({item:s})=>s.isGroup?R(gv,{key:s.key,clsPrefix:t,tmNode:s}):s.ignored?null:R(mv,{clsPrefix:t,key:s.key,tmNode:s})}):R("div",{class:`${t}-base-select-menu-option-wrapper`,style:{paddingTop:this.padding.top,paddingBottom:this.padding.bottom}},this.flattenedNodes.map(s=>s.isGroup?R(gv,{key:s.key,clsPrefix:t,tmNode:s}):R(mv,{clsPrefix:t,key:s.key,tmNode:s})))}),Ct(n.action,s=>s&&[R("div",{class:`${t}-base-select-menu__action`,"data-action":!0,key:"action"},s),R(tM,{onFocus:this.onTabOut,key:"focus-detector"})]))}}),HM={space:"6px",spaceArrow:"10px",arrowOffset:"10px",arrowOffsetVertical:"10px",arrowHeight:"6px",padding:"8px 14px"};function CS(n){const{boxShadow2:e,popoverColor:t,textColor2:r,borderRadius:i,fontSize:o,dividerColor:s}=n;return Object.assign(Object.assign({},HM),{fontSize:o,borderRadius:i,color:t,dividerColor:s,textColor:r,boxShadow:e})}const Fs={name:"Popover",common:Ht,self:CS},jo={name:"Popover",common:Re,self:CS},pu={top:"bottom",bottom:"top",left:"right",right:"left"},tn="var(--n-arrow-height) * 1.414",VM=Z([j("popover",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 position: relative;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 box-shadow: var(--n-box-shadow);
 word-break: break-word;
 `,[Z(">",[j("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),Pt("raw",`
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 `,[Pt("scrollable",[Pt("show-header-or-footer","padding: var(--n-padding);")])]),q("header",`
 padding: var(--n-padding);
 border-bottom: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),q("footer",`
 padding: var(--n-padding);
 border-top: 1px solid var(--n-divider-color);
 transition: border-color .3s var(--n-bezier);
 `),ee("scrollable, show-header-or-footer",[q("content",`
 padding: var(--n-padding);
 `)])]),j("popover-shared",`
 transform-origin: inherit;
 `,[j("popover-arrow-wrapper",`
 position: absolute;
 overflow: hidden;
 pointer-events: none;
 `,[j("popover-arrow",`
 transition: background-color .3s var(--n-bezier);
 position: absolute;
 display: block;
 width: calc(${tn});
 height: calc(${tn});
 box-shadow: 0 0 8px 0 rgba(0, 0, 0, .12);
 transform: rotate(45deg);
 background-color: var(--n-color);
 pointer-events: all;
 `)]),Z("&.popover-transition-enter-from, &.popover-transition-leave-to",`
 opacity: 0;
 transform: scale(.85);
 `),Z("&.popover-transition-enter-to, &.popover-transition-leave-from",`
 transform: scale(1);
 opacity: 1;
 `),Z("&.popover-transition-enter-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-out),
 transform .15s var(--n-bezier-ease-out);
 `),Z("&.popover-transition-leave-active",`
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 opacity .15s var(--n-bezier-ease-in),
 transform .15s var(--n-bezier-ease-in);
 `)]),lr("top-start",`
 top: calc(${tn} / -2);
 left: calc(${si("top-start")} - var(--v-offset-left));
 `),lr("top",`
 top: calc(${tn} / -2);
 transform: translateX(calc(${tn} / -2)) rotate(45deg);
 left: 50%;
 `),lr("top-end",`
 top: calc(${tn} / -2);
 right: calc(${si("top-end")} + var(--v-offset-left));
 `),lr("bottom-start",`
 bottom: calc(${tn} / -2);
 left: calc(${si("bottom-start")} - var(--v-offset-left));
 `),lr("bottom",`
 bottom: calc(${tn} / -2);
 transform: translateX(calc(${tn} / -2)) rotate(45deg);
 left: 50%;
 `),lr("bottom-end",`
 bottom: calc(${tn} / -2);
 right: calc(${si("bottom-end")} + var(--v-offset-left));
 `),lr("left-start",`
 left: calc(${tn} / -2);
 top: calc(${si("left-start")} - var(--v-offset-top));
 `),lr("left",`
 left: calc(${tn} / -2);
 transform: translateY(calc(${tn} / -2)) rotate(45deg);
 top: 50%;
 `),lr("left-end",`
 left: calc(${tn} / -2);
 bottom: calc(${si("left-end")} + var(--v-offset-top));
 `),lr("right-start",`
 right: calc(${tn} / -2);
 top: calc(${si("right-start")} - var(--v-offset-top));
 `),lr("right",`
 right: calc(${tn} / -2);
 transform: translateY(calc(${tn} / -2)) rotate(45deg);
 top: 50%;
 `),lr("right-end",`
 right: calc(${tn} / -2);
 bottom: calc(${si("right-end")} + var(--v-offset-top));
 `),...NO({top:["right-start","left-start"],right:["top-end","bottom-end"],bottom:["right-end","left-end"],left:["top-start","bottom-start"]},(n,e)=>{const t=["right","left"].includes(e),r=t?"width":"height";return n.map(i=>{const o=i.split("-")[1]==="end",a=`calc((${`var(--v-target-${r}, 0px)`} - ${tn}) / 2)`,l=si(i);return Z(`[v-placement="${i}"] >`,[j("popover-shared",[ee("center-arrow",[j("popover-arrow",`${e}: calc(max(${a}, ${l}) ${o?"+":"-"} var(--v-offset-${t?"left":"top"}));`)])])])})})]);function si(n){return["top","bottom"].includes(n.split("-")[0])?"var(--n-arrow-offset)":"var(--n-arrow-offset-vertical)"}function lr(n,e){const t=n.split("-")[0],r=["top","bottom"].includes(t)?"height: var(--n-space-arrow);":"width: var(--n-space-arrow);";return Z(`[v-placement="${n}"] >`,[j("popover-shared",`
 margin-${pu[t]}: var(--n-space);
 `,[ee("show-arrow",`
 margin-${pu[t]}: var(--n-space-arrow);
 `),ee("overlap",`
 margin: 0;
 `),aI("popover-arrow-wrapper",`
 right: 0;
 left: 0;
 top: 0;
 bottom: 0;
 ${t}: 100%;
 ${pu[t]}: auto;
 ${r}
 `,[j("popover-arrow",e)])])])}const TS=Object.assign(Object.assign({},Ke.props),{to:Yr.propTo,show:Boolean,trigger:String,showArrow:Boolean,delay:Number,duration:Number,raw:Boolean,arrowPointToCenter:Boolean,arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],displayDirective:String,x:Number,y:Number,flip:Boolean,overlap:Boolean,placement:String,width:[Number,String],keepAliveOnHover:Boolean,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],internalDeactivateImmediately:Boolean,animated:Boolean,onClickoutside:Function,internalTrapFocus:Boolean,internalOnAfterLeave:Function,minWidth:Number,maxWidth:Number});function wS({arrowClass:n,arrowStyle:e,arrowWrapperClass:t,arrowWrapperStyle:r,clsPrefix:i}){return R("div",{key:"__popover-arrow__",style:r,class:[`${i}-popover-arrow-wrapper`,t]},R("div",{class:[`${i}-popover-arrow`,n],style:e}))}const GM=Ce({name:"PopoverBody",inheritAttrs:!1,props:TS,setup(n,{slots:e,attrs:t}){const{namespaceRef:r,mergedClsPrefixRef:i,inlineThemeDisabled:o}=yt(n),s=Ke("Popover","-popover",VM,Fs,n,i),a=G(null),l=Be("NPopover"),d=G(null),c=G(n.show),u=G(!1);Vn(()=>{const{show:S}=n;S&&!_L()&&!n.internalDeactivateImmediately&&(u.value=!0)});const f=U(()=>{const{trigger:S,onClickoutside:w}=n,T=[],{positionManuallyRef:{value:C}}=l;return C||(S==="click"&&!w&&T.push([$a,x,void 0,{capture:!0}]),S==="hover"&&T.push([HI,y])),w&&T.push([$a,x,void 0,{capture:!0}]),(n.displayDirective==="show"||n.animated&&u.value)&&T.push([fd,n.show]),T}),p=U(()=>{const{common:{cubicBezierEaseInOut:S,cubicBezierEaseIn:w,cubicBezierEaseOut:T},self:{space:C,spaceArrow:L,padding:P,fontSize:_,textColor:D,dividerColor:k,color:M,boxShadow:O,borderRadius:$,arrowHeight:K,arrowOffset:Y,arrowOffsetVertical:H}}=s.value;return{"--n-box-shadow":O,"--n-bezier":S,"--n-bezier-ease-in":w,"--n-bezier-ease-out":T,"--n-font-size":_,"--n-text-color":D,"--n-color":M,"--n-divider-color":k,"--n-border-radius":$,"--n-arrow-height":K,"--n-arrow-offset":Y,"--n-arrow-offset-vertical":H,"--n-padding":P,"--n-space":C,"--n-space-arrow":L}}),h=U(()=>{const S=n.width==="trigger"?void 0:an(n.width),w=[];S&&w.push({width:S});const{maxWidth:T,minWidth:C}=n;return T&&w.push({maxWidth:an(T)}),C&&w.push({maxWidth:an(C)}),o||w.push(p.value),w}),g=o?Gt("popover",void 0,p,n):void 0;l.setBodyInstance({syncPosition:m}),jt(()=>{l.setBodyInstance(null)}),at(Ie(n,"show"),S=>{n.animated||(S?c.value=!0:c.value=!1)});function m(){var S;(S=a.value)===null||S===void 0||S.syncPosition()}function v(S){n.trigger==="hover"&&n.keepAliveOnHover&&n.show&&l.handleMouseEnter(S)}function b(S){n.trigger==="hover"&&n.keepAliveOnHover&&l.handleMouseLeave(S)}function y(S){n.trigger==="hover"&&!E().contains(Ts(S))&&l.handleMouseMoveOutside(S)}function x(S){(n.trigger==="click"&&!E().contains(Ts(S))||n.onClickoutside)&&l.handleClickOutside(S)}function E(){return l.getTriggerElement()}st(tl,d),st(sc,null),st(ac,null);function A(){if(g==null||g.onRender(),!(n.displayDirective==="show"||n.show||n.animated&&u.value))return null;let w;const T=l.internalRenderBodyRef.value,{value:C}=i;if(T)w=T([`${C}-popover-shared`,g==null?void 0:g.themeClass.value,n.overlap&&`${C}-popover-shared--overlap`,n.showArrow&&`${C}-popover-shared--show-arrow`,n.arrowPointToCenter&&`${C}-popover-shared--center-arrow`],d,h.value,v,b);else{const{value:L}=l.extraClassRef,{internalTrapFocus:P}=n,_=!ps(e.header)||!ps(e.footer),D=()=>{var k,M;const O=_?R(mt,null,Ct(e.header,Y=>Y?R("div",{class:[`${C}-popover__header`,n.headerClass],style:n.headerStyle},Y):null),Ct(e.default,Y=>Y?R("div",{class:[`${C}-popover__content`,n.contentClass],style:n.contentStyle},e):null),Ct(e.footer,Y=>Y?R("div",{class:[`${C}-popover__footer`,n.footerClass],style:n.footerStyle},Y):null)):n.scrollable?(k=e.default)===null||k===void 0?void 0:k.call(e):R("div",{class:[`${C}-popover__content`,n.contentClass],style:n.contentStyle},e),$=n.scrollable?R(mS,{contentClass:_?void 0:`${C}-popover__content ${(M=n.contentClass)!==null&&M!==void 0?M:""}`,contentStyle:_?void 0:n.contentStyle},{default:()=>O}):O,K=n.showArrow?wS({arrowClass:n.arrowClass,arrowStyle:n.arrowStyle,arrowWrapperClass:n.arrowWrapperClass,arrowWrapperStyle:n.arrowWrapperStyle,clsPrefix:C}):null;return[$,K]};w=R("div",Ar({class:[`${C}-popover`,`${C}-popover-shared`,g==null?void 0:g.themeClass.value,L.map(k=>`${C}-${k}`),{[`${C}-popover--scrollable`]:n.scrollable,[`${C}-popover--show-header-or-footer`]:_,[`${C}-popover--raw`]:n.raw,[`${C}-popover-shared--overlap`]:n.overlap,[`${C}-popover-shared--show-arrow`]:n.showArrow,[`${C}-popover-shared--center-arrow`]:n.arrowPointToCenter}],ref:d,style:h.value,onKeydown:l.handleKeydown,onMouseenter:v,onMouseleave:b},t),P?R(Ax,{active:n.show,autoFocus:!0},{default:D}):D())}return qi(w,f.value)}return{displayed:u,namespace:r,isMounted:l.isMountedRef,zIndex:l.zIndexRef,followerRef:a,adjustedTo:Yr(n),followerEnabled:c,renderContentNode:A}},render(){return R(Gh,{ref:"followerRef",zIndex:this.zIndex,show:this.show,enabled:this.followerEnabled,to:this.adjustedTo,x:this.x,y:this.y,flip:this.flip,placement:this.placement,containerClass:this.namespace,overlap:this.overlap,width:this.width==="trigger"?"target":void 0,teleportDisabled:this.adjustedTo===Yr.tdkey},{default:()=>this.animated?R(ir,{name:"popover-transition",appear:this.isMounted,onEnter:()=>{this.followerEnabled=!0},onAfterLeave:()=>{var n;(n=this.internalOnAfterLeave)===null||n===void 0||n.call(this),this.followerEnabled=!1,this.displayed=!1}},{default:this.renderContentNode}):this.renderContentNode()})}}),WM=Object.keys(TS),jM={focus:["onFocus","onBlur"],click:["onClick"],hover:["onMouseenter","onMouseleave"],manual:[],nested:["onFocus","onBlur","onMouseenter","onMouseleave","onClick"]};function KM(n,e,t){jM[e].forEach(r=>{n.props?n.props=Object.assign({},n.props):n.props={};const i=n.props[r],o=t[r];i?n.props[r]=(...s)=>{i(...s),o(...s)}:n.props[r]=o})}const As={show:{type:Boolean,default:void 0},defaultShow:Boolean,showArrow:{type:Boolean,default:!0},trigger:{type:String,default:"hover"},delay:{type:Number,default:100},duration:{type:Number,default:100},raw:Boolean,placement:{type:String,default:"top"},x:Number,y:Number,arrowPointToCenter:Boolean,disabled:Boolean,getDisabled:Function,displayDirective:{type:String,default:"if"},arrowClass:String,arrowStyle:[String,Object],arrowWrapperClass:String,arrowWrapperStyle:[String,Object],flip:{type:Boolean,default:!0},animated:{type:Boolean,default:!0},width:{type:[Number,String],default:void 0},overlap:Boolean,keepAliveOnHover:{type:Boolean,default:!0},zIndex:Number,to:Yr.propTo,scrollable:Boolean,contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],footerClass:String,footerStyle:[Object,String],onClickoutside:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],internalDeactivateImmediately:Boolean,internalSyncTargetWithParent:Boolean,internalInheritedEventHandlers:{type:Array,default:()=>[]},internalTrapFocus:Boolean,internalExtraClass:{type:Array,default:()=>[]},onShow:[Function,Array],onHide:[Function,Array],arrow:{type:Boolean,default:void 0},minWidth:Number,maxWidth:Number},qM=Object.assign(Object.assign(Object.assign({},Ke.props),As),{internalOnAfterLeave:Function,internalRenderBody:Function}),al=Ce({name:"Popover",inheritAttrs:!1,props:qM,slots:Object,__popover__:!0,setup(n){const e=el(),t=G(null),r=U(()=>n.show),i=G(n.defaultShow),o=kn(r,i),s=At(()=>n.disabled?!1:o.value),a=()=>{if(n.disabled)return!0;const{getDisabled:k}=n;return!!(k!=null&&k())},l=()=>a()?!1:o.value,d=$h(n,["arrow","showArrow"]),c=U(()=>n.overlap?!1:d.value);let u=null;const f=G(null),p=G(null),h=At(()=>n.x!==void 0&&n.y!==void 0);function g(k){const{"onUpdate:show":M,onUpdateShow:O,onShow:$,onHide:K}=n;i.value=k,M&&we(M,k),O&&we(O,k),k&&$&&we($,!0),k&&K&&we(K,!1)}function m(){u&&u.syncPosition()}function v(){const{value:k}=f;k&&(window.clearTimeout(k),f.value=null)}function b(){const{value:k}=p;k&&(window.clearTimeout(k),p.value=null)}function y(){const k=a();if(n.trigger==="focus"&&!k){if(l())return;g(!0)}}function x(){const k=a();if(n.trigger==="focus"&&!k){if(!l())return;g(!1)}}function E(){const k=a();if(n.trigger==="hover"&&!k){if(b(),f.value!==null||l())return;const M=()=>{g(!0),f.value=null},{delay:O}=n;O===0?M():f.value=window.setTimeout(M,O)}}function A(){const k=a();if(n.trigger==="hover"&&!k){if(v(),p.value!==null||!l())return;const M=()=>{g(!1),p.value=null},{duration:O}=n;O===0?M():p.value=window.setTimeout(M,O)}}function S(){A()}function w(k){var M;l()&&(n.trigger==="click"&&(v(),b(),g(!1)),(M=n.onClickoutside)===null||M===void 0||M.call(n,k))}function T(){if(n.trigger==="click"&&!a()){v(),b();const k=!l();g(k)}}function C(k){n.internalTrapFocus&&k.key==="Escape"&&(v(),b(),g(!1))}function L(k){i.value=k}function P(){var k;return(k=t.value)===null||k===void 0?void 0:k.targetRef}function _(k){u=k}return st("NPopover",{getTriggerElement:P,handleKeydown:C,handleMouseEnter:E,handleMouseLeave:A,handleClickOutside:w,handleMouseMoveOutside:S,setBodyInstance:_,positionManuallyRef:h,isMountedRef:e,zIndexRef:Ie(n,"zIndex"),extraClassRef:Ie(n,"internalExtraClass"),internalRenderBodyRef:Ie(n,"internalRenderBody")}),Vn(()=>{o.value&&a()&&g(!1)}),{binderInstRef:t,positionManually:h,mergedShowConsideringDisabledProp:s,uncontrolledShow:i,mergedShowArrow:c,getMergedShow:l,setShow:L,handleClick:T,handleMouseEnter:E,handleMouseLeave:A,handleFocus:y,handleBlur:x,syncPosition:m}},render(){var n;const{positionManually:e,$slots:t}=this;let r,i=!1;if(!e&&(r=OL(t,"trigger"),r)){r=qr(r),r=r.type===Za?R("span",[r]):r;const o={onClick:this.handleClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onFocus:this.handleFocus,onBlur:this.handleBlur};if(!((n=r.type)===null||n===void 0)&&n.__popover__)i=!0,r.props||(r.props={internalSyncTargetWithParent:!0,internalInheritedEventHandlers:[]}),r.props.internalSyncTargetWithParent=!0,r.props.internalInheritedEventHandlers?r.props.internalInheritedEventHandlers=[o,...r.props.internalInheritedEventHandlers]:r.props.internalInheritedEventHandlers=[o];else{const{internalInheritedEventHandlers:s}=this,a=[o,...s],l={onBlur:d=>{a.forEach(c=>{c.onBlur(d)})},onFocus:d=>{a.forEach(c=>{c.onFocus(d)})},onClick:d=>{a.forEach(c=>{c.onClick(d)})},onMouseenter:d=>{a.forEach(c=>{c.onMouseenter(d)})},onMouseleave:d=>{a.forEach(c=>{c.onMouseleave(d)})}};KM(r,s?"nested":e?"manual":this.trigger,l)}}return R(zh,{ref:"binderInstRef",syncTarget:!i,syncTargetWithParent:this.internalSyncTargetWithParent},{default:()=>{this.mergedShowConsideringDisabledProp;const o=this.getMergedShow();return[this.internalTrapFocus&&o?qi(R("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0}}),[[Hh,{enabled:o,zIndex:this.zIndex}]]):null,e?null:R(Uh,null,{default:()=>r}),R(GM,Do(this.$props,WM,Object.assign(Object.assign({},this.$attrs),{showArrow:this.mergedShowArrow,show:o})),{default:()=>{var s,a;return(a=(s=this.$slots).default)===null||a===void 0?void 0:a.call(s)},header:()=>{var s,a;return(a=(s=this.$slots).header)===null||a===void 0?void 0:a.call(s)},footer:()=>{var s,a;return(a=(s=this.$slots).footer)===null||a===void 0?void 0:a.call(s)}})]}})}}),ES={closeIconSizeTiny:"12px",closeIconSizeSmall:"12px",closeIconSizeMedium:"14px",closeIconSizeLarge:"14px",closeSizeTiny:"16px",closeSizeSmall:"16px",closeSizeMedium:"18px",closeSizeLarge:"18px",padding:"0 7px",closeMargin:"0 0 0 4px"},RS={name:"Tag",common:Re,self(n){const{textColor2:e,primaryColorHover:t,primaryColorPressed:r,primaryColor:i,infoColor:o,successColor:s,warningColor:a,errorColor:l,baseColor:d,borderColor:c,tagColor:u,opacityDisabled:f,closeIconColor:p,closeIconColorHover:h,closeIconColorPressed:g,closeColorHover:m,closeColorPressed:v,borderRadiusSmall:b,fontSizeMini:y,fontSizeTiny:x,fontSizeSmall:E,fontSizeMedium:A,heightMini:S,heightTiny:w,heightSmall:T,heightMedium:C,buttonColor2Hover:L,buttonColor2Pressed:P,fontWeightStrong:_}=n;return Object.assign(Object.assign({},ES),{closeBorderRadius:b,heightTiny:S,heightSmall:w,heightMedium:T,heightLarge:C,borderRadius:b,opacityDisabled:f,fontSizeTiny:y,fontSizeSmall:x,fontSizeMedium:E,fontSizeLarge:A,fontWeightStrong:_,textColorCheckable:e,textColorHoverCheckable:e,textColorPressedCheckable:e,textColorChecked:d,colorCheckable:"#0000",colorHoverCheckable:L,colorPressedCheckable:P,colorChecked:i,colorCheckedHover:t,colorCheckedPressed:r,border:`1px solid ${c}`,textColor:e,color:u,colorBordered:"#0000",closeIconColor:p,closeIconColorHover:h,closeIconColorPressed:g,closeColorHover:m,closeColorPressed:v,borderPrimary:`1px solid ${Te(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:Te(i,{alpha:.16}),colorBorderedPrimary:"#0000",closeIconColorPrimary:Qt(i,{lightness:.7}),closeIconColorHoverPrimary:Qt(i,{lightness:.7}),closeIconColorPressedPrimary:Qt(i,{lightness:.7}),closeColorHoverPrimary:Te(i,{alpha:.16}),closeColorPressedPrimary:Te(i,{alpha:.12}),borderInfo:`1px solid ${Te(o,{alpha:.3})}`,textColorInfo:o,colorInfo:Te(o,{alpha:.16}),colorBorderedInfo:"#0000",closeIconColorInfo:Qt(o,{alpha:.7}),closeIconColorHoverInfo:Qt(o,{alpha:.7}),closeIconColorPressedInfo:Qt(o,{alpha:.7}),closeColorHoverInfo:Te(o,{alpha:.16}),closeColorPressedInfo:Te(o,{alpha:.12}),borderSuccess:`1px solid ${Te(s,{alpha:.3})}`,textColorSuccess:s,colorSuccess:Te(s,{alpha:.16}),colorBorderedSuccess:"#0000",closeIconColorSuccess:Qt(s,{alpha:.7}),closeIconColorHoverSuccess:Qt(s,{alpha:.7}),closeIconColorPressedSuccess:Qt(s,{alpha:.7}),closeColorHoverSuccess:Te(s,{alpha:.16}),closeColorPressedSuccess:Te(s,{alpha:.12}),borderWarning:`1px solid ${Te(a,{alpha:.3})}`,textColorWarning:a,colorWarning:Te(a,{alpha:.16}),colorBorderedWarning:"#0000",closeIconColorWarning:Qt(a,{alpha:.7}),closeIconColorHoverWarning:Qt(a,{alpha:.7}),closeIconColorPressedWarning:Qt(a,{alpha:.7}),closeColorHoverWarning:Te(a,{alpha:.16}),closeColorPressedWarning:Te(a,{alpha:.11}),borderError:`1px solid ${Te(l,{alpha:.3})}`,textColorError:l,colorError:Te(l,{alpha:.16}),colorBorderedError:"#0000",closeIconColorError:Qt(l,{alpha:.7}),closeIconColorHoverError:Qt(l,{alpha:.7}),closeIconColorPressedError:Qt(l,{alpha:.7}),closeColorHoverError:Te(l,{alpha:.16}),closeColorPressedError:Te(l,{alpha:.12})})}};function YM(n){const{textColor2:e,primaryColorHover:t,primaryColorPressed:r,primaryColor:i,infoColor:o,successColor:s,warningColor:a,errorColor:l,baseColor:d,borderColor:c,opacityDisabled:u,tagColor:f,closeIconColor:p,closeIconColorHover:h,closeIconColorPressed:g,borderRadiusSmall:m,fontSizeMini:v,fontSizeTiny:b,fontSizeSmall:y,fontSizeMedium:x,heightMini:E,heightTiny:A,heightSmall:S,heightMedium:w,closeColorHover:T,closeColorPressed:C,buttonColor2Hover:L,buttonColor2Pressed:P,fontWeightStrong:_}=n;return Object.assign(Object.assign({},ES),{closeBorderRadius:m,heightTiny:E,heightSmall:A,heightMedium:S,heightLarge:w,borderRadius:m,opacityDisabled:u,fontSizeTiny:v,fontSizeSmall:b,fontSizeMedium:y,fontSizeLarge:x,fontWeightStrong:_,textColorCheckable:e,textColorHoverCheckable:e,textColorPressedCheckable:e,textColorChecked:d,colorCheckable:"#0000",colorHoverCheckable:L,colorPressedCheckable:P,colorChecked:i,colorCheckedHover:t,colorCheckedPressed:r,border:`1px solid ${c}`,textColor:e,color:f,colorBordered:"rgb(250, 250, 252)",closeIconColor:p,closeIconColorHover:h,closeIconColorPressed:g,closeColorHover:T,closeColorPressed:C,borderPrimary:`1px solid ${Te(i,{alpha:.3})}`,textColorPrimary:i,colorPrimary:Te(i,{alpha:.12}),colorBorderedPrimary:Te(i,{alpha:.1}),closeIconColorPrimary:i,closeIconColorHoverPrimary:i,closeIconColorPressedPrimary:i,closeColorHoverPrimary:Te(i,{alpha:.12}),closeColorPressedPrimary:Te(i,{alpha:.18}),borderInfo:`1px solid ${Te(o,{alpha:.3})}`,textColorInfo:o,colorInfo:Te(o,{alpha:.12}),colorBorderedInfo:Te(o,{alpha:.1}),closeIconColorInfo:o,closeIconColorHoverInfo:o,closeIconColorPressedInfo:o,closeColorHoverInfo:Te(o,{alpha:.12}),closeColorPressedInfo:Te(o,{alpha:.18}),borderSuccess:`1px solid ${Te(s,{alpha:.3})}`,textColorSuccess:s,colorSuccess:Te(s,{alpha:.12}),colorBorderedSuccess:Te(s,{alpha:.1}),closeIconColorSuccess:s,closeIconColorHoverSuccess:s,closeIconColorPressedSuccess:s,closeColorHoverSuccess:Te(s,{alpha:.12}),closeColorPressedSuccess:Te(s,{alpha:.18}),borderWarning:`1px solid ${Te(a,{alpha:.35})}`,textColorWarning:a,colorWarning:Te(a,{alpha:.15}),colorBorderedWarning:Te(a,{alpha:.12}),closeIconColorWarning:a,closeIconColorHoverWarning:a,closeIconColorPressedWarning:a,closeColorHoverWarning:Te(a,{alpha:.12}),closeColorPressedWarning:Te(a,{alpha:.18}),borderError:`1px solid ${Te(l,{alpha:.23})}`,textColorError:l,colorError:Te(l,{alpha:.1}),colorBorderedError:Te(l,{alpha:.08}),closeIconColorError:l,closeIconColorHoverError:l,closeIconColorPressedError:l,closeColorHoverError:Te(l,{alpha:.12}),closeColorPressedError:Te(l,{alpha:.18})})}const XM={name:"Tag",common:Ht,self:YM},QM={color:Object,type:{type:String,default:"default"},round:Boolean,size:{type:String,default:"medium"},closable:Boolean,disabled:{type:Boolean,default:void 0}},ZM=j("tag",`
 --n-close-margin: var(--n-close-margin-top) var(--n-close-margin-right) var(--n-close-margin-bottom) var(--n-close-margin-left);
 white-space: nowrap;
 position: relative;
 box-sizing: border-box;
 cursor: default;
 display: inline-flex;
 align-items: center;
 flex-wrap: nowrap;
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 line-height: 1;
 height: var(--n-height);
 font-size: var(--n-font-size);
`,[ee("strong",`
 font-weight: var(--n-font-weight-strong);
 `),q("border",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
 border: var(--n-border);
 transition: border-color .3s var(--n-bezier);
 `),q("icon",`
 display: flex;
 margin: 0 4px 0 0;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 font-size: var(--n-avatar-size-override);
 `),q("avatar",`
 display: flex;
 margin: 0 6px 0 0;
 `),q("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `),ee("round",`
 padding: 0 calc(var(--n-height) / 3);
 border-radius: calc(var(--n-height) / 2);
 `,[q("icon",`
 margin: 0 4px 0 calc((var(--n-height) - 8px) / -2);
 `),q("avatar",`
 margin: 0 6px 0 calc((var(--n-height) - 8px) / -2);
 `),ee("closable",`
 padding: 0 calc(var(--n-height) / 4) 0 calc(var(--n-height) / 3);
 `)]),ee("icon, avatar",[ee("round",`
 padding: 0 calc(var(--n-height) / 3) 0 calc(var(--n-height) / 2);
 `)]),ee("disabled",`
 cursor: not-allowed !important;
 opacity: var(--n-opacity-disabled);
 `),ee("checkable",`
 cursor: pointer;
 box-shadow: none;
 color: var(--n-text-color-checkable);
 background-color: var(--n-color-checkable);
 `,[Pt("disabled",[Z("&:hover","background-color: var(--n-color-hover-checkable);",[Pt("checked","color: var(--n-text-color-hover-checkable);")]),Z("&:active","background-color: var(--n-color-pressed-checkable);",[Pt("checked","color: var(--n-text-color-pressed-checkable);")])]),ee("checked",`
 color: var(--n-text-color-checked);
 background-color: var(--n-color-checked);
 `,[Pt("disabled",[Z("&:hover","background-color: var(--n-color-checked-hover);"),Z("&:active","background-color: var(--n-color-checked-pressed);")])])])]),JM=Object.assign(Object.assign(Object.assign({},Ke.props),QM),{bordered:{type:Boolean,default:void 0},checked:Boolean,checkable:Boolean,strong:Boolean,triggerClickOnClose:Boolean,onClose:[Array,Function],onMouseenter:Function,onMouseleave:Function,"onUpdate:checked":Function,onUpdateChecked:Function,internalCloseFocusable:{type:Boolean,default:!0},internalCloseIsButtonTag:{type:Boolean,default:!0},onCheckedChange:Function}),eF="n-tag",gu=Ce({name:"Tag",props:JM,slots:Object,setup(n){const e=G(null),{mergedBorderedRef:t,mergedClsPrefixRef:r,inlineThemeDisabled:i,mergedRtlRef:o}=yt(n),s=Ke("Tag","-tag",ZM,XM,n,r);st(eF,{roundRef:Ie(n,"round")});function a(){if(!n.disabled&&n.checkable){const{checked:p,onCheckedChange:h,onUpdateChecked:g,"onUpdate:checked":m}=n;g&&g(!p),m&&m(!p),h&&h(!p)}}function l(p){if(n.triggerClickOnClose||p.stopPropagation(),!n.disabled){const{onClose:h}=n;h&&we(h,p)}}const d={setTextContent(p){const{value:h}=e;h&&(h.textContent=p)}},c=Dn("Tag",o,r),u=U(()=>{const{type:p,size:h,color:{color:g,textColor:m}={}}=n,{common:{cubicBezierEaseInOut:v},self:{padding:b,closeMargin:y,borderRadius:x,opacityDisabled:E,textColorCheckable:A,textColorHoverCheckable:S,textColorPressedCheckable:w,textColorChecked:T,colorCheckable:C,colorHoverCheckable:L,colorPressedCheckable:P,colorChecked:_,colorCheckedHover:D,colorCheckedPressed:k,closeBorderRadius:M,fontWeightStrong:O,[xe("colorBordered",p)]:$,[xe("closeSize",h)]:K,[xe("closeIconSize",h)]:Y,[xe("fontSize",h)]:H,[xe("height",h)]:B,[xe("color",p)]:X,[xe("textColor",p)]:se,[xe("border",p)]:pe,[xe("closeIconColor",p)]:te,[xe("closeIconColorHover",p)]:W,[xe("closeIconColorPressed",p)]:de,[xe("closeColorHover",p)]:V,[xe("closeColorPressed",p)]:ue}}=s.value,Pe=Hn(y);return{"--n-font-weight-strong":O,"--n-avatar-size-override":`calc(${B} - 8px)`,"--n-bezier":v,"--n-border-radius":x,"--n-border":pe,"--n-close-icon-size":Y,"--n-close-color-pressed":ue,"--n-close-color-hover":V,"--n-close-border-radius":M,"--n-close-icon-color":te,"--n-close-icon-color-hover":W,"--n-close-icon-color-pressed":de,"--n-close-icon-color-disabled":te,"--n-close-margin-top":Pe.top,"--n-close-margin-right":Pe.right,"--n-close-margin-bottom":Pe.bottom,"--n-close-margin-left":Pe.left,"--n-close-size":K,"--n-color":g||(t.value?$:X),"--n-color-checkable":C,"--n-color-checked":_,"--n-color-checked-hover":D,"--n-color-checked-pressed":k,"--n-color-hover-checkable":L,"--n-color-pressed-checkable":P,"--n-font-size":H,"--n-height":B,"--n-opacity-disabled":E,"--n-padding":b,"--n-text-color":m||se,"--n-text-color-checkable":A,"--n-text-color-checked":T,"--n-text-color-hover-checkable":S,"--n-text-color-pressed-checkable":w}}),f=i?Gt("tag",U(()=>{let p="";const{type:h,size:g,color:{color:m,textColor:v}={}}=n;return p+=h[0],p+=g[0],m&&(p+=`a${vd(m)}`),v&&(p+=`b${vd(v)}`),t.value&&(p+="c"),p}),u,n):void 0;return Object.assign(Object.assign({},d),{rtlEnabled:c,mergedClsPrefix:r,contentRef:e,mergedBordered:t,handleClick:a,handleCloseClick:l,cssVars:i?void 0:u,themeClass:f==null?void 0:f.themeClass,onRender:f==null?void 0:f.onRender})},render(){var n,e;const{mergedClsPrefix:t,rtlEnabled:r,closable:i,color:{borderColor:o}={},round:s,onRender:a,$slots:l}=this;a==null||a();const d=Ct(l.avatar,u=>u&&R("div",{class:`${t}-tag__avatar`},u)),c=Ct(l.icon,u=>u&&R("div",{class:`${t}-tag__icon`},u));return R("div",{class:[`${t}-tag`,this.themeClass,{[`${t}-tag--rtl`]:r,[`${t}-tag--strong`]:this.strong,[`${t}-tag--disabled`]:this.disabled,[`${t}-tag--checkable`]:this.checkable,[`${t}-tag--checked`]:this.checkable&&this.checked,[`${t}-tag--round`]:s,[`${t}-tag--avatar`]:d,[`${t}-tag--icon`]:c,[`${t}-tag--closable`]:i}],style:this.cssVars,onClick:this.handleClick,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave},c||d,R("span",{class:`${t}-tag__content`,ref:"contentRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n)),!this.checkable&&i?R(fc,{clsPrefix:t,class:`${t}-tag__close`,disabled:this.disabled,onClick:this.handleCloseClick,focusable:this.internalCloseFocusable,round:s,isButtonTag:this.internalCloseIsButtonTag,absolute:!0}):null,!this.checkable&&this.mergedBordered?R("div",{class:`${t}-tag__border`,style:{borderColor:o}}):null)}}),AS=Ce({name:"InternalSelectionSuffix",props:{clsPrefix:{type:String,required:!0},showArrow:{type:Boolean,default:void 0},showClear:{type:Boolean,default:void 0},loading:{type:Boolean,default:!1},onClear:Function},setup(n,{slots:e}){return()=>{const{clsPrefix:t}=n;return R(ao,{clsPrefix:t,class:`${t}-base-suffix`,strokeWidth:24,scale:.85,show:n.loading},{default:()=>n.showArrow?R(kf,{clsPrefix:t,show:n.showClear,onClear:n.onClear},{placeholder:()=>R(on,{clsPrefix:t,class:`${t}-base-suffix__arrow`},{default:()=>Er(e.default,()=>[R(aS,null)])})}):null})}}}),IS={paddingSingle:"0 26px 0 12px",paddingMultiple:"3px 26px 0 12px",clearSize:"16px",arrowSize:"16px"},dp={name:"InternalSelection",common:Re,peers:{Popover:jo},self(n){const{borderRadius:e,textColor2:t,textColorDisabled:r,inputColor:i,inputColorDisabled:o,primaryColor:s,primaryColorHover:a,warningColor:l,warningColorHover:d,errorColor:c,errorColorHover:u,iconColor:f,iconColorDisabled:p,clearColor:h,clearColorHover:g,clearColorPressed:m,placeholderColor:v,placeholderColorDisabled:b,fontSizeTiny:y,fontSizeSmall:x,fontSizeMedium:E,fontSizeLarge:A,heightTiny:S,heightSmall:w,heightMedium:T,heightLarge:C,fontWeight:L}=n;return Object.assign(Object.assign({},IS),{fontWeight:L,fontSizeTiny:y,fontSizeSmall:x,fontSizeMedium:E,fontSizeLarge:A,heightTiny:S,heightSmall:w,heightMedium:T,heightLarge:C,borderRadius:e,textColor:t,textColorDisabled:r,placeholderColor:v,placeholderColorDisabled:b,color:i,colorDisabled:o,colorActive:Te(s,{alpha:.1}),border:"1px solid #0000",borderHover:`1px solid ${a}`,borderActive:`1px solid ${s}`,borderFocus:`1px solid ${a}`,boxShadowHover:"none",boxShadowActive:`0 0 8px 0 ${Te(s,{alpha:.4})}`,boxShadowFocus:`0 0 8px 0 ${Te(s,{alpha:.4})}`,caretColor:s,arrowColor:f,arrowColorDisabled:p,loadingColor:s,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${d}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${d}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 8px 0 ${Te(l,{alpha:.4})}`,boxShadowFocusWarning:`0 0 8px 0 ${Te(l,{alpha:.4})}`,colorActiveWarning:Te(l,{alpha:.1}),caretColorWarning:l,borderError:`1px solid ${c}`,borderHoverError:`1px solid ${u}`,borderActiveError:`1px solid ${c}`,borderFocusError:`1px solid ${u}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 8px 0 ${Te(c,{alpha:.4})}`,boxShadowFocusError:`0 0 8px 0 ${Te(c,{alpha:.4})}`,colorActiveError:Te(c,{alpha:.1}),caretColorError:c,clearColor:h,clearColorHover:g,clearColorPressed:m})}};function tF(n){const{borderRadius:e,textColor2:t,textColorDisabled:r,inputColor:i,inputColorDisabled:o,primaryColor:s,primaryColorHover:a,warningColor:l,warningColorHover:d,errorColor:c,errorColorHover:u,borderColor:f,iconColor:p,iconColorDisabled:h,clearColor:g,clearColorHover:m,clearColorPressed:v,placeholderColor:b,placeholderColorDisabled:y,fontSizeTiny:x,fontSizeSmall:E,fontSizeMedium:A,fontSizeLarge:S,heightTiny:w,heightSmall:T,heightMedium:C,heightLarge:L,fontWeight:P}=n;return Object.assign(Object.assign({},IS),{fontSizeTiny:x,fontSizeSmall:E,fontSizeMedium:A,fontSizeLarge:S,heightTiny:w,heightSmall:T,heightMedium:C,heightLarge:L,borderRadius:e,fontWeight:P,textColor:t,textColorDisabled:r,placeholderColor:b,placeholderColorDisabled:y,color:i,colorDisabled:o,colorActive:i,border:`1px solid ${f}`,borderHover:`1px solid ${a}`,borderActive:`1px solid ${s}`,borderFocus:`1px solid ${a}`,boxShadowHover:"none",boxShadowActive:`0 0 0 2px ${Te(s,{alpha:.2})}`,boxShadowFocus:`0 0 0 2px ${Te(s,{alpha:.2})}`,caretColor:s,arrowColor:p,arrowColorDisabled:h,loadingColor:s,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${d}`,borderActiveWarning:`1px solid ${l}`,borderFocusWarning:`1px solid ${d}`,boxShadowHoverWarning:"none",boxShadowActiveWarning:`0 0 0 2px ${Te(l,{alpha:.2})}`,boxShadowFocusWarning:`0 0 0 2px ${Te(l,{alpha:.2})}`,colorActiveWarning:i,caretColorWarning:l,borderError:`1px solid ${c}`,borderHoverError:`1px solid ${u}`,borderActiveError:`1px solid ${c}`,borderFocusError:`1px solid ${u}`,boxShadowHoverError:"none",boxShadowActiveError:`0 0 0 2px ${Te(c,{alpha:.2})}`,boxShadowFocusError:`0 0 0 2px ${Te(c,{alpha:.2})}`,colorActiveError:i,caretColorError:c,clearColor:g,clearColorHover:m,clearColorPressed:v})}const LS={name:"InternalSelection",common:Ht,peers:{Popover:Fs},self:tF},nF=Z([j("base-selection",`
 --n-padding-single: var(--n-padding-single-top) var(--n-padding-single-right) var(--n-padding-single-bottom) var(--n-padding-single-left);
 --n-padding-multiple: var(--n-padding-multiple-top) var(--n-padding-multiple-right) var(--n-padding-multiple-bottom) var(--n-padding-multiple-left);
 position: relative;
 z-index: auto;
 box-shadow: none;
 width: 100%;
 max-width: 100%;
 display: inline-block;
 vertical-align: bottom;
 border-radius: var(--n-border-radius);
 min-height: var(--n-height);
 line-height: 1.5;
 font-size: var(--n-font-size);
 `,[j("base-loading",`
 color: var(--n-loading-color);
 `),j("base-selection-tags","min-height: var(--n-height);"),q("border, state-border",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border: var(--n-border);
 border-radius: inherit;
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),q("state-border",`
 z-index: 1;
 border-color: #0000;
 `),j("base-suffix",`
 cursor: pointer;
 position: absolute;
 top: 50%;
 transform: translateY(-50%);
 right: 10px;
 `,[q("arrow",`
 font-size: var(--n-arrow-size);
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 `)]),j("base-selection-overlay",`
 display: flex;
 align-items: center;
 white-space: nowrap;
 pointer-events: none;
 position: absolute;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 padding: var(--n-padding-single);
 transition: color .3s var(--n-bezier);
 `,[q("wrapper",`
 flex-basis: 0;
 flex-grow: 1;
 overflow: hidden;
 text-overflow: ellipsis;
 `)]),j("base-selection-placeholder",`
 color: var(--n-placeholder-color);
 `,[q("inner",`
 max-width: 100%;
 overflow: hidden;
 `)]),j("base-selection-tags",`
 cursor: pointer;
 outline: none;
 box-sizing: border-box;
 position: relative;
 z-index: auto;
 display: flex;
 padding: var(--n-padding-multiple);
 flex-wrap: wrap;
 align-items: center;
 width: 100%;
 vertical-align: bottom;
 background-color: var(--n-color);
 border-radius: inherit;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 `),j("base-selection-label",`
 height: var(--n-height);
 display: inline-flex;
 width: 100%;
 vertical-align: bottom;
 cursor: pointer;
 outline: none;
 z-index: auto;
 box-sizing: border-box;
 position: relative;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 border-radius: inherit;
 background-color: var(--n-color);
 align-items: center;
 `,[j("base-selection-input",`
 font-size: inherit;
 line-height: inherit;
 outline: none;
 cursor: pointer;
 box-sizing: border-box;
 border:none;
 width: 100%;
 padding: var(--n-padding-single);
 background-color: #0000;
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 caret-color: var(--n-caret-color);
 `,[q("content",`
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap; 
 `)]),q("render-label",`
 color: var(--n-text-color);
 `)]),Pt("disabled",[Z("&:hover",[q("state-border",`
 box-shadow: var(--n-box-shadow-hover);
 border: var(--n-border-hover);
 `)]),ee("focus",[q("state-border",`
 box-shadow: var(--n-box-shadow-focus);
 border: var(--n-border-focus);
 `)]),ee("active",[q("state-border",`
 box-shadow: var(--n-box-shadow-active);
 border: var(--n-border-active);
 `),j("base-selection-label","background-color: var(--n-color-active);"),j("base-selection-tags","background-color: var(--n-color-active);")])]),ee("disabled","cursor: not-allowed;",[q("arrow",`
 color: var(--n-arrow-color-disabled);
 `),j("base-selection-label",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[j("base-selection-input",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 `),q("render-label",`
 color: var(--n-text-color-disabled);
 `)]),j("base-selection-tags",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `),j("base-selection-placeholder",`
 cursor: not-allowed;
 color: var(--n-placeholder-color-disabled);
 `)]),j("base-selection-input-tag",`
 height: calc(var(--n-height) - 6px);
 line-height: calc(var(--n-height) - 6px);
 outline: none;
 display: none;
 position: relative;
 margin-bottom: 3px;
 max-width: 100%;
 vertical-align: bottom;
 `,[q("input",`
 font-size: inherit;
 font-family: inherit;
 min-width: 1px;
 padding: 0;
 background-color: #0000;
 outline: none;
 border: none;
 max-width: 100%;
 overflow: hidden;
 width: 1em;
 line-height: inherit;
 cursor: pointer;
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 `),q("mirror",`
 position: absolute;
 left: 0;
 top: 0;
 white-space: pre;
 visibility: hidden;
 user-select: none;
 -webkit-user-select: none;
 opacity: 0;
 `)]),["warning","error"].map(n=>ee(`${n}-status`,[q("state-border",`border: var(--n-border-${n});`),Pt("disabled",[Z("&:hover",[q("state-border",`
 box-shadow: var(--n-box-shadow-hover-${n});
 border: var(--n-border-hover-${n});
 `)]),ee("active",[q("state-border",`
 box-shadow: var(--n-box-shadow-active-${n});
 border: var(--n-border-active-${n});
 `),j("base-selection-label",`background-color: var(--n-color-active-${n});`),j("base-selection-tags",`background-color: var(--n-color-active-${n});`)]),ee("focus",[q("state-border",`
 box-shadow: var(--n-box-shadow-focus-${n});
 border: var(--n-border-focus-${n});
 `)])])]))]),j("base-selection-popover",`
 margin-bottom: -3px;
 display: flex;
 flex-wrap: wrap;
 margin-right: -8px;
 `),j("base-selection-tag-wrapper",`
 max-width: 100%;
 display: inline-flex;
 padding: 0 7px 3px 0;
 `,[Z("&:last-child","padding-right: 0;"),j("tag",`
 font-size: 14px;
 max-width: 100%;
 `,[q("content",`
 line-height: 1.25;
 text-overflow: ellipsis;
 overflow: hidden;
 `)])])]),rF=Ce({name:"InternalSelection",props:Object.assign(Object.assign({},Ke.props),{clsPrefix:{type:String,required:!0},bordered:{type:Boolean,default:void 0},active:Boolean,pattern:{type:String,default:""},placeholder:String,selectedOption:{type:Object,default:null},selectedOptions:{type:Array,default:null},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},multiple:Boolean,filterable:Boolean,clearable:Boolean,disabled:Boolean,size:{type:String,default:"medium"},loading:Boolean,autofocus:Boolean,showArrow:{type:Boolean,default:!0},inputProps:Object,focused:Boolean,renderTag:Function,onKeydown:Function,onClick:Function,onBlur:Function,onFocus:Function,onDeleteOption:Function,maxTagCount:[String,Number],ellipsisTagPopoverProps:Object,onClear:Function,onPatternInput:Function,onPatternFocus:Function,onPatternBlur:Function,renderLabel:Function,status:String,inlineThemeDisabled:Boolean,ignoreComposition:{type:Boolean,default:!0},onResize:Function}),setup(n){const{mergedClsPrefixRef:e,mergedRtlRef:t}=yt(n),r=Dn("InternalSelection",t,e),i=G(null),o=G(null),s=G(null),a=G(null),l=G(null),d=G(null),c=G(null),u=G(null),f=G(null),p=G(null),h=G(!1),g=G(!1),m=G(!1),v=Ke("InternalSelection","-internal-selection",nF,LS,n,Ie(n,"clsPrefix")),b=U(()=>n.clearable&&!n.disabled&&(m.value||n.active)),y=U(()=>n.selectedOption?n.renderTag?n.renderTag({option:n.selectedOption,handleClose:()=>{}}):n.renderLabel?n.renderLabel(n.selectedOption,!0):gn(n.selectedOption[n.labelField],n.selectedOption,!0):n.placeholder),x=U(()=>{const re=n.selectedOption;if(re)return re[n.labelField]}),E=U(()=>n.multiple?!!(Array.isArray(n.selectedOptions)&&n.selectedOptions.length):n.selectedOption!==null);function A(){var re;const{value:ge}=i;if(ge){const{value:Ee}=o;Ee&&(Ee.style.width=`${ge.offsetWidth}px`,n.maxTagCount!=="responsive"&&((re=f.value)===null||re===void 0||re.sync({showAllItemsBeforeCalculate:!1})))}}function S(){const{value:re}=p;re&&(re.style.display="none")}function w(){const{value:re}=p;re&&(re.style.display="inline-block")}at(Ie(n,"active"),re=>{re||S()}),at(Ie(n,"pattern"),()=>{n.multiple&&wn(A)});function T(re){const{onFocus:ge}=n;ge&&ge(re)}function C(re){const{onBlur:ge}=n;ge&&ge(re)}function L(re){const{onDeleteOption:ge}=n;ge&&ge(re)}function P(re){const{onClear:ge}=n;ge&&ge(re)}function _(re){const{onPatternInput:ge}=n;ge&&ge(re)}function D(re){var ge;(!re.relatedTarget||!(!((ge=s.value)===null||ge===void 0)&&ge.contains(re.relatedTarget)))&&T(re)}function k(re){var ge;!((ge=s.value)===null||ge===void 0)&&ge.contains(re.relatedTarget)||C(re)}function M(re){P(re)}function O(){m.value=!0}function $(){m.value=!1}function K(re){!n.active||!n.filterable||re.target!==o.value&&re.preventDefault()}function Y(re){L(re)}const H=G(!1);function B(re){if(re.key==="Backspace"&&!H.value&&!n.pattern.length){const{selectedOptions:ge}=n;ge!=null&&ge.length&&Y(ge[ge.length-1])}}let X=null;function se(re){const{value:ge}=i;if(ge){const Ee=re.target.value;ge.textContent=Ee,A()}n.ignoreComposition&&H.value?X=re:_(re)}function pe(){H.value=!0}function te(){H.value=!1,n.ignoreComposition&&_(X),X=null}function W(re){var ge;g.value=!0,(ge=n.onPatternFocus)===null||ge===void 0||ge.call(n,re)}function de(re){var ge;g.value=!1,(ge=n.onPatternBlur)===null||ge===void 0||ge.call(n,re)}function V(){var re,ge;if(n.filterable)g.value=!1,(re=d.value)===null||re===void 0||re.blur(),(ge=o.value)===null||ge===void 0||ge.blur();else if(n.multiple){const{value:Ee}=a;Ee==null||Ee.blur()}else{const{value:Ee}=l;Ee==null||Ee.blur()}}function ue(){var re,ge,Ee;n.filterable?(g.value=!1,(re=d.value)===null||re===void 0||re.focus()):n.multiple?(ge=a.value)===null||ge===void 0||ge.focus():(Ee=l.value)===null||Ee===void 0||Ee.focus()}function Pe(){const{value:re}=o;re&&(w(),re.focus())}function Ae(){const{value:re}=o;re&&re.blur()}function F(re){const{value:ge}=c;ge&&ge.setTextContent(`+${re}`)}function z(){const{value:re}=u;return re}function ne(){return o.value}let ae=null;function le(){ae!==null&&window.clearTimeout(ae)}function me(){n.active||(le(),ae=window.setTimeout(()=>{E.value&&(h.value=!0)},100))}function fe(){le()}function ce(re){re||(le(),h.value=!1)}at(E,re=>{re||(h.value=!1)}),Nt(()=>{Vn(()=>{const re=d.value;re&&(n.disabled?re.removeAttribute("tabindex"):re.tabIndex=g.value?-1:0)})}),Ix(s,n.onResize);const{inlineThemeDisabled:ve}=n,he=U(()=>{const{size:re}=n,{common:{cubicBezierEaseInOut:ge},self:{fontWeight:Ee,borderRadius:He,color:et,placeholderColor:Xe,textColor:lt,paddingSingle:Qe,paddingMultiple:xt,caretColor:it,colorDisabled:ke,textColorDisabled:We,placeholderColorDisabled:N,colorActive:Q,boxShadowFocus:be,boxShadowActive:Le,boxShadowHover:De,border:$e,borderFocus:Ne,borderHover:je,borderActive:ht,arrowColor:Dt,arrowColorDisabled:St,loadingColor:vn,colorActiveWarning:En,boxShadowFocusWarning:Rn,boxShadowActiveWarning:On,boxShadowHoverWarning:Mn,borderWarning:sr,borderFocusWarning:Fn,borderHoverWarning:J,borderActiveWarning:Se,colorActiveError:Ve,boxShadowFocusError:ot,boxShadowActiveError:Et,boxShadowHoverError:pt,borderError:Ft,borderFocusError:Vt,borderHoverError:jn,borderActiveError:ti,clearColor:ni,clearColorHover:lo,clearColorPressed:Bs,clearSize:Ns,arrowSize:zs,[xe("height",re)]:Us,[xe("fontSize",re)]:Hs}}=v.value,Ei=Hn(Qe),Ri=Hn(xt);return{"--n-bezier":ge,"--n-border":$e,"--n-border-active":ht,"--n-border-focus":Ne,"--n-border-hover":je,"--n-border-radius":He,"--n-box-shadow-active":Le,"--n-box-shadow-focus":be,"--n-box-shadow-hover":De,"--n-caret-color":it,"--n-color":et,"--n-color-active":Q,"--n-color-disabled":ke,"--n-font-size":Hs,"--n-height":Us,"--n-padding-single-top":Ei.top,"--n-padding-multiple-top":Ri.top,"--n-padding-single-right":Ei.right,"--n-padding-multiple-right":Ri.right,"--n-padding-single-left":Ei.left,"--n-padding-multiple-left":Ri.left,"--n-padding-single-bottom":Ei.bottom,"--n-padding-multiple-bottom":Ri.bottom,"--n-placeholder-color":Xe,"--n-placeholder-color-disabled":N,"--n-text-color":lt,"--n-text-color-disabled":We,"--n-arrow-color":Dt,"--n-arrow-color-disabled":St,"--n-loading-color":vn,"--n-color-active-warning":En,"--n-box-shadow-focus-warning":Rn,"--n-box-shadow-active-warning":On,"--n-box-shadow-hover-warning":Mn,"--n-border-warning":sr,"--n-border-focus-warning":Fn,"--n-border-hover-warning":J,"--n-border-active-warning":Se,"--n-color-active-error":Ve,"--n-box-shadow-focus-error":ot,"--n-box-shadow-active-error":Et,"--n-box-shadow-hover-error":pt,"--n-border-error":Ft,"--n-border-focus-error":Vt,"--n-border-hover-error":jn,"--n-border-active-error":ti,"--n-clear-size":Ns,"--n-clear-color":ni,"--n-clear-color-hover":lo,"--n-clear-color-pressed":Bs,"--n-arrow-size":zs,"--n-font-weight":Ee}}),_e=ve?Gt("internal-selection",U(()=>n.size[0]),he,n):void 0;return{mergedTheme:v,mergedClearable:b,mergedClsPrefix:e,rtlEnabled:r,patternInputFocused:g,filterablePlaceholder:y,label:x,selected:E,showTagsPanel:h,isComposing:H,counterRef:c,counterWrapperRef:u,patternInputMirrorRef:i,patternInputRef:o,selfRef:s,multipleElRef:a,singleElRef:l,patternInputWrapperRef:d,overflowRef:f,inputTagElRef:p,handleMouseDown:K,handleFocusin:D,handleClear:M,handleMouseEnter:O,handleMouseLeave:$,handleDeleteOption:Y,handlePatternKeyDown:B,handlePatternInputInput:se,handlePatternInputBlur:de,handlePatternInputFocus:W,handleMouseEnterCounter:me,handleMouseLeaveCounter:fe,handleFocusout:k,handleCompositionEnd:te,handleCompositionStart:pe,onPopoverUpdateShow:ce,focus:ue,focusInput:Pe,blur:V,blurInput:Ae,updateCounter:F,getCounter:z,getTail:ne,renderLabel:n.renderLabel,cssVars:ve?void 0:he,themeClass:_e==null?void 0:_e.themeClass,onRender:_e==null?void 0:_e.onRender}},render(){const{status:n,multiple:e,size:t,disabled:r,filterable:i,maxTagCount:o,bordered:s,clsPrefix:a,ellipsisTagPopoverProps:l,onRender:d,renderTag:c,renderLabel:u}=this;d==null||d();const f=o==="responsive",p=typeof o=="number",h=f||p,g=R(Sf,null,{default:()=>R(AS,{clsPrefix:a,loading:this.loading,showArrow:this.showArrow,showClear:this.mergedClearable&&this.selected,onClear:this.handleClear},{default:()=>{var v,b;return(b=(v=this.$slots).arrow)===null||b===void 0?void 0:b.call(v)}})});let m;if(e){const{labelField:v}=this,b=_=>R("div",{class:`${a}-base-selection-tag-wrapper`,key:_.value},c?c({option:_,handleClose:()=>{this.handleDeleteOption(_)}}):R(gu,{size:t,closable:!_.disabled,disabled:r,onClose:()=>{this.handleDeleteOption(_)},internalCloseIsButtonTag:!1,internalCloseFocusable:!1},{default:()=>u?u(_,!0):gn(_[v],_,!0)})),y=()=>(p?this.selectedOptions.slice(0,o):this.selectedOptions).map(b),x=i?R("div",{class:`${a}-base-selection-input-tag`,ref:"inputTagElRef",key:"__input-tag__"},R("input",Object.assign({},this.inputProps,{ref:"patternInputRef",tabindex:-1,disabled:r,value:this.pattern,autofocus:this.autofocus,class:`${a}-base-selection-input-tag__input`,onBlur:this.handlePatternInputBlur,onFocus:this.handlePatternInputFocus,onKeydown:this.handlePatternKeyDown,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),R("span",{ref:"patternInputMirrorRef",class:`${a}-base-selection-input-tag__mirror`},this.pattern)):null,E=f?()=>R("div",{class:`${a}-base-selection-tag-wrapper`,ref:"counterWrapperRef"},R(gu,{size:t,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,onMouseleave:this.handleMouseLeaveCounter,disabled:r})):void 0;let A;if(p){const _=this.selectedOptions.length-o;_>0&&(A=R("div",{class:`${a}-base-selection-tag-wrapper`,key:"__counter__"},R(gu,{size:t,ref:"counterRef",onMouseenter:this.handleMouseEnterCounter,disabled:r},{default:()=>`+${_}`})))}const S=f?i?R(_m,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,getTail:this.getTail,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:y,counter:E,tail:()=>x}):R(_m,{ref:"overflowRef",updateCounter:this.updateCounter,getCounter:this.getCounter,style:{width:"100%",display:"flex",overflow:"hidden"}},{default:y,counter:E}):p&&A?y().concat(A):y(),w=h?()=>R("div",{class:`${a}-base-selection-popover`},f?y():this.selectedOptions.map(b)):void 0,T=h?Object.assign({show:this.showTagsPanel,trigger:"hover",overlap:!0,placement:"top",width:"trigger",onUpdateShow:this.onPopoverUpdateShow,theme:this.mergedTheme.peers.Popover,themeOverrides:this.mergedTheme.peerOverrides.Popover},l):null,L=(this.selected?!1:this.active?!this.pattern&&!this.isComposing:!0)?R("div",{class:`${a}-base-selection-placeholder ${a}-base-selection-overlay`},R("div",{class:`${a}-base-selection-placeholder__inner`},this.placeholder)):null,P=i?R("div",{ref:"patternInputWrapperRef",class:`${a}-base-selection-tags`},S,f?null:x,g):R("div",{ref:"multipleElRef",class:`${a}-base-selection-tags`,tabindex:r?void 0:0},S,g);m=R(mt,null,h?R(al,Object.assign({},T,{scrollable:!0,style:"max-height: calc(var(--v-target-height) * 6.6);"}),{trigger:()=>P,default:w}):P,L)}else if(i){const v=this.pattern||this.isComposing,b=this.active?!v:!this.selected,y=this.active?!1:this.selected;m=R("div",{ref:"patternInputWrapperRef",class:`${a}-base-selection-label`,title:this.patternInputFocused?void 0:Om(this.label)},R("input",Object.assign({},this.inputProps,{ref:"patternInputRef",class:`${a}-base-selection-input`,value:this.active?this.pattern:"",placeholder:"",readonly:r,disabled:r,tabindex:-1,autofocus:this.autofocus,onFocus:this.handlePatternInputFocus,onBlur:this.handlePatternInputBlur,onInput:this.handlePatternInputInput,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd})),y?R("div",{class:`${a}-base-selection-label__render-label ${a}-base-selection-overlay`,key:"input"},R("div",{class:`${a}-base-selection-overlay__wrapper`},c?c({option:this.selectedOption,handleClose:()=>{}}):u?u(this.selectedOption,!0):gn(this.label,this.selectedOption,!0))):null,b?R("div",{class:`${a}-base-selection-placeholder ${a}-base-selection-overlay`,key:"placeholder"},R("div",{class:`${a}-base-selection-overlay__wrapper`},this.filterablePlaceholder)):null,g)}else m=R("div",{ref:"singleElRef",class:`${a}-base-selection-label`,tabindex:this.disabled?void 0:0},this.label!==void 0?R("div",{class:`${a}-base-selection-input`,title:Om(this.label),key:"input"},R("div",{class:`${a}-base-selection-input__content`},c?c({option:this.selectedOption,handleClose:()=>{}}):u?u(this.selectedOption,!0):gn(this.label,this.selectedOption,!0))):R("div",{class:`${a}-base-selection-placeholder ${a}-base-selection-overlay`,key:"placeholder"},R("div",{class:`${a}-base-selection-placeholder__inner`},this.placeholder)),g);return R("div",{ref:"selfRef",class:[`${a}-base-selection`,this.rtlEnabled&&`${a}-base-selection--rtl`,this.themeClass,n&&`${a}-base-selection--${n}-status`,{[`${a}-base-selection--active`]:this.active,[`${a}-base-selection--selected`]:this.selected||this.active&&this.pattern,[`${a}-base-selection--disabled`]:this.disabled,[`${a}-base-selection--multiple`]:this.multiple,[`${a}-base-selection--focus`]:this.focused}],style:this.cssVars,onClick:this.onClick,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onKeydown:this.onKeydown,onFocusin:this.handleFocusin,onFocusout:this.handleFocusout,onMousedown:this.handleMouseDown},m,s?R("div",{class:`${a}-base-selection__border`}):null,s?R("div",{class:`${a}-base-selection__state-border`}):null)}}),{cubicBezierEaseInOut:Pi}=Ti;function iF({duration:n=".2s",delay:e=".1s"}={}){return[Z("&.fade-in-width-expand-transition-leave-from, &.fade-in-width-expand-transition-enter-to",{opacity:1}),Z("&.fade-in-width-expand-transition-leave-to, &.fade-in-width-expand-transition-enter-from",`
 opacity: 0!important;
 margin-left: 0!important;
 margin-right: 0!important;
 `),Z("&.fade-in-width-expand-transition-leave-active",`
 overflow: hidden;
 transition:
 opacity ${n} ${Pi},
 max-width ${n} ${Pi} ${e},
 margin-left ${n} ${Pi} ${e},
 margin-right ${n} ${Pi} ${e};
 `),Z("&.fade-in-width-expand-transition-enter-active",`
 overflow: hidden;
 transition:
 opacity ${n} ${Pi} ${e},
 max-width ${n} ${Pi},
 margin-left ${n} ${Pi},
 margin-right ${n} ${Pi};
 `)]}const oF=j("base-wave",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border-radius: inherit;
`),sF=Ce({name:"BaseWave",props:{clsPrefix:{type:String,required:!0}},setup(n){Vo("-base-wave",oF,Ie(n,"clsPrefix"));const e=G(null),t=G(!1);let r=null;return jt(()=>{r!==null&&window.clearTimeout(r)}),{active:t,selfRef:e,play(){r!==null&&(window.clearTimeout(r),t.value=!1,r=null),wn(()=>{var i;(i=e.value)===null||i===void 0||i.offsetHeight,t.value=!0,r=window.setTimeout(()=>{t.value=!1,r=null},1e3)})}}},render(){const{clsPrefix:n}=this;return R("div",{ref:"selfRef","aria-hidden":!0,class:[`${n}-base-wave`,this.active&&`${n}-base-wave--active`]})}}),aF={iconMargin:"11px 8px 0 12px",iconMarginRtl:"11px 12px 0 8px",iconSize:"24px",closeIconSize:"16px",closeSize:"20px",closeMargin:"13px 14px 0 0",closeMarginRtl:"13px 0 0 14px",padding:"13px"},lF={name:"Alert",common:Re,self(n){const{lineHeight:e,borderRadius:t,fontWeightStrong:r,dividerColor:i,inputColor:o,textColor1:s,textColor2:a,closeColorHover:l,closeColorPressed:d,closeIconColor:c,closeIconColorHover:u,closeIconColorPressed:f,infoColorSuppl:p,successColorSuppl:h,warningColorSuppl:g,errorColorSuppl:m,fontSize:v}=n;return Object.assign(Object.assign({},aF),{fontSize:v,lineHeight:e,titleFontWeight:r,borderRadius:t,border:`1px solid ${i}`,color:o,titleTextColor:s,iconColor:a,contentTextColor:a,closeBorderRadius:t,closeColorHover:l,closeColorPressed:d,closeIconColor:c,closeIconColorHover:u,closeIconColorPressed:f,borderInfo:`1px solid ${Te(p,{alpha:.35})}`,colorInfo:Te(p,{alpha:.25}),titleTextColorInfo:s,iconColorInfo:p,contentTextColorInfo:a,closeColorHoverInfo:l,closeColorPressedInfo:d,closeIconColorInfo:c,closeIconColorHoverInfo:u,closeIconColorPressedInfo:f,borderSuccess:`1px solid ${Te(h,{alpha:.35})}`,colorSuccess:Te(h,{alpha:.25}),titleTextColorSuccess:s,iconColorSuccess:h,contentTextColorSuccess:a,closeColorHoverSuccess:l,closeColorPressedSuccess:d,closeIconColorSuccess:c,closeIconColorHoverSuccess:u,closeIconColorPressedSuccess:f,borderWarning:`1px solid ${Te(g,{alpha:.35})}`,colorWarning:Te(g,{alpha:.25}),titleTextColorWarning:s,iconColorWarning:g,contentTextColorWarning:a,closeColorHoverWarning:l,closeColorPressedWarning:d,closeIconColorWarning:c,closeIconColorHoverWarning:u,closeIconColorPressedWarning:f,borderError:`1px solid ${Te(m,{alpha:.35})}`,colorError:Te(m,{alpha:.25}),titleTextColorError:s,iconColorError:m,contentTextColorError:a,closeColorHoverError:l,closeColorPressedError:d,closeIconColorError:c,closeIconColorHoverError:u,closeIconColorPressedError:f})}},{cubicBezierEaseInOut:Mr,cubicBezierEaseOut:dF,cubicBezierEaseIn:cF}=Ti;function uF({overflow:n="hidden",duration:e=".3s",originalTransition:t="",leavingDelay:r="0s",foldPadding:i=!1,enterToProps:o=void 0,leaveToProps:s=void 0,reverse:a=!1}={}){const l=a?"leave":"enter",d=a?"enter":"leave";return[Z(`&.fade-in-height-expand-transition-${d}-from,
 &.fade-in-height-expand-transition-${l}-to`,Object.assign(Object.assign({},o),{opacity:1})),Z(`&.fade-in-height-expand-transition-${d}-to,
 &.fade-in-height-expand-transition-${l}-from`,Object.assign(Object.assign({},s),{opacity:0,marginTop:"0 !important",marginBottom:"0 !important",paddingTop:i?"0 !important":void 0,paddingBottom:i?"0 !important":void 0})),Z(`&.fade-in-height-expand-transition-${d}-active`,`
 overflow: ${n};
 transition:
 max-height ${e} ${Mr} ${r},
 opacity ${e} ${dF} ${r},
 margin-top ${e} ${Mr} ${r},
 margin-bottom ${e} ${Mr} ${r},
 padding-top ${e} ${Mr} ${r},
 padding-bottom ${e} ${Mr} ${r}
 ${t?`,${t}`:""}
 `),Z(`&.fade-in-height-expand-transition-${l}-active`,`
 overflow: ${n};
 transition:
 max-height ${e} ${Mr},
 opacity ${e} ${cF},
 margin-top ${e} ${Mr},
 margin-bottom ${e} ${Mr},
 padding-top ${e} ${Mr},
 padding-bottom ${e} ${Mr}
 ${t?`,${t}`:""}
 `)]}const fF={linkFontSize:"13px",linkPadding:"0 0 0 16px",railWidth:"4px"};function hF(n){const{borderRadius:e,railColor:t,primaryColor:r,primaryColorHover:i,primaryColorPressed:o,textColor2:s}=n;return Object.assign(Object.assign({},fF),{borderRadius:e,railColor:t,railColorActive:r,linkColor:Te(r,{alpha:.15}),linkTextColor:s,linkTextColorHover:i,linkTextColorPressed:o,linkTextColorActive:r})}const pF={name:"Anchor",common:Re,self:hF},gF=nl&&"chrome"in window;nl&&navigator.userAgent.includes("Firefox");const PS=nl&&navigator.userAgent.includes("Safari")&&!gF,_S={paddingTiny:"0 8px",paddingSmall:"0 10px",paddingMedium:"0 12px",paddingLarge:"0 14px",clearSize:"16px"},or={name:"Input",common:Re,self(n){const{textColor2:e,textColor3:t,textColorDisabled:r,primaryColor:i,primaryColorHover:o,inputColor:s,inputColorDisabled:a,warningColor:l,warningColorHover:d,errorColor:c,errorColorHover:u,borderRadius:f,lineHeight:p,fontSizeTiny:h,fontSizeSmall:g,fontSizeMedium:m,fontSizeLarge:v,heightTiny:b,heightSmall:y,heightMedium:x,heightLarge:E,clearColor:A,clearColorHover:S,clearColorPressed:w,placeholderColor:T,placeholderColorDisabled:C,iconColor:L,iconColorDisabled:P,iconColorHover:_,iconColorPressed:D,fontWeight:k}=n;return Object.assign(Object.assign({},_S),{fontWeight:k,countTextColorDisabled:r,countTextColor:t,heightTiny:b,heightSmall:y,heightMedium:x,heightLarge:E,fontSizeTiny:h,fontSizeSmall:g,fontSizeMedium:m,fontSizeLarge:v,lineHeight:p,lineHeightTextarea:p,borderRadius:f,iconSize:"16px",groupLabelColor:s,textColor:e,textColorDisabled:r,textDecorationColor:e,groupLabelTextColor:e,caretColor:i,placeholderColor:T,placeholderColorDisabled:C,color:s,colorDisabled:a,colorFocus:Te(i,{alpha:.1}),groupLabelBorder:"1px solid #0000",border:"1px solid #0000",borderHover:`1px solid ${o}`,borderDisabled:"1px solid #0000",borderFocus:`1px solid ${o}`,boxShadowFocus:`0 0 8px 0 ${Te(i,{alpha:.3})}`,loadingColor:i,loadingColorWarning:l,borderWarning:`1px solid ${l}`,borderHoverWarning:`1px solid ${d}`,colorFocusWarning:Te(l,{alpha:.1}),borderFocusWarning:`1px solid ${d}`,boxShadowFocusWarning:`0 0 8px 0 ${Te(l,{alpha:.3})}`,caretColorWarning:l,loadingColorError:c,borderError:`1px solid ${c}`,borderHoverError:`1px solid ${u}`,colorFocusError:Te(c,{alpha:.1}),borderFocusError:`1px solid ${u}`,boxShadowFocusError:`0 0 8px 0 ${Te(c,{alpha:.3})}`,caretColorError:c,clearColor:A,clearColorHover:S,clearColorPressed:w,iconColor:L,iconColorDisabled:P,iconColorHover:_,iconColorPressed:D,suffixTextColor:e})}};function mF(n){const{textColor2:e,textColor3:t,textColorDisabled:r,primaryColor:i,primaryColorHover:o,inputColor:s,inputColorDisabled:a,borderColor:l,warningColor:d,warningColorHover:c,errorColor:u,errorColorHover:f,borderRadius:p,lineHeight:h,fontSizeTiny:g,fontSizeSmall:m,fontSizeMedium:v,fontSizeLarge:b,heightTiny:y,heightSmall:x,heightMedium:E,heightLarge:A,actionColor:S,clearColor:w,clearColorHover:T,clearColorPressed:C,placeholderColor:L,placeholderColorDisabled:P,iconColor:_,iconColorDisabled:D,iconColorHover:k,iconColorPressed:M,fontWeight:O}=n;return Object.assign(Object.assign({},_S),{fontWeight:O,countTextColorDisabled:r,countTextColor:t,heightTiny:y,heightSmall:x,heightMedium:E,heightLarge:A,fontSizeTiny:g,fontSizeSmall:m,fontSizeMedium:v,fontSizeLarge:b,lineHeight:h,lineHeightTextarea:h,borderRadius:p,iconSize:"16px",groupLabelColor:S,groupLabelTextColor:e,textColor:e,textColorDisabled:r,textDecorationColor:e,caretColor:i,placeholderColor:L,placeholderColorDisabled:P,color:s,colorDisabled:a,colorFocus:s,groupLabelBorder:`1px solid ${l}`,border:`1px solid ${l}`,borderHover:`1px solid ${o}`,borderDisabled:`1px solid ${l}`,borderFocus:`1px solid ${o}`,boxShadowFocus:`0 0 0 2px ${Te(i,{alpha:.2})}`,loadingColor:i,loadingColorWarning:d,borderWarning:`1px solid ${d}`,borderHoverWarning:`1px solid ${c}`,colorFocusWarning:s,borderFocusWarning:`1px solid ${c}`,boxShadowFocusWarning:`0 0 0 2px ${Te(d,{alpha:.2})}`,caretColorWarning:d,loadingColorError:u,borderError:`1px solid ${u}`,borderHoverError:`1px solid ${f}`,colorFocusError:s,borderFocusError:`1px solid ${f}`,boxShadowFocusError:`0 0 0 2px ${Te(u,{alpha:.2})}`,caretColorError:u,clearColor:w,clearColorHover:T,clearColorPressed:C,iconColor:_,iconColorDisabled:D,iconColorHover:k,iconColorPressed:M,suffixTextColor:e})}const kS={name:"Input",common:Ht,self:mF},DS="n-input",vF=j("input",`
 max-width: 100%;
 cursor: text;
 line-height: 1.5;
 z-index: auto;
 outline: none;
 box-sizing: border-box;
 position: relative;
 display: inline-flex;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 transition: background-color .3s var(--n-bezier);
 font-size: var(--n-font-size);
 font-weight: var(--n-font-weight);
 --n-padding-vertical: calc((var(--n-height) - 1.5 * var(--n-font-size)) / 2);
`,[q("input, textarea",`
 overflow: hidden;
 flex-grow: 1;
 position: relative;
 `),q("input-el, textarea-el, input-mirror, textarea-mirror, separator, placeholder",`
 box-sizing: border-box;
 font-size: inherit;
 line-height: 1.5;
 font-family: inherit;
 border: none;
 outline: none;
 background-color: #0000;
 text-align: inherit;
 transition:
 -webkit-text-fill-color .3s var(--n-bezier),
 caret-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 text-decoration-color .3s var(--n-bezier);
 `),q("input-el, textarea-el",`
 -webkit-appearance: none;
 scrollbar-width: none;
 width: 100%;
 min-width: 0;
 text-decoration-color: var(--n-text-decoration-color);
 color: var(--n-text-color);
 caret-color: var(--n-caret-color);
 background-color: transparent;
 `,[Z("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 width: 0;
 height: 0;
 display: none;
 `),Z("&::placeholder",`
 color: #0000;
 -webkit-text-fill-color: transparent !important;
 `),Z("&:-webkit-autofill ~",[q("placeholder","display: none;")])]),ee("round",[Pt("textarea","border-radius: calc(var(--n-height) / 2);")]),q("placeholder",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: hidden;
 color: var(--n-placeholder-color);
 `,[Z("span",`
 width: 100%;
 display: inline-block;
 `)]),ee("textarea",[q("placeholder","overflow: visible;")]),Pt("autosize","width: 100%;"),ee("autosize",[q("textarea-el, input-el",`
 position: absolute;
 top: 0;
 left: 0;
 height: 100%;
 `)]),j("input-wrapper",`
 overflow: hidden;
 display: inline-flex;
 flex-grow: 1;
 position: relative;
 padding-left: var(--n-padding-left);
 padding-right: var(--n-padding-right);
 `),q("input-mirror",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre;
 pointer-events: none;
 `),q("input-el",`
 padding: 0;
 height: var(--n-height);
 line-height: var(--n-height);
 `,[Z("&[type=password]::-ms-reveal","display: none;"),Z("+",[q("placeholder",`
 display: flex;
 align-items: center; 
 `)])]),Pt("textarea",[q("placeholder","white-space: nowrap;")]),q("eye",`
 display: flex;
 align-items: center;
 justify-content: center;
 transition: color .3s var(--n-bezier);
 `),ee("textarea","width: 100%;",[j("input-word-count",`
 position: absolute;
 right: var(--n-padding-right);
 bottom: var(--n-padding-vertical);
 `),ee("resizable",[j("input-wrapper",`
 resize: vertical;
 min-height: var(--n-height);
 `)]),q("textarea-el, textarea-mirror, placeholder",`
 height: 100%;
 padding-left: 0;
 padding-right: 0;
 padding-top: var(--n-padding-vertical);
 padding-bottom: var(--n-padding-vertical);
 word-break: break-word;
 display: inline-block;
 vertical-align: bottom;
 box-sizing: border-box;
 line-height: var(--n-line-height-textarea);
 margin: 0;
 resize: none;
 white-space: pre-wrap;
 scroll-padding-block-end: var(--n-padding-vertical);
 `),q("textarea-mirror",`
 width: 100%;
 pointer-events: none;
 overflow: hidden;
 visibility: hidden;
 position: static;
 white-space: pre-wrap;
 overflow-wrap: break-word;
 `)]),ee("pair",[q("input-el, placeholder","text-align: center;"),q("separator",`
 display: flex;
 align-items: center;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 white-space: nowrap;
 `,[j("icon",`
 color: var(--n-icon-color);
 `),j("base-icon",`
 color: var(--n-icon-color);
 `)])]),ee("disabled",`
 cursor: not-allowed;
 background-color: var(--n-color-disabled);
 `,[q("border","border: var(--n-border-disabled);"),q("input-el, textarea-el",`
 cursor: not-allowed;
 color: var(--n-text-color-disabled);
 text-decoration-color: var(--n-text-color-disabled);
 `),q("placeholder","color: var(--n-placeholder-color-disabled);"),q("separator","color: var(--n-text-color-disabled);",[j("icon",`
 color: var(--n-icon-color-disabled);
 `),j("base-icon",`
 color: var(--n-icon-color-disabled);
 `)]),j("input-word-count",`
 color: var(--n-count-text-color-disabled);
 `),q("suffix, prefix","color: var(--n-text-color-disabled);",[j("icon",`
 color: var(--n-icon-color-disabled);
 `),j("internal-icon",`
 color: var(--n-icon-color-disabled);
 `)])]),Pt("disabled",[q("eye",`
 color: var(--n-icon-color);
 cursor: pointer;
 `,[Z("&:hover",`
 color: var(--n-icon-color-hover);
 `),Z("&:active",`
 color: var(--n-icon-color-pressed);
 `)]),Z("&:hover",[q("state-border","border: var(--n-border-hover);")]),ee("focus","background-color: var(--n-color-focus);",[q("state-border",`
 border: var(--n-border-focus);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),q("border, state-border",`
 box-sizing: border-box;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 border-radius: inherit;
 border: var(--n-border);
 transition:
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `),q("state-border",`
 border-color: #0000;
 z-index: 1;
 `),q("prefix","margin-right: 4px;"),q("suffix",`
 margin-left: 4px;
 `),q("suffix, prefix",`
 transition: color .3s var(--n-bezier);
 flex-wrap: nowrap;
 flex-shrink: 0;
 line-height: var(--n-height);
 white-space: nowrap;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 color: var(--n-suffix-text-color);
 `,[j("base-loading",`
 font-size: var(--n-icon-size);
 margin: 0 2px;
 color: var(--n-loading-color);
 `),j("base-clear",`
 font-size: var(--n-icon-size);
 `,[q("placeholder",[j("base-icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)])]),Z(">",[j("icon",`
 transition: color .3s var(--n-bezier);
 color: var(--n-icon-color);
 font-size: var(--n-icon-size);
 `)]),j("base-icon",`
 font-size: var(--n-icon-size);
 `)]),j("input-word-count",`
 pointer-events: none;
 line-height: 1.5;
 font-size: .85em;
 color: var(--n-count-text-color);
 transition: color .3s var(--n-bezier);
 margin-left: 4px;
 font-variant: tabular-nums;
 `),["warning","error"].map(n=>ee(`${n}-status`,[Pt("disabled",[j("base-loading",`
 color: var(--n-loading-color-${n})
 `),q("input-el, textarea-el",`
 caret-color: var(--n-caret-color-${n});
 `),q("state-border",`
 border: var(--n-border-${n});
 `),Z("&:hover",[q("state-border",`
 border: var(--n-border-hover-${n});
 `)]),Z("&:focus",`
 background-color: var(--n-color-focus-${n});
 `,[q("state-border",`
 box-shadow: var(--n-box-shadow-focus-${n});
 border: var(--n-border-focus-${n});
 `)]),ee("focus",`
 background-color: var(--n-color-focus-${n});
 `,[q("state-border",`
 box-shadow: var(--n-box-shadow-focus-${n});
 border: var(--n-border-focus-${n});
 `)])])]))]),bF=j("input",[ee("disabled",[q("input-el, textarea-el",`
 -webkit-text-fill-color: var(--n-text-color-disabled);
 `)])]);function yF(n){let e=0;for(const t of n)e++;return e}function wl(n){return n===""||n==null}function xF(n){const e=G(null);function t(){const{value:o}=n;if(!(o!=null&&o.focus)){i();return}const{selectionStart:s,selectionEnd:a,value:l}=o;if(s==null||a==null){i();return}e.value={start:s,end:a,beforeText:l.slice(0,s),afterText:l.slice(a)}}function r(){var o;const{value:s}=e,{value:a}=n;if(!s||!a)return;const{value:l}=a,{start:d,beforeText:c,afterText:u}=s;let f=l.length;if(l.endsWith(u))f=l.length-u.length;else if(l.startsWith(c))f=c.length;else{const p=c[d-1],h=l.indexOf(p,d-1);h!==-1&&(f=h+1)}(o=a.setSelectionRange)===null||o===void 0||o.call(a,f,f)}function i(){e.value=null}return at(n,i),{recordCursor:t,restoreCursor:r}}const yv=Ce({name:"InputWordCount",setup(n,{slots:e}){const{mergedValueRef:t,maxlengthRef:r,mergedClsPrefixRef:i,countGraphemesRef:o}=Be(DS),s=U(()=>{const{value:a}=t;return a===null||Array.isArray(a)?0:(o.value||yF)(a)});return()=>{const{value:a}=r,{value:l}=t;return R("span",{class:`${i.value}-input-word-count`},$L(e.default,{value:l===null||Array.isArray(l)?"":l},()=>[a===void 0?s.value:`${s.value} / ${a}`]))}}}),SF=Object.assign(Object.assign({},Ke.props),{bordered:{type:Boolean,default:void 0},type:{type:String,default:"text"},placeholder:[Array,String],defaultValue:{type:[String,Array],default:null},value:[String,Array],disabled:{type:Boolean,default:void 0},size:String,rows:{type:[Number,String],default:3},round:Boolean,minlength:[String,Number],maxlength:[String,Number],clearable:Boolean,autosize:{type:[Boolean,Object],default:!1},pair:Boolean,separator:String,readonly:{type:[String,Boolean],default:!1},passivelyActivated:Boolean,showPasswordOn:String,stateful:{type:Boolean,default:!0},autofocus:Boolean,inputProps:Object,resizable:{type:Boolean,default:!0},showCount:Boolean,loading:{type:Boolean,default:void 0},allowInput:Function,renderCount:Function,onMousedown:Function,onKeydown:Function,onKeyup:[Function,Array],onInput:[Function,Array],onFocus:[Function,Array],onBlur:[Function,Array],onClick:[Function,Array],onChange:[Function,Array],onClear:[Function,Array],countGraphemes:Function,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],textDecoration:[String,Array],attrSize:{type:Number,default:20},onInputBlur:[Function,Array],onInputFocus:[Function,Array],onDeactivate:[Function,Array],onActivate:[Function,Array],onWrapperFocus:[Function,Array],onWrapperBlur:[Function,Array],internalDeactivateOnEnter:Boolean,internalForceFocus:Boolean,internalLoadingBeforeSuffix:{type:Boolean,default:!0},showPasswordToggle:Boolean}),vr=Ce({name:"Input",props:SF,slots:Object,setup(n){const{mergedClsPrefixRef:e,mergedBorderedRef:t,inlineThemeDisabled:r,mergedRtlRef:i}=yt(n),o=Ke("Input","-input",vF,kS,n,e);PS&&Vo("-input-safari",bF,e);const s=G(null),a=G(null),l=G(null),d=G(null),c=G(null),u=G(null),f=G(null),p=xF(f),h=G(null),{localeRef:g}=il("Input"),m=G(n.defaultValue),v=Ie(n,"value"),b=kn(v,m),y=oo(n),{mergedSizeRef:x,mergedDisabledRef:E,mergedStatusRef:A}=y,S=G(!1),w=G(!1),T=G(!1),C=G(!1);let L=null;const P=U(()=>{const{placeholder:J,pair:Se}=n;return Se?Array.isArray(J)?J:J===void 0?["",""]:[J,J]:J===void 0?[g.value.placeholder]:[J]}),_=U(()=>{const{value:J}=T,{value:Se}=b,{value:Ve}=P;return!J&&(wl(Se)||Array.isArray(Se)&&wl(Se[0]))&&Ve[0]}),D=U(()=>{const{value:J}=T,{value:Se}=b,{value:Ve}=P;return!J&&Ve[1]&&(wl(Se)||Array.isArray(Se)&&wl(Se[1]))}),k=At(()=>n.internalForceFocus||S.value),M=At(()=>{if(E.value||n.readonly||!n.clearable||!k.value&&!w.value)return!1;const{value:J}=b,{value:Se}=k;return n.pair?!!(Array.isArray(J)&&(J[0]||J[1]))&&(w.value||Se):!!J&&(w.value||Se)}),O=U(()=>{const{showPasswordOn:J}=n;if(J)return J;if(n.showPasswordToggle)return"click"}),$=G(!1),K=U(()=>{const{textDecoration:J}=n;return J?Array.isArray(J)?J.map(Se=>({textDecoration:Se})):[{textDecoration:J}]:["",""]}),Y=G(void 0),H=()=>{var J,Se;if(n.type==="textarea"){const{autosize:Ve}=n;if(Ve&&(Y.value=(Se=(J=h.value)===null||J===void 0?void 0:J.$el)===null||Se===void 0?void 0:Se.offsetWidth),!a.value||typeof Ve=="boolean")return;const{paddingTop:ot,paddingBottom:Et,lineHeight:pt}=window.getComputedStyle(a.value),Ft=Number(ot.slice(0,-2)),Vt=Number(Et.slice(0,-2)),jn=Number(pt.slice(0,-2)),{value:ti}=l;if(!ti)return;if(Ve.minRows){const ni=Math.max(Ve.minRows,1),lo=`${Ft+Vt+jn*ni}px`;ti.style.minHeight=lo}if(Ve.maxRows){const ni=`${Ft+Vt+jn*Ve.maxRows}px`;ti.style.maxHeight=ni}}},B=U(()=>{const{maxlength:J}=n;return J===void 0?void 0:Number(J)});Nt(()=>{const{value:J}=b;Array.isArray(J)||ht(J)});const X=Bo().proxy;function se(J,Se){const{onUpdateValue:Ve,"onUpdate:value":ot,onInput:Et}=n,{nTriggerFormInput:pt}=y;Ve&&we(Ve,J,Se),ot&&we(ot,J,Se),Et&&we(Et,J,Se),m.value=J,pt()}function pe(J,Se){const{onChange:Ve}=n,{nTriggerFormChange:ot}=y;Ve&&we(Ve,J,Se),m.value=J,ot()}function te(J){const{onBlur:Se}=n,{nTriggerFormBlur:Ve}=y;Se&&we(Se,J),Ve()}function W(J){const{onFocus:Se}=n,{nTriggerFormFocus:Ve}=y;Se&&we(Se,J),Ve()}function de(J){const{onClear:Se}=n;Se&&we(Se,J)}function V(J){const{onInputBlur:Se}=n;Se&&we(Se,J)}function ue(J){const{onInputFocus:Se}=n;Se&&we(Se,J)}function Pe(){const{onDeactivate:J}=n;J&&we(J)}function Ae(){const{onActivate:J}=n;J&&we(J)}function F(J){const{onClick:Se}=n;Se&&we(Se,J)}function z(J){const{onWrapperFocus:Se}=n;Se&&we(Se,J)}function ne(J){const{onWrapperBlur:Se}=n;Se&&we(Se,J)}function ae(){T.value=!0}function le(J){T.value=!1,J.target===u.value?me(J,1):me(J,0)}function me(J,Se=0,Ve="input"){const ot=J.target.value;if(ht(ot),J instanceof InputEvent&&!J.isComposing&&(T.value=!1),n.type==="textarea"){const{value:pt}=h;pt&&pt.syncUnifiedContainer()}if(L=ot,T.value)return;p.recordCursor();const Et=fe(ot);if(Et)if(!n.pair)Ve==="input"?se(ot,{source:Se}):pe(ot,{source:Se});else{let{value:pt}=b;Array.isArray(pt)?pt=[pt[0],pt[1]]:pt=["",""],pt[Se]=ot,Ve==="input"?se(pt,{source:Se}):pe(pt,{source:Se})}X.$forceUpdate(),Et||wn(p.restoreCursor)}function fe(J){const{countGraphemes:Se,maxlength:Ve,minlength:ot}=n;if(Se){let pt;if(Ve!==void 0&&(pt===void 0&&(pt=Se(J)),pt>Number(Ve))||ot!==void 0&&(pt===void 0&&(pt=Se(J)),pt<Number(Ve)))return!1}const{allowInput:Et}=n;return typeof Et=="function"?Et(J):!0}function ce(J){V(J),J.relatedTarget===s.value&&Pe(),J.relatedTarget!==null&&(J.relatedTarget===c.value||J.relatedTarget===u.value||J.relatedTarget===a.value)||(C.value=!1),re(J,"blur"),f.value=null}function ve(J,Se){ue(J),S.value=!0,C.value=!0,Ae(),re(J,"focus"),Se===0?f.value=c.value:Se===1?f.value=u.value:Se===2&&(f.value=a.value)}function he(J){n.passivelyActivated&&(ne(J),re(J,"blur"))}function _e(J){n.passivelyActivated&&(S.value=!0,z(J),re(J,"focus"))}function re(J,Se){J.relatedTarget!==null&&(J.relatedTarget===c.value||J.relatedTarget===u.value||J.relatedTarget===a.value||J.relatedTarget===s.value)||(Se==="focus"?(W(J),S.value=!0):Se==="blur"&&(te(J),S.value=!1))}function ge(J,Se){me(J,Se,"change")}function Ee(J){F(J)}function He(J){de(J),et()}function et(){n.pair?(se(["",""],{source:"clear"}),pe(["",""],{source:"clear"})):(se("",{source:"clear"}),pe("",{source:"clear"}))}function Xe(J){const{onMousedown:Se}=n;Se&&Se(J);const{tagName:Ve}=J.target;if(Ve!=="INPUT"&&Ve!=="TEXTAREA"){if(n.resizable){const{value:ot}=s;if(ot){const{left:Et,top:pt,width:Ft,height:Vt}=ot.getBoundingClientRect(),jn=14;if(Et+Ft-jn<J.clientX&&J.clientX<Et+Ft&&pt+Vt-jn<J.clientY&&J.clientY<pt+Vt)return}}J.preventDefault(),S.value||be()}}function lt(){var J;w.value=!0,n.type==="textarea"&&((J=h.value)===null||J===void 0||J.handleMouseEnterWrapper())}function Qe(){var J;w.value=!1,n.type==="textarea"&&((J=h.value)===null||J===void 0||J.handleMouseLeaveWrapper())}function xt(){E.value||O.value==="click"&&($.value=!$.value)}function it(J){if(E.value)return;J.preventDefault();const Se=ot=>{ot.preventDefault(),bt("mouseup",document,Se)};if(Tt("mouseup",document,Se),O.value!=="mousedown")return;$.value=!0;const Ve=()=>{$.value=!1,bt("mouseup",document,Ve)};Tt("mouseup",document,Ve)}function ke(J){n.onKeyup&&we(n.onKeyup,J)}function We(J){switch(n.onKeydown&&we(n.onKeydown,J),J.key){case"Escape":Q();break;case"Enter":N(J);break}}function N(J){var Se,Ve;if(n.passivelyActivated){const{value:ot}=C;if(ot){n.internalDeactivateOnEnter&&Q();return}J.preventDefault(),n.type==="textarea"?(Se=a.value)===null||Se===void 0||Se.focus():(Ve=c.value)===null||Ve===void 0||Ve.focus()}}function Q(){n.passivelyActivated&&(C.value=!1,wn(()=>{var J;(J=s.value)===null||J===void 0||J.focus()}))}function be(){var J,Se,Ve;E.value||(n.passivelyActivated?(J=s.value)===null||J===void 0||J.focus():((Se=a.value)===null||Se===void 0||Se.focus(),(Ve=c.value)===null||Ve===void 0||Ve.focus()))}function Le(){var J;!((J=s.value)===null||J===void 0)&&J.contains(document.activeElement)&&document.activeElement.blur()}function De(){var J,Se;(J=a.value)===null||J===void 0||J.select(),(Se=c.value)===null||Se===void 0||Se.select()}function $e(){E.value||(a.value?a.value.focus():c.value&&c.value.focus())}function Ne(){const{value:J}=s;J!=null&&J.contains(document.activeElement)&&J!==document.activeElement&&Q()}function je(J){if(n.type==="textarea"){const{value:Se}=a;Se==null||Se.scrollTo(J)}else{const{value:Se}=c;Se==null||Se.scrollTo(J)}}function ht(J){const{type:Se,pair:Ve,autosize:ot}=n;if(!Ve&&ot)if(Se==="textarea"){const{value:Et}=l;Et&&(Et.textContent=`${J??""}\r
`)}else{const{value:Et}=d;Et&&(J?Et.textContent=J:Et.innerHTML="&nbsp;")}}function Dt(){H()}const St=G({top:"0"});function vn(J){var Se;const{scrollTop:Ve}=J.target;St.value.top=`${-Ve}px`,(Se=h.value)===null||Se===void 0||Se.syncUnifiedContainer()}let En=null;Vn(()=>{const{autosize:J,type:Se}=n;J&&Se==="textarea"?En=at(b,Ve=>{!Array.isArray(Ve)&&Ve!==L&&ht(Ve)}):En==null||En()});let Rn=null;Vn(()=>{n.type==="textarea"?Rn=at(b,J=>{var Se;!Array.isArray(J)&&J!==L&&((Se=h.value)===null||Se===void 0||Se.syncUnifiedContainer())}):Rn==null||Rn()}),st(DS,{mergedValueRef:b,maxlengthRef:B,mergedClsPrefixRef:e,countGraphemesRef:Ie(n,"countGraphemes")});const On={wrapperElRef:s,inputElRef:c,textareaElRef:a,isCompositing:T,clear:et,focus:be,blur:Le,select:De,deactivate:Ne,activate:$e,scrollTo:je},Mn=Dn("Input",i,e),sr=U(()=>{const{value:J}=x,{common:{cubicBezierEaseInOut:Se},self:{color:Ve,borderRadius:ot,textColor:Et,caretColor:pt,caretColorError:Ft,caretColorWarning:Vt,textDecorationColor:jn,border:ti,borderDisabled:ni,borderHover:lo,borderFocus:Bs,placeholderColor:Ns,placeholderColorDisabled:zs,lineHeightTextarea:Us,colorDisabled:Hs,colorFocus:Ei,textColorDisabled:Ri,boxShadowFocus:Tc,iconSize:wc,colorFocusWarning:Ec,boxShadowFocusWarning:Rc,borderWarning:Ac,borderFocusWarning:Ic,borderHoverWarning:Lc,colorFocusError:Pc,boxShadowFocusError:_c,borderError:kc,borderFocusError:Dc,borderHoverError:Bw,clearSize:Nw,clearColor:zw,clearColorHover:Uw,clearColorPressed:Hw,iconColor:Vw,iconColorDisabled:Gw,suffixTextColor:Ww,countTextColor:jw,countTextColorDisabled:Kw,iconColorHover:qw,iconColorPressed:Yw,loadingColor:Xw,loadingColorError:Qw,loadingColorWarning:Zw,fontWeight:Jw,[xe("padding",J)]:eE,[xe("fontSize",J)]:tE,[xe("height",J)]:nE}}=o.value,{left:rE,right:iE}=Hn(eE);return{"--n-bezier":Se,"--n-count-text-color":jw,"--n-count-text-color-disabled":Kw,"--n-color":Ve,"--n-font-size":tE,"--n-font-weight":Jw,"--n-border-radius":ot,"--n-height":nE,"--n-padding-left":rE,"--n-padding-right":iE,"--n-text-color":Et,"--n-caret-color":pt,"--n-text-decoration-color":jn,"--n-border":ti,"--n-border-disabled":ni,"--n-border-hover":lo,"--n-border-focus":Bs,"--n-placeholder-color":Ns,"--n-placeholder-color-disabled":zs,"--n-icon-size":wc,"--n-line-height-textarea":Us,"--n-color-disabled":Hs,"--n-color-focus":Ei,"--n-text-color-disabled":Ri,"--n-box-shadow-focus":Tc,"--n-loading-color":Xw,"--n-caret-color-warning":Vt,"--n-color-focus-warning":Ec,"--n-box-shadow-focus-warning":Rc,"--n-border-warning":Ac,"--n-border-focus-warning":Ic,"--n-border-hover-warning":Lc,"--n-loading-color-warning":Zw,"--n-caret-color-error":Ft,"--n-color-focus-error":Pc,"--n-box-shadow-focus-error":_c,"--n-border-error":kc,"--n-border-focus-error":Dc,"--n-border-hover-error":Bw,"--n-loading-color-error":Qw,"--n-clear-color":zw,"--n-clear-size":Nw,"--n-clear-color-hover":Uw,"--n-clear-color-pressed":Hw,"--n-icon-color":Vw,"--n-icon-color-hover":qw,"--n-icon-color-pressed":Yw,"--n-icon-color-disabled":Gw,"--n-suffix-text-color":Ww}}),Fn=r?Gt("input",U(()=>{const{value:J}=x;return J[0]}),sr,n):void 0;return Object.assign(Object.assign({},On),{wrapperElRef:s,inputElRef:c,inputMirrorElRef:d,inputEl2Ref:u,textareaElRef:a,textareaMirrorElRef:l,textareaScrollbarInstRef:h,rtlEnabled:Mn,uncontrolledValue:m,mergedValue:b,passwordVisible:$,mergedPlaceholder:P,showPlaceholder1:_,showPlaceholder2:D,mergedFocus:k,isComposing:T,activated:C,showClearButton:M,mergedSize:x,mergedDisabled:E,textDecorationStyle:K,mergedClsPrefix:e,mergedBordered:t,mergedShowPasswordOn:O,placeholderStyle:St,mergedStatus:A,textAreaScrollContainerWidth:Y,handleTextAreaScroll:vn,handleCompositionStart:ae,handleCompositionEnd:le,handleInput:me,handleInputBlur:ce,handleInputFocus:ve,handleWrapperBlur:he,handleWrapperFocus:_e,handleMouseEnter:lt,handleMouseLeave:Qe,handleMouseDown:Xe,handleChange:ge,handleClick:Ee,handleClear:He,handlePasswordToggleClick:xt,handlePasswordToggleMousedown:it,handleWrapperKeydown:We,handleWrapperKeyup:ke,handleTextAreaMirrorResize:Dt,getTextareaScrollContainer:()=>a.value,mergedTheme:o,cssVars:r?void 0:sr,themeClass:Fn==null?void 0:Fn.themeClass,onRender:Fn==null?void 0:Fn.onRender})},render(){var n,e;const{mergedClsPrefix:t,mergedStatus:r,themeClass:i,type:o,countGraphemes:s,onRender:a}=this,l=this.$slots;return a==null||a(),R("div",{ref:"wrapperElRef",class:[`${t}-input`,i,r&&`${t}-input--${r}-status`,{[`${t}-input--rtl`]:this.rtlEnabled,[`${t}-input--disabled`]:this.mergedDisabled,[`${t}-input--textarea`]:o==="textarea",[`${t}-input--resizable`]:this.resizable&&!this.autosize,[`${t}-input--autosize`]:this.autosize,[`${t}-input--round`]:this.round&&o!=="textarea",[`${t}-input--pair`]:this.pair,[`${t}-input--focus`]:this.mergedFocus,[`${t}-input--stateful`]:this.stateful}],style:this.cssVars,tabindex:!this.mergedDisabled&&this.passivelyActivated&&!this.activated?0:void 0,onFocus:this.handleWrapperFocus,onBlur:this.handleWrapperBlur,onClick:this.handleClick,onMousedown:this.handleMouseDown,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd,onKeyup:this.handleWrapperKeyup,onKeydown:this.handleWrapperKeydown},R("div",{class:`${t}-input-wrapper`},Ct(l.prefix,d=>d&&R("div",{class:`${t}-input__prefix`},d)),o==="textarea"?R(Ms,{ref:"textareaScrollbarInstRef",class:`${t}-input__textarea`,container:this.getTextareaScrollContainer,triggerDisplayManually:!0,useUnifiedContainer:!0,internalHoistYRail:!0},{default:()=>{var d,c;const{textAreaScrollContainerWidth:u}=this,f={width:this.autosize&&u&&`${u}px`};return R(mt,null,R("textarea",Object.assign({},this.inputProps,{ref:"textareaElRef",class:[`${t}-input__textarea-el`,(d=this.inputProps)===null||d===void 0?void 0:d.class],autofocus:this.autofocus,rows:Number(this.rows),placeholder:this.placeholder,value:this.mergedValue,disabled:this.mergedDisabled,maxlength:s?void 0:this.maxlength,minlength:s?void 0:this.minlength,readonly:this.readonly,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,style:[this.textDecorationStyle[0],(c=this.inputProps)===null||c===void 0?void 0:c.style,f],onBlur:this.handleInputBlur,onFocus:p=>{this.handleInputFocus(p,2)},onInput:this.handleInput,onChange:this.handleChange,onScroll:this.handleTextAreaScroll})),this.showPlaceholder1?R("div",{class:`${t}-input__placeholder`,style:[this.placeholderStyle,f],key:"placeholder"},this.mergedPlaceholder[0]):null,this.autosize?R(ws,{onResize:this.handleTextAreaMirrorResize},{default:()=>R("div",{ref:"textareaMirrorElRef",class:`${t}-input__textarea-mirror`,key:"mirror"})}):null)}}):R("div",{class:`${t}-input__input`},R("input",Object.assign({type:o==="password"&&this.mergedShowPasswordOn&&this.passwordVisible?"text":o},this.inputProps,{ref:"inputElRef",class:[`${t}-input__input-el`,(n=this.inputProps)===null||n===void 0?void 0:n.class],style:[this.textDecorationStyle[0],(e=this.inputProps)===null||e===void 0?void 0:e.style],tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[0],disabled:this.mergedDisabled,maxlength:s?void 0:this.maxlength,minlength:s?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[0]:this.mergedValue,readonly:this.readonly,autofocus:this.autofocus,size:this.attrSize,onBlur:this.handleInputBlur,onFocus:d=>{this.handleInputFocus(d,0)},onInput:d=>{this.handleInput(d,0)},onChange:d=>{this.handleChange(d,0)}})),this.showPlaceholder1?R("div",{class:`${t}-input__placeholder`},R("span",null,this.mergedPlaceholder[0])):null,this.autosize?R("div",{class:`${t}-input__input-mirror`,key:"mirror",ref:"inputMirrorElRef"}," "):null),!this.pair&&Ct(l.suffix,d=>d||this.clearable||this.showCount||this.mergedShowPasswordOn||this.loading!==void 0?R("div",{class:`${t}-input__suffix`},[Ct(l["clear-icon-placeholder"],c=>(this.clearable||c)&&R(kf,{clsPrefix:t,show:this.showClearButton,onClear:this.handleClear},{placeholder:()=>c,icon:()=>{var u,f;return(f=(u=this.$slots)["clear-icon"])===null||f===void 0?void 0:f.call(u)}})),this.internalLoadingBeforeSuffix?null:d,this.loading!==void 0?R(AS,{clsPrefix:t,loading:this.loading,showArrow:!1,showClear:!1,style:this.cssVars}):null,this.internalLoadingBeforeSuffix?d:null,this.showCount&&this.type!=="textarea"?R(yv,null,{default:c=>{var u;const{renderCount:f}=this;return f?f(c):(u=l.count)===null||u===void 0?void 0:u.call(l,c)}}):null,this.mergedShowPasswordOn&&this.type==="password"?R("div",{class:`${t}-input__eye`,onMousedown:this.handlePasswordToggleMousedown,onClick:this.handlePasswordToggleClick},this.passwordVisible?Er(l["password-visible-icon"],()=>[R(on,{clsPrefix:t},{default:()=>R(YO,null)})]):Er(l["password-invisible-icon"],()=>[R(on,{clsPrefix:t},{default:()=>R(XO,null)})])):null]):null)),this.pair?R("span",{class:`${t}-input__separator`},Er(l.separator,()=>[this.separator])):null,this.pair?R("div",{class:`${t}-input-wrapper`},R("div",{class:`${t}-input__input`},R("input",{ref:"inputEl2Ref",type:this.type,class:`${t}-input__input-el`,tabindex:this.passivelyActivated&&!this.activated?-1:void 0,placeholder:this.mergedPlaceholder[1],disabled:this.mergedDisabled,maxlength:s?void 0:this.maxlength,minlength:s?void 0:this.minlength,value:Array.isArray(this.mergedValue)?this.mergedValue[1]:void 0,readonly:this.readonly,style:this.textDecorationStyle[1],onBlur:this.handleInputBlur,onFocus:d=>{this.handleInputFocus(d,1)},onInput:d=>{this.handleInput(d,1)},onChange:d=>{this.handleChange(d,1)}}),this.showPlaceholder2?R("div",{class:`${t}-input__placeholder`},R("span",null,this.mergedPlaceholder[1])):null),Ct(l.suffix,d=>(this.clearable||d)&&R("div",{class:`${t}-input__suffix`},[this.clearable&&R(kf,{clsPrefix:t,show:this.showClearButton,onClear:this.handleClear},{icon:()=>{var c;return(c=l["clear-icon"])===null||c===void 0?void 0:c.call(l)},placeholder:()=>{var c;return(c=l["clear-icon-placeholder"])===null||c===void 0?void 0:c.call(l)}}),d]))):null,this.mergedBordered?R("div",{class:`${t}-input__border`}):null,this.mergedBordered?R("div",{class:`${t}-input__state-border`}):null,this.showCount&&o==="textarea"?R(yv,null,{default:d=>{var c;const{renderCount:u}=this;return u?u(d):(c=l.count)===null||c===void 0?void 0:c.call(l,d)}}):null)}});function Rd(n){return n.type==="group"}function OS(n){return n.type==="ignored"}function mu(n,e){try{return!!(1+e.toString().toLowerCase().indexOf(n.trim().toLowerCase()))}catch{return!1}}function MS(n,e){return{getIsGroup:Rd,getIgnored:OS,getKey(r){return Rd(r)?r.name||r.key||"key-required":r[n]},getChildren(r){return r[e]}}}function CF(n,e,t,r){if(!e)return n;function i(o){if(!Array.isArray(o))return[];const s=[];for(const a of o)if(Rd(a)){const l=i(a[r]);l.length&&s.push(Object.assign({},a,{[r]:l}))}else{if(OS(a))continue;e(t,a)&&s.push(a)}return s}return i(n)}function TF(n,e,t){const r=new Map;return n.forEach(i=>{Rd(i)?i[t].forEach(o=>{r.set(o[e],o)}):r.set(i[e],i)}),r}function wF(n){const{boxShadow2:e}=n;return{menuBoxShadow:e}}const EF={name:"AutoComplete",common:Re,peers:{InternalSelectMenu:ol,Input:or},self:wF};function RF(n){const{borderRadius:e,avatarColor:t,cardColor:r,fontSize:i,heightTiny:o,heightSmall:s,heightMedium:a,heightLarge:l,heightHuge:d,modalColor:c,popoverColor:u}=n;return{borderRadius:e,fontSize:i,border:`2px solid ${r}`,heightTiny:o,heightSmall:s,heightMedium:a,heightLarge:l,heightHuge:d,color:ze(r,t),colorModal:ze(c,t),colorPopover:ze(u,t)}}const FS={name:"Avatar",common:Re,self:RF};function AF(){return{gap:"-12px"}}const IF={name:"AvatarGroup",common:Re,peers:{Avatar:FS},self:AF},LF={width:"44px",height:"44px",borderRadius:"22px",iconSize:"26px"},PF={name:"BackTop",common:Re,self(n){const{popoverColor:e,textColor2:t,primaryColorHover:r,primaryColorPressed:i}=n;return Object.assign(Object.assign({},LF),{color:e,textColor:t,iconColor:t,iconColorHover:r,iconColorPressed:i,boxShadow:"0 2px 8px 0px rgba(0, 0, 0, .12)",boxShadowHover:"0 2px 12px 0px rgba(0, 0, 0, .18)",boxShadowPressed:"0 2px 12px 0px rgba(0, 0, 0, .18)"})}},_F={name:"Badge",common:Re,self(n){const{errorColorSuppl:e,infoColorSuppl:t,successColorSuppl:r,warningColorSuppl:i,fontFamily:o}=n;return{color:e,colorInfo:t,colorSuccess:r,colorError:e,colorWarning:i,fontSize:"12px",fontFamily:o}}},kF={fontWeightActive:"400"};function DF(n){const{fontSize:e,textColor3:t,textColor2:r,borderRadius:i,buttonColor2Hover:o,buttonColor2Pressed:s}=n;return Object.assign(Object.assign({},kF),{fontSize:e,itemLineHeight:"1.25",itemTextColor:t,itemTextColorHover:r,itemTextColorPressed:r,itemTextColorActive:r,itemBorderRadius:i,itemColorHover:o,itemColorPressed:s,separatorColor:t})}const OF={name:"Breadcrumb",common:Re,self:DF};function ho(n){return ze(n,[255,255,255,.16])}function El(n){return ze(n,[0,0,0,.12])}const MF="n-button-group",FF={paddingTiny:"0 6px",paddingSmall:"0 10px",paddingMedium:"0 14px",paddingLarge:"0 18px",paddingRoundTiny:"0 10px",paddingRoundSmall:"0 14px",paddingRoundMedium:"0 18px",paddingRoundLarge:"0 22px",iconMarginTiny:"6px",iconMarginSmall:"6px",iconMarginMedium:"6px",iconMarginLarge:"6px",iconSizeTiny:"14px",iconSizeSmall:"18px",iconSizeMedium:"18px",iconSizeLarge:"20px",rippleDuration:".6s"};function $S(n){const{heightTiny:e,heightSmall:t,heightMedium:r,heightLarge:i,borderRadius:o,fontSizeTiny:s,fontSizeSmall:a,fontSizeMedium:l,fontSizeLarge:d,opacityDisabled:c,textColor2:u,textColor3:f,primaryColorHover:p,primaryColorPressed:h,borderColor:g,primaryColor:m,baseColor:v,infoColor:b,infoColorHover:y,infoColorPressed:x,successColor:E,successColorHover:A,successColorPressed:S,warningColor:w,warningColorHover:T,warningColorPressed:C,errorColor:L,errorColorHover:P,errorColorPressed:_,fontWeight:D,buttonColor2:k,buttonColor2Hover:M,buttonColor2Pressed:O,fontWeightStrong:$}=n;return Object.assign(Object.assign({},FF),{heightTiny:e,heightSmall:t,heightMedium:r,heightLarge:i,borderRadiusTiny:o,borderRadiusSmall:o,borderRadiusMedium:o,borderRadiusLarge:o,fontSizeTiny:s,fontSizeSmall:a,fontSizeMedium:l,fontSizeLarge:d,opacityDisabled:c,colorOpacitySecondary:"0.16",colorOpacitySecondaryHover:"0.22",colorOpacitySecondaryPressed:"0.28",colorSecondary:k,colorSecondaryHover:M,colorSecondaryPressed:O,colorTertiary:k,colorTertiaryHover:M,colorTertiaryPressed:O,colorQuaternary:"#0000",colorQuaternaryHover:M,colorQuaternaryPressed:O,color:"#0000",colorHover:"#0000",colorPressed:"#0000",colorFocus:"#0000",colorDisabled:"#0000",textColor:u,textColorTertiary:f,textColorHover:p,textColorPressed:h,textColorFocus:p,textColorDisabled:u,textColorText:u,textColorTextHover:p,textColorTextPressed:h,textColorTextFocus:p,textColorTextDisabled:u,textColorGhost:u,textColorGhostHover:p,textColorGhostPressed:h,textColorGhostFocus:p,textColorGhostDisabled:u,border:`1px solid ${g}`,borderHover:`1px solid ${p}`,borderPressed:`1px solid ${h}`,borderFocus:`1px solid ${p}`,borderDisabled:`1px solid ${g}`,rippleColor:m,colorPrimary:m,colorHoverPrimary:p,colorPressedPrimary:h,colorFocusPrimary:p,colorDisabledPrimary:m,textColorPrimary:v,textColorHoverPrimary:v,textColorPressedPrimary:v,textColorFocusPrimary:v,textColorDisabledPrimary:v,textColorTextPrimary:m,textColorTextHoverPrimary:p,textColorTextPressedPrimary:h,textColorTextFocusPrimary:p,textColorTextDisabledPrimary:u,textColorGhostPrimary:m,textColorGhostHoverPrimary:p,textColorGhostPressedPrimary:h,textColorGhostFocusPrimary:p,textColorGhostDisabledPrimary:m,borderPrimary:`1px solid ${m}`,borderHoverPrimary:`1px solid ${p}`,borderPressedPrimary:`1px solid ${h}`,borderFocusPrimary:`1px solid ${p}`,borderDisabledPrimary:`1px solid ${m}`,rippleColorPrimary:m,colorInfo:b,colorHoverInfo:y,colorPressedInfo:x,colorFocusInfo:y,colorDisabledInfo:b,textColorInfo:v,textColorHoverInfo:v,textColorPressedInfo:v,textColorFocusInfo:v,textColorDisabledInfo:v,textColorTextInfo:b,textColorTextHoverInfo:y,textColorTextPressedInfo:x,textColorTextFocusInfo:y,textColorTextDisabledInfo:u,textColorGhostInfo:b,textColorGhostHoverInfo:y,textColorGhostPressedInfo:x,textColorGhostFocusInfo:y,textColorGhostDisabledInfo:b,borderInfo:`1px solid ${b}`,borderHoverInfo:`1px solid ${y}`,borderPressedInfo:`1px solid ${x}`,borderFocusInfo:`1px solid ${y}`,borderDisabledInfo:`1px solid ${b}`,rippleColorInfo:b,colorSuccess:E,colorHoverSuccess:A,colorPressedSuccess:S,colorFocusSuccess:A,colorDisabledSuccess:E,textColorSuccess:v,textColorHoverSuccess:v,textColorPressedSuccess:v,textColorFocusSuccess:v,textColorDisabledSuccess:v,textColorTextSuccess:E,textColorTextHoverSuccess:A,textColorTextPressedSuccess:S,textColorTextFocusSuccess:A,textColorTextDisabledSuccess:u,textColorGhostSuccess:E,textColorGhostHoverSuccess:A,textColorGhostPressedSuccess:S,textColorGhostFocusSuccess:A,textColorGhostDisabledSuccess:E,borderSuccess:`1px solid ${E}`,borderHoverSuccess:`1px solid ${A}`,borderPressedSuccess:`1px solid ${S}`,borderFocusSuccess:`1px solid ${A}`,borderDisabledSuccess:`1px solid ${E}`,rippleColorSuccess:E,colorWarning:w,colorHoverWarning:T,colorPressedWarning:C,colorFocusWarning:T,colorDisabledWarning:w,textColorWarning:v,textColorHoverWarning:v,textColorPressedWarning:v,textColorFocusWarning:v,textColorDisabledWarning:v,textColorTextWarning:w,textColorTextHoverWarning:T,textColorTextPressedWarning:C,textColorTextFocusWarning:T,textColorTextDisabledWarning:u,textColorGhostWarning:w,textColorGhostHoverWarning:T,textColorGhostPressedWarning:C,textColorGhostFocusWarning:T,textColorGhostDisabledWarning:w,borderWarning:`1px solid ${w}`,borderHoverWarning:`1px solid ${T}`,borderPressedWarning:`1px solid ${C}`,borderFocusWarning:`1px solid ${T}`,borderDisabledWarning:`1px solid ${w}`,rippleColorWarning:w,colorError:L,colorHoverError:P,colorPressedError:_,colorFocusError:P,colorDisabledError:L,textColorError:v,textColorHoverError:v,textColorPressedError:v,textColorFocusError:v,textColorDisabledError:v,textColorTextError:L,textColorTextHoverError:P,textColorTextPressedError:_,textColorTextFocusError:P,textColorTextDisabledError:u,textColorGhostError:L,textColorGhostHoverError:P,textColorGhostPressedError:_,textColorGhostFocusError:P,textColorGhostDisabledError:L,borderError:`1px solid ${L}`,borderHoverError:`1px solid ${P}`,borderPressedError:`1px solid ${_}`,borderFocusError:`1px solid ${P}`,borderDisabledError:`1px solid ${L}`,rippleColorError:L,waveOpacity:"0.6",fontWeight:D,fontWeightStrong:$})}const cp={name:"Button",common:Ht,self:$S},Wn={name:"Button",common:Re,self(n){const e=$S(n);return e.waveOpacity="0.8",e.colorOpacitySecondary="0.16",e.colorOpacitySecondaryHover="0.2",e.colorOpacitySecondaryPressed="0.12",e}},$F=Z([j("button",`
 margin: 0;
 font-weight: var(--n-font-weight);
 line-height: 1;
 font-family: inherit;
 padding: var(--n-padding);
 height: var(--n-height);
 font-size: var(--n-font-size);
 border-radius: var(--n-border-radius);
 color: var(--n-text-color);
 background-color: var(--n-color);
 width: var(--n-width);
 white-space: nowrap;
 outline: none;
 position: relative;
 z-index: auto;
 border: none;
 display: inline-flex;
 flex-wrap: nowrap;
 flex-shrink: 0;
 align-items: center;
 justify-content: center;
 user-select: none;
 -webkit-user-select: none;
 text-align: center;
 cursor: pointer;
 text-decoration: none;
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ee("color",[q("border",{borderColor:"var(--n-border-color)"}),ee("disabled",[q("border",{borderColor:"var(--n-border-color-disabled)"})]),Pt("disabled",[Z("&:focus",[q("state-border",{borderColor:"var(--n-border-color-focus)"})]),Z("&:hover",[q("state-border",{borderColor:"var(--n-border-color-hover)"})]),Z("&:active",[q("state-border",{borderColor:"var(--n-border-color-pressed)"})]),ee("pressed",[q("state-border",{borderColor:"var(--n-border-color-pressed)"})])])]),ee("disabled",{backgroundColor:"var(--n-color-disabled)",color:"var(--n-text-color-disabled)"},[q("border",{border:"var(--n-border-disabled)"})]),Pt("disabled",[Z("&:focus",{backgroundColor:"var(--n-color-focus)",color:"var(--n-text-color-focus)"},[q("state-border",{border:"var(--n-border-focus)"})]),Z("&:hover",{backgroundColor:"var(--n-color-hover)",color:"var(--n-text-color-hover)"},[q("state-border",{border:"var(--n-border-hover)"})]),Z("&:active",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[q("state-border",{border:"var(--n-border-pressed)"})]),ee("pressed",{backgroundColor:"var(--n-color-pressed)",color:"var(--n-text-color-pressed)"},[q("state-border",{border:"var(--n-border-pressed)"})])]),ee("loading","cursor: wait;"),j("base-wave",`
 pointer-events: none;
 top: 0;
 right: 0;
 bottom: 0;
 left: 0;
 animation-iteration-count: 1;
 animation-duration: var(--n-ripple-duration);
 animation-timing-function: var(--n-bezier-ease-out), var(--n-bezier-ease-out);
 `,[ee("active",{zIndex:1,animationName:"button-wave-spread, button-wave-opacity"})]),nl&&"MozBoxSizing"in document.createElement("div").style?Z("&::moz-focus-inner",{border:0}):null,q("border, state-border",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 border-radius: inherit;
 transition: border-color .3s var(--n-bezier);
 pointer-events: none;
 `),q("border",{border:"var(--n-border)"}),q("state-border",{border:"var(--n-border)",borderColor:"#0000",zIndex:1}),q("icon",`
 margin: var(--n-icon-margin);
 margin-left: 0;
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 max-width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 position: relative;
 flex-shrink: 0;
 `,[j("icon-slot",`
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 display: flex;
 align-items: center;
 justify-content: center;
 `,[Yn({top:"50%",originalTransform:"translateY(-50%)"})]),iF()]),q("content",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 min-width: 0;
 `,[Z("~",[q("icon",{margin:"var(--n-icon-margin)",marginRight:0})])]),ee("block",`
 display: flex;
 width: 100%;
 `),ee("dashed",[q("border, state-border",{borderStyle:"dashed !important"})]),ee("disabled",{cursor:"not-allowed",opacity:"var(--n-opacity-disabled)"})]),Z("@keyframes button-wave-spread",{from:{boxShadow:"0 0 0.5px 0 var(--n-ripple-color)"},to:{boxShadow:"0 0 0.5px 4.5px var(--n-ripple-color)"}}),Z("@keyframes button-wave-opacity",{from:{opacity:"var(--n-wave-opacity)"},to:{opacity:0}})]),BF=Object.assign(Object.assign({},Ke.props),{color:String,textColor:String,text:Boolean,block:Boolean,loading:Boolean,disabled:Boolean,circle:Boolean,size:String,ghost:Boolean,round:Boolean,secondary:Boolean,tertiary:Boolean,quaternary:Boolean,strong:Boolean,focusable:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},tag:{type:String,default:"button"},type:{type:String,default:"default"},dashed:Boolean,renderIcon:Function,iconPlacement:{type:String,default:"left"},attrType:{type:String,default:"button"},bordered:{type:Boolean,default:!0},onClick:[Function,Array],nativeFocusBehavior:{type:Boolean,default:!PS}}),zn=Ce({name:"Button",props:BF,slots:Object,setup(n){const e=G(null),t=G(null),r=G(!1),i=At(()=>!n.quaternary&&!n.tertiary&&!n.secondary&&!n.text&&(!n.color||n.ghost||n.dashed)&&n.bordered),o=Be(MF,{}),{mergedSizeRef:s}=oo({},{defaultSize:"medium",mergedSize:x=>{const{size:E}=n;if(E)return E;const{size:A}=o;if(A)return A;const{mergedSize:S}=x||{};return S?S.value:"medium"}}),a=U(()=>n.focusable&&!n.disabled),l=x=>{var E;a.value||x.preventDefault(),!n.nativeFocusBehavior&&(x.preventDefault(),!n.disabled&&a.value&&((E=e.value)===null||E===void 0||E.focus({preventScroll:!0})))},d=x=>{var E;if(!n.disabled&&!n.loading){const{onClick:A}=n;A&&we(A,x),n.text||(E=t.value)===null||E===void 0||E.play()}},c=x=>{switch(x.key){case"Enter":if(!n.keyboard)return;r.value=!1}},u=x=>{switch(x.key){case"Enter":if(!n.keyboard||n.loading){x.preventDefault();return}r.value=!0}},f=()=>{r.value=!1},{inlineThemeDisabled:p,mergedClsPrefixRef:h,mergedRtlRef:g}=yt(n),m=Ke("Button","-button",$F,cp,n,h),v=Dn("Button",g,h),b=U(()=>{const x=m.value,{common:{cubicBezierEaseInOut:E,cubicBezierEaseOut:A},self:S}=x,{rippleDuration:w,opacityDisabled:T,fontWeight:C,fontWeightStrong:L}=S,P=s.value,{dashed:_,type:D,ghost:k,text:M,color:O,round:$,circle:K,textColor:Y,secondary:H,tertiary:B,quaternary:X,strong:se}=n,pe={"--n-font-weight":se?L:C};let te={"--n-color":"initial","--n-color-hover":"initial","--n-color-pressed":"initial","--n-color-focus":"initial","--n-color-disabled":"initial","--n-ripple-color":"initial","--n-text-color":"initial","--n-text-color-hover":"initial","--n-text-color-pressed":"initial","--n-text-color-focus":"initial","--n-text-color-disabled":"initial"};const W=D==="tertiary",de=D==="default",V=W?"default":D;if(M){const ce=Y||O;te={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":"#0000","--n-text-color":ce||S[xe("textColorText",V)],"--n-text-color-hover":ce?ho(ce):S[xe("textColorTextHover",V)],"--n-text-color-pressed":ce?El(ce):S[xe("textColorTextPressed",V)],"--n-text-color-focus":ce?ho(ce):S[xe("textColorTextHover",V)],"--n-text-color-disabled":ce||S[xe("textColorTextDisabled",V)]}}else if(k||_){const ce=Y||O;te={"--n-color":"#0000","--n-color-hover":"#0000","--n-color-pressed":"#0000","--n-color-focus":"#0000","--n-color-disabled":"#0000","--n-ripple-color":O||S[xe("rippleColor",V)],"--n-text-color":ce||S[xe("textColorGhost",V)],"--n-text-color-hover":ce?ho(ce):S[xe("textColorGhostHover",V)],"--n-text-color-pressed":ce?El(ce):S[xe("textColorGhostPressed",V)],"--n-text-color-focus":ce?ho(ce):S[xe("textColorGhostHover",V)],"--n-text-color-disabled":ce||S[xe("textColorGhostDisabled",V)]}}else if(H){const ce=de?S.textColor:W?S.textColorTertiary:S[xe("color",V)],ve=O||ce,he=D!=="default"&&D!=="tertiary";te={"--n-color":he?Te(ve,{alpha:Number(S.colorOpacitySecondary)}):S.colorSecondary,"--n-color-hover":he?Te(ve,{alpha:Number(S.colorOpacitySecondaryHover)}):S.colorSecondaryHover,"--n-color-pressed":he?Te(ve,{alpha:Number(S.colorOpacitySecondaryPressed)}):S.colorSecondaryPressed,"--n-color-focus":he?Te(ve,{alpha:Number(S.colorOpacitySecondaryHover)}):S.colorSecondaryHover,"--n-color-disabled":S.colorSecondary,"--n-ripple-color":"#0000","--n-text-color":ve,"--n-text-color-hover":ve,"--n-text-color-pressed":ve,"--n-text-color-focus":ve,"--n-text-color-disabled":ve}}else if(B||X){const ce=de?S.textColor:W?S.textColorTertiary:S[xe("color",V)],ve=O||ce;B?(te["--n-color"]=S.colorTertiary,te["--n-color-hover"]=S.colorTertiaryHover,te["--n-color-pressed"]=S.colorTertiaryPressed,te["--n-color-focus"]=S.colorSecondaryHover,te["--n-color-disabled"]=S.colorTertiary):(te["--n-color"]=S.colorQuaternary,te["--n-color-hover"]=S.colorQuaternaryHover,te["--n-color-pressed"]=S.colorQuaternaryPressed,te["--n-color-focus"]=S.colorQuaternaryHover,te["--n-color-disabled"]=S.colorQuaternary),te["--n-ripple-color"]="#0000",te["--n-text-color"]=ve,te["--n-text-color-hover"]=ve,te["--n-text-color-pressed"]=ve,te["--n-text-color-focus"]=ve,te["--n-text-color-disabled"]=ve}else te={"--n-color":O||S[xe("color",V)],"--n-color-hover":O?ho(O):S[xe("colorHover",V)],"--n-color-pressed":O?El(O):S[xe("colorPressed",V)],"--n-color-focus":O?ho(O):S[xe("colorFocus",V)],"--n-color-disabled":O||S[xe("colorDisabled",V)],"--n-ripple-color":O||S[xe("rippleColor",V)],"--n-text-color":Y||(O?S.textColorPrimary:W?S.textColorTertiary:S[xe("textColor",V)]),"--n-text-color-hover":Y||(O?S.textColorHoverPrimary:S[xe("textColorHover",V)]),"--n-text-color-pressed":Y||(O?S.textColorPressedPrimary:S[xe("textColorPressed",V)]),"--n-text-color-focus":Y||(O?S.textColorFocusPrimary:S[xe("textColorFocus",V)]),"--n-text-color-disabled":Y||(O?S.textColorDisabledPrimary:S[xe("textColorDisabled",V)])};let ue={"--n-border":"initial","--n-border-hover":"initial","--n-border-pressed":"initial","--n-border-focus":"initial","--n-border-disabled":"initial"};M?ue={"--n-border":"none","--n-border-hover":"none","--n-border-pressed":"none","--n-border-focus":"none","--n-border-disabled":"none"}:ue={"--n-border":S[xe("border",V)],"--n-border-hover":S[xe("borderHover",V)],"--n-border-pressed":S[xe("borderPressed",V)],"--n-border-focus":S[xe("borderFocus",V)],"--n-border-disabled":S[xe("borderDisabled",V)]};const{[xe("height",P)]:Pe,[xe("fontSize",P)]:Ae,[xe("padding",P)]:F,[xe("paddingRound",P)]:z,[xe("iconSize",P)]:ne,[xe("borderRadius",P)]:ae,[xe("iconMargin",P)]:le,waveOpacity:me}=S,fe={"--n-width":K&&!M?Pe:"initial","--n-height":M?"initial":Pe,"--n-font-size":Ae,"--n-padding":K||M?"initial":$?z:F,"--n-icon-size":ne,"--n-icon-margin":le,"--n-border-radius":M?"initial":K||$?Pe:ae};return Object.assign(Object.assign(Object.assign(Object.assign({"--n-bezier":E,"--n-bezier-ease-out":A,"--n-ripple-duration":w,"--n-opacity-disabled":T,"--n-wave-opacity":me},pe),te),ue),fe)}),y=p?Gt("button",U(()=>{let x="";const{dashed:E,type:A,ghost:S,text:w,color:T,round:C,circle:L,textColor:P,secondary:_,tertiary:D,quaternary:k,strong:M}=n;E&&(x+="a"),S&&(x+="b"),w&&(x+="c"),C&&(x+="d"),L&&(x+="e"),_&&(x+="f"),D&&(x+="g"),k&&(x+="h"),M&&(x+="i"),T&&(x+=`j${vd(T)}`),P&&(x+=`k${vd(P)}`);const{value:O}=s;return x+=`l${O[0]}`,x+=`m${A[0]}`,x}),b,n):void 0;return{selfElRef:e,waveElRef:t,mergedClsPrefix:h,mergedFocusable:a,mergedSize:s,showBorder:i,enterPressed:r,rtlEnabled:v,handleMousedown:l,handleKeydown:u,handleBlur:f,handleKeyup:c,handleClick:d,customColorCssVars:U(()=>{const{color:x}=n;if(!x)return null;const E=ho(x);return{"--n-border-color":x,"--n-border-color-hover":E,"--n-border-color-pressed":El(x),"--n-border-color-focus":E,"--n-border-color-disabled":x}}),cssVars:p?void 0:b,themeClass:y==null?void 0:y.themeClass,onRender:y==null?void 0:y.onRender}},render(){const{mergedClsPrefix:n,tag:e,onRender:t}=this;t==null||t();const r=Ct(this.$slots.default,i=>i&&R("span",{class:`${n}-button__content`},i));return R(e,{ref:"selfElRef",class:[this.themeClass,`${n}-button`,`${n}-button--${this.type}-type`,`${n}-button--${this.mergedSize}-type`,this.rtlEnabled&&`${n}-button--rtl`,this.disabled&&`${n}-button--disabled`,this.block&&`${n}-button--block`,this.enterPressed&&`${n}-button--pressed`,!this.text&&this.dashed&&`${n}-button--dashed`,this.color&&`${n}-button--color`,this.secondary&&`${n}-button--secondary`,this.loading&&`${n}-button--loading`,this.ghost&&`${n}-button--ghost`],tabindex:this.mergedFocusable?0:-1,type:this.attrType,style:this.cssVars,disabled:this.disabled,onClick:this.handleClick,onBlur:this.handleBlur,onMousedown:this.handleMousedown,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},this.iconPlacement==="right"&&r,R(fS,{width:!0},{default:()=>Ct(this.$slots.icon,i=>(this.loading||this.renderIcon||i)&&R("span",{class:`${n}-button__icon`,style:{margin:ps(this.$slots.default)?"0":""}},R(Go,null,{default:()=>this.loading?R(ao,{clsPrefix:n,key:"loading",class:`${n}-icon-slot`,strokeWidth:20}):R("div",{key:"icon",class:`${n}-icon-slot`,role:"none"},this.renderIcon?this.renderIcon():i)})))}),this.iconPlacement==="left"&&r,this.text?null:R(sF,{ref:"waveElRef",clsPrefix:n}),this.showBorder?R("div",{"aria-hidden":!0,class:`${n}-button__border`,style:this.customColorCssVars}):null,this.showBorder?R("div",{"aria-hidden":!0,class:`${n}-button__state-border`,style:this.customColorCssVars}):null)}}),NF={titleFontSize:"22px"};function zF(n){const{borderRadius:e,fontSize:t,lineHeight:r,textColor2:i,textColor1:o,textColorDisabled:s,dividerColor:a,fontWeightStrong:l,primaryColor:d,baseColor:c,hoverColor:u,cardColor:f,modalColor:p,popoverColor:h}=n;return Object.assign(Object.assign({},NF),{borderRadius:e,borderColor:ze(f,a),borderColorModal:ze(p,a),borderColorPopover:ze(h,a),textColor:i,titleFontWeight:l,titleTextColor:o,dayTextColor:s,fontSize:t,lineHeight:r,dateColorCurrent:d,dateTextColorCurrent:c,cellColorHover:ze(f,u),cellColorHoverModal:ze(p,u),cellColorHoverPopover:ze(h,u),cellColor:f,cellColorModal:p,cellColorPopover:h,barColor:d})}const UF={name:"Calendar",common:Re,peers:{Button:Wn},self:zF},HF={paddingSmall:"12px 16px 12px",paddingMedium:"19px 24px 20px",paddingLarge:"23px 32px 24px",paddingHuge:"27px 40px 28px",titleFontSizeSmall:"16px",titleFontSizeMedium:"18px",titleFontSizeLarge:"18px",titleFontSizeHuge:"18px",closeIconSize:"18px",closeSize:"22px"};function BS(n){const{primaryColor:e,borderRadius:t,lineHeight:r,fontSize:i,cardColor:o,textColor2:s,textColor1:a,dividerColor:l,fontWeightStrong:d,closeIconColor:c,closeIconColorHover:u,closeIconColorPressed:f,closeColorHover:p,closeColorPressed:h,modalColor:g,boxShadow1:m,popoverColor:v,actionColor:b}=n;return Object.assign(Object.assign({},HF),{lineHeight:r,color:o,colorModal:g,colorPopover:v,colorTarget:e,colorEmbedded:b,colorEmbeddedModal:b,colorEmbeddedPopover:b,textColor:s,titleTextColor:a,borderColor:l,actionColor:b,titleFontWeight:d,closeColorHover:p,closeColorPressed:h,closeBorderRadius:t,closeIconColor:c,closeIconColorHover:u,closeIconColorPressed:f,fontSizeSmall:i,fontSizeMedium:i,fontSizeLarge:i,fontSizeHuge:i,boxShadow:m,borderRadius:t})}const NS={name:"Card",common:Ht,self:BS},zS={name:"Card",common:Re,self(n){const e=BS(n),{cardColor:t,modalColor:r,popoverColor:i}=n;return e.colorEmbedded=t,e.colorEmbeddedModal=r,e.colorEmbeddedPopover=i,e}},VF=Z([j("card",`
 font-size: var(--n-font-size);
 line-height: var(--n-line-height);
 display: flex;
 flex-direction: column;
 width: 100%;
 box-sizing: border-box;
 position: relative;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 color: var(--n-text-color);
 word-break: break-word;
 transition: 
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ex({background:"var(--n-color-modal)"}),ee("hoverable",[Z("&:hover","box-shadow: var(--n-box-shadow);")]),ee("content-segmented",[Z(">",[q("content",{paddingTop:"var(--n-padding-bottom)"})])]),ee("content-soft-segmented",[Z(">",[q("content",`
 margin: 0 var(--n-padding-left);
 padding: var(--n-padding-bottom) 0;
 `)])]),ee("footer-segmented",[Z(">",[q("footer",{paddingTop:"var(--n-padding-bottom)"})])]),ee("footer-soft-segmented",[Z(">",[q("footer",`
 padding: var(--n-padding-bottom) 0;
 margin: 0 var(--n-padding-left);
 `)])]),Z(">",[j("card-header",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 font-size: var(--n-title-font-size);
 padding:
 var(--n-padding-top)
 var(--n-padding-left)
 var(--n-padding-bottom)
 var(--n-padding-left);
 `,[q("main",`
 font-weight: var(--n-title-font-weight);
 transition: color .3s var(--n-bezier);
 flex: 1;
 min-width: 0;
 color: var(--n-title-text-color);
 `),q("extra",`
 display: flex;
 align-items: center;
 font-size: var(--n-font-size);
 font-weight: 400;
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 `),q("close",`
 margin: 0 0 0 8px;
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),q("action",`
 box-sizing: border-box;
 transition:
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 background-clip: padding-box;
 background-color: var(--n-action-color);
 `),q("content","flex: 1; min-width: 0;"),q("content, footer",`
 box-sizing: border-box;
 padding: 0 var(--n-padding-left) var(--n-padding-bottom) var(--n-padding-left);
 font-size: var(--n-font-size);
 `,[Z("&:first-child",{paddingTop:"var(--n-padding-bottom)"})]),q("action",`
 background-color: var(--n-action-color);
 padding: var(--n-padding-bottom) var(--n-padding-left);
 border-bottom-left-radius: var(--n-border-radius);
 border-bottom-right-radius: var(--n-border-radius);
 `)]),j("card-cover",`
 overflow: hidden;
 width: 100%;
 border-radius: var(--n-border-radius) var(--n-border-radius) 0 0;
 `,[Z("img",`
 display: block;
 width: 100%;
 `)]),ee("bordered",`
 border: 1px solid var(--n-border-color);
 `,[Z("&:target","border-color: var(--n-color-target);")]),ee("action-segmented",[Z(">",[q("action",[Z("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),ee("content-segmented, content-soft-segmented",[Z(">",[q("content",{transition:"border-color 0.3s var(--n-bezier)"},[Z("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),ee("footer-segmented, footer-soft-segmented",[Z(">",[q("footer",{transition:"border-color 0.3s var(--n-bezier)"},[Z("&:not(:first-child)",{borderTop:"1px solid var(--n-border-color)"})])])]),ee("embedded",`
 background-color: var(--n-color-embedded);
 `)]),oc(j("card",`
 background: var(--n-color-modal);
 `,[ee("embedded",`
 background-color: var(--n-color-embedded-modal);
 `)])),Oh(j("card",`
 background: var(--n-color-popover);
 `,[ee("embedded",`
 background-color: var(--n-color-embedded-popover);
 `)]))]),up={title:[String,Function],contentClass:String,contentStyle:[Object,String],headerClass:String,headerStyle:[Object,String],headerExtraClass:String,headerExtraStyle:[Object,String],footerClass:String,footerStyle:[Object,String],embedded:Boolean,segmented:{type:[Boolean,Object],default:!1},size:{type:String,default:"medium"},bordered:{type:Boolean,default:!0},closable:Boolean,hoverable:Boolean,role:String,onClose:[Function,Array],tag:{type:String,default:"div"},cover:Function,content:[String,Function],footer:Function,action:Function,headerExtra:Function},GF=Es(up),WF=Object.assign(Object.assign({},Ke.props),up),jF=Ce({name:"Card",props:WF,slots:Object,setup(n){const e=()=>{const{onClose:d}=n;d&&we(d)},{inlineThemeDisabled:t,mergedClsPrefixRef:r,mergedRtlRef:i}=yt(n),o=Ke("Card","-card",VF,NS,n,r),s=Dn("Card",i,r),a=U(()=>{const{size:d}=n,{self:{color:c,colorModal:u,colorTarget:f,textColor:p,titleTextColor:h,titleFontWeight:g,borderColor:m,actionColor:v,borderRadius:b,lineHeight:y,closeIconColor:x,closeIconColorHover:E,closeIconColorPressed:A,closeColorHover:S,closeColorPressed:w,closeBorderRadius:T,closeIconSize:C,closeSize:L,boxShadow:P,colorPopover:_,colorEmbedded:D,colorEmbeddedModal:k,colorEmbeddedPopover:M,[xe("padding",d)]:O,[xe("fontSize",d)]:$,[xe("titleFontSize",d)]:K},common:{cubicBezierEaseInOut:Y}}=o.value,{top:H,left:B,bottom:X}=Hn(O);return{"--n-bezier":Y,"--n-border-radius":b,"--n-color":c,"--n-color-modal":u,"--n-color-popover":_,"--n-color-embedded":D,"--n-color-embedded-modal":k,"--n-color-embedded-popover":M,"--n-color-target":f,"--n-text-color":p,"--n-line-height":y,"--n-action-color":v,"--n-title-text-color":h,"--n-title-font-weight":g,"--n-close-icon-color":x,"--n-close-icon-color-hover":E,"--n-close-icon-color-pressed":A,"--n-close-color-hover":S,"--n-close-color-pressed":w,"--n-border-color":m,"--n-box-shadow":P,"--n-padding-top":H,"--n-padding-bottom":X,"--n-padding-left":B,"--n-font-size":$,"--n-title-font-size":K,"--n-close-size":L,"--n-close-icon-size":C,"--n-close-border-radius":T}}),l=t?Gt("card",U(()=>n.size[0]),a,n):void 0;return{rtlEnabled:s,mergedClsPrefix:r,mergedTheme:o,handleCloseClick:e,cssVars:t?void 0:a,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender}},render(){const{segmented:n,bordered:e,hoverable:t,mergedClsPrefix:r,rtlEnabled:i,onRender:o,embedded:s,tag:a,$slots:l}=this;return o==null||o(),R(a,{class:[`${r}-card`,this.themeClass,s&&`${r}-card--embedded`,{[`${r}-card--rtl`]:i,[`${r}-card--content${typeof n!="boolean"&&n.content==="soft"?"-soft":""}-segmented`]:n===!0||n!==!1&&n.content,[`${r}-card--footer${typeof n!="boolean"&&n.footer==="soft"?"-soft":""}-segmented`]:n===!0||n!==!1&&n.footer,[`${r}-card--action-segmented`]:n===!0||n!==!1&&n.action,[`${r}-card--bordered`]:e,[`${r}-card--hoverable`]:t}],style:this.cssVars,role:this.role},Ct(l.cover,d=>{const c=this.cover?Sr([this.cover()]):d;return c&&R("div",{class:`${r}-card-cover`,role:"none"},c)}),Ct(l.header,d=>{const{title:c}=this,u=c?Sr(typeof c=="function"?[c()]:[c]):d;return u||this.closable?R("div",{class:[`${r}-card-header`,this.headerClass],style:this.headerStyle,role:"heading"},R("div",{class:`${r}-card-header__main`,role:"heading"},u),Ct(l["header-extra"],f=>{const p=this.headerExtra?Sr([this.headerExtra()]):f;return p&&R("div",{class:[`${r}-card-header__extra`,this.headerExtraClass],style:this.headerExtraStyle},p)}),this.closable&&R(fc,{clsPrefix:r,class:`${r}-card-header__close`,onClick:this.handleCloseClick,absolute:!0})):null}),Ct(l.default,d=>{const{content:c}=this,u=c?Sr(typeof c=="function"?[c()]:[c]):d;return u&&R("div",{class:[`${r}-card__content`,this.contentClass],style:this.contentStyle,role:"none"},u)}),Ct(l.footer,d=>{const c=this.footer?Sr([this.footer()]):d;return c&&R("div",{class:[`${r}-card__footer`,this.footerClass],style:this.footerStyle,role:"none"},c)}),Ct(l.action,d=>{const c=this.action?Sr([this.action()]):d;return c&&R("div",{class:`${r}-card__action`,role:"none"},c)}))}});function KF(){return{dotSize:"8px",dotColor:"rgba(255, 255, 255, .3)",dotColorActive:"rgba(255, 255, 255, 1)",dotColorFocus:"rgba(255, 255, 255, .5)",dotLineWidth:"16px",dotLineWidthActive:"24px",arrowColor:"#eee"}}const qF={name:"Carousel",common:Re,self:KF},YF={sizeSmall:"14px",sizeMedium:"16px",sizeLarge:"18px",labelPadding:"0 8px",labelFontWeight:"400"};function US(n){const{baseColor:e,inputColorDisabled:t,cardColor:r,modalColor:i,popoverColor:o,textColorDisabled:s,borderColor:a,primaryColor:l,textColor2:d,fontSizeSmall:c,fontSizeMedium:u,fontSizeLarge:f,borderRadiusSmall:p,lineHeight:h}=n;return Object.assign(Object.assign({},YF),{labelLineHeight:h,fontSizeSmall:c,fontSizeMedium:u,fontSizeLarge:f,borderRadius:p,color:e,colorChecked:l,colorDisabled:t,colorDisabledChecked:t,colorTableHeader:r,colorTableHeaderModal:i,colorTableHeaderPopover:o,checkMarkColor:e,checkMarkColorDisabled:s,checkMarkColorDisabledChecked:s,border:`1px solid ${a}`,borderDisabled:`1px solid ${a}`,borderDisabledChecked:`1px solid ${a}`,borderChecked:`1px solid ${l}`,borderFocus:`1px solid ${l}`,boxShadowFocus:`0 0 0 2px ${Te(l,{alpha:.3})}`,textColor:d,textColorDisabled:s})}const HS={name:"Checkbox",common:Ht,self:US},$s={name:"Checkbox",common:Re,self(n){const{cardColor:e}=n,t=US(n);return t.color="#0000",t.checkMarkColor=e,t}};function XF(n){const{borderRadius:e,boxShadow2:t,popoverColor:r,textColor2:i,textColor3:o,primaryColor:s,textColorDisabled:a,dividerColor:l,hoverColor:d,fontSizeMedium:c,heightMedium:u}=n;return{menuBorderRadius:e,menuColor:r,menuBoxShadow:t,menuDividerColor:l,menuHeight:"calc(var(--n-option-height) * 6.6)",optionArrowColor:o,optionHeight:u,optionFontSize:c,optionColorHover:d,optionTextColor:i,optionTextColorActive:s,optionTextColorDisabled:a,optionCheckMarkColor:s,loadingColor:s,columnWidth:"180px"}}const QF={name:"Cascader",common:Re,peers:{InternalSelectMenu:ol,InternalSelection:dp,Scrollbar:Gn,Checkbox:$s,Empty:gc},self:XF},VS="n-checkbox-group",ZF={min:Number,max:Number,size:String,value:Array,defaultValue:{type:Array,default:null},disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onChange:[Function,Array]},JF=Ce({name:"CheckboxGroup",props:ZF,setup(n){const{mergedClsPrefixRef:e}=yt(n),t=oo(n),{mergedSizeRef:r,mergedDisabledRef:i}=t,o=G(n.defaultValue),s=U(()=>n.value),a=kn(s,o),l=U(()=>{var u;return((u=a.value)===null||u===void 0?void 0:u.length)||0}),d=U(()=>Array.isArray(a.value)?new Set(a.value):new Set);function c(u,f){const{nTriggerFormInput:p,nTriggerFormChange:h}=t,{onChange:g,"onUpdate:value":m,onUpdateValue:v}=n;if(Array.isArray(a.value)){const b=Array.from(a.value),y=b.findIndex(x=>x===f);u?~y||(b.push(f),v&&we(v,b,{actionType:"check",value:f}),m&&we(m,b,{actionType:"check",value:f}),p(),h(),o.value=b,g&&we(g,b)):~y&&(b.splice(y,1),v&&we(v,b,{actionType:"uncheck",value:f}),m&&we(m,b,{actionType:"uncheck",value:f}),g&&we(g,b),o.value=b,p(),h())}else u?(v&&we(v,[f],{actionType:"check",value:f}),m&&we(m,[f],{actionType:"check",value:f}),g&&we(g,[f]),o.value=[f],p(),h()):(v&&we(v,[],{actionType:"uncheck",value:f}),m&&we(m,[],{actionType:"uncheck",value:f}),g&&we(g,[]),o.value=[],p(),h())}return st(VS,{checkedCountRef:l,maxRef:Ie(n,"max"),minRef:Ie(n,"min"),valueSetRef:d,disabledRef:i,mergedSizeRef:r,toggleCheckbox:c}),{mergedClsPrefix:e}},render(){return R("div",{class:`${this.mergedClsPrefix}-checkbox-group`,role:"group"},this.$slots)}}),e$=()=>R("svg",{viewBox:"0 0 64 64",class:"check-icon"},R("path",{d:"M50.42,16.76L22.34,39.45l-8.1-11.46c-1.12-1.58-3.3-1.96-4.88-0.84c-1.58,1.12-1.95,3.3-0.84,4.88l10.26,14.51  c0.56,0.79,1.42,1.31,2.38,1.45c0.16,0.02,0.32,0.03,0.48,0.03c0.8,0,1.57-0.27,2.2-0.78l30.99-25.03c1.5-1.21,1.74-3.42,0.52-4.92  C54.13,15.78,51.93,15.55,50.42,16.76z"})),t$=()=>R("svg",{viewBox:"0 0 100 100",class:"line-icon"},R("path",{d:"M80.2,55.5H21.4c-2.8,0-5.1-2.5-5.1-5.5l0,0c0-3,2.3-5.5,5.1-5.5h58.7c2.8,0,5.1,2.5,5.1,5.5l0,0C85.2,53.1,82.9,55.5,80.2,55.5z"})),n$=Z([j("checkbox",`
 font-size: var(--n-font-size);
 outline: none;
 cursor: pointer;
 display: inline-flex;
 flex-wrap: nowrap;
 align-items: flex-start;
 word-break: break-word;
 line-height: var(--n-size);
 --n-merged-color-table: var(--n-color-table);
 `,[ee("show-label","line-height: var(--n-label-line-height);"),Z("&:hover",[j("checkbox-box",[q("border","border: var(--n-border-checked);")])]),Z("&:focus:not(:active)",[j("checkbox-box",[q("border",`
 border: var(--n-border-focus);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),ee("inside-table",[j("checkbox-box",`
 background-color: var(--n-merged-color-table);
 `)]),ee("checked",[j("checkbox-box",`
 background-color: var(--n-color-checked);
 `,[j("checkbox-icon",[Z(".check-icon",`
 opacity: 1;
 transform: scale(1);
 `)])])]),ee("indeterminate",[j("checkbox-box",[j("checkbox-icon",[Z(".check-icon",`
 opacity: 0;
 transform: scale(.5);
 `),Z(".line-icon",`
 opacity: 1;
 transform: scale(1);
 `)])])]),ee("checked, indeterminate",[Z("&:focus:not(:active)",[j("checkbox-box",[q("border",`
 border: var(--n-border-checked);
 box-shadow: var(--n-box-shadow-focus);
 `)])]),j("checkbox-box",`
 background-color: var(--n-color-checked);
 border-left: 0;
 border-top: 0;
 `,[q("border",{border:"var(--n-border-checked)"})])]),ee("disabled",{cursor:"not-allowed"},[ee("checked",[j("checkbox-box",`
 background-color: var(--n-color-disabled-checked);
 `,[q("border",{border:"var(--n-border-disabled-checked)"}),j("checkbox-icon",[Z(".check-icon, .line-icon",{fill:"var(--n-check-mark-color-disabled-checked)"})])])]),j("checkbox-box",`
 background-color: var(--n-color-disabled);
 `,[q("border",`
 border: var(--n-border-disabled);
 `),j("checkbox-icon",[Z(".check-icon, .line-icon",`
 fill: var(--n-check-mark-color-disabled);
 `)])]),q("label",`
 color: var(--n-text-color-disabled);
 `)]),j("checkbox-box-wrapper",`
 position: relative;
 width: var(--n-size);
 flex-shrink: 0;
 flex-grow: 0;
 user-select: none;
 -webkit-user-select: none;
 `),j("checkbox-box",`
 position: absolute;
 left: 0;
 top: 50%;
 transform: translateY(-50%);
 height: var(--n-size);
 width: var(--n-size);
 display: inline-block;
 box-sizing: border-box;
 border-radius: var(--n-border-radius);
 background-color: var(--n-color);
 transition: background-color 0.3s var(--n-bezier);
 `,[q("border",`
 transition:
 border-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 border-radius: inherit;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 border: var(--n-border);
 `),j("checkbox-icon",`
 display: flex;
 align-items: center;
 justify-content: center;
 position: absolute;
 left: 1px;
 right: 1px;
 top: 1px;
 bottom: 1px;
 `,[Z(".check-icon, .line-icon",`
 width: 100%;
 fill: var(--n-check-mark-color);
 opacity: 0;
 transform: scale(0.5);
 transform-origin: center;
 transition:
 fill 0.3s var(--n-bezier),
 transform 0.3s var(--n-bezier),
 opacity 0.3s var(--n-bezier),
 border-color 0.3s var(--n-bezier);
 `),Yn({left:"1px",top:"1px"})])]),q("label",`
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 user-select: none;
 -webkit-user-select: none;
 padding: var(--n-label-padding);
 font-weight: var(--n-label-font-weight);
 `,[Z("&:empty",{display:"none"})])]),oc(j("checkbox",`
 --n-merged-color-table: var(--n-color-table-modal);
 `)),Oh(j("checkbox",`
 --n-merged-color-table: var(--n-color-table-popover);
 `))]),r$=Object.assign(Object.assign({},Ke.props),{size:String,checked:{type:[Boolean,String,Number],default:void 0},defaultChecked:{type:[Boolean,String,Number],default:!1},value:[String,Number],disabled:{type:Boolean,default:void 0},indeterminate:Boolean,label:String,focusable:{type:Boolean,default:!0},checkedValue:{type:[Boolean,String,Number],default:!0},uncheckedValue:{type:[Boolean,String,Number],default:!1},"onUpdate:checked":[Function,Array],onUpdateChecked:[Function,Array],privateInsideTable:Boolean,onChange:[Function,Array]}),fp=Ce({name:"Checkbox",props:r$,setup(n){const e=Be(VS,null),t=G(null),{mergedClsPrefixRef:r,inlineThemeDisabled:i,mergedRtlRef:o}=yt(n),s=G(n.defaultChecked),a=Ie(n,"checked"),l=kn(a,s),d=At(()=>{if(e){const A=e.valueSetRef.value;return A&&n.value!==void 0?A.has(n.value):!1}else return l.value===n.checkedValue}),c=oo(n,{mergedSize(A){const{size:S}=n;if(S!==void 0)return S;if(e){const{value:w}=e.mergedSizeRef;if(w!==void 0)return w}if(A){const{mergedSize:w}=A;if(w!==void 0)return w.value}return"medium"},mergedDisabled(A){const{disabled:S}=n;if(S!==void 0)return S;if(e){if(e.disabledRef.value)return!0;const{maxRef:{value:w},checkedCountRef:T}=e;if(w!==void 0&&T.value>=w&&!d.value)return!0;const{minRef:{value:C}}=e;if(C!==void 0&&T.value<=C&&d.value)return!0}return A?A.disabled.value:!1}}),{mergedDisabledRef:u,mergedSizeRef:f}=c,p=Ke("Checkbox","-checkbox",n$,HS,n,r);function h(A){if(e&&n.value!==void 0)e.toggleCheckbox(!d.value,n.value);else{const{onChange:S,"onUpdate:checked":w,onUpdateChecked:T}=n,{nTriggerFormInput:C,nTriggerFormChange:L}=c,P=d.value?n.uncheckedValue:n.checkedValue;w&&we(w,P,A),T&&we(T,P,A),S&&we(S,P,A),C(),L(),s.value=P}}function g(A){u.value||h(A)}function m(A){if(!u.value)switch(A.key){case" ":case"Enter":h(A)}}function v(A){switch(A.key){case" ":A.preventDefault()}}const b={focus:()=>{var A;(A=t.value)===null||A===void 0||A.focus()},blur:()=>{var A;(A=t.value)===null||A===void 0||A.blur()}},y=Dn("Checkbox",o,r),x=U(()=>{const{value:A}=f,{common:{cubicBezierEaseInOut:S},self:{borderRadius:w,color:T,colorChecked:C,colorDisabled:L,colorTableHeader:P,colorTableHeaderModal:_,colorTableHeaderPopover:D,checkMarkColor:k,checkMarkColorDisabled:M,border:O,borderFocus:$,borderDisabled:K,borderChecked:Y,boxShadowFocus:H,textColor:B,textColorDisabled:X,checkMarkColorDisabledChecked:se,colorDisabledChecked:pe,borderDisabledChecked:te,labelPadding:W,labelLineHeight:de,labelFontWeight:V,[xe("fontSize",A)]:ue,[xe("size",A)]:Pe}}=p.value;return{"--n-label-line-height":de,"--n-label-font-weight":V,"--n-size":Pe,"--n-bezier":S,"--n-border-radius":w,"--n-border":O,"--n-border-checked":Y,"--n-border-focus":$,"--n-border-disabled":K,"--n-border-disabled-checked":te,"--n-box-shadow-focus":H,"--n-color":T,"--n-color-checked":C,"--n-color-table":P,"--n-color-table-modal":_,"--n-color-table-popover":D,"--n-color-disabled":L,"--n-color-disabled-checked":pe,"--n-text-color":B,"--n-text-color-disabled":X,"--n-check-mark-color":k,"--n-check-mark-color-disabled":M,"--n-check-mark-color-disabled-checked":se,"--n-font-size":ue,"--n-label-padding":W}}),E=i?Gt("checkbox",U(()=>f.value[0]),x,n):void 0;return Object.assign(c,b,{rtlEnabled:y,selfRef:t,mergedClsPrefix:r,mergedDisabled:u,renderedChecked:d,mergedTheme:p,labelId:ko(),handleClick:g,handleKeyUp:m,handleKeyDown:v,cssVars:i?void 0:x,themeClass:E==null?void 0:E.themeClass,onRender:E==null?void 0:E.onRender})},render(){var n;const{$slots:e,renderedChecked:t,mergedDisabled:r,indeterminate:i,privateInsideTable:o,cssVars:s,labelId:a,label:l,mergedClsPrefix:d,focusable:c,handleKeyUp:u,handleKeyDown:f,handleClick:p}=this;(n=this.onRender)===null||n===void 0||n.call(this);const h=Ct(e.default,g=>l||g?R("span",{class:`${d}-checkbox__label`,id:a},l||g):null);return R("div",{ref:"selfRef",class:[`${d}-checkbox`,this.themeClass,this.rtlEnabled&&`${d}-checkbox--rtl`,t&&`${d}-checkbox--checked`,r&&`${d}-checkbox--disabled`,i&&`${d}-checkbox--indeterminate`,o&&`${d}-checkbox--inside-table`,h&&`${d}-checkbox--show-label`],tabindex:r||!c?void 0:0,role:"checkbox","aria-checked":i?"mixed":t,"aria-labelledby":a,style:s,onKeyup:u,onKeydown:f,onClick:p,onMousedown:()=>{Tt("selectstart",window,g=>{g.preventDefault()},{once:!0})}},R("div",{class:`${d}-checkbox-box-wrapper`}," ",R("div",{class:`${d}-checkbox-box`},R(Go,null,{default:()=>this.indeterminate?R("div",{key:"indeterminate",class:`${d}-checkbox-icon`},t$()):R("div",{key:"check",class:`${d}-checkbox-icon`},e$())}),R("div",{class:`${d}-checkbox-box__border`}))),h)}}),GS={name:"Code",common:Re,self(n){const{textColor2:e,fontSize:t,fontWeightStrong:r,textColor3:i}=n;return{textColor:e,fontSize:t,fontWeightStrong:r,"mono-3":"#5c6370","hue-1":"#56b6c2","hue-2":"#61aeee","hue-3":"#c678dd","hue-4":"#98c379","hue-5":"#e06c75","hue-5-2":"#be5046","hue-6":"#d19a66","hue-6-2":"#e6c07b",lineNumberTextColor:i}}};function i$(n){const{fontWeight:e,textColor1:t,textColor2:r,textColorDisabled:i,dividerColor:o,fontSize:s}=n;return{titleFontSize:s,titleFontWeight:e,dividerColor:o,titleTextColor:t,titleTextColorDisabled:i,fontSize:s,textColor:r,arrowColor:r,arrowColorDisabled:i,itemMargin:"16px 0 0 0",titlePadding:"16px 0 0 0"}}const o$={name:"Collapse",common:Re,self:i$};function s$(n){const{cubicBezierEaseInOut:e}=n;return{bezier:e}}const a$={name:"CollapseTransition",common:Re,self:s$};function l$(n){const{fontSize:e,boxShadow2:t,popoverColor:r,textColor2:i,borderRadius:o,borderColor:s,heightSmall:a,heightMedium:l,heightLarge:d,fontSizeSmall:c,fontSizeMedium:u,fontSizeLarge:f,dividerColor:p}=n;return{panelFontSize:e,boxShadow:t,color:r,textColor:i,borderRadius:o,border:`1px solid ${s}`,heightSmall:a,heightMedium:l,heightLarge:d,fontSizeSmall:c,fontSizeMedium:u,fontSizeLarge:f,dividerColor:p}}const d$={name:"ColorPicker",common:Re,peers:{Input:or,Button:Wn},self:l$},c$={abstract:Boolean,bordered:{type:Boolean,default:void 0},clsPrefix:String,locale:Object,dateLocale:Object,namespace:String,rtl:Array,tag:{type:String,default:"div"},hljs:Object,katex:Object,theme:Object,themeOverrides:Object,componentOptions:Object,icons:Object,breakpoints:Object,preflightStyleDisabled:Boolean,styleMountTarget:Object,inlineThemeDisabled:{type:Boolean,default:void 0},as:{type:String,validator:()=>(Lr("config-provider","`as` is deprecated, please use `tag` instead."),!0),default:void 0}},u$=Ce({name:"ConfigProvider",alias:["App"],props:c$,setup(n){const e=Be(Pr,null),t=U(()=>{const{theme:g}=n;if(g===null)return;const m=e==null?void 0:e.mergedThemeRef.value;return g===void 0?m:m===void 0?g:Object.assign({},m,g)}),r=U(()=>{const{themeOverrides:g}=n;if(g!==null){if(g===void 0)return e==null?void 0:e.mergedThemeOverridesRef.value;{const m=e==null?void 0:e.mergedThemeOverridesRef.value;return m===void 0?g:ia({},m,g)}}}),i=At(()=>{const{namespace:g}=n;return g===void 0?e==null?void 0:e.mergedNamespaceRef.value:g}),o=At(()=>{const{bordered:g}=n;return g===void 0?e==null?void 0:e.mergedBorderedRef.value:g}),s=U(()=>{const{icons:g}=n;return g===void 0?e==null?void 0:e.mergedIconsRef.value:g}),a=U(()=>{const{componentOptions:g}=n;return g!==void 0?g:e==null?void 0:e.mergedComponentPropsRef.value}),l=U(()=>{const{clsPrefix:g}=n;return g!==void 0?g:e?e.mergedClsPrefixRef.value:bd}),d=U(()=>{var g;const{rtl:m}=n;if(m===void 0)return e==null?void 0:e.mergedRtlRef.value;const v={};for(const b of m)v[b.name]=Ia(b),(g=b.peers)===null||g===void 0||g.forEach(y=>{y.name in v||(v[y.name]=Ia(y))});return v}),c=U(()=>n.breakpoints||(e==null?void 0:e.mergedBreakpointsRef.value)),u=n.inlineThemeDisabled||(e==null?void 0:e.inlineThemeDisabled),f=n.preflightStyleDisabled||(e==null?void 0:e.preflightStyleDisabled),p=n.styleMountTarget||(e==null?void 0:e.styleMountTarget),h=U(()=>{const{value:g}=t,{value:m}=r,v=m&&Object.keys(m).length!==0,b=g==null?void 0:g.name;return b?v?`${b}-${Ma(JSON.stringify(r.value))}`:b:v?Ma(JSON.stringify(r.value)):""});return st(Pr,{mergedThemeHashRef:h,mergedBreakpointsRef:c,mergedRtlRef:d,mergedIconsRef:s,mergedComponentPropsRef:a,mergedBorderedRef:o,mergedNamespaceRef:i,mergedClsPrefixRef:l,mergedLocaleRef:U(()=>{const{locale:g}=n;if(g!==null)return g===void 0?e==null?void 0:e.mergedLocaleRef.value:g}),mergedDateLocaleRef:U(()=>{const{dateLocale:g}=n;if(g!==null)return g===void 0?e==null?void 0:e.mergedDateLocaleRef.value:g}),mergedHljsRef:U(()=>{const{hljs:g}=n;return g===void 0?e==null?void 0:e.mergedHljsRef.value:g}),mergedKatexRef:U(()=>{const{katex:g}=n;return g===void 0?e==null?void 0:e.mergedKatexRef.value:g}),mergedThemeRef:t,mergedThemeOverridesRef:r,inlineThemeDisabled:u||!1,preflightStyleDisabled:f||!1,styleMountTarget:p}),{mergedClsPrefix:l,mergedBordered:o,mergedNamespace:i,mergedTheme:t,mergedThemeOverrides:r}},render(){var n,e,t,r;return this.abstract?(r=(t=this.$slots).default)===null||r===void 0?void 0:r.call(t):R(this.as||this.tag,{class:`${this.mergedClsPrefix||bd}-config-provider`},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))}}),WS={name:"Popselect",common:Re,peers:{Popover:jo,InternalSelectMenu:ol}};function f$(n){const{boxShadow2:e}=n;return{menuBoxShadow:e}}const hp={name:"Popselect",common:Ht,peers:{Popover:Fs,InternalSelectMenu:lp},self:f$},jS="n-popselect",h$=j("popselect-menu",`
 box-shadow: var(--n-menu-box-shadow);
`),pp={multiple:Boolean,value:{type:[String,Number,Array],default:null},cancelable:Boolean,options:{type:Array,default:()=>[]},size:{type:String,default:"medium"},scrollable:Boolean,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onMouseenter:Function,onMouseleave:Function,renderLabel:Function,showCheckmark:{type:Boolean,default:void 0},nodeProps:Function,virtualScroll:Boolean,onChange:[Function,Array]},xv=Es(pp),p$=Ce({name:"PopselectPanel",props:pp,setup(n){const e=Be(jS),{mergedClsPrefixRef:t,inlineThemeDisabled:r}=yt(n),i=Ke("Popselect","-pop-select",h$,hp,e.props,t),o=U(()=>pc(n.options,MS("value","children")));function s(f,p){const{onUpdateValue:h,"onUpdate:value":g,onChange:m}=n;h&&we(h,f,p),g&&we(g,f,p),m&&we(m,f,p)}function a(f){d(f.key)}function l(f){!hr(f,"action")&&!hr(f,"empty")&&!hr(f,"header")&&f.preventDefault()}function d(f){const{value:{getNode:p}}=o;if(n.multiple)if(Array.isArray(n.value)){const h=[],g=[];let m=!0;n.value.forEach(v=>{if(v===f){m=!1;return}const b=p(v);b&&(h.push(b.key),g.push(b.rawNode))}),m&&(h.push(f),g.push(p(f).rawNode)),s(h,g)}else{const h=p(f);h&&s([f],[h.rawNode])}else if(n.value===f&&n.cancelable)s(null,null);else{const h=p(f);h&&s(f,h.rawNode);const{"onUpdate:show":g,onUpdateShow:m}=e.props;g&&we(g,!1),m&&we(m,!1),e.setShow(!1)}wn(()=>{e.syncPosition()})}at(Ie(n,"options"),()=>{wn(()=>{e.syncPosition()})});const c=U(()=>{const{self:{menuBoxShadow:f}}=i.value;return{"--n-menu-box-shadow":f}}),u=r?Gt("select",void 0,c,e.props):void 0;return{mergedTheme:e.mergedThemeRef,mergedClsPrefix:t,treeMate:o,handleToggle:a,handleMenuMousedown:l,cssVars:r?void 0:c,themeClass:u==null?void 0:u.themeClass,onRender:u==null?void 0:u.onRender}},render(){var n;return(n=this.onRender)===null||n===void 0||n.call(this),R(SS,{clsPrefix:this.mergedClsPrefix,focusable:!0,nodeProps:this.nodeProps,class:[`${this.mergedClsPrefix}-popselect-menu`,this.themeClass],style:this.cssVars,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,multiple:this.multiple,treeMate:this.treeMate,size:this.size,value:this.value,virtualScroll:this.virtualScroll,scrollable:this.scrollable,renderLabel:this.renderLabel,onToggle:this.handleToggle,onMouseenter:this.onMouseenter,onMouseleave:this.onMouseenter,onMousedown:this.handleMenuMousedown,showCheckmark:this.showCheckmark},{header:()=>{var e,t;return((t=(e=this.$slots).header)===null||t===void 0?void 0:t.call(e))||[]},action:()=>{var e,t;return((t=(e=this.$slots).action)===null||t===void 0?void 0:t.call(e))||[]},empty:()=>{var e,t;return((t=(e=this.$slots).empty)===null||t===void 0?void 0:t.call(e))||[]}})}}),g$=Object.assign(Object.assign(Object.assign(Object.assign({},Ke.props),lc(As,["showArrow","arrow"])),{placement:Object.assign(Object.assign({},As.placement),{default:"bottom"}),trigger:{type:String,default:"hover"}}),pp),m$=Ce({name:"Popselect",props:g$,slots:Object,inheritAttrs:!1,__popover__:!0,setup(n){const{mergedClsPrefixRef:e}=yt(n),t=Ke("Popselect","-popselect",void 0,hp,n,e),r=G(null);function i(){var a;(a=r.value)===null||a===void 0||a.syncPosition()}function o(a){var l;(l=r.value)===null||l===void 0||l.setShow(a)}return st(jS,{props:n,mergedThemeRef:t,syncPosition:i,setShow:o}),Object.assign(Object.assign({},{syncPosition:i,setShow:o}),{popoverInstRef:r,mergedTheme:t})},render(){const{mergedTheme:n}=this,e={theme:n.peers.Popover,themeOverrides:n.peerOverrides.Popover,builtinThemeOverrides:{padding:"0"},ref:"popoverInstRef",internalRenderBody:(t,r,i,o,s)=>{const{$attrs:a}=this;return R(p$,Object.assign({},a,{class:[a.class,t],style:[a.style,...i]},Do(this.$props,xv),{ref:Px(r),onMouseenter:xa([o,a.onMouseenter]),onMouseleave:xa([s,a.onMouseleave])}),{header:()=>{var l,d;return(d=(l=this.$slots).header)===null||d===void 0?void 0:d.call(l)},action:()=>{var l,d;return(d=(l=this.$slots).action)===null||d===void 0?void 0:d.call(l)},empty:()=>{var l,d;return(d=(l=this.$slots).empty)===null||d===void 0?void 0:d.call(l)}})}};return R(al,Object.assign({},lc(this.$props,xv),e,{internalDeactivateImmediately:!0}),{trigger:()=>{var t,r;return(r=(t=this.$slots).default)===null||r===void 0?void 0:r.call(t)}})}});function KS(n){const{boxShadow2:e}=n;return{menuBoxShadow:e}}const qS={name:"Select",common:Ht,peers:{InternalSelection:LS,InternalSelectMenu:lp},self:KS},YS={name:"Select",common:Re,peers:{InternalSelection:dp,InternalSelectMenu:ol},self:KS},v$=Z([j("select",`
 z-index: auto;
 outline: none;
 width: 100%;
 position: relative;
 font-weight: var(--n-font-weight);
 `),j("select-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[sl({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),b$=Object.assign(Object.assign({},Ke.props),{to:Yr.propTo,bordered:{type:Boolean,default:void 0},clearable:Boolean,clearFilterAfterSelect:{type:Boolean,default:!0},options:{type:Array,default:()=>[]},defaultValue:{type:[String,Number,Array],default:null},keyboard:{type:Boolean,default:!0},value:[String,Number,Array],placeholder:String,menuProps:Object,multiple:Boolean,size:String,menuSize:{type:String},filterable:Boolean,disabled:{type:Boolean,default:void 0},remote:Boolean,loading:Boolean,filter:Function,placement:{type:String,default:"bottom-start"},widthMode:{type:String,default:"trigger"},tag:Boolean,onCreate:Function,fallbackOption:{type:[Function,Boolean],default:void 0},show:{type:Boolean,default:void 0},showArrow:{type:Boolean,default:!0},maxTagCount:[Number,String],ellipsisTagPopoverProps:Object,consistentMenuWidth:{type:Boolean,default:!0},virtualScroll:{type:Boolean,default:!0},labelField:{type:String,default:"label"},valueField:{type:String,default:"value"},childrenField:{type:String,default:"children"},renderLabel:Function,renderOption:Function,renderTag:Function,"onUpdate:value":[Function,Array],inputProps:Object,nodeProps:Function,ignoreComposition:{type:Boolean,default:!0},showOnFocus:Boolean,onUpdateValue:[Function,Array],onBlur:[Function,Array],onClear:[Function,Array],onFocus:[Function,Array],onScroll:[Function,Array],onSearch:[Function,Array],onUpdateShow:[Function,Array],"onUpdate:show":[Function,Array],displayDirective:{type:String,default:"show"},resetMenuOnOptionsChange:{type:Boolean,default:!0},status:String,showCheckmark:{type:Boolean,default:!0},onChange:[Function,Array],items:Array}),XS=Ce({name:"Select",props:b$,slots:Object,setup(n){const{mergedClsPrefixRef:e,mergedBorderedRef:t,namespaceRef:r,inlineThemeDisabled:i}=yt(n),o=Ke("Select","-select",v$,qS,n,e),s=G(n.defaultValue),a=Ie(n,"value"),l=kn(a,s),d=G(!1),c=G(""),u=$h(n,["items","options"]),f=G([]),p=G([]),h=U(()=>p.value.concat(f.value).concat(u.value)),g=U(()=>{const{filter:N}=n;if(N)return N;const{labelField:Q,valueField:be}=n;return(Le,De)=>{if(!De)return!1;const $e=De[Q];if(typeof $e=="string")return mu(Le,$e);const Ne=De[be];return typeof Ne=="string"?mu(Le,Ne):typeof Ne=="number"?mu(Le,String(Ne)):!1}}),m=U(()=>{if(n.remote)return u.value;{const{value:N}=h,{value:Q}=c;return!Q.length||!n.filterable?N:CF(N,g.value,Q,n.childrenField)}}),v=U(()=>{const{valueField:N,childrenField:Q}=n,be=MS(N,Q);return pc(m.value,be)}),b=U(()=>TF(h.value,n.valueField,n.childrenField)),y=G(!1),x=kn(Ie(n,"show"),y),E=G(null),A=G(null),S=G(null),{localeRef:w}=il("Select"),T=U(()=>{var N;return(N=n.placeholder)!==null&&N!==void 0?N:w.value.placeholder}),C=[],L=G(new Map),P=U(()=>{const{fallbackOption:N}=n;if(N===void 0){const{labelField:Q,valueField:be}=n;return Le=>({[Q]:String(Le),[be]:Le})}return N===!1?!1:Q=>Object.assign(N(Q),{value:Q})});function _(N){const Q=n.remote,{value:be}=L,{value:Le}=b,{value:De}=P,$e=[];return N.forEach(Ne=>{if(Le.has(Ne))$e.push(Le.get(Ne));else if(Q&&be.has(Ne))$e.push(be.get(Ne));else if(De){const je=De(Ne);je&&$e.push(je)}}),$e}const D=U(()=>{if(n.multiple){const{value:N}=l;return Array.isArray(N)?_(N):[]}return null}),k=U(()=>{const{value:N}=l;return!n.multiple&&!Array.isArray(N)?N===null?null:_([N])[0]||null:null}),M=oo(n),{mergedSizeRef:O,mergedDisabledRef:$,mergedStatusRef:K}=M;function Y(N,Q){const{onChange:be,"onUpdate:value":Le,onUpdateValue:De}=n,{nTriggerFormChange:$e,nTriggerFormInput:Ne}=M;be&&we(be,N,Q),De&&we(De,N,Q),Le&&we(Le,N,Q),s.value=N,$e(),Ne()}function H(N){const{onBlur:Q}=n,{nTriggerFormBlur:be}=M;Q&&we(Q,N),be()}function B(){const{onClear:N}=n;N&&we(N)}function X(N){const{onFocus:Q,showOnFocus:be}=n,{nTriggerFormFocus:Le}=M;Q&&we(Q,N),Le(),be&&de()}function se(N){const{onSearch:Q}=n;Q&&we(Q,N)}function pe(N){const{onScroll:Q}=n;Q&&we(Q,N)}function te(){var N;const{remote:Q,multiple:be}=n;if(Q){const{value:Le}=L;if(be){const{valueField:De}=n;(N=D.value)===null||N===void 0||N.forEach($e=>{Le.set($e[De],$e)})}else{const De=k.value;De&&Le.set(De[n.valueField],De)}}}function W(N){const{onUpdateShow:Q,"onUpdate:show":be}=n;Q&&we(Q,N),be&&we(be,N),y.value=N}function de(){$.value||(W(!0),y.value=!0,n.filterable&&Qe())}function V(){W(!1)}function ue(){c.value="",p.value=C}const Pe=G(!1);function Ae(){n.filterable&&(Pe.value=!0)}function F(){n.filterable&&(Pe.value=!1,x.value||ue())}function z(){$.value||(x.value?n.filterable?Qe():V():de())}function ne(N){var Q,be;!((be=(Q=S.value)===null||Q===void 0?void 0:Q.selfRef)===null||be===void 0)&&be.contains(N.relatedTarget)||(d.value=!1,H(N),V())}function ae(N){X(N),d.value=!0}function le(){d.value=!0}function me(N){var Q;!((Q=E.value)===null||Q===void 0)&&Q.$el.contains(N.relatedTarget)||(d.value=!1,H(N),V())}function fe(){var N;(N=E.value)===null||N===void 0||N.focus(),V()}function ce(N){var Q;x.value&&(!((Q=E.value)===null||Q===void 0)&&Q.$el.contains(Ts(N))||V())}function ve(N){if(!Array.isArray(N))return[];if(P.value)return Array.from(N);{const{remote:Q}=n,{value:be}=b;if(Q){const{value:Le}=L;return N.filter(De=>be.has(De)||Le.has(De))}else return N.filter(Le=>be.has(Le))}}function he(N){_e(N.rawNode)}function _e(N){if($.value)return;const{tag:Q,remote:be,clearFilterAfterSelect:Le,valueField:De}=n;if(Q&&!be){const{value:$e}=p,Ne=$e[0]||null;if(Ne){const je=f.value;je.length?je.push(Ne):f.value=[Ne],p.value=C}}if(be&&L.value.set(N[De],N),n.multiple){const $e=ve(l.value),Ne=$e.findIndex(je=>je===N[De]);if(~Ne){if($e.splice(Ne,1),Q&&!be){const je=re(N[De]);~je&&(f.value.splice(je,1),Le&&(c.value=""))}}else $e.push(N[De]),Le&&(c.value="");Y($e,_($e))}else{if(Q&&!be){const $e=re(N[De]);~$e?f.value=[f.value[$e]]:f.value=C}lt(),V(),Y(N[De],N)}}function re(N){return f.value.findIndex(be=>be[n.valueField]===N)}function ge(N){x.value||de();const{value:Q}=N.target;c.value=Q;const{tag:be,remote:Le}=n;if(se(Q),be&&!Le){if(!Q){p.value=C;return}const{onCreate:De}=n,$e=De?De(Q):{[n.labelField]:Q,[n.valueField]:Q},{valueField:Ne,labelField:je}=n;u.value.some(ht=>ht[Ne]===$e[Ne]||ht[je]===$e[je])||f.value.some(ht=>ht[Ne]===$e[Ne]||ht[je]===$e[je])?p.value=C:p.value=[$e]}}function Ee(N){N.stopPropagation();const{multiple:Q}=n;!Q&&n.filterable&&V(),B(),Q?Y([],[]):Y(null,null)}function He(N){!hr(N,"action")&&!hr(N,"empty")&&!hr(N,"header")&&N.preventDefault()}function et(N){pe(N)}function Xe(N){var Q,be,Le,De,$e;if(!n.keyboard){N.preventDefault();return}switch(N.key){case" ":if(n.filterable)break;N.preventDefault();case"Enter":if(!(!((Q=E.value)===null||Q===void 0)&&Q.isComposing)){if(x.value){const Ne=(be=S.value)===null||be===void 0?void 0:be.getPendingTmNode();Ne?he(Ne):n.filterable||(V(),lt())}else if(de(),n.tag&&Pe.value){const Ne=p.value[0];if(Ne){const je=Ne[n.valueField],{value:ht}=l;n.multiple&&Array.isArray(ht)&&ht.includes(je)||_e(Ne)}}}N.preventDefault();break;case"ArrowUp":if(N.preventDefault(),n.loading)return;x.value&&((Le=S.value)===null||Le===void 0||Le.prev());break;case"ArrowDown":if(N.preventDefault(),n.loading)return;x.value?(De=S.value)===null||De===void 0||De.next():de();break;case"Escape":x.value&&(kL(N),V()),($e=E.value)===null||$e===void 0||$e.focus();break}}function lt(){var N;(N=E.value)===null||N===void 0||N.focus()}function Qe(){var N;(N=E.value)===null||N===void 0||N.focusInput()}function xt(){var N;x.value&&((N=A.value)===null||N===void 0||N.syncPosition())}te(),at(Ie(n,"options"),te);const it={focus:()=>{var N;(N=E.value)===null||N===void 0||N.focus()},focusInput:()=>{var N;(N=E.value)===null||N===void 0||N.focusInput()},blur:()=>{var N;(N=E.value)===null||N===void 0||N.blur()},blurInput:()=>{var N;(N=E.value)===null||N===void 0||N.blurInput()}},ke=U(()=>{const{self:{menuBoxShadow:N}}=o.value;return{"--n-menu-box-shadow":N}}),We=i?Gt("select",void 0,ke,n):void 0;return Object.assign(Object.assign({},it),{mergedStatus:K,mergedClsPrefix:e,mergedBordered:t,namespace:r,treeMate:v,isMounted:el(),triggerRef:E,menuRef:S,pattern:c,uncontrolledShow:y,mergedShow:x,adjustedTo:Yr(n),uncontrolledValue:s,mergedValue:l,followerRef:A,localizedPlaceholder:T,selectedOption:k,selectedOptions:D,mergedSize:O,mergedDisabled:$,focused:d,activeWithoutMenuOpen:Pe,inlineThemeDisabled:i,onTriggerInputFocus:Ae,onTriggerInputBlur:F,handleTriggerOrMenuResize:xt,handleMenuFocus:le,handleMenuBlur:me,handleMenuTabOut:fe,handleTriggerClick:z,handleToggle:he,handleDeleteOption:_e,handlePatternInput:ge,handleClear:Ee,handleTriggerBlur:ne,handleTriggerFocus:ae,handleKeydown:Xe,handleMenuAfterLeave:ue,handleMenuClickOutside:ce,handleMenuScroll:et,handleMenuKeydown:Xe,handleMenuMousedown:He,mergedTheme:o,cssVars:i?void 0:ke,themeClass:We==null?void 0:We.themeClass,onRender:We==null?void 0:We.onRender})},render(){return R("div",{class:`${this.mergedClsPrefix}-select`},R(zh,null,{default:()=>[R(Uh,null,{default:()=>R(rF,{ref:"triggerRef",inlineThemeDisabled:this.inlineThemeDisabled,status:this.mergedStatus,inputProps:this.inputProps,clsPrefix:this.mergedClsPrefix,showArrow:this.showArrow,maxTagCount:this.maxTagCount,ellipsisTagPopoverProps:this.ellipsisTagPopoverProps,bordered:this.mergedBordered,active:this.activeWithoutMenuOpen||this.mergedShow,pattern:this.pattern,placeholder:this.localizedPlaceholder,selectedOption:this.selectedOption,selectedOptions:this.selectedOptions,multiple:this.multiple,renderTag:this.renderTag,renderLabel:this.renderLabel,filterable:this.filterable,clearable:this.clearable,disabled:this.mergedDisabled,size:this.mergedSize,theme:this.mergedTheme.peers.InternalSelection,labelField:this.labelField,valueField:this.valueField,themeOverrides:this.mergedTheme.peerOverrides.InternalSelection,loading:this.loading,focused:this.focused,onClick:this.handleTriggerClick,onDeleteOption:this.handleDeleteOption,onPatternInput:this.handlePatternInput,onClear:this.handleClear,onBlur:this.handleTriggerBlur,onFocus:this.handleTriggerFocus,onKeydown:this.handleKeydown,onPatternBlur:this.onTriggerInputBlur,onPatternFocus:this.onTriggerInputFocus,onResize:this.handleTriggerOrMenuResize,ignoreComposition:this.ignoreComposition},{arrow:()=>{var n,e;return[(e=(n=this.$slots).arrow)===null||e===void 0?void 0:e.call(n)]}})}),R(Gh,{ref:"followerRef",show:this.mergedShow,to:this.adjustedTo,teleportDisabled:this.adjustedTo===Yr.tdkey,containerClass:this.namespace,width:this.consistentMenuWidth?"target":void 0,minWidth:"target",placement:this.placement},{default:()=>R(ir,{name:"fade-in-scale-up-transition",appear:this.isMounted,onAfterLeave:this.handleMenuAfterLeave},{default:()=>{var n,e,t;return this.mergedShow||this.displayDirective==="show"?((n=this.onRender)===null||n===void 0||n.call(this),qi(R(SS,Object.assign({},this.menuProps,{ref:"menuRef",onResize:this.handleTriggerOrMenuResize,inlineThemeDisabled:this.inlineThemeDisabled,virtualScroll:this.consistentMenuWidth&&this.virtualScroll,class:[`${this.mergedClsPrefix}-select-menu`,this.themeClass,(e=this.menuProps)===null||e===void 0?void 0:e.class],clsPrefix:this.mergedClsPrefix,focusable:!0,labelField:this.labelField,valueField:this.valueField,autoPending:!0,nodeProps:this.nodeProps,theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,treeMate:this.treeMate,multiple:this.multiple,size:this.menuSize,renderOption:this.renderOption,renderLabel:this.renderLabel,value:this.mergedValue,style:[(t=this.menuProps)===null||t===void 0?void 0:t.style,this.cssVars],onToggle:this.handleToggle,onScroll:this.handleMenuScroll,onFocus:this.handleMenuFocus,onBlur:this.handleMenuBlur,onKeydown:this.handleMenuKeydown,onTabOut:this.handleMenuTabOut,onMousedown:this.handleMenuMousedown,show:this.mergedShow,showCheckmark:this.showCheckmark,resetMenuOnOptionsChange:this.resetMenuOnOptionsChange}),{empty:()=>{var r,i;return[(i=(r=this.$slots).empty)===null||i===void 0?void 0:i.call(r)]},header:()=>{var r,i;return[(i=(r=this.$slots).header)===null||i===void 0?void 0:i.call(r)]},action:()=>{var r,i;return[(i=(r=this.$slots).action)===null||i===void 0?void 0:i.call(r)]}}),this.displayDirective==="show"?[[fd,this.mergedShow],[$a,this.handleMenuClickOutside,void 0,{capture:!0}]]:[[$a,this.handleMenuClickOutside,void 0,{capture:!0}]])):null}})})]}))}}),y$={itemPaddingSmall:"0 4px",itemMarginSmall:"0 0 0 8px",itemMarginSmallRtl:"0 8px 0 0",itemPaddingMedium:"0 4px",itemMarginMedium:"0 0 0 8px",itemMarginMediumRtl:"0 8px 0 0",itemPaddingLarge:"0 4px",itemMarginLarge:"0 0 0 8px",itemMarginLargeRtl:"0 8px 0 0",buttonIconSizeSmall:"14px",buttonIconSizeMedium:"16px",buttonIconSizeLarge:"18px",inputWidthSmall:"60px",selectWidthSmall:"unset",inputMarginSmall:"0 0 0 8px",inputMarginSmallRtl:"0 8px 0 0",selectMarginSmall:"0 0 0 8px",prefixMarginSmall:"0 8px 0 0",suffixMarginSmall:"0 0 0 8px",inputWidthMedium:"60px",selectWidthMedium:"unset",inputMarginMedium:"0 0 0 8px",inputMarginMediumRtl:"0 8px 0 0",selectMarginMedium:"0 0 0 8px",prefixMarginMedium:"0 8px 0 0",suffixMarginMedium:"0 0 0 8px",inputWidthLarge:"60px",selectWidthLarge:"unset",inputMarginLarge:"0 0 0 8px",inputMarginLargeRtl:"0 8px 0 0",selectMarginLarge:"0 0 0 8px",prefixMarginLarge:"0 8px 0 0",suffixMarginLarge:"0 0 0 8px"};function QS(n){const{textColor2:e,primaryColor:t,primaryColorHover:r,primaryColorPressed:i,inputColorDisabled:o,textColorDisabled:s,borderColor:a,borderRadius:l,fontSizeTiny:d,fontSizeSmall:c,fontSizeMedium:u,heightTiny:f,heightSmall:p,heightMedium:h}=n;return Object.assign(Object.assign({},y$),{buttonColor:"#0000",buttonColorHover:"#0000",buttonColorPressed:"#0000",buttonBorder:`1px solid ${a}`,buttonBorderHover:`1px solid ${a}`,buttonBorderPressed:`1px solid ${a}`,buttonIconColor:e,buttonIconColorHover:e,buttonIconColorPressed:e,itemTextColor:e,itemTextColorHover:r,itemTextColorPressed:i,itemTextColorActive:t,itemTextColorDisabled:s,itemColor:"#0000",itemColorHover:"#0000",itemColorPressed:"#0000",itemColorActive:"#0000",itemColorActiveHover:"#0000",itemColorDisabled:o,itemBorder:"1px solid #0000",itemBorderHover:"1px solid #0000",itemBorderPressed:"1px solid #0000",itemBorderActive:`1px solid ${t}`,itemBorderDisabled:`1px solid ${a}`,itemBorderRadius:l,itemSizeSmall:f,itemSizeMedium:p,itemSizeLarge:h,itemFontSizeSmall:d,itemFontSizeMedium:c,itemFontSizeLarge:u,jumperFontSizeSmall:d,jumperFontSizeMedium:c,jumperFontSizeLarge:u,jumperTextColor:e,jumperTextColorDisabled:s})}const ZS={name:"Pagination",common:Ht,peers:{Select:qS,Input:kS,Popselect:hp},self:QS},JS={name:"Pagination",common:Re,peers:{Select:YS,Input:or,Popselect:WS},self(n){const{primaryColor:e,opacity3:t}=n,r=Te(e,{alpha:Number(t)}),i=QS(n);return i.itemBorderActive=`1px solid ${r}`,i.itemBorderDisabled="1px solid #0000",i}},Sv=`
 background: var(--n-item-color-hover);
 color: var(--n-item-text-color-hover);
 border: var(--n-item-border-hover);
`,Cv=[ee("button",`
 background: var(--n-button-color-hover);
 border: var(--n-button-border-hover);
 color: var(--n-button-icon-color-hover);
 `)],x$=j("pagination",`
 display: flex;
 vertical-align: middle;
 font-size: var(--n-item-font-size);
 flex-wrap: nowrap;
`,[j("pagination-prefix",`
 display: flex;
 align-items: center;
 margin: var(--n-prefix-margin);
 `),j("pagination-suffix",`
 display: flex;
 align-items: center;
 margin: var(--n-suffix-margin);
 `),Z("> *:not(:first-child)",`
 margin: var(--n-item-margin);
 `),j("select",`
 width: var(--n-select-width);
 `),Z("&.transition-disabled",[j("pagination-item","transition: none!important;")]),j("pagination-quick-jumper",`
 white-space: nowrap;
 display: flex;
 color: var(--n-jumper-text-color);
 transition: color .3s var(--n-bezier);
 align-items: center;
 font-size: var(--n-jumper-font-size);
 `,[j("input",`
 margin: var(--n-input-margin);
 width: var(--n-input-width);
 `)]),j("pagination-item",`
 position: relative;
 cursor: pointer;
 user-select: none;
 -webkit-user-select: none;
 display: flex;
 align-items: center;
 justify-content: center;
 box-sizing: border-box;
 min-width: var(--n-item-size);
 height: var(--n-item-size);
 padding: var(--n-item-padding);
 background-color: var(--n-item-color);
 color: var(--n-item-text-color);
 border-radius: var(--n-item-border-radius);
 border: var(--n-item-border);
 fill: var(--n-button-icon-color);
 transition:
 color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 fill .3s var(--n-bezier);
 `,[ee("button",`
 background: var(--n-button-color);
 color: var(--n-button-icon-color);
 border: var(--n-button-border);
 padding: 0;
 `,[j("base-icon",`
 font-size: var(--n-button-icon-size);
 `)]),Pt("disabled",[ee("hover",Sv,Cv),Z("&:hover",Sv,Cv),Z("&:active",`
 background: var(--n-item-color-pressed);
 color: var(--n-item-text-color-pressed);
 border: var(--n-item-border-pressed);
 `,[ee("button",`
 background: var(--n-button-color-pressed);
 border: var(--n-button-border-pressed);
 color: var(--n-button-icon-color-pressed);
 `)]),ee("active",`
 background: var(--n-item-color-active);
 color: var(--n-item-text-color-active);
 border: var(--n-item-border-active);
 `,[Z("&:hover",`
 background: var(--n-item-color-active-hover);
 `)])]),ee("disabled",`
 cursor: not-allowed;
 color: var(--n-item-text-color-disabled);
 `,[ee("active, button",`
 background-color: var(--n-item-color-disabled);
 border: var(--n-item-border-disabled);
 `)])]),ee("disabled",`
 cursor: not-allowed;
 `,[j("pagination-quick-jumper",`
 color: var(--n-jumper-text-color-disabled);
 `)]),ee("simple",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 `,[j("pagination-quick-jumper",[j("input",`
 margin: 0;
 `)])])]);function eC(n){var e;if(!n)return 10;const{defaultPageSize:t}=n;if(t!==void 0)return t;const r=(e=n.pageSizes)===null||e===void 0?void 0:e[0];return typeof r=="number"?r:(r==null?void 0:r.value)||10}function S$(n,e,t,r){let i=!1,o=!1,s=1,a=e;if(e===1)return{hasFastBackward:!1,hasFastForward:!1,fastForwardTo:a,fastBackwardTo:s,items:[{type:"page",label:1,active:n===1,mayBeFastBackward:!1,mayBeFastForward:!1}]};if(e===2)return{hasFastBackward:!1,hasFastForward:!1,fastForwardTo:a,fastBackwardTo:s,items:[{type:"page",label:1,active:n===1,mayBeFastBackward:!1,mayBeFastForward:!1},{type:"page",label:2,active:n===2,mayBeFastBackward:!0,mayBeFastForward:!1}]};const l=1,d=e;let c=n,u=n;const f=(t-5)/2;u+=Math.ceil(f),u=Math.min(Math.max(u,l+t-3),d-2),c-=Math.floor(f),c=Math.max(Math.min(c,d-t+3),l+2);let p=!1,h=!1;c>l+2&&(p=!0),u<d-2&&(h=!0);const g=[];g.push({type:"page",label:1,active:n===1,mayBeFastBackward:!1,mayBeFastForward:!1}),p?(i=!0,s=c-1,g.push({type:"fast-backward",active:!1,label:void 0,options:r?Tv(l+1,c-1):null})):d>=l+1&&g.push({type:"page",label:l+1,mayBeFastBackward:!0,mayBeFastForward:!1,active:n===l+1});for(let m=c;m<=u;++m)g.push({type:"page",label:m,mayBeFastBackward:!1,mayBeFastForward:!1,active:n===m});return h?(o=!0,a=u+1,g.push({type:"fast-forward",active:!1,label:void 0,options:r?Tv(u+1,d-1):null})):u===d-2&&g[g.length-1].label!==d-1&&g.push({type:"page",mayBeFastForward:!0,mayBeFastBackward:!1,label:d-1,active:n===d-1}),g[g.length-1].label!==d&&g.push({type:"page",mayBeFastForward:!1,mayBeFastBackward:!1,label:d,active:n===d}),{hasFastBackward:i,hasFastForward:o,fastBackwardTo:s,fastForwardTo:a,items:g}}function Tv(n,e){const t=[];for(let r=n;r<=e;++r)t.push({label:`${r}`,value:r});return t}const C$=Object.assign(Object.assign({},Ke.props),{simple:Boolean,page:Number,defaultPage:{type:Number,default:1},itemCount:Number,pageCount:Number,defaultPageCount:{type:Number,default:1},showSizePicker:Boolean,pageSize:Number,defaultPageSize:Number,pageSizes:{type:Array,default(){return[10]}},showQuickJumper:Boolean,size:{type:String,default:"medium"},disabled:Boolean,pageSlot:{type:Number,default:9},selectProps:Object,prev:Function,next:Function,goto:Function,prefix:Function,suffix:Function,label:Function,displayOrder:{type:Array,default:["pages","size-picker","quick-jumper"]},to:Yr.propTo,showQuickJumpDropdown:{type:Boolean,default:!0},"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],onPageSizeChange:[Function,Array],onChange:[Function,Array]}),T$=Ce({name:"Pagination",props:C$,slots:Object,setup(n){const{mergedComponentPropsRef:e,mergedClsPrefixRef:t,inlineThemeDisabled:r,mergedRtlRef:i}=yt(n),o=Ke("Pagination","-pagination",x$,ZS,n,t),{localeRef:s}=il("Pagination"),a=G(null),l=G(n.defaultPage),d=G(eC(n)),c=kn(Ie(n,"page"),l),u=kn(Ie(n,"pageSize"),d),f=U(()=>{const{itemCount:V}=n;if(V!==void 0)return Math.max(1,Math.ceil(V/u.value));const{pageCount:ue}=n;return ue!==void 0?Math.max(ue,1):1}),p=G("");Vn(()=>{n.simple,p.value=String(c.value)});const h=G(!1),g=G(!1),m=G(!1),v=G(!1),b=()=>{n.disabled||(h.value=!0,k())},y=()=>{n.disabled||(h.value=!1,k())},x=()=>{g.value=!0,k()},E=()=>{g.value=!1,k()},A=V=>{M(V)},S=U(()=>S$(c.value,f.value,n.pageSlot,n.showQuickJumpDropdown));Vn(()=>{S.value.hasFastBackward?S.value.hasFastForward||(h.value=!1,m.value=!1):(g.value=!1,v.value=!1)});const w=U(()=>{const V=s.value.selectionSuffix;return n.pageSizes.map(ue=>typeof ue=="number"?{label:`${ue} / ${V}`,value:ue}:ue)}),T=U(()=>{var V,ue;return((ue=(V=e==null?void 0:e.value)===null||V===void 0?void 0:V.Pagination)===null||ue===void 0?void 0:ue.inputSize)||Mm(n.size)}),C=U(()=>{var V,ue;return((ue=(V=e==null?void 0:e.value)===null||V===void 0?void 0:V.Pagination)===null||ue===void 0?void 0:ue.selectSize)||Mm(n.size)}),L=U(()=>(c.value-1)*u.value),P=U(()=>{const V=c.value*u.value-1,{itemCount:ue}=n;return ue!==void 0&&V>ue-1?ue-1:V}),_=U(()=>{const{itemCount:V}=n;return V!==void 0?V:(n.pageCount||1)*u.value}),D=Dn("Pagination",i,t);function k(){wn(()=>{var V;const{value:ue}=a;ue&&(ue.classList.add("transition-disabled"),(V=a.value)===null||V===void 0||V.offsetWidth,ue.classList.remove("transition-disabled"))})}function M(V){if(V===c.value)return;const{"onUpdate:page":ue,onUpdatePage:Pe,onChange:Ae,simple:F}=n;ue&&we(ue,V),Pe&&we(Pe,V),Ae&&we(Ae,V),l.value=V,F&&(p.value=String(V))}function O(V){if(V===u.value)return;const{"onUpdate:pageSize":ue,onUpdatePageSize:Pe,onPageSizeChange:Ae}=n;ue&&we(ue,V),Pe&&we(Pe,V),Ae&&we(Ae,V),d.value=V,f.value<c.value&&M(f.value)}function $(){if(n.disabled)return;const V=Math.min(c.value+1,f.value);M(V)}function K(){if(n.disabled)return;const V=Math.max(c.value-1,1);M(V)}function Y(){if(n.disabled)return;const V=Math.min(S.value.fastForwardTo,f.value);M(V)}function H(){if(n.disabled)return;const V=Math.max(S.value.fastBackwardTo,1);M(V)}function B(V){O(V)}function X(){const V=Number.parseInt(p.value);Number.isNaN(V)||(M(Math.max(1,Math.min(V,f.value))),n.simple||(p.value=""))}function se(){X()}function pe(V){if(!n.disabled)switch(V.type){case"page":M(V.label);break;case"fast-backward":H();break;case"fast-forward":Y();break}}function te(V){p.value=V.replace(/\D+/g,"")}Vn(()=>{c.value,u.value,k()});const W=U(()=>{const{size:V}=n,{self:{buttonBorder:ue,buttonBorderHover:Pe,buttonBorderPressed:Ae,buttonIconColor:F,buttonIconColorHover:z,buttonIconColorPressed:ne,itemTextColor:ae,itemTextColorHover:le,itemTextColorPressed:me,itemTextColorActive:fe,itemTextColorDisabled:ce,itemColor:ve,itemColorHover:he,itemColorPressed:_e,itemColorActive:re,itemColorActiveHover:ge,itemColorDisabled:Ee,itemBorder:He,itemBorderHover:et,itemBorderPressed:Xe,itemBorderActive:lt,itemBorderDisabled:Qe,itemBorderRadius:xt,jumperTextColor:it,jumperTextColorDisabled:ke,buttonColor:We,buttonColorHover:N,buttonColorPressed:Q,[xe("itemPadding",V)]:be,[xe("itemMargin",V)]:Le,[xe("inputWidth",V)]:De,[xe("selectWidth",V)]:$e,[xe("inputMargin",V)]:Ne,[xe("selectMargin",V)]:je,[xe("jumperFontSize",V)]:ht,[xe("prefixMargin",V)]:Dt,[xe("suffixMargin",V)]:St,[xe("itemSize",V)]:vn,[xe("buttonIconSize",V)]:En,[xe("itemFontSize",V)]:Rn,[`${xe("itemMargin",V)}Rtl`]:On,[`${xe("inputMargin",V)}Rtl`]:Mn},common:{cubicBezierEaseInOut:sr}}=o.value;return{"--n-prefix-margin":Dt,"--n-suffix-margin":St,"--n-item-font-size":Rn,"--n-select-width":$e,"--n-select-margin":je,"--n-input-width":De,"--n-input-margin":Ne,"--n-input-margin-rtl":Mn,"--n-item-size":vn,"--n-item-text-color":ae,"--n-item-text-color-disabled":ce,"--n-item-text-color-hover":le,"--n-item-text-color-active":fe,"--n-item-text-color-pressed":me,"--n-item-color":ve,"--n-item-color-hover":he,"--n-item-color-disabled":Ee,"--n-item-color-active":re,"--n-item-color-active-hover":ge,"--n-item-color-pressed":_e,"--n-item-border":He,"--n-item-border-hover":et,"--n-item-border-disabled":Qe,"--n-item-border-active":lt,"--n-item-border-pressed":Xe,"--n-item-padding":be,"--n-item-border-radius":xt,"--n-bezier":sr,"--n-jumper-font-size":ht,"--n-jumper-text-color":it,"--n-jumper-text-color-disabled":ke,"--n-item-margin":Le,"--n-item-margin-rtl":On,"--n-button-icon-size":En,"--n-button-icon-color":F,"--n-button-icon-color-hover":z,"--n-button-icon-color-pressed":ne,"--n-button-color-hover":N,"--n-button-color":We,"--n-button-color-pressed":Q,"--n-button-border":ue,"--n-button-border-hover":Pe,"--n-button-border-pressed":Ae}}),de=r?Gt("pagination",U(()=>{let V="";const{size:ue}=n;return V+=ue[0],V}),W,n):void 0;return{rtlEnabled:D,mergedClsPrefix:t,locale:s,selfRef:a,mergedPage:c,pageItems:U(()=>S.value.items),mergedItemCount:_,jumperValue:p,pageSizeOptions:w,mergedPageSize:u,inputSize:T,selectSize:C,mergedTheme:o,mergedPageCount:f,startIndex:L,endIndex:P,showFastForwardMenu:m,showFastBackwardMenu:v,fastForwardActive:h,fastBackwardActive:g,handleMenuSelect:A,handleFastForwardMouseenter:b,handleFastForwardMouseleave:y,handleFastBackwardMouseenter:x,handleFastBackwardMouseleave:E,handleJumperInput:te,handleBackwardClick:K,handleForwardClick:$,handlePageItemClick:pe,handleSizePickerChange:B,handleQuickJumperChange:se,cssVars:r?void 0:W,themeClass:de==null?void 0:de.themeClass,onRender:de==null?void 0:de.onRender}},render(){const{$slots:n,mergedClsPrefix:e,disabled:t,cssVars:r,mergedPage:i,mergedPageCount:o,pageItems:s,showSizePicker:a,showQuickJumper:l,mergedTheme:d,locale:c,inputSize:u,selectSize:f,mergedPageSize:p,pageSizeOptions:h,jumperValue:g,simple:m,prev:v,next:b,prefix:y,suffix:x,label:E,goto:A,handleJumperInput:S,handleSizePickerChange:w,handleBackwardClick:T,handlePageItemClick:C,handleForwardClick:L,handleQuickJumperChange:P,onRender:_}=this;_==null||_();const D=y||n.prefix,k=x||n.suffix,M=v||n.prev,O=b||n.next,$=E||n.label;return R("div",{ref:"selfRef",class:[`${e}-pagination`,this.themeClass,this.rtlEnabled&&`${e}-pagination--rtl`,t&&`${e}-pagination--disabled`,m&&`${e}-pagination--simple`],style:r},D?R("div",{class:`${e}-pagination-prefix`},D({page:i,pageSize:p,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.mergedItemCount})):null,this.displayOrder.map(K=>{switch(K){case"pages":return R(mt,null,R("div",{class:[`${e}-pagination-item`,!M&&`${e}-pagination-item--button`,(i<=1||i>o||t)&&`${e}-pagination-item--disabled`],onClick:T},M?M({page:i,pageSize:p,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.mergedItemCount}):R(on,{clsPrefix:e},{default:()=>this.rtlEnabled?R(dv,null):R(sv,null)})),m?R(mt,null,R("div",{class:`${e}-pagination-quick-jumper`},R(vr,{value:g,onUpdateValue:S,size:u,placeholder:"",disabled:t,theme:d.peers.Input,themeOverrides:d.peerOverrides.Input,onChange:P}))," /"," ",o):s.map((Y,H)=>{let B,X,se;const{type:pe}=Y;switch(pe){case"page":const W=Y.label;$?B=$({type:"page",node:W,active:Y.active}):B=W;break;case"fast-forward":const de=this.fastForwardActive?R(on,{clsPrefix:e},{default:()=>this.rtlEnabled?R(av,null):R(lv,null)}):R(on,{clsPrefix:e},{default:()=>R(cv,null)});$?B=$({type:"fast-forward",node:de,active:this.fastForwardActive||this.showFastForwardMenu}):B=de,X=this.handleFastForwardMouseenter,se=this.handleFastForwardMouseleave;break;case"fast-backward":const V=this.fastBackwardActive?R(on,{clsPrefix:e},{default:()=>this.rtlEnabled?R(lv,null):R(av,null)}):R(on,{clsPrefix:e},{default:()=>R(cv,null)});$?B=$({type:"fast-backward",node:V,active:this.fastBackwardActive||this.showFastBackwardMenu}):B=V,X=this.handleFastBackwardMouseenter,se=this.handleFastBackwardMouseleave;break}const te=R("div",{key:H,class:[`${e}-pagination-item`,Y.active&&`${e}-pagination-item--active`,pe!=="page"&&(pe==="fast-backward"&&this.showFastBackwardMenu||pe==="fast-forward"&&this.showFastForwardMenu)&&`${e}-pagination-item--hover`,t&&`${e}-pagination-item--disabled`,pe==="page"&&`${e}-pagination-item--clickable`],onClick:()=>{C(Y)},onMouseenter:X,onMouseleave:se},B);if(pe==="page"&&!Y.mayBeFastBackward&&!Y.mayBeFastForward)return te;{const W=Y.type==="page"?Y.mayBeFastBackward?"fast-backward":"fast-forward":Y.type;return Y.type!=="page"&&!Y.options?te:R(m$,{to:this.to,key:W,disabled:t,trigger:"hover",virtualScroll:!0,style:{width:"60px"},theme:d.peers.Popselect,themeOverrides:d.peerOverrides.Popselect,builtinThemeOverrides:{peers:{InternalSelectMenu:{height:"calc(var(--n-option-height) * 4.6)"}}},nodeProps:()=>({style:{justifyContent:"center"}}),show:pe==="page"?!1:pe==="fast-backward"?this.showFastBackwardMenu:this.showFastForwardMenu,onUpdateShow:de=>{pe!=="page"&&(de?pe==="fast-backward"?this.showFastBackwardMenu=de:this.showFastForwardMenu=de:(this.showFastBackwardMenu=!1,this.showFastForwardMenu=!1))},options:Y.type!=="page"&&Y.options?Y.options:[],onUpdateValue:this.handleMenuSelect,scrollable:!0,showCheckmark:!1},{default:()=>te})}}),R("div",{class:[`${e}-pagination-item`,!O&&`${e}-pagination-item--button`,{[`${e}-pagination-item--disabled`]:i<1||i>=o||t}],onClick:L},O?O({page:i,pageSize:p,pageCount:o,itemCount:this.mergedItemCount,startIndex:this.startIndex,endIndex:this.endIndex}):R(on,{clsPrefix:e},{default:()=>this.rtlEnabled?R(sv,null):R(dv,null)})));case"size-picker":return!m&&a?R(XS,Object.assign({consistentMenuWidth:!1,placeholder:"",showCheckmark:!1,to:this.to},this.selectProps,{size:f,options:h,value:p,disabled:t,theme:d.peers.Select,themeOverrides:d.peerOverrides.Select,onUpdateValue:w})):null;case"quick-jumper":return!m&&l?R("div",{class:`${e}-pagination-quick-jumper`},A?A():Er(this.$slots.goto,()=>[c.goto]),R(vr,{value:g,onUpdateValue:S,size:u,placeholder:"",disabled:t,theme:d.peers.Input,themeOverrides:d.peerOverrides.Input,onChange:P})):null;default:return null}}),k?R("div",{class:`${e}-pagination-suffix`},k({page:i,pageSize:p,pageCount:o,startIndex:this.startIndex,endIndex:this.endIndex,itemCount:this.mergedItemCount})):null)}}),w$={padding:"4px 0",optionIconSizeSmall:"14px",optionIconSizeMedium:"16px",optionIconSizeLarge:"16px",optionIconSizeHuge:"18px",optionSuffixWidthSmall:"14px",optionSuffixWidthMedium:"14px",optionSuffixWidthLarge:"16px",optionSuffixWidthHuge:"16px",optionIconSuffixWidthSmall:"32px",optionIconSuffixWidthMedium:"32px",optionIconSuffixWidthLarge:"36px",optionIconSuffixWidthHuge:"36px",optionPrefixWidthSmall:"14px",optionPrefixWidthMedium:"14px",optionPrefixWidthLarge:"16px",optionPrefixWidthHuge:"16px",optionIconPrefixWidthSmall:"36px",optionIconPrefixWidthMedium:"36px",optionIconPrefixWidthLarge:"40px",optionIconPrefixWidthHuge:"40px"};function tC(n){const{primaryColor:e,textColor2:t,dividerColor:r,hoverColor:i,popoverColor:o,invertedColor:s,borderRadius:a,fontSizeSmall:l,fontSizeMedium:d,fontSizeLarge:c,fontSizeHuge:u,heightSmall:f,heightMedium:p,heightLarge:h,heightHuge:g,textColor3:m,opacityDisabled:v}=n;return Object.assign(Object.assign({},w$),{optionHeightSmall:f,optionHeightMedium:p,optionHeightLarge:h,optionHeightHuge:g,borderRadius:a,fontSizeSmall:l,fontSizeMedium:d,fontSizeLarge:c,fontSizeHuge:u,optionTextColor:t,optionTextColorHover:t,optionTextColorActive:e,optionTextColorChildActive:e,color:o,dividerColor:r,suffixColor:t,prefixColor:t,optionColorHover:i,optionColorActive:Te(e,{alpha:.1}),groupHeaderTextColor:m,optionTextColorInverted:"#BBB",optionTextColorHoverInverted:"#FFF",optionTextColorActiveInverted:"#FFF",optionTextColorChildActiveInverted:"#FFF",colorInverted:s,dividerColorInverted:"#BBB",suffixColorInverted:"#BBB",prefixColorInverted:"#BBB",optionColorHoverInverted:e,optionColorActiveInverted:e,groupHeaderTextColorInverted:"#AAA",optionOpacityDisabled:v})}const nC={name:"Dropdown",common:Ht,peers:{Popover:Fs},self:tC},gp={name:"Dropdown",common:Re,peers:{Popover:jo},self(n){const{primaryColorSuppl:e,primaryColor:t,popoverColor:r}=n,i=tC(n);return i.colorInverted=r,i.optionColorActive=Te(t,{alpha:.15}),i.optionColorActiveInverted=e,i.optionColorHoverInverted=e,i}},rC={padding:"8px 14px"},mc={name:"Tooltip",common:Re,peers:{Popover:jo},self(n){const{borderRadius:e,boxShadow2:t,popoverColor:r,textColor2:i}=n;return Object.assign(Object.assign({},rC),{borderRadius:e,boxShadow:t,color:r,textColor:i})}};function E$(n){const{borderRadius:e,boxShadow2:t,baseColor:r}=n;return Object.assign(Object.assign({},rC),{borderRadius:e,boxShadow:t,color:ze(r,"rgba(0, 0, 0, .85)"),textColor:r})}const iC={name:"Tooltip",common:Ht,peers:{Popover:Fs},self:E$},oC={name:"Ellipsis",common:Re,peers:{Tooltip:mc}},sC={name:"Ellipsis",common:Ht,peers:{Tooltip:iC}},aC={radioSizeSmall:"14px",radioSizeMedium:"16px",radioSizeLarge:"18px",labelPadding:"0 8px",labelFontWeight:"400"},lC={name:"Radio",common:Re,self(n){const{borderColor:e,primaryColor:t,baseColor:r,textColorDisabled:i,inputColorDisabled:o,textColor2:s,opacityDisabled:a,borderRadius:l,fontSizeSmall:d,fontSizeMedium:c,fontSizeLarge:u,heightSmall:f,heightMedium:p,heightLarge:h,lineHeight:g}=n;return Object.assign(Object.assign({},aC),{labelLineHeight:g,buttonHeightSmall:f,buttonHeightMedium:p,buttonHeightLarge:h,fontSizeSmall:d,fontSizeMedium:c,fontSizeLarge:u,boxShadow:`inset 0 0 0 1px ${e}`,boxShadowActive:`inset 0 0 0 1px ${t}`,boxShadowFocus:`inset 0 0 0 1px ${t}, 0 0 0 2px ${Te(t,{alpha:.3})}`,boxShadowHover:`inset 0 0 0 1px ${t}`,boxShadowDisabled:`inset 0 0 0 1px ${e}`,color:"#0000",colorDisabled:o,colorActive:"#0000",textColor:s,textColorDisabled:i,dotColorActive:t,dotColorDisabled:e,buttonBorderColor:e,buttonBorderColorActive:t,buttonBorderColorHover:t,buttonColor:"#0000",buttonColorActive:t,buttonTextColor:s,buttonTextColorActive:r,buttonTextColorHover:t,opacityDisabled:a,buttonBoxShadowFocus:`inset 0 0 0 1px ${t}, 0 0 0 2px ${Te(t,{alpha:.3})}`,buttonBoxShadowHover:`inset 0 0 0 1px ${t}`,buttonBoxShadow:"inset 0 0 0 1px #0000",buttonBorderRadius:l})}};function R$(n){const{borderColor:e,primaryColor:t,baseColor:r,textColorDisabled:i,inputColorDisabled:o,textColor2:s,opacityDisabled:a,borderRadius:l,fontSizeSmall:d,fontSizeMedium:c,fontSizeLarge:u,heightSmall:f,heightMedium:p,heightLarge:h,lineHeight:g}=n;return Object.assign(Object.assign({},aC),{labelLineHeight:g,buttonHeightSmall:f,buttonHeightMedium:p,buttonHeightLarge:h,fontSizeSmall:d,fontSizeMedium:c,fontSizeLarge:u,boxShadow:`inset 0 0 0 1px ${e}`,boxShadowActive:`inset 0 0 0 1px ${t}`,boxShadowFocus:`inset 0 0 0 1px ${t}, 0 0 0 2px ${Te(t,{alpha:.2})}`,boxShadowHover:`inset 0 0 0 1px ${t}`,boxShadowDisabled:`inset 0 0 0 1px ${e}`,color:r,colorDisabled:o,colorActive:"#0000",textColor:s,textColorDisabled:i,dotColorActive:t,dotColorDisabled:e,buttonBorderColor:e,buttonBorderColorActive:t,buttonBorderColorHover:e,buttonColor:r,buttonColorActive:r,buttonTextColor:s,buttonTextColorActive:t,buttonTextColorHover:t,opacityDisabled:a,buttonBoxShadowFocus:`inset 0 0 0 1px ${t}, 0 0 0 2px ${Te(t,{alpha:.3})}`,buttonBoxShadowHover:"inset 0 0 0 1px #0000",buttonBoxShadow:"inset 0 0 0 1px #0000",buttonBorderRadius:l})}const mp={name:"Radio",common:Ht,self:R$},A$={thPaddingSmall:"8px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"8px",tdPaddingMedium:"12px",tdPaddingLarge:"12px",sorterSize:"15px",resizableContainerSize:"8px",resizableSize:"2px",filterSize:"15px",paginationMargin:"12px 0 0 0",emptyPadding:"48px 0",actionPadding:"8px 12px",actionButtonMargin:"0 8px 0 0"};function dC(n){const{cardColor:e,modalColor:t,popoverColor:r,textColor2:i,textColor1:o,tableHeaderColor:s,tableColorHover:a,iconColor:l,primaryColor:d,fontWeightStrong:c,borderRadius:u,lineHeight:f,fontSizeSmall:p,fontSizeMedium:h,fontSizeLarge:g,dividerColor:m,heightSmall:v,opacityDisabled:b,tableColorStriped:y}=n;return Object.assign(Object.assign({},A$),{actionDividerColor:m,lineHeight:f,borderRadius:u,fontSizeSmall:p,fontSizeMedium:h,fontSizeLarge:g,borderColor:ze(e,m),tdColorHover:ze(e,a),tdColorSorting:ze(e,a),tdColorStriped:ze(e,y),thColor:ze(e,s),thColorHover:ze(ze(e,s),a),thColorSorting:ze(ze(e,s),a),tdColor:e,tdTextColor:i,thTextColor:o,thFontWeight:c,thButtonColorHover:a,thIconColor:l,thIconColorActive:d,borderColorModal:ze(t,m),tdColorHoverModal:ze(t,a),tdColorSortingModal:ze(t,a),tdColorStripedModal:ze(t,y),thColorModal:ze(t,s),thColorHoverModal:ze(ze(t,s),a),thColorSortingModal:ze(ze(t,s),a),tdColorModal:t,borderColorPopover:ze(r,m),tdColorHoverPopover:ze(r,a),tdColorSortingPopover:ze(r,a),tdColorStripedPopover:ze(r,y),thColorPopover:ze(r,s),thColorHoverPopover:ze(ze(r,s),a),thColorSortingPopover:ze(ze(r,s),a),tdColorPopover:r,boxShadowBefore:"inset -12px 0 8px -12px rgba(0, 0, 0, .18)",boxShadowAfter:"inset 12px 0 8px -12px rgba(0, 0, 0, .18)",loadingColor:d,loadingSize:v,opacityLoading:b})}const I$={name:"DataTable",common:Ht,peers:{Button:cp,Checkbox:HS,Radio:mp,Pagination:ZS,Scrollbar:hc,Empty:gc,Popover:Fs,Ellipsis:sC,Dropdown:nC},self:dC},L$={name:"DataTable",common:Re,peers:{Button:Wn,Checkbox:$s,Radio:lC,Pagination:JS,Scrollbar:Gn,Empty:Wo,Popover:jo,Ellipsis:oC,Dropdown:gp},self(n){const e=dC(n);return e.boxShadowAfter="inset 12px 0 8px -12px rgba(0, 0, 0, .36)",e.boxShadowBefore="inset -12px 0 8px -12px rgba(0, 0, 0, .36)",e}},P$=Object.assign(Object.assign({},Ke.props),{onUnstableColumnResize:Function,pagination:{type:[Object,Boolean],default:!1},paginateSinglePage:{type:Boolean,default:!0},minHeight:[Number,String],maxHeight:[Number,String],columns:{type:Array,default:()=>[]},rowClassName:[String,Function],rowProps:Function,rowKey:Function,summary:[Function],data:{type:Array,default:()=>[]},loading:Boolean,bordered:{type:Boolean,default:void 0},bottomBordered:{type:Boolean,default:void 0},striped:Boolean,scrollX:[Number,String],defaultCheckedRowKeys:{type:Array,default:()=>[]},checkedRowKeys:Array,singleLine:{type:Boolean,default:!0},singleColumn:Boolean,size:{type:String,default:"medium"},remote:Boolean,defaultExpandedRowKeys:{type:Array,default:[]},defaultExpandAll:Boolean,expandedRowKeys:Array,stickyExpandedRows:Boolean,virtualScroll:Boolean,virtualScrollX:Boolean,virtualScrollHeader:Boolean,headerHeight:{type:Number,default:28},heightForRow:Function,minRowHeight:{type:Number,default:28},tableLayout:{type:String,default:"auto"},allowCheckingNotLoaded:Boolean,cascade:{type:Boolean,default:!0},childrenKey:{type:String,default:"children"},indent:{type:Number,default:16},flexHeight:Boolean,summaryPlacement:{type:String,default:"bottom"},paginationBehaviorOnFilter:{type:String,default:"current"},filterIconPopoverProps:Object,scrollbarProps:Object,renderCell:Function,renderExpandIcon:Function,spinProps:{type:Object,default:{}},getCsvCell:Function,getCsvHeader:Function,onLoad:Function,"onUpdate:page":[Function,Array],onUpdatePage:[Function,Array],"onUpdate:pageSize":[Function,Array],onUpdatePageSize:[Function,Array],"onUpdate:sorter":[Function,Array],onUpdateSorter:[Function,Array],"onUpdate:filters":[Function,Array],onUpdateFilters:[Function,Array],"onUpdate:checkedRowKeys":[Function,Array],onUpdateCheckedRowKeys:[Function,Array],"onUpdate:expandedRowKeys":[Function,Array],onUpdateExpandedRowKeys:[Function,Array],onScroll:Function,onPageChange:[Function,Array],onPageSizeChange:[Function,Array],onSorterChange:[Function,Array],onFiltersChange:[Function,Array],onCheckedRowKeysChange:[Function,Array]}),_r="n-data-table",cC=40,uC=40;function wv(n){if(n.type==="selection")return n.width===void 0?cC:pn(n.width);if(n.type==="expand")return n.width===void 0?uC:pn(n.width);if(!("children"in n))return typeof n.width=="string"?pn(n.width):n.width}function _$(n){var e,t;if(n.type==="selection")return an((e=n.width)!==null&&e!==void 0?e:cC);if(n.type==="expand")return an((t=n.width)!==null&&t!==void 0?t:uC);if(!("children"in n))return an(n.width)}function yr(n){return n.type==="selection"?"__n_selection__":n.type==="expand"?"__n_expand__":n.key}function Ev(n){return n&&(typeof n=="object"?Object.assign({},n):n)}function k$(n){return n==="ascend"?1:n==="descend"?-1:0}function D$(n,e,t){return t!==void 0&&(n=Math.min(n,typeof t=="number"?t:Number.parseFloat(t))),e!==void 0&&(n=Math.max(n,typeof e=="number"?e:Number.parseFloat(e))),n}function O$(n,e){if(e!==void 0)return{width:e,minWidth:e,maxWidth:e};const t=_$(n),{minWidth:r,maxWidth:i}=n;return{width:t,minWidth:an(r)||t,maxWidth:an(i)}}function M$(n,e,t){return typeof t=="function"?t(n,e):t||""}function vu(n){return n.filterOptionValues!==void 0||n.filterOptionValue===void 0&&n.defaultFilterOptionValues!==void 0}function bu(n){return"children"in n?!1:!!n.sorter}function fC(n){return"children"in n&&n.children.length?!1:!!n.resizable}function Rv(n){return"children"in n?!1:!!n.filter&&(!!n.filterOptions||!!n.renderFilterMenu)}function Av(n){if(n){if(n==="descend")return"ascend"}else return"descend";return!1}function F$(n,e){return n.sorter===void 0?null:e===null||e.columnKey!==n.key?{columnKey:n.key,sorter:n.sorter,order:Av(!1)}:Object.assign(Object.assign({},e),{order:Av(e.order)})}function hC(n,e){return e.find(t=>t.columnKey===n.key&&t.order)!==void 0}function $$(n){return typeof n=="string"?n.replace(/,/g,"\\,"):n==null?"":`${n}`.replace(/,/g,"\\,")}function B$(n,e,t,r){const i=n.filter(a=>a.type!=="expand"&&a.type!=="selection"&&a.allowExport!==!1),o=i.map(a=>r?r(a):a.title).join(","),s=e.map(a=>i.map(l=>t?t(a[l.key],a,l):$$(a[l.key])).join(","));return[o,...s].join(`
`)}const N$=Ce({name:"DataTableBodyCheckbox",props:{rowKey:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!0},onUpdateChecked:{type:Function,required:!0}},setup(n){const{mergedCheckedRowKeySetRef:e,mergedInderminateRowKeySetRef:t}=Be(_r);return()=>{const{rowKey:r}=n;return R(fp,{privateInsideTable:!0,disabled:n.disabled,indeterminate:t.value.has(r),checked:e.value.has(r),onUpdateChecked:n.onUpdateChecked})}}}),z$=j("radio",`
 line-height: var(--n-label-line-height);
 outline: none;
 position: relative;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 align-items: flex-start;
 flex-wrap: nowrap;
 font-size: var(--n-font-size);
 word-break: break-word;
`,[ee("checked",[q("dot",`
 background-color: var(--n-color-active);
 `)]),q("dot-wrapper",`
 position: relative;
 flex-shrink: 0;
 flex-grow: 0;
 width: var(--n-radio-size);
 `),j("radio-input",`
 position: absolute;
 border: 0;
 width: 0;
 height: 0;
 opacity: 0;
 margin: 0;
 `),q("dot",`
 position: absolute;
 top: 50%;
 left: 0;
 transform: translateY(-50%);
 height: var(--n-radio-size);
 width: var(--n-radio-size);
 background: var(--n-color);
 box-shadow: var(--n-box-shadow);
 border-radius: 50%;
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `,[Z("&::before",`
 content: "";
 opacity: 0;
 position: absolute;
 left: 4px;
 top: 4px;
 height: calc(100% - 8px);
 width: calc(100% - 8px);
 border-radius: 50%;
 transform: scale(.8);
 background: var(--n-dot-color-active);
 transition: 
 opacity .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 transform .3s var(--n-bezier);
 `),ee("checked",{boxShadow:"var(--n-box-shadow-active)"},[Z("&::before",`
 opacity: 1;
 transform: scale(1);
 `)])]),q("label",`
 color: var(--n-text-color);
 padding: var(--n-label-padding);
 font-weight: var(--n-label-font-weight);
 display: inline-block;
 transition: color .3s var(--n-bezier);
 `),Pt("disabled",`
 cursor: pointer;
 `,[Z("&:hover",[q("dot",{boxShadow:"var(--n-box-shadow-hover)"})]),ee("focus",[Z("&:not(:active)",[q("dot",{boxShadow:"var(--n-box-shadow-focus)"})])])]),ee("disabled",`
 cursor: not-allowed;
 `,[q("dot",{boxShadow:"var(--n-box-shadow-disabled)",backgroundColor:"var(--n-color-disabled)"},[Z("&::before",{backgroundColor:"var(--n-dot-color-disabled)"}),ee("checked",`
 opacity: 1;
 `)]),q("label",{color:"var(--n-text-color-disabled)"}),j("radio-input",`
 cursor: not-allowed;
 `)])]),U$={name:String,value:{type:[String,Number,Boolean],default:"on"},checked:{type:Boolean,default:void 0},defaultChecked:Boolean,disabled:{type:Boolean,default:void 0},label:String,size:String,onUpdateChecked:[Function,Array],"onUpdate:checked":[Function,Array],checkedValue:{type:Boolean,default:void 0}},pC="n-radio-group";function H$(n){const e=Be(pC,null),t=oo(n,{mergedSize(b){const{size:y}=n;if(y!==void 0)return y;if(e){const{mergedSizeRef:{value:x}}=e;if(x!==void 0)return x}return b?b.mergedSize.value:"medium"},mergedDisabled(b){return!!(n.disabled||e!=null&&e.disabledRef.value||b!=null&&b.disabled.value)}}),{mergedSizeRef:r,mergedDisabledRef:i}=t,o=G(null),s=G(null),a=G(n.defaultChecked),l=Ie(n,"checked"),d=kn(l,a),c=At(()=>e?e.valueRef.value===n.value:d.value),u=At(()=>{const{name:b}=n;if(b!==void 0)return b;if(e)return e.nameRef.value}),f=G(!1);function p(){if(e){const{doUpdateValue:b}=e,{value:y}=n;we(b,y)}else{const{onUpdateChecked:b,"onUpdate:checked":y}=n,{nTriggerFormInput:x,nTriggerFormChange:E}=t;b&&we(b,!0),y&&we(y,!0),x(),E(),a.value=!0}}function h(){i.value||c.value||p()}function g(){h(),o.value&&(o.value.checked=c.value)}function m(){f.value=!1}function v(){f.value=!0}return{mergedClsPrefix:e?e.mergedClsPrefixRef:yt(n).mergedClsPrefixRef,inputRef:o,labelRef:s,mergedName:u,mergedDisabled:i,renderSafeChecked:c,focus:f,mergedSize:r,handleRadioInputChange:g,handleRadioInputBlur:m,handleRadioInputFocus:v}}const V$=Object.assign(Object.assign({},Ke.props),U$),gC=Ce({name:"Radio",props:V$,setup(n){const e=H$(n),t=Ke("Radio","-radio",z$,mp,n,e.mergedClsPrefix),r=U(()=>{const{mergedSize:{value:d}}=e,{common:{cubicBezierEaseInOut:c},self:{boxShadow:u,boxShadowActive:f,boxShadowDisabled:p,boxShadowFocus:h,boxShadowHover:g,color:m,colorDisabled:v,colorActive:b,textColor:y,textColorDisabled:x,dotColorActive:E,dotColorDisabled:A,labelPadding:S,labelLineHeight:w,labelFontWeight:T,[xe("fontSize",d)]:C,[xe("radioSize",d)]:L}}=t.value;return{"--n-bezier":c,"--n-label-line-height":w,"--n-label-font-weight":T,"--n-box-shadow":u,"--n-box-shadow-active":f,"--n-box-shadow-disabled":p,"--n-box-shadow-focus":h,"--n-box-shadow-hover":g,"--n-color":m,"--n-color-active":b,"--n-color-disabled":v,"--n-dot-color-active":E,"--n-dot-color-disabled":A,"--n-font-size":C,"--n-radio-size":L,"--n-text-color":y,"--n-text-color-disabled":x,"--n-label-padding":S}}),{inlineThemeDisabled:i,mergedClsPrefixRef:o,mergedRtlRef:s}=yt(n),a=Dn("Radio",s,o),l=i?Gt("radio",U(()=>e.mergedSize.value[0]),r,n):void 0;return Object.assign(e,{rtlEnabled:a,cssVars:i?void 0:r,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender})},render(){const{$slots:n,mergedClsPrefix:e,onRender:t,label:r}=this;return t==null||t(),R("label",{class:[`${e}-radio`,this.themeClass,this.rtlEnabled&&`${e}-radio--rtl`,this.mergedDisabled&&`${e}-radio--disabled`,this.renderSafeChecked&&`${e}-radio--checked`,this.focus&&`${e}-radio--focus`],style:this.cssVars},R("div",{class:`${e}-radio__dot-wrapper`}," ",R("div",{class:[`${e}-radio__dot`,this.renderSafeChecked&&`${e}-radio__dot--checked`]}),R("input",{ref:"inputRef",type:"radio",class:`${e}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur})),Ct(n.default,i=>!i&&!r?null:R("div",{ref:"labelRef",class:`${e}-radio__label`},i||r)))}}),G$=j("radio-group",`
 display: inline-block;
 font-size: var(--n-font-size);
`,[q("splitor",`
 display: inline-block;
 vertical-align: bottom;
 width: 1px;
 transition:
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier);
 background: var(--n-button-border-color);
 `,[ee("checked",{backgroundColor:"var(--n-button-border-color-active)"}),ee("disabled",{opacity:"var(--n-opacity-disabled)"})]),ee("button-group",`
 white-space: nowrap;
 height: var(--n-height);
 line-height: var(--n-height);
 `,[j("radio-button",{height:"var(--n-height)",lineHeight:"var(--n-height)"}),q("splitor",{height:"var(--n-height)"})]),j("radio-button",`
 vertical-align: bottom;
 outline: none;
 position: relative;
 user-select: none;
 -webkit-user-select: none;
 display: inline-block;
 box-sizing: border-box;
 padding-left: 14px;
 padding-right: 14px;
 white-space: nowrap;
 transition:
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 background: var(--n-button-color);
 color: var(--n-button-text-color);
 border-top: 1px solid var(--n-button-border-color);
 border-bottom: 1px solid var(--n-button-border-color);
 `,[j("radio-input",`
 pointer-events: none;
 position: absolute;
 border: 0;
 border-radius: inherit;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 opacity: 0;
 z-index: 1;
 `),q("state-border",`
 z-index: 1;
 pointer-events: none;
 position: absolute;
 box-shadow: var(--n-button-box-shadow);
 transition: box-shadow .3s var(--n-bezier);
 left: -1px;
 bottom: -1px;
 right: -1px;
 top: -1px;
 `),Z("&:first-child",`
 border-top-left-radius: var(--n-button-border-radius);
 border-bottom-left-radius: var(--n-button-border-radius);
 border-left: 1px solid var(--n-button-border-color);
 `,[q("state-border",`
 border-top-left-radius: var(--n-button-border-radius);
 border-bottom-left-radius: var(--n-button-border-radius);
 `)]),Z("&:last-child",`
 border-top-right-radius: var(--n-button-border-radius);
 border-bottom-right-radius: var(--n-button-border-radius);
 border-right: 1px solid var(--n-button-border-color);
 `,[q("state-border",`
 border-top-right-radius: var(--n-button-border-radius);
 border-bottom-right-radius: var(--n-button-border-radius);
 `)]),Pt("disabled",`
 cursor: pointer;
 `,[Z("&:hover",[q("state-border",`
 transition: box-shadow .3s var(--n-bezier);
 box-shadow: var(--n-button-box-shadow-hover);
 `),Pt("checked",{color:"var(--n-button-text-color-hover)"})]),ee("focus",[Z("&:not(:active)",[q("state-border",{boxShadow:"var(--n-button-box-shadow-focus)"})])])]),ee("checked",`
 background: var(--n-button-color-active);
 color: var(--n-button-text-color-active);
 border-color: var(--n-button-border-color-active);
 `),ee("disabled",`
 cursor: not-allowed;
 opacity: var(--n-opacity-disabled);
 `)])]);function W$(n,e,t){var r;const i=[];let o=!1;for(let s=0;s<n.length;++s){const a=n[s],l=(r=a.type)===null||r===void 0?void 0:r.name;l==="RadioButton"&&(o=!0);const d=a.props;if(l!=="RadioButton"){i.push(a);continue}if(s===0)i.push(a);else{const c=i[i.length-1].props,u=e===c.value,f=c.disabled,p=e===d.value,h=d.disabled,g=(u?2:0)+(f?0:1),m=(p?2:0)+(h?0:1),v={[`${t}-radio-group__splitor--disabled`]:f,[`${t}-radio-group__splitor--checked`]:u},b={[`${t}-radio-group__splitor--disabled`]:h,[`${t}-radio-group__splitor--checked`]:p},y=g<m?b:v;i.push(R("div",{class:[`${t}-radio-group__splitor`,y]}),a)}}return{children:i,isButtonGroup:o}}const j$=Object.assign(Object.assign({},Ke.props),{name:String,value:[String,Number,Boolean],defaultValue:{type:[String,Number,Boolean],default:null},size:String,disabled:{type:Boolean,default:void 0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array]}),K$=Ce({name:"RadioGroup",props:j$,setup(n){const e=G(null),{mergedSizeRef:t,mergedDisabledRef:r,nTriggerFormChange:i,nTriggerFormInput:o,nTriggerFormBlur:s,nTriggerFormFocus:a}=oo(n),{mergedClsPrefixRef:l,inlineThemeDisabled:d,mergedRtlRef:c}=yt(n),u=Ke("Radio","-radio-group",G$,mp,n,l),f=G(n.defaultValue),p=Ie(n,"value"),h=kn(p,f);function g(E){const{onUpdateValue:A,"onUpdate:value":S}=n;A&&we(A,E),S&&we(S,E),f.value=E,i(),o()}function m(E){const{value:A}=e;A&&(A.contains(E.relatedTarget)||a())}function v(E){const{value:A}=e;A&&(A.contains(E.relatedTarget)||s())}st(pC,{mergedClsPrefixRef:l,nameRef:Ie(n,"name"),valueRef:h,disabledRef:r,mergedSizeRef:t,doUpdateValue:g});const b=Dn("Radio",c,l),y=U(()=>{const{value:E}=t,{common:{cubicBezierEaseInOut:A},self:{buttonBorderColor:S,buttonBorderColorActive:w,buttonBorderRadius:T,buttonBoxShadow:C,buttonBoxShadowFocus:L,buttonBoxShadowHover:P,buttonColor:_,buttonColorActive:D,buttonTextColor:k,buttonTextColorActive:M,buttonTextColorHover:O,opacityDisabled:$,[xe("buttonHeight",E)]:K,[xe("fontSize",E)]:Y}}=u.value;return{"--n-font-size":Y,"--n-bezier":A,"--n-button-border-color":S,"--n-button-border-color-active":w,"--n-button-border-radius":T,"--n-button-box-shadow":C,"--n-button-box-shadow-focus":L,"--n-button-box-shadow-hover":P,"--n-button-color":_,"--n-button-color-active":D,"--n-button-text-color":k,"--n-button-text-color-hover":O,"--n-button-text-color-active":M,"--n-height":K,"--n-opacity-disabled":$}}),x=d?Gt("radio-group",U(()=>t.value[0]),y,n):void 0;return{selfElRef:e,rtlEnabled:b,mergedClsPrefix:l,mergedValue:h,handleFocusout:v,handleFocusin:m,cssVars:d?void 0:y,themeClass:x==null?void 0:x.themeClass,onRender:x==null?void 0:x.onRender}},render(){var n;const{mergedValue:e,mergedClsPrefix:t,handleFocusin:r,handleFocusout:i}=this,{children:o,isButtonGroup:s}=W$(Na(FL(this)),e,t);return(n=this.onRender)===null||n===void 0||n.call(this),R("div",{onFocusin:r,onFocusout:i,ref:"selfElRef",class:[`${t}-radio-group`,this.rtlEnabled&&`${t}-radio-group--rtl`,this.themeClass,s&&`${t}-radio-group--button-group`],style:this.cssVars},o)}}),q$=Ce({name:"DataTableBodyRadio",props:{rowKey:{type:[String,Number],required:!0},disabled:{type:Boolean,required:!0},onUpdateChecked:{type:Function,required:!0}},setup(n){const{mergedCheckedRowKeySetRef:e,componentId:t}=Be(_r);return()=>{const{rowKey:r}=n;return R(gC,{name:t,disabled:n.disabled,checked:e.value.has(r),onUpdateChecked:n.onUpdateChecked})}}}),Y$=Object.assign(Object.assign({},As),Ke.props),X$=Ce({name:"Tooltip",props:Y$,slots:Object,__popover__:!0,setup(n){const{mergedClsPrefixRef:e}=yt(n),t=Ke("Tooltip","-tooltip",void 0,iC,n,e),r=G(null);return Object.assign(Object.assign({},{syncPosition(){r.value.syncPosition()},setShow(o){r.value.setShow(o)}}),{popoverRef:r,mergedTheme:t,popoverThemeOverrides:U(()=>t.value.self)})},render(){const{mergedTheme:n,internalExtraClass:e}=this;return R(al,Object.assign(Object.assign({},this.$props),{theme:n.peers.Popover,themeOverrides:n.peerOverrides.Popover,builtinThemeOverrides:this.popoverThemeOverrides,internalExtraClass:e.concat("tooltip"),ref:"popoverRef"}),this.$slots)}}),mC=j("ellipsis",{overflow:"hidden"},[Pt("line-clamp",`
 white-space: nowrap;
 display: inline-block;
 vertical-align: bottom;
 max-width: 100%;
 `),ee("line-clamp",`
 display: -webkit-inline-box;
 -webkit-box-orient: vertical;
 `),ee("cursor-pointer",`
 cursor: pointer;
 `)]);function Of(n){return`${n}-ellipsis--line-clamp`}function Mf(n,e){return`${n}-ellipsis--cursor-${e}`}const vC=Object.assign(Object.assign({},Ke.props),{expandTrigger:String,lineClamp:[Number,String],tooltip:{type:[Boolean,Object],default:!0}}),vp=Ce({name:"Ellipsis",inheritAttrs:!1,props:vC,slots:Object,setup(n,{slots:e,attrs:t}){const r=_x(),i=Ke("Ellipsis","-ellipsis",mC,sC,n,r),o=G(null),s=G(null),a=G(null),l=G(!1),d=U(()=>{const{lineClamp:m}=n,{value:v}=l;return m!==void 0?{textOverflow:"","-webkit-line-clamp":v?"":m}:{textOverflow:v?"":"ellipsis","-webkit-line-clamp":""}});function c(){let m=!1;const{value:v}=l;if(v)return!0;const{value:b}=o;if(b){const{lineClamp:y}=n;if(p(b),y!==void 0)m=b.scrollHeight<=b.offsetHeight;else{const{value:x}=s;x&&(m=x.getBoundingClientRect().width<=b.getBoundingClientRect().width)}h(b,m)}return m}const u=U(()=>n.expandTrigger==="click"?()=>{var m;const{value:v}=l;v&&((m=a.value)===null||m===void 0||m.setShow(!1)),l.value=!v}:void 0);Xd(()=>{var m;n.tooltip&&((m=a.value)===null||m===void 0||m.setShow(!1))});const f=()=>R("span",Object.assign({},Ar(t,{class:[`${r.value}-ellipsis`,n.lineClamp!==void 0?Of(r.value):void 0,n.expandTrigger==="click"?Mf(r.value,"pointer"):void 0],style:d.value}),{ref:"triggerRef",onClick:u.value,onMouseenter:n.expandTrigger==="click"?c:void 0}),n.lineClamp?e:R("span",{ref:"triggerInnerRef"},e));function p(m){if(!m)return;const v=d.value,b=Of(r.value);n.lineClamp!==void 0?g(m,b,"add"):g(m,b,"remove");for(const y in v)m.style[y]!==v[y]&&(m.style[y]=v[y])}function h(m,v){const b=Mf(r.value,"pointer");n.expandTrigger==="click"&&!v?g(m,b,"add"):g(m,b,"remove")}function g(m,v,b){b==="add"?m.classList.contains(v)||m.classList.add(v):m.classList.contains(v)&&m.classList.remove(v)}return{mergedTheme:i,triggerRef:o,triggerInnerRef:s,tooltipRef:a,handleClick:u,renderTrigger:f,getTooltipDisabled:c}},render(){var n;const{tooltip:e,renderTrigger:t,$slots:r}=this;if(e){const{mergedTheme:i}=this;return R(X$,Object.assign({ref:"tooltipRef",placement:"top"},e,{getDisabled:this.getTooltipDisabled,theme:i.peers.Tooltip,themeOverrides:i.peerOverrides.Tooltip}),{trigger:t,default:(n=r.tooltip)!==null&&n!==void 0?n:r.default})}else return t()}}),Q$=Ce({name:"PerformantEllipsis",props:vC,inheritAttrs:!1,setup(n,{attrs:e,slots:t}){const r=G(!1),i=_x();return Vo("-ellipsis",mC,i),{mouseEntered:r,renderTrigger:()=>{const{lineClamp:s}=n,a=i.value;return R("span",Object.assign({},Ar(e,{class:[`${a}-ellipsis`,s!==void 0?Of(a):void 0,n.expandTrigger==="click"?Mf(a,"pointer"):void 0],style:s===void 0?{textOverflow:"ellipsis"}:{"-webkit-line-clamp":s}}),{onMouseenter:()=>{r.value=!0}}),s?t:R("span",null,t))}}},render(){return this.mouseEntered?R(vp,Ar({},this.$attrs,this.$props),this.$slots):this.renderTrigger()}}),Z$=Ce({name:"DataTableCell",props:{clsPrefix:{type:String,required:!0},row:{type:Object,required:!0},index:{type:Number,required:!0},column:{type:Object,required:!0},isSummary:Boolean,mergedTheme:{type:Object,required:!0},renderCell:Function},render(){var n;const{isSummary:e,column:t,row:r,renderCell:i}=this;let o;const{render:s,key:a,ellipsis:l}=t;if(s&&!e?o=s(r,this.index):e?o=(n=r[a])===null||n===void 0?void 0:n.value:o=i?i(Ha(r,a),r,t):Ha(r,a),l)if(typeof l=="object"){const{mergedTheme:d}=this;return t.ellipsisComponent==="performant-ellipsis"?R(Q$,Object.assign({},l,{theme:d.peers.Ellipsis,themeOverrides:d.peerOverrides.Ellipsis}),{default:()=>o}):R(vp,Object.assign({},l,{theme:d.peers.Ellipsis,themeOverrides:d.peerOverrides.Ellipsis}),{default:()=>o})}else return R("span",{class:`${this.clsPrefix}-data-table-td__ellipsis`},o);return o}}),Iv=Ce({name:"DataTableExpandTrigger",props:{clsPrefix:{type:String,required:!0},expanded:Boolean,loading:Boolean,onClick:{type:Function,required:!0},renderExpandIcon:{type:Function},rowData:{type:Object,required:!0}},render(){const{clsPrefix:n}=this;return R("div",{class:[`${n}-data-table-expand-trigger`,this.expanded&&`${n}-data-table-expand-trigger--expanded`],onClick:this.onClick,onMousedown:e=>{e.preventDefault()}},R(Go,null,{default:()=>this.loading?R(ao,{key:"loading",clsPrefix:this.clsPrefix,radius:85,strokeWidth:15,scale:.88}):this.renderExpandIcon?this.renderExpandIcon({expanded:this.expanded,rowData:this.rowData}):R(on,{clsPrefix:n,key:"base-icon"},{default:()=>R(lS,null)})}))}}),J$=Ce({name:"DataTableFilterMenu",props:{column:{type:Object,required:!0},radioGroupName:{type:String,required:!0},multiple:{type:Boolean,required:!0},value:{type:[Array,String,Number],default:null},options:{type:Array,required:!0},onConfirm:{type:Function,required:!0},onClear:{type:Function,required:!0},onChange:{type:Function,required:!0}},setup(n){const{mergedClsPrefixRef:e,mergedRtlRef:t}=yt(n),r=Dn("DataTable",t,e),{mergedClsPrefixRef:i,mergedThemeRef:o,localeRef:s}=Be(_r),a=G(n.value),l=U(()=>{const{value:h}=a;return Array.isArray(h)?h:null}),d=U(()=>{const{value:h}=a;return vu(n.column)?Array.isArray(h)&&h.length&&h[0]||null:Array.isArray(h)?null:h});function c(h){n.onChange(h)}function u(h){n.multiple&&Array.isArray(h)?a.value=h:vu(n.column)&&!Array.isArray(h)?a.value=[h]:a.value=h}function f(){c(a.value),n.onConfirm()}function p(){n.multiple||vu(n.column)?c([]):c(null),n.onClear()}return{mergedClsPrefix:i,rtlEnabled:r,mergedTheme:o,locale:s,checkboxGroupValue:l,radioGroupValue:d,handleChange:u,handleConfirmClick:f,handleClearClick:p}},render(){const{mergedTheme:n,locale:e,mergedClsPrefix:t}=this;return R("div",{class:[`${t}-data-table-filter-menu`,this.rtlEnabled&&`${t}-data-table-filter-menu--rtl`]},R(Ms,null,{default:()=>{const{checkboxGroupValue:r,handleChange:i}=this;return this.multiple?R(JF,{value:r,class:`${t}-data-table-filter-menu__group`,onUpdateValue:i},{default:()=>this.options.map(o=>R(fp,{key:o.value,theme:n.peers.Checkbox,themeOverrides:n.peerOverrides.Checkbox,value:o.value},{default:()=>o.label}))}):R(K$,{name:this.radioGroupName,class:`${t}-data-table-filter-menu__group`,value:this.radioGroupValue,onUpdateValue:this.handleChange},{default:()=>this.options.map(o=>R(gC,{key:o.value,value:o.value,theme:n.peers.Radio,themeOverrides:n.peerOverrides.Radio},{default:()=>o.label}))})}}),R("div",{class:`${t}-data-table-filter-menu__action`},R(zn,{size:"tiny",theme:n.peers.Button,themeOverrides:n.peerOverrides.Button,onClick:this.handleClearClick},{default:()=>e.clear}),R(zn,{theme:n.peers.Button,themeOverrides:n.peerOverrides.Button,type:"primary",size:"tiny",onClick:this.handleConfirmClick},{default:()=>e.confirm})))}}),e2=Ce({name:"DataTableRenderFilter",props:{render:{type:Function,required:!0},active:{type:Boolean,default:!1},show:{type:Boolean,default:!1}},render(){const{render:n,active:e,show:t}=this;return n({active:e,show:t})}});function t2(n,e,t){const r=Object.assign({},n);return r[e]=t,r}const n2=Ce({name:"DataTableFilterButton",props:{column:{type:Object,required:!0},options:{type:Array,default:()=>[]}},setup(n){const{mergedComponentPropsRef:e}=yt(),{mergedThemeRef:t,mergedClsPrefixRef:r,mergedFilterStateRef:i,filterMenuCssVarsRef:o,paginationBehaviorOnFilterRef:s,doUpdatePage:a,doUpdateFilters:l,filterIconPopoverPropsRef:d}=Be(_r),c=G(!1),u=i,f=U(()=>n.column.filterMultiple!==!1),p=U(()=>{const y=u.value[n.column.key];if(y===void 0){const{value:x}=f;return x?[]:null}return y}),h=U(()=>{const{value:y}=p;return Array.isArray(y)?y.length>0:y!==null}),g=U(()=>{var y,x;return((x=(y=e==null?void 0:e.value)===null||y===void 0?void 0:y.DataTable)===null||x===void 0?void 0:x.renderFilter)||n.column.renderFilter});function m(y){const x=t2(u.value,n.column.key,y);l(x,n.column),s.value==="first"&&a(1)}function v(){c.value=!1}function b(){c.value=!1}return{mergedTheme:t,mergedClsPrefix:r,active:h,showPopover:c,mergedRenderFilter:g,filterIconPopoverProps:d,filterMultiple:f,mergedFilterValue:p,filterMenuCssVars:o,handleFilterChange:m,handleFilterMenuConfirm:b,handleFilterMenuCancel:v}},render(){const{mergedTheme:n,mergedClsPrefix:e,handleFilterMenuCancel:t,filterIconPopoverProps:r}=this;return R(al,Object.assign({show:this.showPopover,onUpdateShow:i=>this.showPopover=i,trigger:"click",theme:n.peers.Popover,themeOverrides:n.peerOverrides.Popover,placement:"bottom"},r,{style:{padding:0}}),{trigger:()=>{const{mergedRenderFilter:i}=this;if(i)return R(e2,{"data-data-table-filter":!0,render:i,active:this.active,show:this.showPopover});const{renderFilterIcon:o}=this.column;return R("div",{"data-data-table-filter":!0,class:[`${e}-data-table-filter`,{[`${e}-data-table-filter--active`]:this.active,[`${e}-data-table-filter--show`]:this.showPopover}]},o?o({active:this.active,show:this.showPopover}):R(on,{clsPrefix:e},{default:()=>R(QO,null)}))},default:()=>{const{renderFilterMenu:i}=this.column;return i?i({hide:t}):R(J$,{style:this.filterMenuCssVars,radioGroupName:String(this.column.key),multiple:this.filterMultiple,value:this.mergedFilterValue,options:this.options,column:this.column,onChange:this.handleFilterChange,onClear:this.handleFilterMenuCancel,onConfirm:this.handleFilterMenuConfirm})}})}}),r2=Ce({name:"ColumnResizeButton",props:{onResizeStart:Function,onResize:Function,onResizeEnd:Function},setup(n){const{mergedClsPrefixRef:e}=Be(_r),t=G(!1);let r=0;function i(l){return l.clientX}function o(l){var d;l.preventDefault();const c=t.value;r=i(l),t.value=!0,c||(Tt("mousemove",window,s),Tt("mouseup",window,a),(d=n.onResizeStart)===null||d===void 0||d.call(n))}function s(l){var d;(d=n.onResize)===null||d===void 0||d.call(n,i(l)-r)}function a(){var l;t.value=!1,(l=n.onResizeEnd)===null||l===void 0||l.call(n),bt("mousemove",window,s),bt("mouseup",window,a)}return jt(()=>{bt("mousemove",window,s),bt("mouseup",window,a)}),{mergedClsPrefix:e,active:t,handleMousedown:o}},render(){const{mergedClsPrefix:n}=this;return R("span",{"data-data-table-resizable":!0,class:[`${n}-data-table-resize-button`,this.active&&`${n}-data-table-resize-button--active`],onMousedown:this.handleMousedown})}}),i2=Ce({name:"DataTableRenderSorter",props:{render:{type:Function,required:!0},order:{type:[String,Boolean],default:!1}},render(){const{render:n,order:e}=this;return n({order:e})}}),o2=Ce({name:"SortIcon",props:{column:{type:Object,required:!0}},setup(n){const{mergedComponentPropsRef:e}=yt(),{mergedSortStateRef:t,mergedClsPrefixRef:r}=Be(_r),i=U(()=>t.value.find(l=>l.columnKey===n.column.key)),o=U(()=>i.value!==void 0),s=U(()=>{const{value:l}=i;return l&&o.value?l.order:!1}),a=U(()=>{var l,d;return((d=(l=e==null?void 0:e.value)===null||l===void 0?void 0:l.DataTable)===null||d===void 0?void 0:d.renderSorter)||n.column.renderSorter});return{mergedClsPrefix:r,active:o,mergedSortOrder:s,mergedRenderSorter:a}},render(){const{mergedRenderSorter:n,mergedSortOrder:e,mergedClsPrefix:t}=this,{renderSorterIcon:r}=this.column;return n?R(i2,{render:n,order:e}):R("span",{class:[`${t}-data-table-sorter`,e==="ascend"&&`${t}-data-table-sorter--asc`,e==="descend"&&`${t}-data-table-sorter--desc`]},r?r({order:e}):R(on,{clsPrefix:t},{default:()=>R(GO,null)}))}}),bp="n-dropdown-menu",vc="n-dropdown",Lv="n-dropdown-option",bC=Ce({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return R("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),s2=Ce({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:n,hasSubmenuRef:e}=Be(bp),{renderLabelRef:t,labelFieldRef:r,nodePropsRef:i,renderOptionRef:o}=Be(vc);return{labelField:r,showIcon:n,hasSubmenu:e,renderLabel:t,nodeProps:i,renderOption:o}},render(){var n;const{clsPrefix:e,hasSubmenu:t,showIcon:r,nodeProps:i,renderLabel:o,renderOption:s}=this,{rawNode:a}=this.tmNode,l=R("div",Object.assign({class:`${e}-dropdown-option`},i==null?void 0:i(a)),R("div",{class:`${e}-dropdown-option-body ${e}-dropdown-option-body--group`},R("div",{"data-dropdown-option":!0,class:[`${e}-dropdown-option-body__prefix`,r&&`${e}-dropdown-option-body__prefix--show-icon`]},gn(a.icon)),R("div",{class:`${e}-dropdown-option-body__label`,"data-dropdown-option":!0},o?o(a):gn((n=a.title)!==null&&n!==void 0?n:a[this.labelField])),R("div",{class:[`${e}-dropdown-option-body__suffix`,t&&`${e}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return s?s({node:l,option:a}):l}});function yC(n){const{textColorBase:e,opacity1:t,opacity2:r,opacity3:i,opacity4:o,opacity5:s}=n;return{color:e,opacity1Depth:t,opacity2Depth:r,opacity3Depth:i,opacity4Depth:o,opacity5Depth:s}}const a2={name:"Icon",common:Ht,self:yC},l2={name:"Icon",common:Re,self:yC},d2=j("icon",`
 height: 1em;
 width: 1em;
 line-height: 1em;
 text-align: center;
 display: inline-block;
 position: relative;
 fill: currentColor;
`,[ee("color-transition",{transition:"color .3s var(--n-bezier)"}),ee("depth",{color:"var(--n-color)"},[Z("svg",{opacity:"var(--n-opacity)",transition:"opacity .3s var(--n-bezier)"})]),Z("svg",{height:"1em",width:"1em"})]),c2=Object.assign(Object.assign({},Ke.props),{depth:[String,Number],size:[Number,String],color:String,component:[Object,Function]}),u2=Ce({_n_icon__:!0,name:"Icon",inheritAttrs:!1,props:c2,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=yt(n),r=Ke("Icon","-icon",d2,a2,n,e),i=U(()=>{const{depth:s}=n,{common:{cubicBezierEaseInOut:a},self:l}=r.value;if(s!==void 0){const{color:d,[`opacity${s}Depth`]:c}=l;return{"--n-bezier":a,"--n-color":d,"--n-opacity":c}}return{"--n-bezier":a,"--n-color":"","--n-opacity":""}}),o=t?Gt("icon",U(()=>`${n.depth||"d"}`),i,n):void 0;return{mergedClsPrefix:e,mergedStyle:U(()=>{const{size:s,color:a}=n;return{fontSize:an(s),color:a}}),cssVars:t?void 0:i,themeClass:o==null?void 0:o.themeClass,onRender:o==null?void 0:o.onRender}},render(){var n;const{$parent:e,depth:t,mergedClsPrefix:r,component:i,onRender:o,themeClass:s}=this;return!((n=e==null?void 0:e.$options)===null||n===void 0)&&n._n_icon__&&Lr("icon","don't wrap `n-icon` inside `n-icon`"),o==null||o(),R("i",Ar(this.$attrs,{role:"img",class:[`${r}-icon`,s,{[`${r}-icon--depth`]:t,[`${r}-icon--color-transition`]:t!==void 0}],style:[this.cssVars,this.mergedStyle]}),i?R(i):this.$slots)}});function Ff(n,e){return n.type==="submenu"||n.type===void 0&&n[e]!==void 0}function f2(n){return n.type==="group"}function xC(n){return n.type==="divider"}function h2(n){return n.type==="render"}const SC=Ce({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(n){const e=Be(vc),{hoverKeyRef:t,keyboardKeyRef:r,lastToggledSubmenuKeyRef:i,pendingKeyPathRef:o,activeKeyPathRef:s,animatedRef:a,mergedShowRef:l,renderLabelRef:d,renderIconRef:c,labelFieldRef:u,childrenFieldRef:f,renderOptionRef:p,nodePropsRef:h,menuPropsRef:g}=e,m=Be(Lv,null),v=Be(bp),b=Be(tl),y=U(()=>n.tmNode.rawNode),x=U(()=>{const{value:O}=f;return Ff(n.tmNode.rawNode,O)}),E=U(()=>{const{disabled:O}=n.tmNode;return O}),A=U(()=>{if(!x.value)return!1;const{key:O,disabled:$}=n.tmNode;if($)return!1;const{value:K}=t,{value:Y}=r,{value:H}=i,{value:B}=o;return K!==null?B.includes(O):Y!==null?B.includes(O)&&B[B.length-1]!==O:H!==null?B.includes(O):!1}),S=U(()=>r.value===null&&!a.value),w=FI(A,300,S),T=U(()=>!!(m!=null&&m.enteringSubmenuRef.value)),C=G(!1);st(Lv,{enteringSubmenuRef:C});function L(){C.value=!0}function P(){C.value=!1}function _(){const{parentKey:O,tmNode:$}=n;$.disabled||l.value&&(i.value=O,r.value=null,t.value=$.key)}function D(){const{tmNode:O}=n;O.disabled||l.value&&t.value!==O.key&&_()}function k(O){if(n.tmNode.disabled||!l.value)return;const{relatedTarget:$}=O;$&&!hr({target:$},"dropdownOption")&&!hr({target:$},"scrollbarRail")&&(t.value=null)}function M(){const{value:O}=x,{tmNode:$}=n;l.value&&!O&&!$.disabled&&(e.doSelect($.key,$.rawNode),e.doUpdateShow(!1))}return{labelField:u,renderLabel:d,renderIcon:c,siblingHasIcon:v.showIconRef,siblingHasSubmenu:v.hasSubmenuRef,menuProps:g,popoverBody:b,animated:a,mergedShowSubmenu:U(()=>w.value&&!T.value),rawNode:y,hasSubmenu:x,pending:At(()=>{const{value:O}=o,{key:$}=n.tmNode;return O.includes($)}),childActive:At(()=>{const{value:O}=s,{key:$}=n.tmNode,K=O.findIndex(Y=>$===Y);return K===-1?!1:K<O.length-1}),active:At(()=>{const{value:O}=s,{key:$}=n.tmNode,K=O.findIndex(Y=>$===Y);return K===-1?!1:K===O.length-1}),mergedDisabled:E,renderOption:p,nodeProps:h,handleClick:M,handleMouseMove:D,handleMouseEnter:_,handleMouseLeave:k,handleSubmenuBeforeEnter:L,handleSubmenuAfterEnter:P}},render(){var n,e;const{animated:t,rawNode:r,mergedShowSubmenu:i,clsPrefix:o,siblingHasIcon:s,siblingHasSubmenu:a,renderLabel:l,renderIcon:d,renderOption:c,nodeProps:u,props:f,scrollable:p}=this;let h=null;if(i){const b=(n=this.menuProps)===null||n===void 0?void 0:n.call(this,r,r.children);h=R(CC,Object.assign({},b,{clsPrefix:o,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const g={class:[`${o}-dropdown-option-body`,this.pending&&`${o}-dropdown-option-body--pending`,this.active&&`${o}-dropdown-option-body--active`,this.childActive&&`${o}-dropdown-option-body--child-active`,this.mergedDisabled&&`${o}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},m=u==null?void 0:u(r),v=R("div",Object.assign({class:[`${o}-dropdown-option`,m==null?void 0:m.class],"data-dropdown-option":!0},m),R("div",Ar(g,f),[R("div",{class:[`${o}-dropdown-option-body__prefix`,s&&`${o}-dropdown-option-body__prefix--show-icon`]},[d?d(r):gn(r.icon)]),R("div",{"data-dropdown-option":!0,class:`${o}-dropdown-option-body__label`},l?l(r):gn((e=r[this.labelField])!==null&&e!==void 0?e:r.title)),R("div",{"data-dropdown-option":!0,class:[`${o}-dropdown-option-body__suffix`,a&&`${o}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?R(u2,null,{default:()=>R(lS,null)}):null)]),this.hasSubmenu?R(zh,null,{default:()=>[R(Uh,null,{default:()=>R("div",{class:`${o}-dropdown-offset-container`},R(Gh,{show:this.mergedShowSubmenu,placement:this.placement,to:p&&this.popoverBody||void 0,teleportDisabled:!p},{default:()=>R("div",{class:`${o}-dropdown-menu-wrapper`},t?R(ir,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>h}):h)}))})]}):null);return c?c({node:v,option:r}):v}}),p2=Ce({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:n,parentKey:e,clsPrefix:t}=this,{children:r}=n;return R(mt,null,R(s2,{clsPrefix:t,tmNode:n,key:n.key}),r==null?void 0:r.map(i=>{const{rawNode:o}=i;return o.show===!1?null:xC(o)?R(bC,{clsPrefix:t,key:i.key}):i.isGroup?(Lr("dropdown","`group` node is not allowed to be put in `group` node."),null):R(SC,{clsPrefix:t,tmNode:i,parentKey:e,key:i.key})}))}}),g2=Ce({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:n,props:e}}=this.tmNode;return R("div",e,[n==null?void 0:n()])}}),CC=Ce({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(n){const{renderIconRef:e,childrenFieldRef:t}=Be(vc);st(bp,{showIconRef:U(()=>{const i=e.value;return n.tmNodes.some(o=>{var s;if(o.isGroup)return(s=o.children)===null||s===void 0?void 0:s.some(({rawNode:l})=>i?i(l):l.icon);const{rawNode:a}=o;return i?i(a):a.icon})}),hasSubmenuRef:U(()=>{const{value:i}=t;return n.tmNodes.some(o=>{var s;if(o.isGroup)return(s=o.children)===null||s===void 0?void 0:s.some(({rawNode:l})=>Ff(l,i));const{rawNode:a}=o;return Ff(a,i)})})});const r=G(null);return st(ac,null),st(sc,null),st(tl,r),{bodyRef:r}},render(){const{parentKey:n,clsPrefix:e,scrollable:t}=this,r=this.tmNodes.map(i=>{const{rawNode:o}=i;return o.show===!1?null:h2(o)?R(g2,{tmNode:i,key:i.key}):xC(o)?R(bC,{clsPrefix:e,key:i.key}):f2(o)?R(p2,{clsPrefix:e,tmNode:i,parentKey:n,key:i.key}):R(SC,{clsPrefix:e,tmNode:i,parentKey:n,key:i.key,props:o.props,scrollable:t})});return R("div",{class:[`${e}-dropdown-menu`,t&&`${e}-dropdown-menu--scrollable`],ref:"bodyRef"},t?R(mS,{contentClass:`${e}-dropdown-menu__content`},{default:()=>r}):r,this.showArrow?wS({clsPrefix:e,arrowStyle:this.arrowStyle,arrowClass:void 0,arrowWrapperClass:void 0,arrowWrapperStyle:void 0}):null)}}),m2=j("dropdown-menu",`
 transform-origin: var(--v-transform-origin);
 background-color: var(--n-color);
 border-radius: var(--n-border-radius);
 box-shadow: var(--n-box-shadow);
 position: relative;
 transition:
 background-color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
`,[sl(),j("dropdown-option",`
 position: relative;
 `,[Z("a",`
 text-decoration: none;
 color: inherit;
 outline: none;
 `,[Z("&::before",`
 content: "";
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `)]),j("dropdown-option-body",`
 display: flex;
 cursor: pointer;
 position: relative;
 height: var(--n-option-height);
 line-height: var(--n-option-height);
 font-size: var(--n-font-size);
 color: var(--n-option-text-color);
 transition: color .3s var(--n-bezier);
 `,[Z("&::before",`
 content: "";
 position: absolute;
 top: 0;
 bottom: 0;
 left: 4px;
 right: 4px;
 transition: background-color .3s var(--n-bezier);
 border-radius: var(--n-border-radius);
 `),Pt("disabled",[ee("pending",`
 color: var(--n-option-text-color-hover);
 `,[q("prefix, suffix",`
 color: var(--n-option-text-color-hover);
 `),Z("&::before","background-color: var(--n-option-color-hover);")]),ee("active",`
 color: var(--n-option-text-color-active);
 `,[q("prefix, suffix",`
 color: var(--n-option-text-color-active);
 `),Z("&::before","background-color: var(--n-option-color-active);")]),ee("child-active",`
 color: var(--n-option-text-color-child-active);
 `,[q("prefix, suffix",`
 color: var(--n-option-text-color-child-active);
 `)])]),ee("disabled",`
 cursor: not-allowed;
 opacity: var(--n-option-opacity-disabled);
 `),ee("group",`
 font-size: calc(var(--n-font-size) - 1px);
 color: var(--n-group-header-text-color);
 `,[q("prefix",`
 width: calc(var(--n-option-prefix-width) / 2);
 `,[ee("show-icon",`
 width: calc(var(--n-option-icon-prefix-width) / 2);
 `)])]),q("prefix",`
 width: var(--n-option-prefix-width);
 display: flex;
 justify-content: center;
 align-items: center;
 color: var(--n-prefix-color);
 transition: color .3s var(--n-bezier);
 z-index: 1;
 `,[ee("show-icon",`
 width: var(--n-option-icon-prefix-width);
 `),j("icon",`
 font-size: var(--n-option-icon-size);
 `)]),q("label",`
 white-space: nowrap;
 flex: 1;
 z-index: 1;
 `),q("suffix",`
 box-sizing: border-box;
 flex-grow: 0;
 flex-shrink: 0;
 display: flex;
 justify-content: flex-end;
 align-items: center;
 min-width: var(--n-option-suffix-width);
 padding: 0 8px;
 transition: color .3s var(--n-bezier);
 color: var(--n-suffix-color);
 z-index: 1;
 `,[ee("has-submenu",`
 width: var(--n-option-icon-suffix-width);
 `),j("icon",`
 font-size: var(--n-option-icon-size);
 `)]),j("dropdown-menu","pointer-events: all;")]),j("dropdown-offset-container",`
 pointer-events: none;
 position: absolute;
 left: 0;
 right: 0;
 top: -4px;
 bottom: -4px;
 `)]),j("dropdown-divider",`
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-divider-color);
 height: 1px;
 margin: 4px 0;
 `),j("dropdown-menu-wrapper",`
 transform-origin: var(--v-transform-origin);
 width: fit-content;
 `),Z(">",[j("scrollbar",`
 height: inherit;
 max-height: inherit;
 `)]),Pt("scrollable",`
 padding: var(--n-padding);
 `),ee("scrollable",[q("content",`
 padding: var(--n-padding);
 `)])]),v2={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},b2=Object.keys(As),y2=Object.assign(Object.assign(Object.assign({},As),v2),Ke.props),x2=Ce({name:"Dropdown",inheritAttrs:!1,props:y2,setup(n){const e=G(!1),t=kn(Ie(n,"show"),e),r=U(()=>{const{keyField:P,childrenField:_}=n;return pc(n.options,{getKey(D){return D[P]},getDisabled(D){return D.disabled===!0},getIgnored(D){return D.type==="divider"||D.type==="render"},getChildren(D){return D[_]}})}),i=U(()=>r.value.treeNodes),o=G(null),s=G(null),a=G(null),l=U(()=>{var P,_,D;return(D=(_=(P=o.value)!==null&&P!==void 0?P:s.value)!==null&&_!==void 0?_:a.value)!==null&&D!==void 0?D:null}),d=U(()=>r.value.getPath(l.value).keyPath),c=U(()=>r.value.getPath(n.value).keyPath),u=At(()=>n.keyboard&&t.value);DI({keydown:{ArrowUp:{prevent:!0,handler:E},ArrowRight:{prevent:!0,handler:x},ArrowDown:{prevent:!0,handler:A},ArrowLeft:{prevent:!0,handler:y},Enter:{prevent:!0,handler:S},Escape:b}},u);const{mergedClsPrefixRef:f,inlineThemeDisabled:p}=yt(n),h=Ke("Dropdown","-dropdown",m2,nC,n,f);st(vc,{labelFieldRef:Ie(n,"labelField"),childrenFieldRef:Ie(n,"childrenField"),renderLabelRef:Ie(n,"renderLabel"),renderIconRef:Ie(n,"renderIcon"),hoverKeyRef:o,keyboardKeyRef:s,lastToggledSubmenuKeyRef:a,pendingKeyPathRef:d,activeKeyPathRef:c,animatedRef:Ie(n,"animated"),mergedShowRef:t,nodePropsRef:Ie(n,"nodeProps"),renderOptionRef:Ie(n,"renderOption"),menuPropsRef:Ie(n,"menuProps"),doSelect:g,doUpdateShow:m}),at(t,P=>{!n.animated&&!P&&v()});function g(P,_){const{onSelect:D}=n;D&&we(D,P,_)}function m(P){const{"onUpdate:show":_,onUpdateShow:D}=n;_&&we(_,P),D&&we(D,P),e.value=P}function v(){o.value=null,s.value=null,a.value=null}function b(){m(!1)}function y(){T("left")}function x(){T("right")}function E(){T("up")}function A(){T("down")}function S(){const P=w();P!=null&&P.isLeaf&&t.value&&(g(P.key,P.rawNode),m(!1))}function w(){var P;const{value:_}=r,{value:D}=l;return!_||D===null?null:(P=_.getNode(D))!==null&&P!==void 0?P:null}function T(P){const{value:_}=l,{value:{getFirstAvailableNode:D}}=r;let k=null;if(_===null){const M=D();M!==null&&(k=M.key)}else{const M=w();if(M){let O;switch(P){case"down":O=M.getNext();break;case"up":O=M.getPrev();break;case"right":O=M.getChild();break;case"left":O=M.getParent();break}O&&(k=O.key)}}k!==null&&(o.value=null,s.value=k)}const C=U(()=>{const{size:P,inverted:_}=n,{common:{cubicBezierEaseInOut:D},self:k}=h.value,{padding:M,dividerColor:O,borderRadius:$,optionOpacityDisabled:K,[xe("optionIconSuffixWidth",P)]:Y,[xe("optionSuffixWidth",P)]:H,[xe("optionIconPrefixWidth",P)]:B,[xe("optionPrefixWidth",P)]:X,[xe("fontSize",P)]:se,[xe("optionHeight",P)]:pe,[xe("optionIconSize",P)]:te}=k,W={"--n-bezier":D,"--n-font-size":se,"--n-padding":M,"--n-border-radius":$,"--n-option-height":pe,"--n-option-prefix-width":X,"--n-option-icon-prefix-width":B,"--n-option-suffix-width":H,"--n-option-icon-suffix-width":Y,"--n-option-icon-size":te,"--n-divider-color":O,"--n-option-opacity-disabled":K};return _?(W["--n-color"]=k.colorInverted,W["--n-option-color-hover"]=k.optionColorHoverInverted,W["--n-option-color-active"]=k.optionColorActiveInverted,W["--n-option-text-color"]=k.optionTextColorInverted,W["--n-option-text-color-hover"]=k.optionTextColorHoverInverted,W["--n-option-text-color-active"]=k.optionTextColorActiveInverted,W["--n-option-text-color-child-active"]=k.optionTextColorChildActiveInverted,W["--n-prefix-color"]=k.prefixColorInverted,W["--n-suffix-color"]=k.suffixColorInverted,W["--n-group-header-text-color"]=k.groupHeaderTextColorInverted):(W["--n-color"]=k.color,W["--n-option-color-hover"]=k.optionColorHover,W["--n-option-color-active"]=k.optionColorActive,W["--n-option-text-color"]=k.optionTextColor,W["--n-option-text-color-hover"]=k.optionTextColorHover,W["--n-option-text-color-active"]=k.optionTextColorActive,W["--n-option-text-color-child-active"]=k.optionTextColorChildActive,W["--n-prefix-color"]=k.prefixColor,W["--n-suffix-color"]=k.suffixColor,W["--n-group-header-text-color"]=k.groupHeaderTextColor),W}),L=p?Gt("dropdown",U(()=>`${n.size[0]}${n.inverted?"i":""}`),C,n):void 0;return{mergedClsPrefix:f,mergedTheme:h,tmNodes:i,mergedShow:t,handleAfterLeave:()=>{n.animated&&v()},doUpdateShow:m,cssVars:p?void 0:C,themeClass:L==null?void 0:L.themeClass,onRender:L==null?void 0:L.onRender}},render(){const n=(r,i,o,s,a)=>{var l;const{mergedClsPrefix:d,menuProps:c}=this;(l=this.onRender)===null||l===void 0||l.call(this);const u=(c==null?void 0:c(void 0,this.tmNodes.map(p=>p.rawNode)))||{},f={ref:Px(i),class:[r,`${d}-dropdown`,this.themeClass],clsPrefix:d,tmNodes:this.tmNodes,style:[...o,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:s,onMouseleave:a};return R(CC,Ar(this.$attrs,f,u))},{mergedTheme:e}=this,t={show:this.mergedShow,theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:n,onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return R(al,Object.assign({},Do(this.$props,b2),t),{trigger:()=>{var r,i;return(i=(r=this.$slots).default)===null||i===void 0?void 0:i.call(r)}})}}),TC="_n_all__",wC="_n_none__";function S2(n,e,t,r){return n?i=>{for(const o of n)switch(i){case TC:t(!0);return;case wC:r(!0);return;default:if(typeof o=="object"&&o.key===i){o.onSelect(e.value);return}}}:()=>{}}function C2(n,e){return n?n.map(t=>{switch(t){case"all":return{label:e.checkTableAll,key:TC};case"none":return{label:e.uncheckTableAll,key:wC};default:return t}}):[]}const T2=Ce({name:"DataTableSelectionMenu",props:{clsPrefix:{type:String,required:!0}},setup(n){const{props:e,localeRef:t,checkOptionsRef:r,rawPaginatedDataRef:i,doCheckAll:o,doUncheckAll:s}=Be(_r),a=U(()=>S2(r.value,i,o,s)),l=U(()=>C2(r.value,t.value));return()=>{var d,c,u,f;const{clsPrefix:p}=n;return R(x2,{theme:(c=(d=e.theme)===null||d===void 0?void 0:d.peers)===null||c===void 0?void 0:c.Dropdown,themeOverrides:(f=(u=e.themeOverrides)===null||u===void 0?void 0:u.peers)===null||f===void 0?void 0:f.Dropdown,options:l.value,onSelect:a.value},{default:()=>R(on,{clsPrefix:p,class:`${p}-data-table-check-extra`},{default:()=>R(aS,null)})})}}});function yu(n){return typeof n.title=="function"?n.title(n):n.title}const w2=Ce({props:{clsPrefix:{type:String,required:!0},id:{type:String,required:!0},cols:{type:Array,required:!0},width:String},render(){const{clsPrefix:n,id:e,cols:t,width:r}=this;return R("table",{style:{tableLayout:"fixed",width:r},class:`${n}-data-table-table`},R("colgroup",null,t.map(i=>R("col",{key:i.key,style:i.style}))),R("thead",{"data-n-id":e,class:`${n}-data-table-thead`},this.$slots))}}),EC=Ce({name:"DataTableHeader",props:{discrete:{type:Boolean,default:!0}},setup(){const{mergedClsPrefixRef:n,scrollXRef:e,fixedColumnLeftMapRef:t,fixedColumnRightMapRef:r,mergedCurrentPageRef:i,allRowsCheckedRef:o,someRowsCheckedRef:s,rowsRef:a,colsRef:l,mergedThemeRef:d,checkOptionsRef:c,mergedSortStateRef:u,componentId:f,mergedTableLayoutRef:p,headerCheckboxDisabledRef:h,virtualScrollHeaderRef:g,headerHeightRef:m,onUnstableColumnResize:v,doUpdateResizableWidth:b,handleTableHeaderScroll:y,deriveNextSorter:x,doUncheckAll:E,doCheckAll:A}=Be(_r),S=G(),w=G({});function T(k){const M=w.value[k];return M==null?void 0:M.getBoundingClientRect().width}function C(){o.value?E():A()}function L(k,M){if(hr(k,"dataTableFilter")||hr(k,"dataTableResizable")||!bu(M))return;const O=u.value.find(K=>K.columnKey===M.key)||null,$=F$(M,O);x($)}const P=new Map;function _(k){P.set(k.key,T(k.key))}function D(k,M){const O=P.get(k.key);if(O===void 0)return;const $=O+M,K=D$($,k.minWidth,k.maxWidth);v($,K,k,T),b(k,K)}return{cellElsRef:w,componentId:f,mergedSortState:u,mergedClsPrefix:n,scrollX:e,fixedColumnLeftMap:t,fixedColumnRightMap:r,currentPage:i,allRowsChecked:o,someRowsChecked:s,rows:a,cols:l,mergedTheme:d,checkOptions:c,mergedTableLayout:p,headerCheckboxDisabled:h,headerHeight:m,virtualScrollHeader:g,virtualListRef:S,handleCheckboxUpdateChecked:C,handleColHeaderClick:L,handleTableHeaderScroll:y,handleColumnResizeStart:_,handleColumnResize:D}},render(){const{cellElsRef:n,mergedClsPrefix:e,fixedColumnLeftMap:t,fixedColumnRightMap:r,currentPage:i,allRowsChecked:o,someRowsChecked:s,rows:a,cols:l,mergedTheme:d,checkOptions:c,componentId:u,discrete:f,mergedTableLayout:p,headerCheckboxDisabled:h,mergedSortState:g,virtualScrollHeader:m,handleColHeaderClick:v,handleCheckboxUpdateChecked:b,handleColumnResizeStart:y,handleColumnResize:x}=this,E=(T,C,L)=>T.map(({column:P,colIndex:_,colSpan:D,rowSpan:k,isLast:M})=>{var O,$;const K=yr(P),{ellipsis:Y}=P,H=()=>P.type==="selection"?P.multiple!==!1?R(mt,null,R(fp,{key:i,privateInsideTable:!0,checked:o,indeterminate:s,disabled:h,onUpdateChecked:b}),c?R(T2,{clsPrefix:e}):null):null:R(mt,null,R("div",{class:`${e}-data-table-th__title-wrapper`},R("div",{class:`${e}-data-table-th__title`},Y===!0||Y&&!Y.tooltip?R("div",{class:`${e}-data-table-th__ellipsis`},yu(P)):Y&&typeof Y=="object"?R(vp,Object.assign({},Y,{theme:d.peers.Ellipsis,themeOverrides:d.peerOverrides.Ellipsis}),{default:()=>yu(P)}):yu(P)),bu(P)?R(o2,{column:P}):null),Rv(P)?R(n2,{column:P,options:P.filterOptions}):null,fC(P)?R(r2,{onResizeStart:()=>{y(P)},onResize:pe=>{x(P,pe)}}):null),B=K in t,X=K in r,se=C&&!P.fixed?"div":"th";return R(se,{ref:pe=>n[K]=pe,key:K,style:[C&&!P.fixed?{position:"absolute",left:Zt(C(_)),top:0,bottom:0}:{left:Zt((O=t[K])===null||O===void 0?void 0:O.start),right:Zt(($=r[K])===null||$===void 0?void 0:$.start)},{width:Zt(P.width),textAlign:P.titleAlign||P.align,height:L}],colspan:D,rowspan:k,"data-col-key":K,class:[`${e}-data-table-th`,(B||X)&&`${e}-data-table-th--fixed-${B?"left":"right"}`,{[`${e}-data-table-th--sorting`]:hC(P,g),[`${e}-data-table-th--filterable`]:Rv(P),[`${e}-data-table-th--sortable`]:bu(P),[`${e}-data-table-th--selection`]:P.type==="selection",[`${e}-data-table-th--last`]:M},P.className],onClick:P.type!=="selection"&&P.type!=="expand"&&!("children"in P)?pe=>{v(pe,P)}:void 0},H())});if(m){const{headerHeight:T}=this;let C=0,L=0;return l.forEach(P=>{P.column.fixed==="left"?C++:P.column.fixed==="right"&&L++}),R(jh,{ref:"virtualListRef",class:`${e}-data-table-base-table-header`,style:{height:Zt(T)},onScroll:this.handleTableHeaderScroll,columns:l,itemSize:T,showScrollbar:!1,items:[{}],itemResizable:!1,visibleItemsTag:w2,visibleItemsProps:{clsPrefix:e,id:u,cols:l,width:an(this.scrollX)},renderItemWithCols:({startColIndex:P,endColIndex:_,getLeft:D})=>{const k=l.map((O,$)=>({column:O.column,isLast:$===l.length-1,colIndex:O.index,colSpan:1,rowSpan:1})).filter(({column:O},$)=>!!(P<=$&&$<=_||O.fixed)),M=E(k,D,Zt(T));return M.splice(C,0,R("th",{colspan:l.length-C-L,style:{pointerEvents:"none",visibility:"hidden",height:0}})),R("tr",{style:{position:"relative"}},M)}},{default:({renderedItemWithCols:P})=>P})}const A=R("thead",{class:`${e}-data-table-thead`,"data-n-id":u},a.map(T=>R("tr",{class:`${e}-data-table-tr`},E(T,null,void 0))));if(!f)return A;const{handleTableHeaderScroll:S,scrollX:w}=this;return R("div",{class:`${e}-data-table-base-table-header`,onScroll:S},R("table",{class:`${e}-data-table-table`,style:{minWidth:an(w),tableLayout:p}},R("colgroup",null,l.map(T=>R("col",{key:T.key,style:T.style}))),A))}});function E2(n,e){const t=[];function r(i,o){i.forEach(s=>{s.children&&e.has(s.key)?(t.push({tmNode:s,striped:!1,key:s.key,index:o}),r(s.children,o)):t.push({key:s.key,tmNode:s,striped:!1,index:o})})}return n.forEach(i=>{t.push(i);const{children:o}=i.tmNode;o&&e.has(i.key)&&r(o,i.index)}),t}const R2=Ce({props:{clsPrefix:{type:String,required:!0},id:{type:String,required:!0},cols:{type:Array,required:!0},onMouseenter:Function,onMouseleave:Function},render(){const{clsPrefix:n,id:e,cols:t,onMouseenter:r,onMouseleave:i}=this;return R("table",{style:{tableLayout:"fixed"},class:`${n}-data-table-table`,onMouseenter:r,onMouseleave:i},R("colgroup",null,t.map(o=>R("col",{key:o.key,style:o.style}))),R("tbody",{"data-n-id":e,class:`${n}-data-table-tbody`},this.$slots))}}),A2=Ce({name:"DataTableBody",props:{onResize:Function,showHeader:Boolean,flexHeight:Boolean,bodyStyle:Object},setup(n){const{slots:e,bodyWidthRef:t,mergedExpandedRowKeysRef:r,mergedClsPrefixRef:i,mergedThemeRef:o,scrollXRef:s,colsRef:a,paginatedDataRef:l,rawPaginatedDataRef:d,fixedColumnLeftMapRef:c,fixedColumnRightMapRef:u,mergedCurrentPageRef:f,rowClassNameRef:p,leftActiveFixedColKeyRef:h,leftActiveFixedChildrenColKeysRef:g,rightActiveFixedColKeyRef:m,rightActiveFixedChildrenColKeysRef:v,renderExpandRef:b,hoverKeyRef:y,summaryRef:x,mergedSortStateRef:E,virtualScrollRef:A,virtualScrollXRef:S,heightForRowRef:w,minRowHeightRef:T,componentId:C,mergedTableLayoutRef:L,childTriggerColIndexRef:P,indentRef:_,rowPropsRef:D,maxHeightRef:k,stripedRef:M,loadingRef:O,onLoadRef:$,loadingKeySetRef:K,expandableRef:Y,stickyExpandedRowsRef:H,renderExpandIconRef:B,summaryPlacementRef:X,treeMateRef:se,scrollbarPropsRef:pe,setHeaderScrollLeft:te,doUpdateExpandedRowKeys:W,handleTableBodyScroll:de,doCheck:V,doUncheck:ue,renderCell:Pe}=Be(_r),Ae=Be(Pr),F=G(null),z=G(null),ne=G(null),ae=At(()=>l.value.length===0),le=At(()=>n.showHeader||!ae.value),me=At(()=>n.showHeader||ae.value);let fe="";const ce=U(()=>new Set(r.value));function ve(ke){var We;return(We=se.value.getNode(ke))===null||We===void 0?void 0:We.rawNode}function he(ke,We,N){const Q=ve(ke.key);if(!Q){Lr("data-table",`fail to get row data with key ${ke.key}`);return}if(N){const be=l.value.findIndex(Le=>Le.key===fe);if(be!==-1){const Le=l.value.findIndex(je=>je.key===ke.key),De=Math.min(be,Le),$e=Math.max(be,Le),Ne=[];l.value.slice(De,$e+1).forEach(je=>{je.disabled||Ne.push(je.key)}),We?V(Ne,!1,Q):ue(Ne,Q),fe=ke.key;return}}We?V(ke.key,!1,Q):ue(ke.key,Q),fe=ke.key}function _e(ke){const We=ve(ke.key);if(!We){Lr("data-table",`fail to get row data with key ${ke.key}`);return}V(ke.key,!0,We)}function re(){if(!le.value){const{value:We}=ne;return We||null}if(A.value)return He();const{value:ke}=F;return ke?ke.containerRef:null}function ge(ke,We){var N;if(K.value.has(ke))return;const{value:Q}=r,be=Q.indexOf(ke),Le=Array.from(Q);~be?(Le.splice(be,1),W(Le)):We&&!We.isLeaf&&!We.shallowLoaded?(K.value.add(ke),(N=$.value)===null||N===void 0||N.call($,We.rawNode).then(()=>{const{value:De}=r,$e=Array.from(De);~$e.indexOf(ke)||$e.push(ke),W($e)}).finally(()=>{K.value.delete(ke)})):(Le.push(ke),W(Le))}function Ee(){y.value=null}function He(){const{value:ke}=z;return(ke==null?void 0:ke.listElRef)||null}function et(){const{value:ke}=z;return(ke==null?void 0:ke.itemsElRef)||null}function Xe(ke){var We;de(ke),(We=F.value)===null||We===void 0||We.sync()}function lt(ke){var We;const{onResize:N}=n;N&&N(ke),(We=F.value)===null||We===void 0||We.sync()}const Qe={getScrollContainer:re,scrollTo(ke,We){var N,Q;A.value?(N=z.value)===null||N===void 0||N.scrollTo(ke,We):(Q=F.value)===null||Q===void 0||Q.scrollTo(ke,We)}},xt=Z([({props:ke})=>{const We=Q=>Q===null?null:Z(`[data-n-id="${ke.componentId}"] [data-col-key="${Q}"]::after`,{boxShadow:"var(--n-box-shadow-after)"}),N=Q=>Q===null?null:Z(`[data-n-id="${ke.componentId}"] [data-col-key="${Q}"]::before`,{boxShadow:"var(--n-box-shadow-before)"});return Z([We(ke.leftActiveFixedColKey),N(ke.rightActiveFixedColKey),ke.leftActiveFixedChildrenColKeys.map(Q=>We(Q)),ke.rightActiveFixedChildrenColKeys.map(Q=>N(Q))])}]);let it=!1;return Vn(()=>{const{value:ke}=h,{value:We}=g,{value:N}=m,{value:Q}=v;if(!it&&ke===null&&N===null)return;const be={leftActiveFixedColKey:ke,leftActiveFixedChildrenColKeys:We,rightActiveFixedColKey:N,rightActiveFixedChildrenColKeys:Q,componentId:C};xt.mount({id:`n-${C}`,force:!0,props:be,anchorMetaName:Rs,parent:Ae==null?void 0:Ae.styleMountTarget}),it=!0}),io(()=>{xt.unmount({id:`n-${C}`,parent:Ae==null?void 0:Ae.styleMountTarget})}),Object.assign({bodyWidth:t,summaryPlacement:X,dataTableSlots:e,componentId:C,scrollbarInstRef:F,virtualListRef:z,emptyElRef:ne,summary:x,mergedClsPrefix:i,mergedTheme:o,scrollX:s,cols:a,loading:O,bodyShowHeaderOnly:me,shouldDisplaySomeTablePart:le,empty:ae,paginatedDataAndInfo:U(()=>{const{value:ke}=M;let We=!1;return{data:l.value.map(ke?(Q,be)=>(Q.isLeaf||(We=!0),{tmNode:Q,key:Q.key,striped:be%2===1,index:be}):(Q,be)=>(Q.isLeaf||(We=!0),{tmNode:Q,key:Q.key,striped:!1,index:be})),hasChildren:We}}),rawPaginatedData:d,fixedColumnLeftMap:c,fixedColumnRightMap:u,currentPage:f,rowClassName:p,renderExpand:b,mergedExpandedRowKeySet:ce,hoverKey:y,mergedSortState:E,virtualScroll:A,virtualScrollX:S,heightForRow:w,minRowHeight:T,mergedTableLayout:L,childTriggerColIndex:P,indent:_,rowProps:D,maxHeight:k,loadingKeySet:K,expandable:Y,stickyExpandedRows:H,renderExpandIcon:B,scrollbarProps:pe,setHeaderScrollLeft:te,handleVirtualListScroll:Xe,handleVirtualListResize:lt,handleMouseleaveTable:Ee,virtualListContainer:He,virtualListContent:et,handleTableBodyScroll:de,handleCheckboxUpdateChecked:he,handleRadioUpdateChecked:_e,handleUpdateExpanded:ge,renderCell:Pe},Qe)},render(){const{mergedTheme:n,scrollX:e,mergedClsPrefix:t,virtualScroll:r,maxHeight:i,mergedTableLayout:o,flexHeight:s,loadingKeySet:a,onResize:l,setHeaderScrollLeft:d}=this,c=e!==void 0||i!==void 0||s,u=!c&&o==="auto",f=e!==void 0||u,p={minWidth:an(e)||"100%"};e&&(p.width="100%");const h=R(Ms,Object.assign({},this.scrollbarProps,{ref:"scrollbarInstRef",scrollable:c||u,class:`${t}-data-table-base-table-body`,style:this.empty?void 0:this.bodyStyle,theme:n.peers.Scrollbar,themeOverrides:n.peerOverrides.Scrollbar,contentStyle:p,container:r?this.virtualListContainer:void 0,content:r?this.virtualListContent:void 0,horizontalRailStyle:{zIndex:3},verticalRailStyle:{zIndex:3},xScrollable:f,onScroll:r?void 0:this.handleTableBodyScroll,internalOnUpdateScrollLeft:d,onResize:l}),{default:()=>{const g={},m={},{cols:v,paginatedDataAndInfo:b,mergedTheme:y,fixedColumnLeftMap:x,fixedColumnRightMap:E,currentPage:A,rowClassName:S,mergedSortState:w,mergedExpandedRowKeySet:T,stickyExpandedRows:C,componentId:L,childTriggerColIndex:P,expandable:_,rowProps:D,handleMouseleaveTable:k,renderExpand:M,summary:O,handleCheckboxUpdateChecked:$,handleRadioUpdateChecked:K,handleUpdateExpanded:Y,heightForRow:H,minRowHeight:B,virtualScrollX:X}=this,{length:se}=v;let pe;const{data:te,hasChildren:W}=b,de=W?E2(te,T):te;if(O){const fe=O(this.rawPaginatedData);if(Array.isArray(fe)){const ce=fe.map((ve,he)=>({isSummaryRow:!0,key:`__n_summary__${he}`,tmNode:{rawNode:ve,disabled:!0},index:-1}));pe=this.summaryPlacement==="top"?[...ce,...de]:[...de,...ce]}else{const ce={isSummaryRow:!0,key:"__n_summary__",tmNode:{rawNode:fe,disabled:!0},index:-1};pe=this.summaryPlacement==="top"?[ce,...de]:[...de,ce]}}else pe=de;const V=W?{width:Zt(this.indent)}:void 0,ue=[];pe.forEach(fe=>{M&&T.has(fe.key)&&(!_||_(fe.tmNode.rawNode))?ue.push(fe,{isExpandedRow:!0,key:`${fe.key}-expand`,tmNode:fe.tmNode,index:fe.index}):ue.push(fe)});const{length:Pe}=ue,Ae={};te.forEach(({tmNode:fe},ce)=>{Ae[ce]=fe.key});const F=C?this.bodyWidth:null,z=F===null?void 0:`${F}px`,ne=this.virtualScrollX?"div":"td";let ae=0,le=0;X&&v.forEach(fe=>{fe.column.fixed==="left"?ae++:fe.column.fixed==="right"&&le++});const me=({rowInfo:fe,displayedRowIndex:ce,isVirtual:ve,isVirtualX:he,startColIndex:_e,endColIndex:re,getLeft:ge})=>{const{index:Ee}=fe;if("isExpandedRow"in fe){const{tmNode:{key:Le,rawNode:De}}=fe;return R("tr",{class:`${t}-data-table-tr ${t}-data-table-tr--expanded`,key:`${Le}__expand`},R("td",{class:[`${t}-data-table-td`,`${t}-data-table-td--last-col`,ce+1===Pe&&`${t}-data-table-td--last-row`],colspan:se},C?R("div",{class:`${t}-data-table-expand`,style:{width:z}},M(De,Ee)):M(De,Ee)))}const He="isSummaryRow"in fe,et=!He&&fe.striped,{tmNode:Xe,key:lt}=fe,{rawNode:Qe}=Xe,xt=T.has(lt),it=D?D(Qe,Ee):void 0,ke=typeof S=="string"?S:M$(Qe,Ee,S),We=he?v.filter((Le,De)=>!!(_e<=De&&De<=re||Le.column.fixed)):v,N=he?Zt((H==null?void 0:H(Qe,Ee))||B):void 0,Q=We.map(Le=>{var De,$e,Ne,je,ht;const Dt=Le.index;if(ce in g){const Ft=g[ce],Vt=Ft.indexOf(Dt);if(~Vt)return Ft.splice(Vt,1),null}const{column:St}=Le,vn=yr(Le),{rowSpan:En,colSpan:Rn}=St,On=He?((De=fe.tmNode.rawNode[vn])===null||De===void 0?void 0:De.colSpan)||1:Rn?Rn(Qe,Ee):1,Mn=He?(($e=fe.tmNode.rawNode[vn])===null||$e===void 0?void 0:$e.rowSpan)||1:En?En(Qe,Ee):1,sr=Dt+On===se,Fn=ce+Mn===Pe,J=Mn>1;if(J&&(m[ce]={[Dt]:[]}),On>1||J)for(let Ft=ce;Ft<ce+Mn;++Ft){J&&m[ce][Dt].push(Ae[Ft]);for(let Vt=Dt;Vt<Dt+On;++Vt)Ft===ce&&Vt===Dt||(Ft in g?g[Ft].push(Vt):g[Ft]=[Vt])}const Se=J?this.hoverKey:null,{cellProps:Ve}=St,ot=Ve==null?void 0:Ve(Qe,Ee),Et={"--indent-offset":""},pt=St.fixed?"td":ne;return R(pt,Object.assign({},ot,{key:vn,style:[{textAlign:St.align||void 0,width:Zt(St.width)},he&&{height:N},he&&!St.fixed?{position:"absolute",left:Zt(ge(Dt)),top:0,bottom:0}:{left:Zt((Ne=x[vn])===null||Ne===void 0?void 0:Ne.start),right:Zt((je=E[vn])===null||je===void 0?void 0:je.start)},Et,(ot==null?void 0:ot.style)||""],colspan:On,rowspan:ve?void 0:Mn,"data-col-key":vn,class:[`${t}-data-table-td`,St.className,ot==null?void 0:ot.class,He&&`${t}-data-table-td--summary`,Se!==null&&m[ce][Dt].includes(Se)&&`${t}-data-table-td--hover`,hC(St,w)&&`${t}-data-table-td--sorting`,St.fixed&&`${t}-data-table-td--fixed-${St.fixed}`,St.align&&`${t}-data-table-td--${St.align}-align`,St.type==="selection"&&`${t}-data-table-td--selection`,St.type==="expand"&&`${t}-data-table-td--expand`,sr&&`${t}-data-table-td--last-col`,Fn&&`${t}-data-table-td--last-row`]}),W&&Dt===P?[SI(Et["--indent-offset"]=He?0:fe.tmNode.level,R("div",{class:`${t}-data-table-indent`,style:V})),He||fe.tmNode.isLeaf?R("div",{class:`${t}-data-table-expand-placeholder`}):R(Iv,{class:`${t}-data-table-expand-trigger`,clsPrefix:t,expanded:xt,rowData:Qe,renderExpandIcon:this.renderExpandIcon,loading:a.has(fe.key),onClick:()=>{Y(lt,fe.tmNode)}})]:null,St.type==="selection"?He?null:St.multiple===!1?R(q$,{key:A,rowKey:lt,disabled:fe.tmNode.disabled,onUpdateChecked:()=>{K(fe.tmNode)}}):R(N$,{key:A,rowKey:lt,disabled:fe.tmNode.disabled,onUpdateChecked:(Ft,Vt)=>{$(fe.tmNode,Ft,Vt.shiftKey)}}):St.type==="expand"?He?null:!St.expandable||!((ht=St.expandable)===null||ht===void 0)&&ht.call(St,Qe)?R(Iv,{clsPrefix:t,rowData:Qe,expanded:xt,renderExpandIcon:this.renderExpandIcon,onClick:()=>{Y(lt,null)}}):null:R(Z$,{clsPrefix:t,index:Ee,row:Qe,column:St,isSummary:He,mergedTheme:y,renderCell:this.renderCell}))});return he&&ae&&le&&Q.splice(ae,0,R("td",{colspan:v.length-ae-le,style:{pointerEvents:"none",visibility:"hidden",height:0}})),R("tr",Object.assign({},it,{onMouseenter:Le=>{var De;this.hoverKey=lt,(De=it==null?void 0:it.onMouseenter)===null||De===void 0||De.call(it,Le)},key:lt,class:[`${t}-data-table-tr`,He&&`${t}-data-table-tr--summary`,et&&`${t}-data-table-tr--striped`,xt&&`${t}-data-table-tr--expanded`,ke,it==null?void 0:it.class],style:[it==null?void 0:it.style,he&&{height:N}]}),Q)};return r?R(jh,{ref:"virtualListRef",items:ue,itemSize:this.minRowHeight,visibleItemsTag:R2,visibleItemsProps:{clsPrefix:t,id:L,cols:v,onMouseleave:k},showScrollbar:!1,onResize:this.handleVirtualListResize,onScroll:this.handleVirtualListScroll,itemsStyle:p,itemResizable:!X,columns:v,renderItemWithCols:X?({itemIndex:fe,item:ce,startColIndex:ve,endColIndex:he,getLeft:_e})=>me({displayedRowIndex:fe,isVirtual:!0,isVirtualX:!0,rowInfo:ce,startColIndex:ve,endColIndex:he,getLeft:_e}):void 0},{default:({item:fe,index:ce,renderedItemWithCols:ve})=>ve||me({rowInfo:fe,displayedRowIndex:ce,isVirtual:!0,isVirtualX:!1,startColIndex:0,endColIndex:0,getLeft(he){return 0}})}):R("table",{class:`${t}-data-table-table`,onMouseleave:k,style:{tableLayout:this.mergedTableLayout}},R("colgroup",null,v.map(fe=>R("col",{key:fe.key,style:fe.style}))),this.showHeader?R(EC,{discrete:!1}):null,this.empty?null:R("tbody",{"data-n-id":L,class:`${t}-data-table-tbody`},ue.map((fe,ce)=>me({rowInfo:fe,displayedRowIndex:ce,isVirtual:!1,isVirtualX:!1,startColIndex:-1,endColIndex:-1,getLeft(ve){return-1}}))))}});if(this.empty){const g=()=>R("div",{class:[`${t}-data-table-empty`,this.loading&&`${t}-data-table-empty--hide`],style:this.bodyStyle,ref:"emptyElRef"},Er(this.dataTableSlots.empty,()=>[R(Ed,{theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]));return this.shouldDisplaySomeTablePart?R(mt,null,h,g()):R(ws,{onResize:this.onResize},{default:g})}return h}}),I2=Ce({name:"MainTable",setup(){const{mergedClsPrefixRef:n,rightFixedColumnsRef:e,leftFixedColumnsRef:t,bodyWidthRef:r,maxHeightRef:i,minHeightRef:o,flexHeightRef:s,virtualScrollHeaderRef:a,syncScrollState:l}=Be(_r),d=G(null),c=G(null),u=G(null),f=G(!(t.value.length||e.value.length)),p=U(()=>({maxHeight:an(i.value),minHeight:an(o.value)}));function h(b){r.value=b.contentRect.width,l(),f.value||(f.value=!0)}function g(){var b;const{value:y}=d;return y?a.value?((b=y.virtualListRef)===null||b===void 0?void 0:b.listElRef)||null:y.$el:null}function m(){const{value:b}=c;return b?b.getScrollContainer():null}const v={getBodyElement:m,getHeaderElement:g,scrollTo(b,y){var x;(x=c.value)===null||x===void 0||x.scrollTo(b,y)}};return Vn(()=>{const{value:b}=u;if(!b)return;const y=`${n.value}-data-table-base-table--transition-disabled`;f.value?setTimeout(()=>{b.classList.remove(y)},0):b.classList.add(y)}),Object.assign({maxHeight:i,mergedClsPrefix:n,selfElRef:u,headerInstRef:d,bodyInstRef:c,bodyStyle:p,flexHeight:s,handleBodyResize:h},v)},render(){const{mergedClsPrefix:n,maxHeight:e,flexHeight:t}=this,r=e===void 0&&!t;return R("div",{class:`${n}-data-table-base-table`,ref:"selfElRef"},r?null:R(EC,{ref:"headerInstRef"}),R(A2,{ref:"bodyInstRef",bodyStyle:this.bodyStyle,showHeader:r,flexHeight:t,onResize:this.handleBodyResize}))}}),Pv=P2(),L2=Z([j("data-table",`
 width: 100%;
 font-size: var(--n-font-size);
 display: flex;
 flex-direction: column;
 position: relative;
 --n-merged-th-color: var(--n-th-color);
 --n-merged-td-color: var(--n-td-color);
 --n-merged-border-color: var(--n-border-color);
 --n-merged-th-color-hover: var(--n-th-color-hover);
 --n-merged-th-color-sorting: var(--n-th-color-sorting);
 --n-merged-td-color-hover: var(--n-td-color-hover);
 --n-merged-td-color-sorting: var(--n-td-color-sorting);
 --n-merged-td-color-striped: var(--n-td-color-striped);
 `,[j("data-table-wrapper",`
 flex-grow: 1;
 display: flex;
 flex-direction: column;
 `),ee("flex-height",[Z(">",[j("data-table-wrapper",[Z(">",[j("data-table-base-table",`
 display: flex;
 flex-direction: column;
 flex-grow: 1;
 `,[Z(">",[j("data-table-base-table-body","flex-basis: 0;",[Z("&:last-child","flex-grow: 1;")])])])])])])]),Z(">",[j("data-table-loading-wrapper",`
 color: var(--n-loading-color);
 font-size: var(--n-loading-size);
 position: absolute;
 left: 50%;
 top: 50%;
 transform: translateX(-50%) translateY(-50%);
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 justify-content: center;
 `,[sl({originalTransform:"translateX(-50%) translateY(-50%)"})])]),j("data-table-expand-placeholder",`
 margin-right: 8px;
 display: inline-block;
 width: 16px;
 height: 1px;
 `),j("data-table-indent",`
 display: inline-block;
 height: 1px;
 `),j("data-table-expand-trigger",`
 display: inline-flex;
 margin-right: 8px;
 cursor: pointer;
 font-size: 16px;
 vertical-align: -0.2em;
 position: relative;
 width: 16px;
 height: 16px;
 color: var(--n-td-text-color);
 transition: color .3s var(--n-bezier);
 `,[ee("expanded",[j("icon","transform: rotate(90deg);",[Yn({originalTransform:"rotate(90deg)"})]),j("base-icon","transform: rotate(90deg);",[Yn({originalTransform:"rotate(90deg)"})])]),j("base-loading",`
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[Yn()]),j("icon",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[Yn()]),j("base-icon",`
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[Yn()])]),j("data-table-thead",`
 transition: background-color .3s var(--n-bezier);
 background-color: var(--n-merged-th-color);
 `),j("data-table-tr",`
 position: relative;
 box-sizing: border-box;
 background-clip: padding-box;
 transition: background-color .3s var(--n-bezier);
 `,[j("data-table-expand",`
 position: sticky;
 left: 0;
 overflow: hidden;
 margin: calc(var(--n-th-padding) * -1);
 padding: var(--n-th-padding);
 box-sizing: border-box;
 `),ee("striped","background-color: var(--n-merged-td-color-striped);",[j("data-table-td","background-color: var(--n-merged-td-color-striped);")]),Pt("summary",[Z("&:hover","background-color: var(--n-merged-td-color-hover);",[Z(">",[j("data-table-td","background-color: var(--n-merged-td-color-hover);")])])])]),j("data-table-th",`
 padding: var(--n-th-padding);
 position: relative;
 text-align: start;
 box-sizing: border-box;
 background-color: var(--n-merged-th-color);
 border-color: var(--n-merged-border-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 color: var(--n-th-text-color);
 transition:
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
 font-weight: var(--n-th-font-weight);
 `,[ee("filterable",`
 padding-right: 36px;
 `,[ee("sortable",`
 padding-right: calc(var(--n-th-padding) + 36px);
 `)]),Pv,ee("selection",`
 padding: 0;
 text-align: center;
 line-height: 0;
 z-index: 3;
 `),q("title-wrapper",`
 display: flex;
 align-items: center;
 flex-wrap: nowrap;
 max-width: 100%;
 `,[q("title",`
 flex: 1;
 min-width: 0;
 `)]),q("ellipsis",`
 display: inline-block;
 vertical-align: bottom;
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap;
 max-width: 100%;
 `),ee("hover",`
 background-color: var(--n-merged-th-color-hover);
 `),ee("sorting",`
 background-color: var(--n-merged-th-color-sorting);
 `),ee("sortable",`
 cursor: pointer;
 `,[q("ellipsis",`
 max-width: calc(100% - 18px);
 `),Z("&:hover",`
 background-color: var(--n-merged-th-color-hover);
 `)]),j("data-table-sorter",`
 height: var(--n-sorter-size);
 width: var(--n-sorter-size);
 margin-left: 4px;
 position: relative;
 display: inline-flex;
 align-items: center;
 justify-content: center;
 vertical-align: -0.2em;
 color: var(--n-th-icon-color);
 transition: color .3s var(--n-bezier);
 `,[j("base-icon","transition: transform .3s var(--n-bezier)"),ee("desc",[j("base-icon",`
 transform: rotate(0deg);
 `)]),ee("asc",[j("base-icon",`
 transform: rotate(-180deg);
 `)]),ee("asc, desc",`
 color: var(--n-th-icon-color-active);
 `)]),j("data-table-resize-button",`
 width: var(--n-resizable-container-size);
 position: absolute;
 top: 0;
 right: calc(var(--n-resizable-container-size) / 2);
 bottom: 0;
 cursor: col-resize;
 user-select: none;
 `,[Z("&::after",`
 width: var(--n-resizable-size);
 height: 50%;
 position: absolute;
 top: 50%;
 left: calc(var(--n-resizable-container-size) / 2);
 bottom: 0;
 background-color: var(--n-merged-border-color);
 transform: translateY(-50%);
 transition: background-color .3s var(--n-bezier);
 z-index: 1;
 content: '';
 `),ee("active",[Z("&::after",` 
 background-color: var(--n-th-icon-color-active);
 `)]),Z("&:hover::after",`
 background-color: var(--n-th-icon-color-active);
 `)]),j("data-table-filter",`
 position: absolute;
 z-index: auto;
 right: 0;
 width: 36px;
 top: 0;
 bottom: 0;
 cursor: pointer;
 display: flex;
 justify-content: center;
 align-items: center;
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 font-size: var(--n-filter-size);
 color: var(--n-th-icon-color);
 `,[Z("&:hover",`
 background-color: var(--n-th-button-color-hover);
 `),ee("show",`
 background-color: var(--n-th-button-color-hover);
 `),ee("active",`
 background-color: var(--n-th-button-color-hover);
 color: var(--n-th-icon-color-active);
 `)])]),j("data-table-td",`
 padding: var(--n-td-padding);
 text-align: start;
 box-sizing: border-box;
 border: none;
 background-color: var(--n-merged-td-color);
 color: var(--n-td-text-color);
 border-bottom: 1px solid var(--n-merged-border-color);
 transition:
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `,[ee("expand",[j("data-table-expand-trigger",`
 margin-right: 0;
 `)]),ee("last-row",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `,[Z("&::after",`
 bottom: 0 !important;
 `),Z("&::before",`
 bottom: 0 !important;
 `)]),ee("summary",`
 background-color: var(--n-merged-th-color);
 `),ee("hover",`
 background-color: var(--n-merged-td-color-hover);
 `),ee("sorting",`
 background-color: var(--n-merged-td-color-sorting);
 `),q("ellipsis",`
 display: inline-block;
 text-overflow: ellipsis;
 overflow: hidden;
 white-space: nowrap;
 max-width: 100%;
 vertical-align: bottom;
 max-width: calc(100% - var(--indent-offset, -1.5) * 16px - 24px);
 `),ee("selection, expand",`
 text-align: center;
 padding: 0;
 line-height: 0;
 `),Pv]),j("data-table-empty",`
 box-sizing: border-box;
 padding: var(--n-empty-padding);
 flex-grow: 1;
 flex-shrink: 0;
 opacity: 1;
 display: flex;
 align-items: center;
 justify-content: center;
 transition: opacity .3s var(--n-bezier);
 `,[ee("hide",`
 opacity: 0;
 `)]),q("pagination",`
 margin: var(--n-pagination-margin);
 display: flex;
 justify-content: flex-end;
 `),j("data-table-wrapper",`
 position: relative;
 opacity: 1;
 transition: opacity .3s var(--n-bezier), border-color .3s var(--n-bezier);
 border-top-left-radius: var(--n-border-radius);
 border-top-right-radius: var(--n-border-radius);
 line-height: var(--n-line-height);
 `),ee("loading",[j("data-table-wrapper",`
 opacity: var(--n-opacity-loading);
 pointer-events: none;
 `)]),ee("single-column",[j("data-table-td",`
 border-bottom: 0 solid var(--n-merged-border-color);
 `,[Z("&::after, &::before",`
 bottom: 0 !important;
 `)])]),Pt("single-line",[j("data-table-th",`
 border-right: 1px solid var(--n-merged-border-color);
 `,[ee("last",`
 border-right: 0 solid var(--n-merged-border-color);
 `)]),j("data-table-td",`
 border-right: 1px solid var(--n-merged-border-color);
 `,[ee("last-col",`
 border-right: 0 solid var(--n-merged-border-color);
 `)])]),ee("bordered",[j("data-table-wrapper",`
 border: 1px solid var(--n-merged-border-color);
 border-bottom-left-radius: var(--n-border-radius);
 border-bottom-right-radius: var(--n-border-radius);
 overflow: hidden;
 `)]),j("data-table-base-table",[ee("transition-disabled",[j("data-table-th",[Z("&::after, &::before","transition: none;")]),j("data-table-td",[Z("&::after, &::before","transition: none;")])])]),ee("bottom-bordered",[j("data-table-td",[ee("last-row",`
 border-bottom: 1px solid var(--n-merged-border-color);
 `)])]),j("data-table-table",`
 font-variant-numeric: tabular-nums;
 width: 100%;
 word-break: break-word;
 transition: background-color .3s var(--n-bezier);
 border-collapse: separate;
 border-spacing: 0;
 background-color: var(--n-merged-td-color);
 `),j("data-table-base-table-header",`
 border-top-left-radius: calc(var(--n-border-radius) - 1px);
 border-top-right-radius: calc(var(--n-border-radius) - 1px);
 z-index: 3;
 overflow: scroll;
 flex-shrink: 0;
 transition: border-color .3s var(--n-bezier);
 scrollbar-width: none;
 `,[Z("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",`
 display: none;
 width: 0;
 height: 0;
 `)]),j("data-table-check-extra",`
 transition: color .3s var(--n-bezier);
 color: var(--n-th-icon-color);
 position: absolute;
 font-size: 14px;
 right: -4px;
 top: 50%;
 transform: translateY(-50%);
 z-index: 1;
 `)]),j("data-table-filter-menu",[j("scrollbar",`
 max-height: 240px;
 `),q("group",`
 display: flex;
 flex-direction: column;
 padding: 12px 12px 0 12px;
 `,[j("checkbox",`
 margin-bottom: 12px;
 margin-right: 0;
 `),j("radio",`
 margin-bottom: 12px;
 margin-right: 0;
 `)]),q("action",`
 padding: var(--n-action-padding);
 display: flex;
 flex-wrap: nowrap;
 justify-content: space-evenly;
 border-top: 1px solid var(--n-action-divider-color);
 `,[j("button",[Z("&:not(:last-child)",`
 margin: var(--n-action-button-margin);
 `),Z("&:last-child",`
 margin-right: 0;
 `)])]),j("divider",`
 margin: 0 !important;
 `)]),oc(j("data-table",`
 --n-merged-th-color: var(--n-th-color-modal);
 --n-merged-td-color: var(--n-td-color-modal);
 --n-merged-border-color: var(--n-border-color-modal);
 --n-merged-th-color-hover: var(--n-th-color-hover-modal);
 --n-merged-td-color-hover: var(--n-td-color-hover-modal);
 --n-merged-th-color-sorting: var(--n-th-color-hover-modal);
 --n-merged-td-color-sorting: var(--n-td-color-hover-modal);
 --n-merged-td-color-striped: var(--n-td-color-striped-modal);
 `)),Oh(j("data-table",`
 --n-merged-th-color: var(--n-th-color-popover);
 --n-merged-td-color: var(--n-td-color-popover);
 --n-merged-border-color: var(--n-border-color-popover);
 --n-merged-th-color-hover: var(--n-th-color-hover-popover);
 --n-merged-td-color-hover: var(--n-td-color-hover-popover);
 --n-merged-th-color-sorting: var(--n-th-color-hover-popover);
 --n-merged-td-color-sorting: var(--n-td-color-hover-popover);
 --n-merged-td-color-striped: var(--n-td-color-striped-popover);
 `))]);function P2(){return[ee("fixed-left",`
 left: 0;
 position: sticky;
 z-index: 2;
 `,[Z("&::after",`
 pointer-events: none;
 content: "";
 width: 36px;
 display: inline-block;
 position: absolute;
 top: 0;
 bottom: -1px;
 transition: box-shadow .2s var(--n-bezier);
 right: -36px;
 `)]),ee("fixed-right",`
 right: 0;
 position: sticky;
 z-index: 1;
 `,[Z("&::before",`
 pointer-events: none;
 content: "";
 width: 36px;
 display: inline-block;
 position: absolute;
 top: 0;
 bottom: -1px;
 transition: box-shadow .2s var(--n-bezier);
 left: -36px;
 `)])]}function _2(n,e){const{paginatedDataRef:t,treeMateRef:r,selectionColumnRef:i}=e,o=G(n.defaultCheckedRowKeys),s=U(()=>{var E;const{checkedRowKeys:A}=n,S=A===void 0?o.value:A;return((E=i.value)===null||E===void 0?void 0:E.multiple)===!1?{checkedKeys:S.slice(0,1),indeterminateKeys:[]}:r.value.getCheckedKeys(S,{cascade:n.cascade,allowNotLoaded:n.allowCheckingNotLoaded})}),a=U(()=>s.value.checkedKeys),l=U(()=>s.value.indeterminateKeys),d=U(()=>new Set(a.value)),c=U(()=>new Set(l.value)),u=U(()=>{const{value:E}=d;return t.value.reduce((A,S)=>{const{key:w,disabled:T}=S;return A+(!T&&E.has(w)?1:0)},0)}),f=U(()=>t.value.filter(E=>E.disabled).length),p=U(()=>{const{length:E}=t.value,{value:A}=c;return u.value>0&&u.value<E-f.value||t.value.some(S=>A.has(S.key))}),h=U(()=>{const{length:E}=t.value;return u.value!==0&&u.value===E-f.value}),g=U(()=>t.value.length===0);function m(E,A,S){const{"onUpdate:checkedRowKeys":w,onUpdateCheckedRowKeys:T,onCheckedRowKeysChange:C}=n,L=[],{value:{getNode:P}}=r;E.forEach(_=>{var D;const k=(D=P(_))===null||D===void 0?void 0:D.rawNode;L.push(k)}),w&&we(w,E,L,{row:A,action:S}),T&&we(T,E,L,{row:A,action:S}),C&&we(C,E,L,{row:A,action:S}),o.value=E}function v(E,A=!1,S){if(!n.loading){if(A){m(Array.isArray(E)?E.slice(0,1):[E],S,"check");return}m(r.value.check(E,a.value,{cascade:n.cascade,allowNotLoaded:n.allowCheckingNotLoaded}).checkedKeys,S,"check")}}function b(E,A){n.loading||m(r.value.uncheck(E,a.value,{cascade:n.cascade,allowNotLoaded:n.allowCheckingNotLoaded}).checkedKeys,A,"uncheck")}function y(E=!1){const{value:A}=i;if(!A||n.loading)return;const S=[];(E?r.value.treeNodes:t.value).forEach(w=>{w.disabled||S.push(w.key)}),m(r.value.check(S,a.value,{cascade:!0,allowNotLoaded:n.allowCheckingNotLoaded}).checkedKeys,void 0,"checkAll")}function x(E=!1){const{value:A}=i;if(!A||n.loading)return;const S=[];(E?r.value.treeNodes:t.value).forEach(w=>{w.disabled||S.push(w.key)}),m(r.value.uncheck(S,a.value,{cascade:!0,allowNotLoaded:n.allowCheckingNotLoaded}).checkedKeys,void 0,"uncheckAll")}return{mergedCheckedRowKeySetRef:d,mergedCheckedRowKeysRef:a,mergedInderminateRowKeySetRef:c,someRowsCheckedRef:p,allRowsCheckedRef:h,headerCheckboxDisabledRef:g,doUpdateCheckedRowKeys:m,doCheckAll:y,doUncheckAll:x,doCheck:v,doUncheck:b}}function k2(n,e){const t=At(()=>{for(const d of n.columns)if(d.type==="expand")return d.renderExpand}),r=At(()=>{let d;for(const c of n.columns)if(c.type==="expand"){d=c.expandable;break}return d}),i=G(n.defaultExpandAll?t!=null&&t.value?(()=>{const d=[];return e.value.treeNodes.forEach(c=>{var u;!((u=r.value)===null||u===void 0)&&u.call(r,c.rawNode)&&d.push(c.key)}),d})():e.value.getNonLeafKeys():n.defaultExpandedRowKeys),o=Ie(n,"expandedRowKeys"),s=Ie(n,"stickyExpandedRows"),a=kn(o,i);function l(d){const{onUpdateExpandedRowKeys:c,"onUpdate:expandedRowKeys":u}=n;c&&we(c,d),u&&we(u,d),i.value=d}return{stickyExpandedRowsRef:s,mergedExpandedRowKeysRef:a,renderExpandRef:t,expandableRef:r,doUpdateExpandedRowKeys:l}}function D2(n,e){const t=[],r=[],i=[],o=new WeakMap;let s=-1,a=0,l=!1,d=0;function c(f,p){p>s&&(t[p]=[],s=p),f.forEach(h=>{if("children"in h)c(h.children,p+1);else{const g="key"in h?h.key:void 0;r.push({key:yr(h),style:O$(h,g!==void 0?an(e(g)):void 0),column:h,index:d++,width:h.width===void 0?128:Number(h.width)}),a+=1,l||(l=!!h.ellipsis),i.push(h)}})}c(n,0),d=0;function u(f,p){let h=0;f.forEach(g=>{var m;if("children"in g){const v=d,b={column:g,colIndex:d,colSpan:0,rowSpan:1,isLast:!1};u(g.children,p+1),g.children.forEach(y=>{var x,E;b.colSpan+=(E=(x=o.get(y))===null||x===void 0?void 0:x.colSpan)!==null&&E!==void 0?E:0}),v+b.colSpan===a&&(b.isLast=!0),o.set(g,b),t[p].push(b)}else{if(d<h){d+=1;return}let v=1;"titleColSpan"in g&&(v=(m=g.titleColSpan)!==null&&m!==void 0?m:1),v>1&&(h=d+v);const b=d+v===a,y={column:g,colSpan:v,colIndex:d,rowSpan:s-p+1,isLast:b};o.set(g,y),t[p].push(y),d+=1}})}return u(n,0),{hasEllipsis:l,rows:t,cols:r,dataRelatedCols:i}}function O2(n,e){const t=U(()=>D2(n.columns,e));return{rowsRef:U(()=>t.value.rows),colsRef:U(()=>t.value.cols),hasEllipsisRef:U(()=>t.value.hasEllipsis),dataRelatedColsRef:U(()=>t.value.dataRelatedCols)}}function M2(){const n=G({});function e(i){return n.value[i]}function t(i,o){fC(i)&&"key"in i&&(n.value[i.key]=o)}function r(){n.value={}}return{getResizableWidth:e,doUpdateResizableWidth:t,clearResizableWidth:r}}function F2(n,{mainTableInstRef:e,mergedCurrentPageRef:t,bodyWidthRef:r}){let i=0;const o=G(),s=G(null),a=G([]),l=G(null),d=G([]),c=U(()=>an(n.scrollX)),u=U(()=>n.columns.filter(T=>T.fixed==="left")),f=U(()=>n.columns.filter(T=>T.fixed==="right")),p=U(()=>{const T={};let C=0;function L(P){P.forEach(_=>{const D={start:C,end:0};T[yr(_)]=D,"children"in _?(L(_.children),D.end=C):(C+=wv(_)||0,D.end=C)})}return L(u.value),T}),h=U(()=>{const T={};let C=0;function L(P){for(let _=P.length-1;_>=0;--_){const D=P[_],k={start:C,end:0};T[yr(D)]=k,"children"in D?(L(D.children),k.end=C):(C+=wv(D)||0,k.end=C)}}return L(f.value),T});function g(){var T,C;const{value:L}=u;let P=0;const{value:_}=p;let D=null;for(let k=0;k<L.length;++k){const M=yr(L[k]);if(i>(((T=_[M])===null||T===void 0?void 0:T.start)||0)-P)D=M,P=((C=_[M])===null||C===void 0?void 0:C.end)||0;else break}s.value=D}function m(){a.value=[];let T=n.columns.find(C=>yr(C)===s.value);for(;T&&"children"in T;){const C=T.children.length;if(C===0)break;const L=T.children[C-1];a.value.push(yr(L)),T=L}}function v(){var T,C;const{value:L}=f,P=Number(n.scrollX),{value:_}=r;if(_===null)return;let D=0,k=null;const{value:M}=h;for(let O=L.length-1;O>=0;--O){const $=yr(L[O]);if(Math.round(i+(((T=M[$])===null||T===void 0?void 0:T.start)||0)+_-D)<P)k=$,D=((C=M[$])===null||C===void 0?void 0:C.end)||0;else break}l.value=k}function b(){d.value=[];let T=n.columns.find(C=>yr(C)===l.value);for(;T&&"children"in T&&T.children.length;){const C=T.children[0];d.value.push(yr(C)),T=C}}function y(){const T=e.value?e.value.getHeaderElement():null,C=e.value?e.value.getBodyElement():null;return{header:T,body:C}}function x(){const{body:T}=y();T&&(T.scrollTop=0)}function E(){o.value!=="body"?gd(S):o.value=void 0}function A(T){var C;(C=n.onScroll)===null||C===void 0||C.call(n,T),o.value!=="head"?gd(S):o.value=void 0}function S(){const{header:T,body:C}=y();if(!C)return;const{value:L}=r;if(L!==null){if(n.maxHeight||n.flexHeight){if(!T)return;const P=i-T.scrollLeft;o.value=P!==0?"head":"body",o.value==="head"?(i=T.scrollLeft,C.scrollLeft=i):(i=C.scrollLeft,T.scrollLeft=i)}else i=C.scrollLeft;g(),m(),v(),b()}}function w(T){const{header:C}=y();C&&(C.scrollLeft=T,S())}return at(t,()=>{x()}),{styleScrollXRef:c,fixedColumnLeftMapRef:p,fixedColumnRightMapRef:h,leftFixedColumnsRef:u,rightFixedColumnsRef:f,leftActiveFixedColKeyRef:s,leftActiveFixedChildrenColKeysRef:a,rightActiveFixedColKeyRef:l,rightActiveFixedChildrenColKeysRef:d,syncScrollState:S,handleTableBodyScroll:A,handleTableHeaderScroll:E,setHeaderScrollLeft:w}}function Rl(n){return typeof n=="object"&&typeof n.multiple=="number"?n.multiple:!1}function $2(n,e){return e&&(n===void 0||n==="default"||typeof n=="object"&&n.compare==="default")?B2(e):typeof n=="function"?n:n&&typeof n=="object"&&n.compare&&n.compare!=="default"?n.compare:!1}function B2(n){return(e,t)=>{const r=e[n],i=t[n];return r==null?i==null?0:-1:i==null?1:typeof r=="number"&&typeof i=="number"?r-i:typeof r=="string"&&typeof i=="string"?r.localeCompare(i):0}}function N2(n,{dataRelatedColsRef:e,filteredDataRef:t}){const r=[];e.value.forEach(p=>{var h;p.sorter!==void 0&&f(r,{columnKey:p.key,sorter:p.sorter,order:(h=p.defaultSortOrder)!==null&&h!==void 0?h:!1})});const i=G(r),o=U(()=>{const p=e.value.filter(m=>m.type!=="selection"&&m.sorter!==void 0&&(m.sortOrder==="ascend"||m.sortOrder==="descend"||m.sortOrder===!1)),h=p.filter(m=>m.sortOrder!==!1);if(h.length)return h.map(m=>({columnKey:m.key,order:m.sortOrder,sorter:m.sorter}));if(p.length)return[];const{value:g}=i;return Array.isArray(g)?g:g?[g]:[]}),s=U(()=>{const p=o.value.slice().sort((h,g)=>{const m=Rl(h.sorter)||0;return(Rl(g.sorter)||0)-m});return p.length?t.value.slice().sort((g,m)=>{let v=0;return p.some(b=>{const{columnKey:y,sorter:x,order:E}=b,A=$2(x,y);return A&&E&&(v=A(g.rawNode,m.rawNode),v!==0)?(v=v*k$(E),!0):!1}),v}):t.value});function a(p){let h=o.value.slice();return p&&Rl(p.sorter)!==!1?(h=h.filter(g=>Rl(g.sorter)!==!1),f(h,p),h):p||null}function l(p){const h=a(p);d(h)}function d(p){const{"onUpdate:sorter":h,onUpdateSorter:g,onSorterChange:m}=n;h&&we(h,p),g&&we(g,p),m&&we(m,p),i.value=p}function c(p,h="ascend"){if(!p)u();else{const g=e.value.find(v=>v.type!=="selection"&&v.type!=="expand"&&v.key===p);if(!(g!=null&&g.sorter))return;const m=g.sorter;l({columnKey:p,sorter:m,order:h})}}function u(){d(null)}function f(p,h){const g=p.findIndex(m=>(h==null?void 0:h.columnKey)&&m.columnKey===h.columnKey);g!==void 0&&g>=0?p[g]=h:p.push(h)}return{clearSorter:u,sort:c,sortedDataRef:s,mergedSortStateRef:o,deriveNextSorter:l}}function z2(n,{dataRelatedColsRef:e}){const t=U(()=>{const H=B=>{for(let X=0;X<B.length;++X){const se=B[X];if("children"in se)return H(se.children);if(se.type==="selection")return se}return null};return H(n.columns)}),r=U(()=>{const{childrenKey:H}=n;return pc(n.data,{ignoreEmptyChildren:!0,getKey:n.rowKey,getChildren:B=>B[H],getDisabled:B=>{var X,se;return!!(!((se=(X=t.value)===null||X===void 0?void 0:X.disabled)===null||se===void 0)&&se.call(X,B))}})}),i=At(()=>{const{columns:H}=n,{length:B}=H;let X=null;for(let se=0;se<B;++se){const pe=H[se];if(!pe.type&&X===null&&(X=se),"tree"in pe&&pe.tree)return se}return X||0}),o=G({}),{pagination:s}=n,a=G(s&&s.defaultPage||1),l=G(eC(s)),d=U(()=>{const H=e.value.filter(se=>se.filterOptionValues!==void 0||se.filterOptionValue!==void 0),B={};return H.forEach(se=>{var pe;se.type==="selection"||se.type==="expand"||(se.filterOptionValues===void 0?B[se.key]=(pe=se.filterOptionValue)!==null&&pe!==void 0?pe:null:B[se.key]=se.filterOptionValues)}),Object.assign(Ev(o.value),B)}),c=U(()=>{const H=d.value,{columns:B}=n;function X(te){return(W,de)=>!!~String(de[te]).indexOf(String(W))}const{value:{treeNodes:se}}=r,pe=[];return B.forEach(te=>{te.type==="selection"||te.type==="expand"||"children"in te||pe.push([te.key,te])}),se?se.filter(te=>{const{rawNode:W}=te;for(const[de,V]of pe){let ue=H[de];if(ue==null||(Array.isArray(ue)||(ue=[ue]),!ue.length))continue;const Pe=V.filter==="default"?X(de):V.filter;if(V&&typeof Pe=="function")if(V.filterMode==="and"){if(ue.some(Ae=>!Pe(Ae,W)))return!1}else{if(ue.some(Ae=>Pe(Ae,W)))continue;return!1}}return!0}):[]}),{sortedDataRef:u,deriveNextSorter:f,mergedSortStateRef:p,sort:h,clearSorter:g}=N2(n,{dataRelatedColsRef:e,filteredDataRef:c});e.value.forEach(H=>{var B;if(H.filter){const X=H.defaultFilterOptionValues;H.filterMultiple?o.value[H.key]=X||[]:X!==void 0?o.value[H.key]=X===null?[]:X:o.value[H.key]=(B=H.defaultFilterOptionValue)!==null&&B!==void 0?B:null}});const m=U(()=>{const{pagination:H}=n;if(H!==!1)return H.page}),v=U(()=>{const{pagination:H}=n;if(H!==!1)return H.pageSize}),b=kn(m,a),y=kn(v,l),x=At(()=>{const H=b.value;return n.remote?H:Math.max(1,Math.min(Math.ceil(c.value.length/y.value),H))}),E=U(()=>{const{pagination:H}=n;if(H){const{pageCount:B}=H;if(B!==void 0)return B}}),A=U(()=>{if(n.remote)return r.value.treeNodes;if(!n.pagination)return u.value;const H=y.value,B=(x.value-1)*H;return u.value.slice(B,B+H)}),S=U(()=>A.value.map(H=>H.rawNode));function w(H){const{pagination:B}=n;if(B){const{onChange:X,"onUpdate:page":se,onUpdatePage:pe}=B;X&&we(X,H),pe&&we(pe,H),se&&we(se,H),P(H)}}function T(H){const{pagination:B}=n;if(B){const{onPageSizeChange:X,"onUpdate:pageSize":se,onUpdatePageSize:pe}=B;X&&we(X,H),pe&&we(pe,H),se&&we(se,H),_(H)}}const C=U(()=>{if(n.remote){const{pagination:H}=n;if(H){const{itemCount:B}=H;if(B!==void 0)return B}return}return c.value.length}),L=U(()=>Object.assign(Object.assign({},n.pagination),{onChange:void 0,onUpdatePage:void 0,onUpdatePageSize:void 0,onPageSizeChange:void 0,"onUpdate:page":w,"onUpdate:pageSize":T,page:x.value,pageSize:y.value,pageCount:C.value===void 0?E.value:void 0,itemCount:C.value}));function P(H){const{"onUpdate:page":B,onPageChange:X,onUpdatePage:se}=n;se&&we(se,H),B&&we(B,H),X&&we(X,H),a.value=H}function _(H){const{"onUpdate:pageSize":B,onPageSizeChange:X,onUpdatePageSize:se}=n;X&&we(X,H),se&&we(se,H),B&&we(B,H),l.value=H}function D(H,B){const{onUpdateFilters:X,"onUpdate:filters":se,onFiltersChange:pe}=n;X&&we(X,H,B),se&&we(se,H,B),pe&&we(pe,H,B),o.value=H}function k(H,B,X,se){var pe;(pe=n.onUnstableColumnResize)===null||pe===void 0||pe.call(n,H,B,X,se)}function M(H){P(H)}function O(){$()}function $(){K({})}function K(H){Y(H)}function Y(H){H?H&&(o.value=Ev(H)):o.value={}}return{treeMateRef:r,mergedCurrentPageRef:x,mergedPaginationRef:L,paginatedDataRef:A,rawPaginatedDataRef:S,mergedFilterStateRef:d,mergedSortStateRef:p,hoverKeyRef:G(null),selectionColumnRef:t,childTriggerColIndexRef:i,doUpdateFilters:D,deriveNextSorter:f,doUpdatePageSize:_,doUpdatePage:P,onUnstableColumnResize:k,filter:Y,filters:K,clearFilter:O,clearFilters:$,clearSorter:g,page:M,sort:h}}const U2=Ce({name:"DataTable",alias:["AdvancedTable"],props:P$,slots:Object,setup(n,{slots:e}){const{mergedBorderedRef:t,mergedClsPrefixRef:r,inlineThemeDisabled:i,mergedRtlRef:o}=yt(n),s=Dn("DataTable",o,r),a=U(()=>{const{bottomBordered:N}=n;return t.value?!1:N!==void 0?N:!0}),l=Ke("DataTable","-data-table",L2,I$,n,r),d=G(null),c=G(null),{getResizableWidth:u,clearResizableWidth:f,doUpdateResizableWidth:p}=M2(),{rowsRef:h,colsRef:g,dataRelatedColsRef:m,hasEllipsisRef:v}=O2(n,u),{treeMateRef:b,mergedCurrentPageRef:y,paginatedDataRef:x,rawPaginatedDataRef:E,selectionColumnRef:A,hoverKeyRef:S,mergedPaginationRef:w,mergedFilterStateRef:T,mergedSortStateRef:C,childTriggerColIndexRef:L,doUpdatePage:P,doUpdateFilters:_,onUnstableColumnResize:D,deriveNextSorter:k,filter:M,filters:O,clearFilter:$,clearFilters:K,clearSorter:Y,page:H,sort:B}=z2(n,{dataRelatedColsRef:m}),X=N=>{const{fileName:Q="data.csv",keepOriginalData:be=!1}=N||{},Le=be?n.data:E.value,De=B$(n.columns,Le,n.getCsvCell,n.getCsvHeader),$e=new Blob([De],{type:"text/csv;charset=utf-8"}),Ne=URL.createObjectURL($e);PL(Ne,Q.endsWith(".csv")?Q:`${Q}.csv`),URL.revokeObjectURL(Ne)},{doCheckAll:se,doUncheckAll:pe,doCheck:te,doUncheck:W,headerCheckboxDisabledRef:de,someRowsCheckedRef:V,allRowsCheckedRef:ue,mergedCheckedRowKeySetRef:Pe,mergedInderminateRowKeySetRef:Ae}=_2(n,{selectionColumnRef:A,treeMateRef:b,paginatedDataRef:x}),{stickyExpandedRowsRef:F,mergedExpandedRowKeysRef:z,renderExpandRef:ne,expandableRef:ae,doUpdateExpandedRowKeys:le}=k2(n,b),{handleTableBodyScroll:me,handleTableHeaderScroll:fe,syncScrollState:ce,setHeaderScrollLeft:ve,leftActiveFixedColKeyRef:he,leftActiveFixedChildrenColKeysRef:_e,rightActiveFixedColKeyRef:re,rightActiveFixedChildrenColKeysRef:ge,leftFixedColumnsRef:Ee,rightFixedColumnsRef:He,fixedColumnLeftMapRef:et,fixedColumnRightMapRef:Xe}=F2(n,{bodyWidthRef:d,mainTableInstRef:c,mergedCurrentPageRef:y}),{localeRef:lt}=il("DataTable"),Qe=U(()=>n.virtualScroll||n.flexHeight||n.maxHeight!==void 0||v.value?"fixed":n.tableLayout);st(_r,{props:n,treeMateRef:b,renderExpandIconRef:Ie(n,"renderExpandIcon"),loadingKeySetRef:G(new Set),slots:e,indentRef:Ie(n,"indent"),childTriggerColIndexRef:L,bodyWidthRef:d,componentId:ko(),hoverKeyRef:S,mergedClsPrefixRef:r,mergedThemeRef:l,scrollXRef:U(()=>n.scrollX),rowsRef:h,colsRef:g,paginatedDataRef:x,leftActiveFixedColKeyRef:he,leftActiveFixedChildrenColKeysRef:_e,rightActiveFixedColKeyRef:re,rightActiveFixedChildrenColKeysRef:ge,leftFixedColumnsRef:Ee,rightFixedColumnsRef:He,fixedColumnLeftMapRef:et,fixedColumnRightMapRef:Xe,mergedCurrentPageRef:y,someRowsCheckedRef:V,allRowsCheckedRef:ue,mergedSortStateRef:C,mergedFilterStateRef:T,loadingRef:Ie(n,"loading"),rowClassNameRef:Ie(n,"rowClassName"),mergedCheckedRowKeySetRef:Pe,mergedExpandedRowKeysRef:z,mergedInderminateRowKeySetRef:Ae,localeRef:lt,expandableRef:ae,stickyExpandedRowsRef:F,rowKeyRef:Ie(n,"rowKey"),renderExpandRef:ne,summaryRef:Ie(n,"summary"),virtualScrollRef:Ie(n,"virtualScroll"),virtualScrollXRef:Ie(n,"virtualScrollX"),heightForRowRef:Ie(n,"heightForRow"),minRowHeightRef:Ie(n,"minRowHeight"),virtualScrollHeaderRef:Ie(n,"virtualScrollHeader"),headerHeightRef:Ie(n,"headerHeight"),rowPropsRef:Ie(n,"rowProps"),stripedRef:Ie(n,"striped"),checkOptionsRef:U(()=>{const{value:N}=A;return N==null?void 0:N.options}),rawPaginatedDataRef:E,filterMenuCssVarsRef:U(()=>{const{self:{actionDividerColor:N,actionPadding:Q,actionButtonMargin:be}}=l.value;return{"--n-action-padding":Q,"--n-action-button-margin":be,"--n-action-divider-color":N}}),onLoadRef:Ie(n,"onLoad"),mergedTableLayoutRef:Qe,maxHeightRef:Ie(n,"maxHeight"),minHeightRef:Ie(n,"minHeight"),flexHeightRef:Ie(n,"flexHeight"),headerCheckboxDisabledRef:de,paginationBehaviorOnFilterRef:Ie(n,"paginationBehaviorOnFilter"),summaryPlacementRef:Ie(n,"summaryPlacement"),filterIconPopoverPropsRef:Ie(n,"filterIconPopoverProps"),scrollbarPropsRef:Ie(n,"scrollbarProps"),syncScrollState:ce,doUpdatePage:P,doUpdateFilters:_,getResizableWidth:u,onUnstableColumnResize:D,clearResizableWidth:f,doUpdateResizableWidth:p,deriveNextSorter:k,doCheck:te,doUncheck:W,doCheckAll:se,doUncheckAll:pe,doUpdateExpandedRowKeys:le,handleTableHeaderScroll:fe,handleTableBodyScroll:me,setHeaderScrollLeft:ve,renderCell:Ie(n,"renderCell")});const xt={filter:M,filters:O,clearFilters:K,clearSorter:Y,page:H,sort:B,clearFilter:$,downloadCsv:X,scrollTo:(N,Q)=>{var be;(be=c.value)===null||be===void 0||be.scrollTo(N,Q)}},it=U(()=>{const{size:N}=n,{common:{cubicBezierEaseInOut:Q},self:{borderColor:be,tdColorHover:Le,tdColorSorting:De,tdColorSortingModal:$e,tdColorSortingPopover:Ne,thColorSorting:je,thColorSortingModal:ht,thColorSortingPopover:Dt,thColor:St,thColorHover:vn,tdColor:En,tdTextColor:Rn,thTextColor:On,thFontWeight:Mn,thButtonColorHover:sr,thIconColor:Fn,thIconColorActive:J,filterSize:Se,borderRadius:Ve,lineHeight:ot,tdColorModal:Et,thColorModal:pt,borderColorModal:Ft,thColorHoverModal:Vt,tdColorHoverModal:jn,borderColorPopover:ti,thColorPopover:ni,tdColorPopover:lo,tdColorHoverPopover:Bs,thColorHoverPopover:Ns,paginationMargin:zs,emptyPadding:Us,boxShadowAfter:Hs,boxShadowBefore:Ei,sorterSize:Ri,resizableContainerSize:Tc,resizableSize:wc,loadingColor:Ec,loadingSize:Rc,opacityLoading:Ac,tdColorStriped:Ic,tdColorStripedModal:Lc,tdColorStripedPopover:Pc,[xe("fontSize",N)]:_c,[xe("thPadding",N)]:kc,[xe("tdPadding",N)]:Dc}}=l.value;return{"--n-font-size":_c,"--n-th-padding":kc,"--n-td-padding":Dc,"--n-bezier":Q,"--n-border-radius":Ve,"--n-line-height":ot,"--n-border-color":be,"--n-border-color-modal":Ft,"--n-border-color-popover":ti,"--n-th-color":St,"--n-th-color-hover":vn,"--n-th-color-modal":pt,"--n-th-color-hover-modal":Vt,"--n-th-color-popover":ni,"--n-th-color-hover-popover":Ns,"--n-td-color":En,"--n-td-color-hover":Le,"--n-td-color-modal":Et,"--n-td-color-hover-modal":jn,"--n-td-color-popover":lo,"--n-td-color-hover-popover":Bs,"--n-th-text-color":On,"--n-td-text-color":Rn,"--n-th-font-weight":Mn,"--n-th-button-color-hover":sr,"--n-th-icon-color":Fn,"--n-th-icon-color-active":J,"--n-filter-size":Se,"--n-pagination-margin":zs,"--n-empty-padding":Us,"--n-box-shadow-before":Ei,"--n-box-shadow-after":Hs,"--n-sorter-size":Ri,"--n-resizable-container-size":Tc,"--n-resizable-size":wc,"--n-loading-size":Rc,"--n-loading-color":Ec,"--n-opacity-loading":Ac,"--n-td-color-striped":Ic,"--n-td-color-striped-modal":Lc,"--n-td-color-striped-popover":Pc,"--n-td-color-sorting":De,"--n-td-color-sorting-modal":$e,"--n-td-color-sorting-popover":Ne,"--n-th-color-sorting":je,"--n-th-color-sorting-modal":ht,"--n-th-color-sorting-popover":Dt}}),ke=i?Gt("data-table",U(()=>n.size[0]),it,n):void 0,We=U(()=>{if(!n.pagination)return!1;if(n.paginateSinglePage)return!0;const N=w.value,{pageCount:Q}=N;return Q!==void 0?Q>1:N.itemCount&&N.pageSize&&N.itemCount>N.pageSize});return Object.assign({mainTableInstRef:c,mergedClsPrefix:r,rtlEnabled:s,mergedTheme:l,paginatedData:x,mergedBordered:t,mergedBottomBordered:a,mergedPagination:w,mergedShowPagination:We,cssVars:i?void 0:it,themeClass:ke==null?void 0:ke.themeClass,onRender:ke==null?void 0:ke.onRender},xt)},render(){const{mergedClsPrefix:n,themeClass:e,onRender:t,$slots:r,spinProps:i}=this;return t==null||t(),R("div",{class:[`${n}-data-table`,this.rtlEnabled&&`${n}-data-table--rtl`,e,{[`${n}-data-table--bordered`]:this.mergedBordered,[`${n}-data-table--bottom-bordered`]:this.mergedBottomBordered,[`${n}-data-table--single-line`]:this.singleLine,[`${n}-data-table--single-column`]:this.singleColumn,[`${n}-data-table--loading`]:this.loading,[`${n}-data-table--flex-height`]:this.flexHeight}],style:this.cssVars},R("div",{class:`${n}-data-table-wrapper`},R(I2,{ref:"mainTableInstRef"})),this.mergedShowPagination?R("div",{class:`${n}-data-table__pagination`},R(T$,Object.assign({theme:this.mergedTheme.peers.Pagination,themeOverrides:this.mergedTheme.peerOverrides.Pagination,disabled:this.loading},this.mergedPagination))):null,R(ir,{name:"fade-in-scale-up-transition"},{default:()=>this.loading?R("div",{class:`${n}-data-table-loading-wrapper`},Er(r.loading,()=>[R(ao,Object.assign({clsPrefix:n,strokeWidth:20},i))])):null}))}}),H2={itemFontSize:"12px",itemHeight:"36px",itemWidth:"52px",panelActionPadding:"8px 0"};function V2(n){const{popoverColor:e,textColor2:t,primaryColor:r,hoverColor:i,dividerColor:o,opacityDisabled:s,boxShadow2:a,borderRadius:l,iconColor:d,iconColorDisabled:c}=n;return Object.assign(Object.assign({},H2),{panelColor:e,panelBoxShadow:a,panelDividerColor:o,itemTextColor:t,itemTextColorActive:r,itemColorHover:i,itemOpacityDisabled:s,itemBorderRadius:l,borderRadius:l,iconColor:d,iconColorDisabled:c})}const RC={name:"TimePicker",common:Re,peers:{Scrollbar:Gn,Button:Wn,Input:or},self:V2},G2={itemSize:"24px",itemCellWidth:"38px",itemCellHeight:"32px",scrollItemWidth:"80px",scrollItemHeight:"40px",panelExtraFooterPadding:"8px 12px",panelActionPadding:"8px 12px",calendarTitlePadding:"0",calendarTitleHeight:"28px",arrowSize:"14px",panelHeaderPadding:"8px 12px",calendarDaysHeight:"32px",calendarTitleGridTempateColumns:"28px 28px 1fr 28px 28px",calendarLeftPaddingDate:"6px 12px 4px 12px",calendarLeftPaddingDatetime:"4px 12px",calendarLeftPaddingDaterange:"6px 12px 4px 12px",calendarLeftPaddingDatetimerange:"4px 12px",calendarLeftPaddingMonth:"0",calendarLeftPaddingYear:"0",calendarLeftPaddingQuarter:"0",calendarLeftPaddingMonthrange:"0",calendarLeftPaddingQuarterrange:"0",calendarLeftPaddingYearrange:"0",calendarLeftPaddingWeek:"6px 12px 4px 12px",calendarRightPaddingDate:"6px 12px 4px 12px",calendarRightPaddingDatetime:"4px 12px",calendarRightPaddingDaterange:"6px 12px 4px 12px",calendarRightPaddingDatetimerange:"4px 12px",calendarRightPaddingMonth:"0",calendarRightPaddingYear:"0",calendarRightPaddingQuarter:"0",calendarRightPaddingMonthrange:"0",calendarRightPaddingQuarterrange:"0",calendarRightPaddingYearrange:"0",calendarRightPaddingWeek:"0"};function W2(n){const{hoverColor:e,fontSize:t,textColor2:r,textColorDisabled:i,popoverColor:o,primaryColor:s,borderRadiusSmall:a,iconColor:l,iconColorDisabled:d,textColor1:c,dividerColor:u,boxShadow2:f,borderRadius:p,fontWeightStrong:h}=n;return Object.assign(Object.assign({},G2),{itemFontSize:t,calendarDaysFontSize:t,calendarTitleFontSize:t,itemTextColor:r,itemTextColorDisabled:i,itemTextColorActive:o,itemTextColorCurrent:s,itemColorIncluded:Te(s,{alpha:.1}),itemColorHover:e,itemColorDisabled:e,itemColorActive:s,itemBorderRadius:a,panelColor:o,panelTextColor:r,arrowColor:l,calendarTitleTextColor:c,calendarTitleColorHover:e,calendarDaysTextColor:r,panelHeaderDividerColor:u,calendarDaysDividerColor:u,calendarDividerColor:u,panelActionDividerColor:u,panelBoxShadow:f,panelBorderRadius:p,calendarTitleFontWeight:h,scrollItemBorderRadius:p,iconColor:l,iconColorDisabled:d})}const j2={name:"DatePicker",common:Re,peers:{Input:or,Button:Wn,TimePicker:RC,Scrollbar:Gn},self(n){const{popoverColor:e,hoverColor:t,primaryColor:r}=n,i=W2(n);return i.itemColorDisabled=ze(e,t),i.itemColorIncluded=Te(r,{alpha:.15}),i.itemColorHover=ze(e,t),i}},K2={thPaddingBorderedSmall:"8px 12px",thPaddingBorderedMedium:"12px 16px",thPaddingBorderedLarge:"16px 24px",thPaddingSmall:"0",thPaddingMedium:"0",thPaddingLarge:"0",tdPaddingBorderedSmall:"8px 12px",tdPaddingBorderedMedium:"12px 16px",tdPaddingBorderedLarge:"16px 24px",tdPaddingSmall:"0 0 8px 0",tdPaddingMedium:"0 0 12px 0",tdPaddingLarge:"0 0 16px 0"};function q2(n){const{tableHeaderColor:e,textColor2:t,textColor1:r,cardColor:i,modalColor:o,popoverColor:s,dividerColor:a,borderRadius:l,fontWeightStrong:d,lineHeight:c,fontSizeSmall:u,fontSizeMedium:f,fontSizeLarge:p}=n;return Object.assign(Object.assign({},K2),{lineHeight:c,fontSizeSmall:u,fontSizeMedium:f,fontSizeLarge:p,titleTextColor:r,thColor:ze(i,e),thColorModal:ze(o,e),thColorPopover:ze(s,e),thTextColor:r,thFontWeight:d,tdTextColor:t,tdColor:i,tdColorModal:o,tdColorPopover:s,borderColor:ze(i,a),borderColorModal:ze(o,a),borderColorPopover:ze(s,a),borderRadius:l})}const Y2={name:"Descriptions",common:Re,self:q2},AC="n-dialog-provider",IC="n-dialog-api",X2="n-dialog-reactive-list";function Q2(){const n=Be(IC,null);return n===null&&Kh("use-dialog","No outer <n-dialog-provider /> founded."),n}const Z2={titleFontSize:"18px",padding:"16px 28px 20px 28px",iconSize:"28px",actionSpace:"12px",contentMargin:"8px 0 16px 0",iconMargin:"0 4px 0 0",iconMarginIconTop:"4px 0 8px 0",closeSize:"22px",closeIconSize:"18px",closeMargin:"20px 26px 0 0",closeMarginIconTop:"10px 16px 0 0"};function LC(n){const{textColor1:e,textColor2:t,modalColor:r,closeIconColor:i,closeIconColorHover:o,closeIconColorPressed:s,closeColorHover:a,closeColorPressed:l,infoColor:d,successColor:c,warningColor:u,errorColor:f,primaryColor:p,dividerColor:h,borderRadius:g,fontWeightStrong:m,lineHeight:v,fontSize:b}=n;return Object.assign(Object.assign({},Z2),{fontSize:b,lineHeight:v,border:`1px solid ${h}`,titleTextColor:e,textColor:t,color:r,closeColorHover:a,closeColorPressed:l,closeIconColor:i,closeIconColorHover:o,closeIconColorPressed:s,closeBorderRadius:g,iconColor:p,iconColorInfo:d,iconColorSuccess:c,iconColorWarning:u,iconColorError:f,borderRadius:g,titleFontWeight:m})}const PC={name:"Dialog",common:Ht,peers:{Button:cp},self:LC},_C={name:"Dialog",common:Re,peers:{Button:Wn},self:LC},bc={icon:Function,type:{type:String,default:"default"},title:[String,Function],closable:{type:Boolean,default:!0},negativeText:String,positiveText:String,positiveButtonProps:Object,negativeButtonProps:Object,content:[String,Function],action:Function,showIcon:{type:Boolean,default:!0},loading:Boolean,bordered:Boolean,iconPlacement:String,titleClass:[String,Array],titleStyle:[String,Object],contentClass:[String,Array],contentStyle:[String,Object],actionClass:[String,Array],actionStyle:[String,Object],onPositiveClick:Function,onNegativeClick:Function,onClose:Function},kC=Es(bc),J2=Z([j("dialog",`
 --n-icon-margin: var(--n-icon-margin-top) var(--n-icon-margin-right) var(--n-icon-margin-bottom) var(--n-icon-margin-left);
 word-break: break-word;
 line-height: var(--n-line-height);
 position: relative;
 background: var(--n-color);
 color: var(--n-text-color);
 box-sizing: border-box;
 margin: auto;
 border-radius: var(--n-border-radius);
 padding: var(--n-padding);
 transition: 
 border-color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `,[q("icon",{color:"var(--n-icon-color)"}),ee("bordered",{border:"var(--n-border)"}),ee("icon-top",[q("close",{margin:"var(--n-close-margin)"}),q("icon",{margin:"var(--n-icon-margin)"}),q("content",{textAlign:"center"}),q("title",{justifyContent:"center"}),q("action",{justifyContent:"center"})]),ee("icon-left",[q("icon",{margin:"var(--n-icon-margin)"}),ee("closable",[q("title",`
 padding-right: calc(var(--n-close-size) + 6px);
 `)])]),q("close",`
 position: absolute;
 right: 0;
 top: 0;
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 z-index: 1;
 `),q("content",`
 font-size: var(--n-font-size);
 margin: var(--n-content-margin);
 position: relative;
 word-break: break-word;
 `,[ee("last","margin-bottom: 0;")]),q("action",`
 display: flex;
 justify-content: flex-end;
 `,[Z("> *:not(:last-child)",`
 margin-right: var(--n-action-space);
 `)]),q("icon",`
 font-size: var(--n-icon-size);
 transition: color .3s var(--n-bezier);
 `),q("title",`
 transition: color .3s var(--n-bezier);
 display: flex;
 align-items: center;
 font-size: var(--n-title-font-size);
 font-weight: var(--n-title-font-weight);
 color: var(--n-title-text-color);
 `),j("dialog-icon-container",`
 display: flex;
 justify-content: center;
 `)]),oc(j("dialog",`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)),j("dialog",[ex(`
 width: 446px;
 max-width: calc(100vw - 32px);
 `)])]),eB={default:()=>R(_f,null),info:()=>R(_f,null),success:()=>R(cS,null),warning:()=>R(uS,null),error:()=>R(dS,null)},DC=Ce({name:"Dialog",alias:["NimbusConfirmCard","Confirm"],props:Object.assign(Object.assign({},Ke.props),bc),slots:Object,setup(n){const{mergedComponentPropsRef:e,mergedClsPrefixRef:t,inlineThemeDisabled:r,mergedRtlRef:i}=yt(n),o=Dn("Dialog",i,t),s=U(()=>{var p,h;const{iconPlacement:g}=n;return g||((h=(p=e==null?void 0:e.value)===null||p===void 0?void 0:p.Dialog)===null||h===void 0?void 0:h.iconPlacement)||"left"});function a(p){const{onPositiveClick:h}=n;h&&h(p)}function l(p){const{onNegativeClick:h}=n;h&&h(p)}function d(){const{onClose:p}=n;p&&p()}const c=Ke("Dialog","-dialog",J2,PC,n,t),u=U(()=>{const{type:p}=n,h=s.value,{common:{cubicBezierEaseInOut:g},self:{fontSize:m,lineHeight:v,border:b,titleTextColor:y,textColor:x,color:E,closeBorderRadius:A,closeColorHover:S,closeColorPressed:w,closeIconColor:T,closeIconColorHover:C,closeIconColorPressed:L,closeIconSize:P,borderRadius:_,titleFontWeight:D,titleFontSize:k,padding:M,iconSize:O,actionSpace:$,contentMargin:K,closeSize:Y,[h==="top"?"iconMarginIconTop":"iconMargin"]:H,[h==="top"?"closeMarginIconTop":"closeMargin"]:B,[xe("iconColor",p)]:X}}=c.value,se=Hn(H);return{"--n-font-size":m,"--n-icon-color":X,"--n-bezier":g,"--n-close-margin":B,"--n-icon-margin-top":se.top,"--n-icon-margin-right":se.right,"--n-icon-margin-bottom":se.bottom,"--n-icon-margin-left":se.left,"--n-icon-size":O,"--n-close-size":Y,"--n-close-icon-size":P,"--n-close-border-radius":A,"--n-close-color-hover":S,"--n-close-color-pressed":w,"--n-close-icon-color":T,"--n-close-icon-color-hover":C,"--n-close-icon-color-pressed":L,"--n-color":E,"--n-text-color":x,"--n-border-radius":_,"--n-padding":M,"--n-line-height":v,"--n-border":b,"--n-content-margin":K,"--n-title-font-size":k,"--n-title-font-weight":D,"--n-title-text-color":y,"--n-action-space":$}}),f=r?Gt("dialog",U(()=>`${n.type[0]}${s.value[0]}`),u,n):void 0;return{mergedClsPrefix:t,rtlEnabled:o,mergedIconPlacement:s,mergedTheme:c,handlePositiveClick:a,handleNegativeClick:l,handleCloseClick:d,cssVars:r?void 0:u,themeClass:f==null?void 0:f.themeClass,onRender:f==null?void 0:f.onRender}},render(){var n;const{bordered:e,mergedIconPlacement:t,cssVars:r,closable:i,showIcon:o,title:s,content:a,action:l,negativeText:d,positiveText:c,positiveButtonProps:u,negativeButtonProps:f,handlePositiveClick:p,handleNegativeClick:h,mergedTheme:g,loading:m,type:v,mergedClsPrefix:b}=this;(n=this.onRender)===null||n===void 0||n.call(this);const y=o?R(on,{clsPrefix:b,class:`${b}-dialog__icon`},{default:()=>Ct(this.$slots.icon,E=>E||(this.icon?gn(this.icon):eB[this.type]()))}):null,x=Ct(this.$slots.action,E=>E||c||d||l?R("div",{class:[`${b}-dialog__action`,this.actionClass],style:this.actionStyle},E||(l?[gn(l)]:[this.negativeText&&R(zn,Object.assign({theme:g.peers.Button,themeOverrides:g.peerOverrides.Button,ghost:!0,size:"small",onClick:h},f),{default:()=>gn(this.negativeText)}),this.positiveText&&R(zn,Object.assign({theme:g.peers.Button,themeOverrides:g.peerOverrides.Button,size:"small",type:v==="default"?"primary":v,disabled:m,loading:m,onClick:p},u),{default:()=>gn(this.positiveText)})])):null);return R("div",{class:[`${b}-dialog`,this.themeClass,this.closable&&`${b}-dialog--closable`,`${b}-dialog--icon-${t}`,e&&`${b}-dialog--bordered`,this.rtlEnabled&&`${b}-dialog--rtl`],style:r,role:"dialog"},i?Ct(this.$slots.close,E=>{const A=[`${b}-dialog__close`,this.rtlEnabled&&`${b}-dialog--rtl`];return E?R("div",{class:A},E):R(fc,{clsPrefix:b,class:A,onClick:this.handleCloseClick})}):null,o&&t==="top"?R("div",{class:`${b}-dialog-icon-container`},y):null,R("div",{class:[`${b}-dialog__title`,this.titleClass],style:this.titleStyle},o&&t==="left"?y:null,Er(this.$slots.header,()=>[gn(s)])),R("div",{class:[`${b}-dialog__content`,x?"":`${b}-dialog__content--last`,this.contentClass],style:this.contentStyle},Er(this.$slots.default,()=>[gn(a)])),x)}});function OC(n){const{modalColor:e,textColor2:t,boxShadow3:r}=n;return{color:e,textColor:t,boxShadow:r}}const tB={name:"Modal",common:Ht,peers:{Scrollbar:hc,Dialog:PC,Card:NS},self:OC},nB={name:"Modal",common:Re,peers:{Scrollbar:Gn,Dialog:_C,Card:zS},self:OC},$f="n-draggable";function rB(n,e){let t;const r=U(()=>n.value!==!1),i=U(()=>r.value?$f:""),o=U(()=>{const l=n.value;return l===!0||l===!1?!0:l?l.bounds!=="none":!0});function s(l){const d=l.querySelector(`.${$f}`);if(!d||!i.value)return;let c=0,u=0,f=0,p=0,h=0,g=0,m;function v(x){x.preventDefault(),m=x;const{x:E,y:A,right:S,bottom:w}=l.getBoundingClientRect();u=E,p=A,c=window.innerWidth-S,f=window.innerHeight-w;const{left:T,top:C}=l.style;h=+C.slice(0,-2),g=+T.slice(0,-2)}function b(x){if(!m)return;const{clientX:E,clientY:A}=m;let S=x.clientX-E,w=x.clientY-A;o.value&&(S>c?S=c:-S>u&&(S=-u),w>f?w=f:-w>p&&(w=-p));const T=S+g,C=w+h;l.style.top=`${C}px`,l.style.left=`${T}px`}function y(){m=void 0,e.onEnd(l)}Tt("mousedown",d,v),Tt("mousemove",window,b),Tt("mouseup",window,y),t=()=>{bt("mousedown",d,v),Tt("mousemove",window,b),Tt("mouseup",window,y)}}function a(){t&&(t(),t=void 0)}return io(a),{stopDrag:a,startDrag:s,draggableRef:r,draggableClassRef:i}}const yp=Object.assign(Object.assign({},up),bc),iB=Es(yp),oB=Ce({name:"ModalBody",inheritAttrs:!1,slots:Object,props:Object.assign(Object.assign({show:{type:Boolean,required:!0},preset:String,displayDirective:{type:String,required:!0},trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},blockScroll:Boolean,draggable:{type:[Boolean,Object],default:!1}},yp),{renderMask:Function,onClickoutside:Function,onBeforeLeave:{type:Function,required:!0},onAfterLeave:{type:Function,required:!0},onPositiveClick:{type:Function,required:!0},onNegativeClick:{type:Function,required:!0},onClose:{type:Function,required:!0},onAfterEnter:Function,onEsc:Function}),setup(n){const e=G(null),t=G(null),r=G(n.show),i=G(null),o=G(null),s=Be(cx);let a=null;at(Ie(n,"show"),w=>{w&&(a=s.getMousePosition())},{immediate:!0});const{stopDrag:l,startDrag:d,draggableRef:c,draggableClassRef:u}=rB(Ie(n,"draggable"),{onEnd:w=>{g(w)}}),f=U(()=>Io([n.titleClass,u.value])),p=U(()=>Io([n.headerClass,u.value]));at(Ie(n,"show"),w=>{w&&(r.value=!0)}),BI(U(()=>n.blockScroll&&r.value));function h(){if(s.transformOriginRef.value==="center")return"";const{value:w}=i,{value:T}=o;if(w===null||T===null)return"";if(t.value){const C=t.value.containerScrollTop;return`${w}px ${T+C}px`}return""}function g(w){if(s.transformOriginRef.value==="center"||!a||!t.value)return;const T=t.value.containerScrollTop,{offsetLeft:C,offsetTop:L}=w,P=a.y,_=a.x;i.value=-(C-_),o.value=-(L-P-T),w.style.transformOrigin=h()}function m(w){wn(()=>{g(w)})}function v(w){w.style.transformOrigin=h(),n.onBeforeLeave()}function b(w){const T=w;c.value&&d(T),n.onAfterEnter&&n.onAfterEnter(T)}function y(){r.value=!1,i.value=null,o.value=null,l(),n.onAfterLeave()}function x(){const{onClose:w}=n;w&&w()}function E(){n.onNegativeClick()}function A(){n.onPositiveClick()}const S=G(null);return at(S,w=>{w&&wn(()=>{const T=w.el;T&&e.value!==T&&(e.value=T)})}),st(ac,e),st(sc,null),st(tl,null),{mergedTheme:s.mergedThemeRef,appear:s.appearRef,isMounted:s.isMountedRef,mergedClsPrefix:s.mergedClsPrefixRef,bodyRef:e,scrollbarRef:t,draggableClass:u,displayed:r,childNodeRef:S,cardHeaderClass:p,dialogTitleClass:f,handlePositiveClick:A,handleNegativeClick:E,handleCloseClick:x,handleAfterEnter:b,handleAfterLeave:y,handleBeforeLeave:v,handleEnter:m}},render(){const{$slots:n,$attrs:e,handleEnter:t,handleAfterEnter:r,handleAfterLeave:i,handleBeforeLeave:o,preset:s,mergedClsPrefix:a}=this;let l=null;if(!s){if(l=ML("default",n.default,{draggableClass:this.draggableClass}),!l){Lr("modal","default slot is empty");return}l=qr(l),l.props=Ar({class:`${a}-modal`},e,l.props||{})}return this.displayDirective==="show"||this.displayed||this.show?qi(R("div",{role:"none",class:`${a}-modal-body-wrapper`},R(Ms,{ref:"scrollbarRef",theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar,contentClass:`${a}-modal-scroll-content`},{default:()=>{var d;return[(d=this.renderMask)===null||d===void 0?void 0:d.call(this),R(Ax,{disabled:!this.trapFocus,active:this.show,onEsc:this.onEsc,autoFocus:this.autoFocus},{default:()=>{var c;return R(ir,{name:"fade-in-scale-up-transition",appear:(c=this.appear)!==null&&c!==void 0?c:this.isMounted,onEnter:t,onAfterEnter:r,onAfterLeave:i,onBeforeLeave:o},{default:()=>{const u=[[fd,this.show]],{onClickoutside:f}=this;return f&&u.push([$a,this.onClickoutside,void 0,{capture:!0}]),qi(this.preset==="confirm"||this.preset==="dialog"?R(DC,Object.assign({},this.$attrs,{class:[`${a}-modal`,this.$attrs.class],ref:"bodyRef",theme:this.mergedTheme.peers.Dialog,themeOverrides:this.mergedTheme.peerOverrides.Dialog},Do(this.$props,kC),{titleClass:this.dialogTitleClass,"aria-modal":"true"}),n):this.preset==="card"?R(jF,Object.assign({},this.$attrs,{ref:"bodyRef",class:[`${a}-modal`,this.$attrs.class],theme:this.mergedTheme.peers.Card,themeOverrides:this.mergedTheme.peerOverrides.Card},Do(this.$props,GF),{headerClass:this.cardHeaderClass,"aria-modal":"true",role:"dialog"}),n):this.childNodeRef=l,u)}})}})]}})),[[fd,this.displayDirective==="if"||this.displayed||this.show]]):null}}),sB=Z([j("modal-container",`
 position: fixed;
 left: 0;
 top: 0;
 height: 0;
 width: 0;
 display: flex;
 `),j("modal-mask",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 background-color: rgba(0, 0, 0, .4);
 `,[sp({enterDuration:".25s",leaveDuration:".25s",enterCubicBezier:"var(--n-bezier-ease-out)",leaveCubicBezier:"var(--n-bezier-ease-out)"})]),j("modal-body-wrapper",`
 position: fixed;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 overflow: visible;
 `,[j("modal-scroll-content",`
 min-height: 100%;
 display: flex;
 position: relative;
 `)]),j("modal",`
 position: relative;
 align-self: center;
 color: var(--n-text-color);
 margin: auto;
 box-shadow: var(--n-box-shadow);
 `,[sl({duration:".25s",enterScale:".5"}),Z(`.${$f}`,`
 cursor: move;
 user-select: none;
 `)])]),aB=Object.assign(Object.assign(Object.assign(Object.assign({},Ke.props),{show:Boolean,unstableShowMask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0},preset:String,to:[String,Object],displayDirective:{type:String,default:"if"},transformOrigin:{type:String,default:"mouse"},zIndex:Number,autoFocus:{type:Boolean,default:!0},trapFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0}}),yp),{draggable:[Boolean,Object],onEsc:Function,"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onBeforeLeave:Function,onAfterLeave:Function,onClose:Function,onPositiveClick:Function,onNegativeClick:Function,onMaskClick:Function,internalDialog:Boolean,internalModal:Boolean,internalAppear:{type:Boolean,default:void 0},overlayStyle:[String,Object],onBeforeHide:Function,onAfterHide:Function,onHide:Function}),MC=Ce({name:"Modal",inheritAttrs:!1,props:aB,slots:Object,setup(n){const e=G(null),{mergedClsPrefixRef:t,namespaceRef:r,inlineThemeDisabled:i}=yt(n),o=Ke("Modal","-modal",sB,tB,n,t),s=lx(64),a=ax(),l=el(),d=n.internalDialog?Be(AC,null):null,c=n.internalModal?Be(OI,null):null,u=$I();function f(A){const{onUpdateShow:S,"onUpdate:show":w,onHide:T}=n;S&&we(S,A),w&&we(w,A),T&&!A&&T(A)}function p(){const{onClose:A}=n;A?Promise.resolve(A()).then(S=>{S!==!1&&f(!1)}):f(!1)}function h(){const{onPositiveClick:A}=n;A?Promise.resolve(A()).then(S=>{S!==!1&&f(!1)}):f(!1)}function g(){const{onNegativeClick:A}=n;A?Promise.resolve(A()).then(S=>{S!==!1&&f(!1)}):f(!1)}function m(){const{onBeforeLeave:A,onBeforeHide:S}=n;A&&we(A),S&&S()}function v(){const{onAfterLeave:A,onAfterHide:S}=n;A&&we(A),S&&S()}function b(A){var S;const{onMaskClick:w}=n;w&&w(A),n.maskClosable&&!((S=e.value)===null||S===void 0)&&S.contains(Ts(A))&&f(!1)}function y(A){var S;(S=n.onEsc)===null||S===void 0||S.call(n),n.show&&n.closeOnEsc&&DL(A)&&(u.value||f(!1))}st(cx,{getMousePosition:()=>{const A=d||c;if(A){const{clickedRef:S,clickedPositionRef:w}=A;if(S.value&&w.value)return w.value}return s.value?a.value:null},mergedClsPrefixRef:t,mergedThemeRef:o,isMountedRef:l,appearRef:Ie(n,"internalAppear"),transformOriginRef:Ie(n,"transformOrigin")});const x=U(()=>{const{common:{cubicBezierEaseOut:A},self:{boxShadow:S,color:w,textColor:T}}=o.value;return{"--n-bezier-ease-out":A,"--n-box-shadow":S,"--n-color":w,"--n-text-color":T}}),E=i?Gt("theme-class",void 0,x,n):void 0;return{mergedClsPrefix:t,namespace:r,isMounted:l,containerRef:e,presetProps:U(()=>Do(n,iB)),handleEsc:y,handleAfterLeave:v,handleClickoutside:b,handleBeforeLeave:m,doUpdateShow:f,handleNegativeClick:g,handlePositiveClick:h,handleCloseClick:p,cssVars:i?void 0:x,themeClass:E==null?void 0:E.themeClass,onRender:E==null?void 0:E.onRender}},render(){const{mergedClsPrefix:n}=this;return R(gx,{to:this.to,show:this.show},{default:()=>{var e;(e=this.onRender)===null||e===void 0||e.call(this);const{unstableShowMask:t}=this;return qi(R("div",{role:"none",ref:"containerRef",class:[`${n}-modal-container`,this.themeClass,this.namespace],style:this.cssVars},R(oB,Object.assign({style:this.overlayStyle},this.$attrs,{ref:"bodyWrapper",displayDirective:this.displayDirective,show:this.show,preset:this.preset,autoFocus:this.autoFocus,trapFocus:this.trapFocus,draggable:this.draggable,blockScroll:this.blockScroll},this.presetProps,{onEsc:this.handleEsc,onClose:this.handleCloseClick,onNegativeClick:this.handleNegativeClick,onPositiveClick:this.handlePositiveClick,onBeforeLeave:this.handleBeforeLeave,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave,onClickoutside:t?void 0:this.handleClickoutside,renderMask:t?()=>{var r;return R(ir,{name:"fade-in-transition",key:"mask",appear:(r=this.internalAppear)!==null&&r!==void 0?r:this.isMounted},{default:()=>this.show?R("div",{"aria-hidden":!0,ref:"containerRef",class:`${n}-modal-mask`,onClick:this.handleClickoutside}):null})}:void 0}),this.$slots)),[[Hh,{zIndex:this.zIndex,enabled:this.show}]])}})}}),lB=Object.assign(Object.assign({},bc),{onAfterEnter:Function,onAfterLeave:Function,transformOrigin:String,blockScroll:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},internalStyle:[String,Object],maskClosable:{type:Boolean,default:!0},onPositiveClick:Function,onNegativeClick:Function,onClose:Function,onMaskClick:Function,draggable:[Boolean,Object]}),dB=Ce({name:"DialogEnvironment",props:Object.assign(Object.assign({},lB),{internalKey:{type:String,required:!0},to:[String,Object],onInternalAfterLeave:{type:Function,required:!0}}),setup(n){const e=G(!0);function t(){const{onInternalAfterLeave:c,internalKey:u,onAfterLeave:f}=n;c&&c(u),f&&f()}function r(c){const{onPositiveClick:u}=n;u?Promise.resolve(u(c)).then(f=>{f!==!1&&l()}):l()}function i(c){const{onNegativeClick:u}=n;u?Promise.resolve(u(c)).then(f=>{f!==!1&&l()}):l()}function o(){const{onClose:c}=n;c?Promise.resolve(c()).then(u=>{u!==!1&&l()}):l()}function s(c){const{onMaskClick:u,maskClosable:f}=n;u&&(u(c),f&&l())}function a(){const{onEsc:c}=n;c&&c()}function l(){e.value=!1}function d(c){e.value=c}return{show:e,hide:l,handleUpdateShow:d,handleAfterLeave:t,handleCloseClick:o,handleNegativeClick:i,handlePositiveClick:r,handleMaskClick:s,handleEsc:a}},render(){const{handlePositiveClick:n,handleUpdateShow:e,handleNegativeClick:t,handleCloseClick:r,handleAfterLeave:i,handleMaskClick:o,handleEsc:s,to:a,maskClosable:l,show:d}=this;return R(MC,{show:d,onUpdateShow:e,onMaskClick:o,onEsc:s,to:a,maskClosable:l,onAfterEnter:this.onAfterEnter,onAfterLeave:i,closeOnEsc:this.closeOnEsc,blockScroll:this.blockScroll,autoFocus:this.autoFocus,transformOrigin:this.transformOrigin,draggable:this.draggable,internalAppear:!0,internalDialog:!0},{default:({draggableClass:c})=>R(DC,Object.assign({},Do(this.$props,kC),{titleClass:Io([this.titleClass,c]),style:this.internalStyle,onClose:r,onNegativeClick:t,onPositiveClick:n}))})}}),cB={injectionKey:String,to:[String,Object]},uB=Ce({name:"DialogProvider",props:cB,setup(){const n=G([]),e={};function t(a={}){const l=ko(),d=no(Object.assign(Object.assign({},a),{key:l,destroy:()=>{var c;(c=e[`n-dialog-${l}`])===null||c===void 0||c.hide()}}));return n.value.push(d),d}const r=["info","success","warning","error"].map(a=>l=>t(Object.assign(Object.assign({},l),{type:a})));function i(a){const{value:l}=n;l.splice(l.findIndex(d=>d.key===a),1)}function o(){Object.values(e).forEach(a=>{a==null||a.hide()})}const s={create:t,destroyAll:o,info:r[0],success:r[1],warning:r[2],error:r[3]};return st(IC,s),st(AC,{clickedRef:lx(64),clickedPositionRef:ax()}),st(X2,n),Object.assign(Object.assign({},s),{dialogList:n,dialogInstRefs:e,handleAfterLeave:i})},render(){var n,e;return R(mt,null,[this.dialogList.map(t=>R(dB,lc(t,["destroy","style"],{internalStyle:t.style,to:this.to,ref:r=>{r===null?delete this.dialogInstRefs[`n-dialog-${t.key}`]:this.dialogInstRefs[`n-dialog-${t.key}`]=r},internalKey:t.key,onInternalAfterLeave:this.handleAfterLeave}))),(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n)])}}),fB={name:"LoadingBar",common:Re,self(n){const{primaryColor:e}=n;return{colorError:"red",colorLoading:e,height:"2px"}}},FC="n-message-api",$C="n-message-provider",hB={margin:"0 0 8px 0",padding:"10px 20px",maxWidth:"720px",minWidth:"420px",iconMargin:"0 10px 0 0",closeMargin:"0 0 0 10px",closeSize:"20px",closeIconSize:"16px",iconSize:"20px",fontSize:"14px"};function BC(n){const{textColor2:e,closeIconColor:t,closeIconColorHover:r,closeIconColorPressed:i,infoColor:o,successColor:s,errorColor:a,warningColor:l,popoverColor:d,boxShadow2:c,primaryColor:u,lineHeight:f,borderRadius:p,closeColorHover:h,closeColorPressed:g}=n;return Object.assign(Object.assign({},hB),{closeBorderRadius:p,textColor:e,textColorInfo:e,textColorSuccess:e,textColorError:e,textColorWarning:e,textColorLoading:e,color:d,colorInfo:d,colorSuccess:d,colorError:d,colorWarning:d,colorLoading:d,boxShadow:c,boxShadowInfo:c,boxShadowSuccess:c,boxShadowError:c,boxShadowWarning:c,boxShadowLoading:c,iconColor:e,iconColorInfo:o,iconColorSuccess:s,iconColorWarning:l,iconColorError:a,iconColorLoading:u,closeColorHover:h,closeColorPressed:g,closeIconColor:t,closeIconColorHover:r,closeIconColorPressed:i,closeColorHoverInfo:h,closeColorPressedInfo:g,closeIconColorInfo:t,closeIconColorHoverInfo:r,closeIconColorPressedInfo:i,closeColorHoverSuccess:h,closeColorPressedSuccess:g,closeIconColorSuccess:t,closeIconColorHoverSuccess:r,closeIconColorPressedSuccess:i,closeColorHoverError:h,closeColorPressedError:g,closeIconColorError:t,closeIconColorHoverError:r,closeIconColorPressedError:i,closeColorHoverWarning:h,closeColorPressedWarning:g,closeIconColorWarning:t,closeIconColorHoverWarning:r,closeIconColorPressedWarning:i,closeColorHoverLoading:h,closeColorPressedLoading:g,closeIconColorLoading:t,closeIconColorHoverLoading:r,closeIconColorPressedLoading:i,loadingColor:u,lineHeight:f,borderRadius:p})}const pB={name:"Message",common:Ht,self:BC},gB={name:"Message",common:Re,self:BC},NC={icon:Function,type:{type:String,default:"info"},content:[String,Number,Function],showIcon:{type:Boolean,default:!0},closable:Boolean,keepAliveOnHover:Boolean,onClose:Function,onMouseenter:Function,onMouseleave:Function},mB=Z([j("message-wrapper",`
 margin: var(--n-margin);
 z-index: 0;
 transform-origin: top center;
 display: flex;
 `,[uF({overflow:"visible",originalTransition:"transform .3s var(--n-bezier)",enterToProps:{transform:"scale(1)"},leaveToProps:{transform:"scale(0.85)"}})]),j("message",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 transition:
 color .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 transform .3s var(--n-bezier),
 margin-bottom .3s var(--n-bezier);
 padding: var(--n-padding);
 border-radius: var(--n-border-radius);
 flex-wrap: nowrap;
 overflow: hidden;
 max-width: var(--n-max-width);
 color: var(--n-text-color);
 background-color: var(--n-color);
 box-shadow: var(--n-box-shadow);
 `,[q("content",`
 display: inline-block;
 line-height: var(--n-line-height);
 font-size: var(--n-font-size);
 `),q("icon",`
 position: relative;
 margin: var(--n-icon-margin);
 height: var(--n-icon-size);
 width: var(--n-icon-size);
 font-size: var(--n-icon-size);
 flex-shrink: 0;
 `,[["default","info","success","warning","error","loading"].map(n=>ee(`${n}-type`,[Z("> *",`
 color: var(--n-icon-color-${n});
 transition: color .3s var(--n-bezier);
 `)])),Z("> *",`
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Yn()])]),q("close",`
 margin: var(--n-close-margin);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 flex-shrink: 0;
 `,[Z("&:hover",`
 color: var(--n-close-icon-color-hover);
 `),Z("&:active",`
 color: var(--n-close-icon-color-pressed);
 `)])]),j("message-container",`
 z-index: 6000;
 position: fixed;
 height: 0;
 overflow: visible;
 display: flex;
 flex-direction: column;
 align-items: center;
 `,[ee("top",`
 top: 12px;
 left: 0;
 right: 0;
 `),ee("top-left",`
 top: 12px;
 left: 12px;
 right: 0;
 align-items: flex-start;
 `),ee("top-right",`
 top: 12px;
 left: 0;
 right: 12px;
 align-items: flex-end;
 `),ee("bottom",`
 bottom: 4px;
 left: 0;
 right: 0;
 justify-content: flex-end;
 `),ee("bottom-left",`
 bottom: 4px;
 left: 12px;
 right: 0;
 justify-content: flex-end;
 align-items: flex-start;
 `),ee("bottom-right",`
 bottom: 4px;
 left: 0;
 right: 12px;
 justify-content: flex-end;
 align-items: flex-end;
 `)])]),vB={info:()=>R(_f,null),success:()=>R(cS,null),warning:()=>R(uS,null),error:()=>R(dS,null),default:()=>null},bB=Ce({name:"Message",props:Object.assign(Object.assign({},NC),{render:Function}),setup(n){const{inlineThemeDisabled:e,mergedRtlRef:t}=yt(n),{props:r,mergedClsPrefixRef:i}=Be($C),o=Dn("Message",t,i),s=Ke("Message","-message",mB,pB,r,i),a=U(()=>{const{type:d}=n,{common:{cubicBezierEaseInOut:c},self:{padding:u,margin:f,maxWidth:p,iconMargin:h,closeMargin:g,closeSize:m,iconSize:v,fontSize:b,lineHeight:y,borderRadius:x,iconColorInfo:E,iconColorSuccess:A,iconColorWarning:S,iconColorError:w,iconColorLoading:T,closeIconSize:C,closeBorderRadius:L,[xe("textColor",d)]:P,[xe("boxShadow",d)]:_,[xe("color",d)]:D,[xe("closeColorHover",d)]:k,[xe("closeColorPressed",d)]:M,[xe("closeIconColor",d)]:O,[xe("closeIconColorPressed",d)]:$,[xe("closeIconColorHover",d)]:K}}=s.value;return{"--n-bezier":c,"--n-margin":f,"--n-padding":u,"--n-max-width":p,"--n-font-size":b,"--n-icon-margin":h,"--n-icon-size":v,"--n-close-icon-size":C,"--n-close-border-radius":L,"--n-close-size":m,"--n-close-margin":g,"--n-text-color":P,"--n-color":D,"--n-box-shadow":_,"--n-icon-color-info":E,"--n-icon-color-success":A,"--n-icon-color-warning":S,"--n-icon-color-error":w,"--n-icon-color-loading":T,"--n-close-color-hover":k,"--n-close-color-pressed":M,"--n-close-icon-color":O,"--n-close-icon-color-pressed":$,"--n-close-icon-color-hover":K,"--n-line-height":y,"--n-border-radius":x}}),l=e?Gt("message",U(()=>n.type[0]),a,{}):void 0;return{mergedClsPrefix:i,rtlEnabled:o,messageProviderProps:r,handleClose(){var d;(d=n.onClose)===null||d===void 0||d.call(n)},cssVars:e?void 0:a,themeClass:l==null?void 0:l.themeClass,onRender:l==null?void 0:l.onRender,placement:r.placement}},render(){const{render:n,type:e,closable:t,content:r,mergedClsPrefix:i,cssVars:o,themeClass:s,onRender:a,icon:l,handleClose:d,showIcon:c}=this;a==null||a();let u;return R("div",{class:[`${i}-message-wrapper`,s],onMouseenter:this.onMouseenter,onMouseleave:this.onMouseleave,style:[{alignItems:this.placement.startsWith("top")?"flex-start":"flex-end"},o]},n?n(this.$props):R("div",{class:[`${i}-message ${i}-message--${e}-type`,this.rtlEnabled&&`${i}-message--rtl`]},(u=yB(l,e,i))&&c?R("div",{class:`${i}-message__icon ${i}-message__icon--${e}-type`},R(Go,null,{default:()=>u})):null,R("div",{class:`${i}-message__content`},gn(r)),t?R(fc,{clsPrefix:i,class:`${i}-message__close`,onClick:d,absolute:!0}):null))}});function yB(n,e,t){if(typeof n=="function")return n();{const r=e==="loading"?R(ao,{clsPrefix:t,strokeWidth:24,scale:.85}):vB[e]();return r?R(on,{clsPrefix:t,key:e},{default:()=>r}):null}}const xB=Ce({name:"MessageEnvironment",props:Object.assign(Object.assign({},NC),{duration:{type:Number,default:3e3},onAfterLeave:Function,onLeave:Function,internalKey:{type:String,required:!0},onInternalAfterLeave:Function,onHide:Function,onAfterHide:Function}),setup(n){let e=null;const t=G(!0);Nt(()=>{r()});function r(){const{duration:c}=n;c&&(e=window.setTimeout(s,c))}function i(c){c.currentTarget===c.target&&e!==null&&(window.clearTimeout(e),e=null)}function o(c){c.currentTarget===c.target&&r()}function s(){const{onHide:c}=n;t.value=!1,e&&(window.clearTimeout(e),e=null),c&&c()}function a(){const{onClose:c}=n;c&&c(),s()}function l(){const{onAfterLeave:c,onInternalAfterLeave:u,onAfterHide:f,internalKey:p}=n;c&&c(),u&&u(p),f&&f()}function d(){s()}return{show:t,hide:s,handleClose:a,handleAfterLeave:l,handleMouseleave:o,handleMouseenter:i,deactivate:d}},render(){return R(fS,{appear:!0,onAfterLeave:this.handleAfterLeave,onLeave:this.onLeave},{default:()=>[this.show?R(bB,{content:this.content,type:this.type,icon:this.icon,showIcon:this.showIcon,closable:this.closable,onClose:this.handleClose,onMouseenter:this.keepAliveOnHover?this.handleMouseenter:void 0,onMouseleave:this.keepAliveOnHover?this.handleMouseleave:void 0}):null]})}}),SB=Object.assign(Object.assign({},Ke.props),{to:[String,Object],duration:{type:Number,default:3e3},keepAliveOnHover:Boolean,max:Number,placement:{type:String,default:"top"},closable:Boolean,containerClass:String,containerStyle:[String,Object]}),CB=Ce({name:"MessageProvider",props:SB,setup(n){const{mergedClsPrefixRef:e}=yt(n),t=G([]),r=G({}),i={create(l,d){return o(l,Object.assign({type:"default"},d))},info(l,d){return o(l,Object.assign(Object.assign({},d),{type:"info"}))},success(l,d){return o(l,Object.assign(Object.assign({},d),{type:"success"}))},warning(l,d){return o(l,Object.assign(Object.assign({},d),{type:"warning"}))},error(l,d){return o(l,Object.assign(Object.assign({},d),{type:"error"}))},loading(l,d){return o(l,Object.assign(Object.assign({},d),{type:"loading"}))},destroyAll:a};st($C,{props:n,mergedClsPrefixRef:e}),st(FC,i);function o(l,d){const c=ko(),u=no(Object.assign(Object.assign({},d),{content:l,key:c,destroy:()=>{var p;(p=r.value[c])===null||p===void 0||p.hide()}})),{max:f}=n;return f&&t.value.length>=f&&t.value.shift(),t.value.push(u),u}function s(l){t.value.splice(t.value.findIndex(d=>d.key===l),1),delete r.value[l]}function a(){Object.values(r.value).forEach(l=>{l.hide()})}return Object.assign({mergedClsPrefix:e,messageRefs:r,messageList:t,handleAfterLeave:s},i)},render(){var n,e,t;return R(mt,null,(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n),this.messageList.length?R(Vb,{to:(t=this.to)!==null&&t!==void 0?t:"body"},R("div",{class:[`${this.mergedClsPrefix}-message-container`,`${this.mergedClsPrefix}-message-container--${this.placement}`,this.containerClass],key:"message-container",style:this.containerStyle},this.messageList.map(r=>R(xB,Object.assign({ref:i=>{i&&(this.messageRefs[r.key]=i)},internalKey:r.key,onInternalAfterLeave:this.handleAfterLeave},lc(r,["destroy"],void 0),{duration:r.duration===void 0?this.duration:r.duration,keepAliveOnHover:r.keepAliveOnHover===void 0?this.keepAliveOnHover:r.keepAliveOnHover,closable:r.closable===void 0?this.closable:r.closable}))))):null)}});function TB(){const n=Be(FC,null);return n===null&&Kh("use-message","No outer <n-message-provider /> founded. See prerequisite in https://www.naiveui.com/en-US/os-theme/components/message for more details. If you want to use `useMessage` outside setup, please check https://www.naiveui.com/zh-CN/os-theme/components/message#Q-&-A."),n}const wB={closeMargin:"16px 12px",closeSize:"20px",closeIconSize:"16px",width:"365px",padding:"16px",titleFontSize:"16px",metaFontSize:"12px",descriptionFontSize:"12px"};function EB(n){const{textColor2:e,successColor:t,infoColor:r,warningColor:i,errorColor:o,popoverColor:s,closeIconColor:a,closeIconColorHover:l,closeIconColorPressed:d,closeColorHover:c,closeColorPressed:u,textColor1:f,textColor3:p,borderRadius:h,fontWeightStrong:g,boxShadow2:m,lineHeight:v,fontSize:b}=n;return Object.assign(Object.assign({},wB),{borderRadius:h,lineHeight:v,fontSize:b,headerFontWeight:g,iconColor:e,iconColorSuccess:t,iconColorInfo:r,iconColorWarning:i,iconColorError:o,color:s,textColor:e,closeIconColor:a,closeIconColorHover:l,closeIconColorPressed:d,closeBorderRadius:h,closeColorHover:c,closeColorPressed:u,headerTextColor:f,descriptionTextColor:p,actionTextColor:e,boxShadow:m})}const RB={name:"Notification",common:Re,peers:{Scrollbar:Gn},self:EB};function AB(n){const{textColor1:e,dividerColor:t,fontWeightStrong:r}=n;return{textColor:e,color:t,fontWeight:r}}const IB={name:"Divider",common:Re,self:AB};function LB(n){const{modalColor:e,textColor1:t,textColor2:r,boxShadow3:i,lineHeight:o,fontWeightStrong:s,dividerColor:a,closeColorHover:l,closeColorPressed:d,closeIconColor:c,closeIconColorHover:u,closeIconColorPressed:f,borderRadius:p,primaryColorHover:h}=n;return{bodyPadding:"16px 24px",borderRadius:p,headerPadding:"16px 24px",footerPadding:"16px 24px",color:e,textColor:r,titleTextColor:t,titleFontSize:"18px",titleFontWeight:s,boxShadow:i,lineHeight:o,headerBorderBottom:`1px solid ${a}`,footerBorderTop:`1px solid ${a}`,closeIconColor:c,closeIconColorHover:u,closeIconColorPressed:f,closeSize:"22px",closeIconSize:"18px",closeColorHover:l,closeColorPressed:d,closeBorderRadius:p,resizableTriggerColorHover:h}}const PB={name:"Drawer",common:Re,peers:{Scrollbar:Gn},self:LB},_B={actionMargin:"0 0 0 20px",actionMarginRtl:"0 20px 0 0"},kB={name:"DynamicInput",common:Re,peers:{Input:or,Button:Wn},self(){return _B}},DB={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},zC={name:"Space",self(){return DB}},OB={name:"DynamicTags",common:Re,peers:{Input:or,Button:Wn,Tag:RS,Space:zC},self(){return{inputWidth:"64px"}}},MB={name:"Element",common:Re},FB={gapSmall:"4px 8px",gapMedium:"8px 12px",gapLarge:"12px 16px"},$B={name:"Flex",self(){return FB}},BB={name:"ButtonGroup",common:Re},NB={feedbackPadding:"4px 0 0 2px",feedbackHeightSmall:"24px",feedbackHeightMedium:"24px",feedbackHeightLarge:"26px",feedbackFontSizeSmall:"13px",feedbackFontSizeMedium:"14px",feedbackFontSizeLarge:"14px",labelFontSizeLeftSmall:"14px",labelFontSizeLeftMedium:"14px",labelFontSizeLeftLarge:"15px",labelFontSizeTopSmall:"13px",labelFontSizeTopMedium:"14px",labelFontSizeTopLarge:"14px",labelHeightSmall:"24px",labelHeightMedium:"26px",labelHeightLarge:"28px",labelPaddingVertical:"0 0 6px 2px",labelPaddingHorizontal:"0 12px 0 0",labelTextAlignVertical:"left",labelTextAlignHorizontal:"right",labelFontWeight:"400"};function UC(n){const{heightSmall:e,heightMedium:t,heightLarge:r,textColor1:i,errorColor:o,warningColor:s,lineHeight:a,textColor3:l}=n;return Object.assign(Object.assign({},NB),{blankHeightSmall:e,blankHeightMedium:t,blankHeightLarge:r,lineHeight:a,labelTextColor:i,asteriskColor:o,feedbackTextColorError:o,feedbackTextColorWarning:s,feedbackTextColor:l})}const HC={name:"Form",common:Ht,self:UC},zB={name:"Form",common:Re,self:UC},UB={name:"GradientText",common:Re,self(n){const{primaryColor:e,successColor:t,warningColor:r,errorColor:i,infoColor:o,primaryColorSuppl:s,successColorSuppl:a,warningColorSuppl:l,errorColorSuppl:d,infoColorSuppl:c,fontWeightStrong:u}=n;return{fontWeight:u,rotate:"252deg",colorStartPrimary:e,colorEndPrimary:s,colorStartInfo:o,colorEndInfo:c,colorStartWarning:r,colorEndWarning:l,colorStartError:i,colorEndError:d,colorStartSuccess:t,colorEndSuccess:a}}},HB={name:"InputNumber",common:Re,peers:{Button:Wn,Input:or},self(n){const{textColorDisabled:e}=n;return{iconColorDisabled:e}}};function VB(){return{inputWidthSmall:"24px",inputWidthMedium:"30px",inputWidthLarge:"36px",gapSmall:"8px",gapMedium:"8px",gapLarge:"8px"}}const GB={name:"InputOtp",common:Re,peers:{Input:or},self:VB},WB={name:"Layout",common:Re,peers:{Scrollbar:Gn},self(n){const{textColor2:e,bodyColor:t,popoverColor:r,cardColor:i,dividerColor:o,scrollbarColor:s,scrollbarColorHover:a}=n;return{textColor:e,textColorInverted:e,color:t,colorEmbedded:t,headerColor:i,headerColorInverted:i,footerColor:i,footerColorInverted:i,headerBorderColor:o,headerBorderColorInverted:o,footerBorderColor:o,footerBorderColorInverted:o,siderBorderColor:o,siderBorderColorInverted:o,siderColor:i,siderColorInverted:i,siderToggleButtonBorder:"1px solid transparent",siderToggleButtonColor:r,siderToggleButtonIconColor:e,siderToggleButtonIconColorInverted:e,siderToggleBarColor:ze(t,s),siderToggleBarColorHover:ze(t,a),__invertScrollbar:"false"}}},jB={name:"Row",common:Re};function KB(n){const{textColor2:e,cardColor:t,modalColor:r,popoverColor:i,dividerColor:o,borderRadius:s,fontSize:a,hoverColor:l}=n;return{textColor:e,color:t,colorHover:l,colorModal:r,colorHoverModal:ze(r,l),colorPopover:i,colorHoverPopover:ze(i,l),borderColor:o,borderColorModal:ze(r,o),borderColorPopover:ze(i,o),borderRadius:s,fontSize:a}}const qB={name:"List",common:Re,self:KB},YB={name:"Log",common:Re,peers:{Scrollbar:Gn,Code:GS},self(n){const{textColor2:e,inputColor:t,fontSize:r,primaryColor:i}=n;return{loaderFontSize:r,loaderTextColor:e,loaderColor:t,loaderBorder:"1px solid #0000",loadingColor:i}}},XB={name:"Mention",common:Re,peers:{InternalSelectMenu:ol,Input:or},self(n){const{boxShadow2:e}=n;return{menuBoxShadow:e}}};function QB(n,e,t,r){return{itemColorHoverInverted:"#0000",itemColorActiveInverted:e,itemColorActiveHoverInverted:e,itemColorActiveCollapsedInverted:e,itemTextColorInverted:n,itemTextColorHoverInverted:t,itemTextColorChildActiveInverted:t,itemTextColorChildActiveHoverInverted:t,itemTextColorActiveInverted:t,itemTextColorActiveHoverInverted:t,itemTextColorHorizontalInverted:n,itemTextColorHoverHorizontalInverted:t,itemTextColorChildActiveHorizontalInverted:t,itemTextColorChildActiveHoverHorizontalInverted:t,itemTextColorActiveHorizontalInverted:t,itemTextColorActiveHoverHorizontalInverted:t,itemIconColorInverted:n,itemIconColorHoverInverted:t,itemIconColorActiveInverted:t,itemIconColorActiveHoverInverted:t,itemIconColorChildActiveInverted:t,itemIconColorChildActiveHoverInverted:t,itemIconColorCollapsedInverted:n,itemIconColorHorizontalInverted:n,itemIconColorHoverHorizontalInverted:t,itemIconColorActiveHorizontalInverted:t,itemIconColorActiveHoverHorizontalInverted:t,itemIconColorChildActiveHorizontalInverted:t,itemIconColorChildActiveHoverHorizontalInverted:t,arrowColorInverted:n,arrowColorHoverInverted:t,arrowColorActiveInverted:t,arrowColorActiveHoverInverted:t,arrowColorChildActiveInverted:t,arrowColorChildActiveHoverInverted:t,groupTextColorInverted:r}}function ZB(n){const{borderRadius:e,textColor3:t,primaryColor:r,textColor2:i,textColor1:o,fontSize:s,dividerColor:a,hoverColor:l,primaryColorHover:d}=n;return Object.assign({borderRadius:e,color:"#0000",groupTextColor:t,itemColorHover:l,itemColorActive:Te(r,{alpha:.1}),itemColorActiveHover:Te(r,{alpha:.1}),itemColorActiveCollapsed:Te(r,{alpha:.1}),itemTextColor:i,itemTextColorHover:i,itemTextColorActive:r,itemTextColorActiveHover:r,itemTextColorChildActive:r,itemTextColorChildActiveHover:r,itemTextColorHorizontal:i,itemTextColorHoverHorizontal:d,itemTextColorActiveHorizontal:r,itemTextColorActiveHoverHorizontal:r,itemTextColorChildActiveHorizontal:r,itemTextColorChildActiveHoverHorizontal:r,itemIconColor:o,itemIconColorHover:o,itemIconColorActive:r,itemIconColorActiveHover:r,itemIconColorChildActive:r,itemIconColorChildActiveHover:r,itemIconColorCollapsed:o,itemIconColorHorizontal:o,itemIconColorHoverHorizontal:d,itemIconColorActiveHorizontal:r,itemIconColorActiveHoverHorizontal:r,itemIconColorChildActiveHorizontal:r,itemIconColorChildActiveHoverHorizontal:r,itemHeight:"42px",arrowColor:i,arrowColorHover:i,arrowColorActive:r,arrowColorActiveHover:r,arrowColorChildActive:r,arrowColorChildActiveHover:r,colorInverted:"#0000",borderColorHorizontal:"#0000",fontSize:s,dividerColor:a},QB("#BBB",r,"#FFF","#AAA"))}const JB={name:"Menu",common:Re,peers:{Tooltip:mc,Dropdown:gp},self(n){const{primaryColor:e,primaryColorSuppl:t}=n,r=ZB(n);return r.itemColorActive=Te(e,{alpha:.15}),r.itemColorActiveHover=Te(e,{alpha:.15}),r.itemColorActiveCollapsed=Te(e,{alpha:.15}),r.itemColorActiveInverted=t,r.itemColorActiveHoverInverted=t,r.itemColorActiveCollapsedInverted=t,r}},eN={titleFontSize:"18px",backSize:"22px"};function tN(n){const{textColor1:e,textColor2:t,textColor3:r,fontSize:i,fontWeightStrong:o,primaryColorHover:s,primaryColorPressed:a}=n;return Object.assign(Object.assign({},eN),{titleFontWeight:o,fontSize:i,titleTextColor:e,backColor:t,backColorHover:s,backColorPressed:a,subtitleTextColor:r})}const nN={name:"PageHeader",common:Re,self:tN},rN={iconSize:"22px"};function iN(n){const{fontSize:e,warningColor:t}=n;return Object.assign(Object.assign({},rN),{fontSize:e,iconColor:t})}const oN={name:"Popconfirm",common:Re,peers:{Button:Wn,Popover:jo},self:iN};function sN(n){const{infoColor:e,successColor:t,warningColor:r,errorColor:i,textColor2:o,progressRailColor:s,fontSize:a,fontWeight:l}=n;return{fontSize:a,fontSizeCircle:"28px",fontWeightCircle:l,railColor:s,railHeight:"8px",iconSizeCircle:"36px",iconSizeLine:"18px",iconColor:e,iconColorInfo:e,iconColorSuccess:t,iconColorWarning:r,iconColorError:i,textColorCircle:o,textColorLineInner:"rgb(255, 255, 255)",textColorLineOuter:o,fillColor:e,fillColorInfo:e,fillColorSuccess:t,fillColorWarning:r,fillColorError:i,lineBgProcessing:"linear-gradient(90deg, rgba(255, 255, 255, .3) 0%, rgba(255, 255, 255, .5) 100%)"}}const VC={name:"Progress",common:Re,self(n){const e=sN(n);return e.textColorLineInner="rgb(0, 0, 0)",e.lineBgProcessing="linear-gradient(90deg, rgba(255, 255, 255, .3) 0%, rgba(255, 255, 255, .5) 100%)",e}},aN={name:"Rate",common:Re,self(n){const{railColor:e}=n;return{itemColor:e,itemColorActive:"#CCAA33",itemSize:"20px",sizeSmall:"16px",sizeMedium:"20px",sizeLarge:"24px"}}},lN={titleFontSizeSmall:"26px",titleFontSizeMedium:"32px",titleFontSizeLarge:"40px",titleFontSizeHuge:"48px",fontSizeSmall:"14px",fontSizeMedium:"14px",fontSizeLarge:"15px",fontSizeHuge:"16px",iconSizeSmall:"64px",iconSizeMedium:"80px",iconSizeLarge:"100px",iconSizeHuge:"125px",iconColor418:void 0,iconColor404:void 0,iconColor403:void 0,iconColor500:void 0};function dN(n){const{textColor2:e,textColor1:t,errorColor:r,successColor:i,infoColor:o,warningColor:s,lineHeight:a,fontWeightStrong:l}=n;return Object.assign(Object.assign({},lN),{lineHeight:a,titleFontWeight:l,titleTextColor:t,textColor:e,iconColorError:r,iconColorSuccess:i,iconColorInfo:o,iconColorWarning:s})}const cN={name:"Result",common:Re,self:dN},uN={railHeight:"4px",railWidthVertical:"4px",handleSize:"18px",dotHeight:"8px",dotWidth:"8px",dotBorderRadius:"4px"},fN={name:"Slider",common:Re,self(n){const e="0 2px 8px 0 rgba(0, 0, 0, 0.12)",{railColor:t,modalColor:r,primaryColorSuppl:i,popoverColor:o,textColor2:s,cardColor:a,borderRadius:l,fontSize:d,opacityDisabled:c}=n;return Object.assign(Object.assign({},uN),{fontSize:d,markFontSize:d,railColor:t,railColorHover:t,fillColor:i,fillColorHover:i,opacityDisabled:c,handleColor:"#FFF",dotColor:a,dotColorModal:r,dotColorPopover:o,handleBoxShadow:"0px 2px 4px 0 rgba(0, 0, 0, 0.4)",handleBoxShadowHover:"0px 2px 4px 0 rgba(0, 0, 0, 0.4)",handleBoxShadowActive:"0px 2px 4px 0 rgba(0, 0, 0, 0.4)",handleBoxShadowFocus:"0px 2px 4px 0 rgba(0, 0, 0, 0.4)",indicatorColor:o,indicatorBoxShadow:e,indicatorTextColor:s,indicatorBorderRadius:l,dotBorder:`2px solid ${t}`,dotBorderActive:`2px solid ${i}`,dotBoxShadow:""})}};function GC(n){const{opacityDisabled:e,heightTiny:t,heightSmall:r,heightMedium:i,heightLarge:o,heightHuge:s,primaryColor:a,fontSize:l}=n;return{fontSize:l,textColor:a,sizeTiny:t,sizeSmall:r,sizeMedium:i,sizeLarge:o,sizeHuge:s,color:a,opacitySpinning:e}}const hN={name:"Spin",common:Ht,self:GC},pN={name:"Spin",common:Re,self:GC};function gN(n){const{textColor2:e,textColor3:t,fontSize:r,fontWeight:i}=n;return{labelFontSize:r,labelFontWeight:i,valueFontWeight:i,valueFontSize:"24px",labelTextColor:t,valuePrefixTextColor:e,valueSuffixTextColor:e,valueTextColor:e}}const mN={name:"Statistic",common:Re,self:gN},vN={stepHeaderFontSizeSmall:"14px",stepHeaderFontSizeMedium:"16px",indicatorIndexFontSizeSmall:"14px",indicatorIndexFontSizeMedium:"16px",indicatorSizeSmall:"22px",indicatorSizeMedium:"28px",indicatorIconSizeSmall:"14px",indicatorIconSizeMedium:"18px"};function bN(n){const{fontWeightStrong:e,baseColor:t,textColorDisabled:r,primaryColor:i,errorColor:o,textColor1:s,textColor2:a}=n;return Object.assign(Object.assign({},vN),{stepHeaderFontWeight:e,indicatorTextColorProcess:t,indicatorTextColorWait:r,indicatorTextColorFinish:i,indicatorTextColorError:o,indicatorBorderColorProcess:i,indicatorBorderColorWait:r,indicatorBorderColorFinish:i,indicatorBorderColorError:o,indicatorColorProcess:i,indicatorColorWait:"#0000",indicatorColorFinish:"#0000",indicatorColorError:"#0000",splitorColorProcess:r,splitorColorWait:r,splitorColorFinish:i,splitorColorError:r,headerTextColorProcess:s,headerTextColorWait:r,headerTextColorFinish:r,headerTextColorError:o,descriptionTextColorProcess:a,descriptionTextColorWait:r,descriptionTextColorFinish:r,descriptionTextColorError:o})}const yN={name:"Steps",common:Re,self:bN},WC={buttonHeightSmall:"14px",buttonHeightMedium:"18px",buttonHeightLarge:"22px",buttonWidthSmall:"14px",buttonWidthMedium:"18px",buttonWidthLarge:"22px",buttonWidthPressedSmall:"20px",buttonWidthPressedMedium:"24px",buttonWidthPressedLarge:"28px",railHeightSmall:"18px",railHeightMedium:"22px",railHeightLarge:"26px",railWidthSmall:"32px",railWidthMedium:"40px",railWidthLarge:"48px"},xN={name:"Switch",common:Re,self(n){const{primaryColorSuppl:e,opacityDisabled:t,borderRadius:r,primaryColor:i,textColor2:o,baseColor:s}=n;return Object.assign(Object.assign({},WC),{iconColor:s,textColor:o,loadingColor:e,opacityDisabled:t,railColor:"rgba(255, 255, 255, .20)",railColorActive:e,buttonBoxShadow:"0px 2px 4px 0 rgba(0, 0, 0, 0.4)",buttonColor:"#FFF",railBorderRadiusSmall:r,railBorderRadiusMedium:r,railBorderRadiusLarge:r,buttonBorderRadiusSmall:r,buttonBorderRadiusMedium:r,buttonBorderRadiusLarge:r,boxShadowFocus:`0 0 8px 0 ${Te(i,{alpha:.3})}`})}};function SN(n){const{primaryColor:e,opacityDisabled:t,borderRadius:r,textColor3:i}=n;return Object.assign(Object.assign({},WC),{iconColor:i,textColor:"white",loadingColor:e,opacityDisabled:t,railColor:"rgba(0, 0, 0, .14)",railColorActive:e,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:r,railBorderRadiusMedium:r,railBorderRadiusLarge:r,buttonBorderRadiusSmall:r,buttonBorderRadiusMedium:r,buttonBorderRadiusLarge:r,boxShadowFocus:`0 0 0 2px ${Te(e,{alpha:.2})}`})}const CN={name:"Switch",common:Ht,self:SN},TN={thPaddingSmall:"6px",thPaddingMedium:"12px",thPaddingLarge:"12px",tdPaddingSmall:"6px",tdPaddingMedium:"12px",tdPaddingLarge:"12px"};function wN(n){const{dividerColor:e,cardColor:t,modalColor:r,popoverColor:i,tableHeaderColor:o,tableColorStriped:s,textColor1:a,textColor2:l,borderRadius:d,fontWeightStrong:c,lineHeight:u,fontSizeSmall:f,fontSizeMedium:p,fontSizeLarge:h}=n;return Object.assign(Object.assign({},TN),{fontSizeSmall:f,fontSizeMedium:p,fontSizeLarge:h,lineHeight:u,borderRadius:d,borderColor:ze(t,e),borderColorModal:ze(r,e),borderColorPopover:ze(i,e),tdColor:t,tdColorModal:r,tdColorPopover:i,tdColorStriped:ze(t,s),tdColorStripedModal:ze(r,s),tdColorStripedPopover:ze(i,s),thColor:ze(t,o),thColorModal:ze(r,o),thColorPopover:ze(i,o),thTextColor:a,tdTextColor:l,thFontWeight:c})}const EN={name:"Table",common:Re,self:wN},RN={tabFontSizeSmall:"14px",tabFontSizeMedium:"14px",tabFontSizeLarge:"16px",tabGapSmallLine:"36px",tabGapMediumLine:"36px",tabGapLargeLine:"36px",tabGapSmallLineVertical:"8px",tabGapMediumLineVertical:"8px",tabGapLargeLineVertical:"8px",tabPaddingSmallLine:"6px 0",tabPaddingMediumLine:"10px 0",tabPaddingLargeLine:"14px 0",tabPaddingVerticalSmallLine:"6px 12px",tabPaddingVerticalMediumLine:"8px 16px",tabPaddingVerticalLargeLine:"10px 20px",tabGapSmallBar:"36px",tabGapMediumBar:"36px",tabGapLargeBar:"36px",tabGapSmallBarVertical:"8px",tabGapMediumBarVertical:"8px",tabGapLargeBarVertical:"8px",tabPaddingSmallBar:"4px 0",tabPaddingMediumBar:"6px 0",tabPaddingLargeBar:"10px 0",tabPaddingVerticalSmallBar:"6px 12px",tabPaddingVerticalMediumBar:"8px 16px",tabPaddingVerticalLargeBar:"10px 20px",tabGapSmallCard:"4px",tabGapMediumCard:"4px",tabGapLargeCard:"4px",tabGapSmallCardVertical:"4px",tabGapMediumCardVertical:"4px",tabGapLargeCardVertical:"4px",tabPaddingSmallCard:"8px 16px",tabPaddingMediumCard:"10px 20px",tabPaddingLargeCard:"12px 24px",tabPaddingSmallSegment:"4px 0",tabPaddingMediumSegment:"6px 0",tabPaddingLargeSegment:"8px 0",tabPaddingVerticalLargeSegment:"0 8px",tabPaddingVerticalSmallCard:"8px 12px",tabPaddingVerticalMediumCard:"10px 16px",tabPaddingVerticalLargeCard:"12px 20px",tabPaddingVerticalSmallSegment:"0 4px",tabPaddingVerticalMediumSegment:"0 6px",tabGapSmallSegment:"0",tabGapMediumSegment:"0",tabGapLargeSegment:"0",tabGapSmallSegmentVertical:"0",tabGapMediumSegmentVertical:"0",tabGapLargeSegmentVertical:"0",panePaddingSmall:"8px 0 0 0",panePaddingMedium:"12px 0 0 0",panePaddingLarge:"16px 0 0 0",closeSize:"18px",closeIconSize:"14px"};function AN(n){const{textColor2:e,primaryColor:t,textColorDisabled:r,closeIconColor:i,closeIconColorHover:o,closeIconColorPressed:s,closeColorHover:a,closeColorPressed:l,tabColor:d,baseColor:c,dividerColor:u,fontWeight:f,textColor1:p,borderRadius:h,fontSize:g,fontWeightStrong:m}=n;return Object.assign(Object.assign({},RN),{colorSegment:d,tabFontSizeCard:g,tabTextColorLine:p,tabTextColorActiveLine:t,tabTextColorHoverLine:t,tabTextColorDisabledLine:r,tabTextColorSegment:p,tabTextColorActiveSegment:e,tabTextColorHoverSegment:e,tabTextColorDisabledSegment:r,tabTextColorBar:p,tabTextColorActiveBar:t,tabTextColorHoverBar:t,tabTextColorDisabledBar:r,tabTextColorCard:p,tabTextColorHoverCard:p,tabTextColorActiveCard:t,tabTextColorDisabledCard:r,barColor:t,closeIconColor:i,closeIconColorHover:o,closeIconColorPressed:s,closeColorHover:a,closeColorPressed:l,closeBorderRadius:h,tabColor:d,tabColorSegment:c,tabBorderColor:u,tabFontWeightActive:f,tabFontWeight:f,tabBorderRadius:h,paneTextColor:e,fontWeightStrong:m})}const IN={name:"Tabs",common:Re,self(n){const e=AN(n),{inputColor:t}=n;return e.colorSegment=t,e.tabColorSegment=t,e}};function LN(n){const{textColor1:e,textColor2:t,fontWeightStrong:r,fontSize:i}=n;return{fontSize:i,titleTextColor:e,textColor:t,titleFontWeight:r}}const PN={name:"Thing",common:Re,self:LN},_N={titleMarginMedium:"0 0 6px 0",titleMarginLarge:"-2px 0 6px 0",titleFontSizeMedium:"14px",titleFontSizeLarge:"16px",iconSizeMedium:"14px",iconSizeLarge:"14px"},kN={name:"Timeline",common:Re,self(n){const{textColor3:e,infoColorSuppl:t,errorColorSuppl:r,successColorSuppl:i,warningColorSuppl:o,textColor1:s,textColor2:a,railColor:l,fontWeightStrong:d,fontSize:c}=n;return Object.assign(Object.assign({},_N),{contentFontSize:c,titleFontWeight:d,circleBorder:`2px solid ${e}`,circleBorderInfo:`2px solid ${t}`,circleBorderError:`2px solid ${r}`,circleBorderSuccess:`2px solid ${i}`,circleBorderWarning:`2px solid ${o}`,iconColor:e,iconColorInfo:t,iconColorError:r,iconColorSuccess:i,iconColorWarning:o,titleTextColor:s,contentTextColor:a,metaTextColor:e,lineColor:l})}},DN={extraFontSizeSmall:"12px",extraFontSizeMedium:"12px",extraFontSizeLarge:"14px",titleFontSizeSmall:"14px",titleFontSizeMedium:"16px",titleFontSizeLarge:"16px",closeSize:"20px",closeIconSize:"16px",headerHeightSmall:"44px",headerHeightMedium:"44px",headerHeightLarge:"50px"},ON={name:"Transfer",common:Re,peers:{Checkbox:$s,Scrollbar:Gn,Input:or,Empty:Wo,Button:Wn},self(n){const{fontWeight:e,fontSizeLarge:t,fontSizeMedium:r,fontSizeSmall:i,heightLarge:o,heightMedium:s,borderRadius:a,inputColor:l,tableHeaderColor:d,textColor1:c,textColorDisabled:u,textColor2:f,textColor3:p,hoverColor:h,closeColorHover:g,closeColorPressed:m,closeIconColor:v,closeIconColorHover:b,closeIconColorPressed:y,dividerColor:x}=n;return Object.assign(Object.assign({},DN),{itemHeightSmall:s,itemHeightMedium:s,itemHeightLarge:o,fontSizeSmall:i,fontSizeMedium:r,fontSizeLarge:t,borderRadius:a,dividerColor:x,borderColor:"#0000",listColor:l,headerColor:d,titleTextColor:c,titleTextColorDisabled:u,extraTextColor:p,extraTextColorDisabled:u,itemTextColor:f,itemTextColorDisabled:u,itemColorPending:h,titleFontWeight:e,closeColorHover:g,closeColorPressed:m,closeIconColor:v,closeIconColorHover:b,closeIconColorPressed:y})}};function MN(n){const{borderRadiusSmall:e,dividerColor:t,hoverColor:r,pressedColor:i,primaryColor:o,textColor3:s,textColor2:a,textColorDisabled:l,fontSize:d}=n;return{fontSize:d,lineHeight:"1.5",nodeHeight:"30px",nodeWrapperPadding:"3px 0",nodeBorderRadius:e,nodeColorHover:r,nodeColorPressed:i,nodeColorActive:Te(o,{alpha:.1}),arrowColor:s,nodeTextColor:a,nodeTextColorDisabled:l,loadingColor:o,dropMarkColor:o,lineColor:t}}const jC={name:"Tree",common:Re,peers:{Checkbox:$s,Scrollbar:Gn,Empty:Wo},self(n){const{primaryColor:e}=n,t=MN(n);return t.nodeColorActive=Te(e,{alpha:.15}),t}},FN={name:"TreeSelect",common:Re,peers:{Tree:jC,Empty:Wo,InternalSelection:dp}},$N={headerFontSize1:"30px",headerFontSize2:"22px",headerFontSize3:"18px",headerFontSize4:"16px",headerFontSize5:"16px",headerFontSize6:"16px",headerMargin1:"28px 0 20px 0",headerMargin2:"28px 0 20px 0",headerMargin3:"28px 0 20px 0",headerMargin4:"28px 0 18px 0",headerMargin5:"28px 0 18px 0",headerMargin6:"28px 0 18px 0",headerPrefixWidth1:"16px",headerPrefixWidth2:"16px",headerPrefixWidth3:"12px",headerPrefixWidth4:"12px",headerPrefixWidth5:"12px",headerPrefixWidth6:"12px",headerBarWidth1:"4px",headerBarWidth2:"4px",headerBarWidth3:"3px",headerBarWidth4:"3px",headerBarWidth5:"3px",headerBarWidth6:"3px",pMargin:"16px 0 16px 0",liMargin:".25em 0 0 0",olPadding:"0 0 0 2em",ulPadding:"0 0 0 2em"};function BN(n){const{primaryColor:e,textColor2:t,borderColor:r,lineHeight:i,fontSize:o,borderRadiusSmall:s,dividerColor:a,fontWeightStrong:l,textColor1:d,textColor3:c,infoColor:u,warningColor:f,errorColor:p,successColor:h,codeColor:g}=n;return Object.assign(Object.assign({},$N),{aTextColor:e,blockquoteTextColor:t,blockquotePrefixColor:r,blockquoteLineHeight:i,blockquoteFontSize:o,codeBorderRadius:s,liTextColor:t,liLineHeight:i,liFontSize:o,hrColor:a,headerFontWeight:l,headerTextColor:d,pTextColor:t,pTextColor1Depth:d,pTextColor2Depth:t,pTextColor3Depth:c,pLineHeight:i,pFontSize:o,headerBarColor:e,headerBarColorPrimary:e,headerBarColorInfo:u,headerBarColorError:p,headerBarColorWarning:f,headerBarColorSuccess:h,textColor:t,textColor1Depth:d,textColor2Depth:t,textColor3Depth:c,textColorPrimary:e,textColorInfo:u,textColorSuccess:h,textColorWarning:f,textColorError:p,codeTextColor:t,codeColor:g,codeBorder:"1px solid #0000"})}const NN={name:"Typography",common:Re,self:BN};function zN(n){const{iconColor:e,primaryColor:t,errorColor:r,textColor2:i,successColor:o,opacityDisabled:s,actionColor:a,borderColor:l,hoverColor:d,lineHeight:c,borderRadius:u,fontSize:f}=n;return{fontSize:f,lineHeight:c,borderRadius:u,draggerColor:a,draggerBorder:`1px dashed ${l}`,draggerBorderHover:`1px dashed ${t}`,itemColorHover:d,itemColorHoverError:Te(r,{alpha:.06}),itemTextColor:i,itemTextColorError:r,itemTextColorSuccess:o,itemIconColor:e,itemDisabledOpacity:s,itemBorderImageCardError:`1px solid ${r}`,itemBorderImageCard:`1px solid ${l}`}}const UN={name:"Upload",common:Re,peers:{Button:Wn,Progress:VC},self(n){const{errorColor:e}=n,t=zN(n);return t.itemColorHoverError=Te(e,{alpha:.09}),t}},HN={name:"Watermark",common:Re,self(n){const{fontFamily:e}=n;return{fontFamily:e}}},VN={name:"FloatButton",common:Re,self(n){const{popoverColor:e,textColor2:t,buttonColor2Hover:r,buttonColor2Pressed:i,primaryColor:o,primaryColorHover:s,primaryColorPressed:a,baseColor:l,borderRadius:d}=n;return{color:e,textColor:t,boxShadow:"0 2px 8px 0px rgba(0, 0, 0, .12)",boxShadowHover:"0 2px 12px 0px rgba(0, 0, 0, .18)",boxShadowPressed:"0 2px 12px 0px rgba(0, 0, 0, .18)",colorHover:r,colorPressed:i,colorPrimary:o,colorPrimaryHover:s,colorPrimaryPressed:a,textColorPrimary:l,borderRadiusSquare:d}}},ll="n-form",KC="n-form-item-insts",GN=j("form",[ee("inline",`
 width: 100%;
 display: inline-flex;
 align-items: flex-start;
 align-content: space-around;
 `,[j("form-item",{width:"auto",marginRight:"18px"},[Z("&:last-child",{marginRight:0})])])]);var WN=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{d(r.next(c))}catch(u){s(u)}}function l(c){try{d(r.throw(c))}catch(u){s(u)}}function d(c){c.done?o(c.value):i(c.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};const jN=Object.assign(Object.assign({},Ke.props),{inline:Boolean,labelWidth:[Number,String],labelAlign:String,labelPlacement:{type:String,default:"top"},model:{type:Object,default:()=>{}},rules:Object,disabled:Boolean,size:String,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:!0},onSubmit:{type:Function,default:n=>{n.preventDefault()}},showLabel:{type:Boolean,default:void 0},validateMessages:Object}),_v=Ce({name:"Form",props:jN,setup(n){const{mergedClsPrefixRef:e}=yt(n);Ke("Form","-form",GN,HC,n,e);const t={},r=G(void 0),i=l=>{const d=r.value;(d===void 0||l>=d)&&(r.value=l)};function o(l){return WN(this,arguments,void 0,function*(d,c=()=>!0){return yield new Promise((u,f)=>{const p=[];for(const h of Es(t)){const g=t[h];for(const m of g)m.path&&p.push(m.internalValidate(null,c))}Promise.all(p).then(h=>{const g=h.some(b=>!b.valid),m=[],v=[];h.forEach(b=>{var y,x;!((y=b.errors)===null||y===void 0)&&y.length&&m.push(b.errors),!((x=b.warnings)===null||x===void 0)&&x.length&&v.push(b.warnings)}),d&&d(m.length?m:void 0,{warnings:v.length?v:void 0}),g?f(m.length?m:void 0):u({warnings:v.length?v:void 0})})})})}function s(){for(const l of Es(t)){const d=t[l];for(const c of d)c.restoreValidation()}}return st(ll,{props:n,maxChildLabelWidthRef:r,deriveMaxChildLabelWidth:i}),st(KC,{formItems:t}),Object.assign({validate:o,restoreValidation:s},{mergedClsPrefix:e})},render(){const{mergedClsPrefix:n}=this;return R("form",{class:[`${n}-form`,this.inline&&`${n}-form--inline`],onSubmit:this.onSubmit},this.$slots)}});function So(){return So=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},So.apply(this,arguments)}function KN(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Va(n,e)}function Bf(n){return Bf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bf(n)}function Va(n,e){return Va=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Va(n,e)}function qN(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ql(n,e,t){return qN()?ql=Reflect.construct.bind():ql=function(i,o,s){var a=[null];a.push.apply(a,o);var l=Function.bind.apply(i,a),d=new l;return s&&Va(d,s.prototype),d},ql.apply(null,arguments)}function YN(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function Nf(n){var e=typeof Map=="function"?new Map:void 0;return Nf=function(r){if(r===null||!YN(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,i)}function i(){return ql(r,arguments,Bf(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),Va(i,r)},Nf(n)}var XN=/%[sdj%]/g,QN=function(){};function zf(n){if(!n||!n.length)return null;var e={};return n.forEach(function(t){var r=t.field;e[r]=e[r]||[],e[r].push(t)}),e}function Zn(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var i=0,o=t.length;if(typeof n=="function")return n.apply(null,t);if(typeof n=="string"){var s=n.replace(XN,function(a){if(a==="%%")return"%";if(i>=o)return a;switch(a){case"%s":return String(t[i++]);case"%d":return Number(t[i++]);case"%j":try{return JSON.stringify(t[i++])}catch{return"[Circular]"}break;default:return a}});return s}return n}function ZN(n){return n==="string"||n==="url"||n==="hex"||n==="email"||n==="date"||n==="pattern"}function ln(n,e){return!!(n==null||e==="array"&&Array.isArray(n)&&!n.length||ZN(e)&&typeof n=="string"&&!n)}function JN(n,e,t){var r=[],i=0,o=n.length;function s(a){r.push.apply(r,a||[]),i++,i===o&&t(r)}n.forEach(function(a){e(a,s)})}function kv(n,e,t){var r=0,i=n.length;function o(s){if(s&&s.length){t(s);return}var a=r;r=r+1,a<i?e(n[a],o):t([])}o([])}function e3(n){var e=[];return Object.keys(n).forEach(function(t){e.push.apply(e,n[t]||[])}),e}var Dv=function(n){KN(e,n);function e(t,r){var i;return i=n.call(this,"Async Validation Error")||this,i.errors=t,i.fields=r,i}return e}(Nf(Error));function t3(n,e,t,r,i){if(e.first){var o=new Promise(function(f,p){var h=function(v){return r(v),v.length?p(new Dv(v,zf(v))):f(i)},g=e3(n);kv(g,t,h)});return o.catch(function(f){return f}),o}var s=e.firstFields===!0?Object.keys(n):e.firstFields||[],a=Object.keys(n),l=a.length,d=0,c=[],u=new Promise(function(f,p){var h=function(m){if(c.push.apply(c,m),d++,d===l)return r(c),c.length?p(new Dv(c,zf(c))):f(i)};a.length||(r(c),f(i)),a.forEach(function(g){var m=n[g];s.indexOf(g)!==-1?kv(m,t,h):JN(m,t,h)})});return u.catch(function(f){return f}),u}function n3(n){return!!(n&&n.message!==void 0)}function r3(n,e){for(var t=n,r=0;r<e.length;r++){if(t==null)return t;t=t[e[r]]}return t}function Ov(n,e){return function(t){var r;return n.fullFields?r=r3(e,n.fullFields):r=e[t.field||n.fullField],n3(t)?(t.field=t.field||n.fullField,t.fieldValue=r,t):{message:typeof t=="function"?t():t,fieldValue:r,field:t.field||n.fullField}}}function Mv(n,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];typeof r=="object"&&typeof n[t]=="object"?n[t]=So({},n[t],r):n[t]=r}}return n}var qC=function(e,t,r,i,o,s){e.required&&(!r.hasOwnProperty(e.field)||ln(t,s||e.type))&&i.push(Zn(o.messages.required,e.fullField))},i3=function(e,t,r,i,o){(/^\s+$/.test(t)||t==="")&&i.push(Zn(o.messages.whitespace,e.fullField))},Al,o3=function(){if(Al)return Al;var n="[a-fA-F\\d:]",e=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?="+n+")|(?<="+n+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+t+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+t+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+t+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+t+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+t+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+t+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+t+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^"+t+"$)|(?:^"+i+"$)"),s=new RegExp("^"+t+"$"),a=new RegExp("^"+i+"$"),l=function(x){return x&&x.exact?o:new RegExp("(?:"+e(x)+t+e(x)+")|(?:"+e(x)+i+e(x)+")","g")};l.v4=function(y){return y&&y.exact?s:new RegExp(""+e(y)+t+e(y),"g")},l.v6=function(y){return y&&y.exact?a:new RegExp(""+e(y)+i+e(y),"g")};var d="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",u=l.v4().source,f=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",h="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",m="(?::\\d{2,5})?",v='(?:[/?#][^\\s"]*)?',b="(?:"+d+"|www\\.)"+c+"(?:localhost|"+u+"|"+f+"|"+p+h+g+")"+m+v;return Al=new RegExp("(?:^"+b+"$)","i"),Al},Fv={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},oa={integer:function(e){return oa.number(e)&&parseInt(e,10)===e},float:function(e){return oa.number(e)&&!oa.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!oa.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Fv.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(o3())},hex:function(e){return typeof e=="string"&&!!e.match(Fv.hex)}},s3=function(e,t,r,i,o){if(e.required&&t===void 0){qC(e,t,r,i,o);return}var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;s.indexOf(a)>-1?oa[a](t)||i.push(Zn(o.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&i.push(Zn(o.messages.types[a],e.fullField,e.type))},a3=function(e,t,r,i,o){var s=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",d=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=t,u=null,f=typeof t=="number",p=typeof t=="string",h=Array.isArray(t);if(f?u="number":p?u="string":h&&(u="array"),!u)return!1;h&&(c=t.length),p&&(c=t.replace(d,"_").length),s?c!==e.len&&i.push(Zn(o.messages[u].len,e.fullField,e.len)):a&&!l&&c<e.min?i.push(Zn(o.messages[u].min,e.fullField,e.min)):l&&!a&&c>e.max?i.push(Zn(o.messages[u].max,e.fullField,e.max)):a&&l&&(c<e.min||c>e.max)&&i.push(Zn(o.messages[u].range,e.fullField,e.min,e.max))},Jo="enum",l3=function(e,t,r,i,o){e[Jo]=Array.isArray(e[Jo])?e[Jo]:[],e[Jo].indexOf(t)===-1&&i.push(Zn(o.messages[Jo],e.fullField,e[Jo].join(", ")))},d3=function(e,t,r,i,o){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||i.push(Zn(o.messages.pattern.mismatch,e.fullField,t,e.pattern));else if(typeof e.pattern=="string"){var s=new RegExp(e.pattern);s.test(t)||i.push(Zn(o.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},ft={required:qC,whitespace:i3,type:s3,range:a3,enum:l3,pattern:d3},c3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t,"string")&&!e.required)return r();ft.required(e,t,i,s,o,"string"),ln(t,"string")||(ft.type(e,t,i,s,o),ft.range(e,t,i,s,o),ft.pattern(e,t,i,s,o),e.whitespace===!0&&ft.whitespace(e,t,i,s,o))}r(s)},u3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t)&&!e.required)return r();ft.required(e,t,i,s,o),t!==void 0&&ft.type(e,t,i,s,o)}r(s)},f3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(t===""&&(t=void 0),ln(t)&&!e.required)return r();ft.required(e,t,i,s,o),t!==void 0&&(ft.type(e,t,i,s,o),ft.range(e,t,i,s,o))}r(s)},h3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t)&&!e.required)return r();ft.required(e,t,i,s,o),t!==void 0&&ft.type(e,t,i,s,o)}r(s)},p3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t)&&!e.required)return r();ft.required(e,t,i,s,o),ln(t)||ft.type(e,t,i,s,o)}r(s)},g3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t)&&!e.required)return r();ft.required(e,t,i,s,o),t!==void 0&&(ft.type(e,t,i,s,o),ft.range(e,t,i,s,o))}r(s)},m3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t)&&!e.required)return r();ft.required(e,t,i,s,o),t!==void 0&&(ft.type(e,t,i,s,o),ft.range(e,t,i,s,o))}r(s)},v3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(t==null&&!e.required)return r();ft.required(e,t,i,s,o,"array"),t!=null&&(ft.type(e,t,i,s,o),ft.range(e,t,i,s,o))}r(s)},b3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t)&&!e.required)return r();ft.required(e,t,i,s,o),t!==void 0&&ft.type(e,t,i,s,o)}r(s)},y3="enum",x3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t)&&!e.required)return r();ft.required(e,t,i,s,o),t!==void 0&&ft[y3](e,t,i,s,o)}r(s)},S3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t,"string")&&!e.required)return r();ft.required(e,t,i,s,o),ln(t,"string")||ft.pattern(e,t,i,s,o)}r(s)},C3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t,"date")&&!e.required)return r();if(ft.required(e,t,i,s,o),!ln(t,"date")){var l;t instanceof Date?l=t:l=new Date(t),ft.type(e,l,i,s,o),l&&ft.range(e,l.getTime(),i,s,o)}}r(s)},T3=function(e,t,r,i,o){var s=[],a=Array.isArray(t)?"array":typeof t;ft.required(e,t,i,s,o,a),r(s)},xu=function(e,t,r,i,o){var s=e.type,a=[],l=e.required||!e.required&&i.hasOwnProperty(e.field);if(l){if(ln(t,s)&&!e.required)return r();ft.required(e,t,i,a,o,s),ln(t,s)||ft.type(e,t,i,a,o)}r(a)},w3=function(e,t,r,i,o){var s=[],a=e.required||!e.required&&i.hasOwnProperty(e.field);if(a){if(ln(t)&&!e.required)return r();ft.required(e,t,i,s,o)}r(s)},Ca={string:c3,method:u3,number:f3,boolean:h3,regexp:p3,integer:g3,float:m3,array:v3,object:b3,enum:x3,pattern:S3,date:C3,url:xu,hex:xu,email:xu,required:T3,any:w3};function Uf(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Hf=Uf(),Is=function(){function n(t){this.rules=null,this._messages=Hf,this.define(t)}var e=n.prototype;return e.define=function(r){var i=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(o){var s=r[o];i.rules[o]=Array.isArray(s)?s:[s]})},e.messages=function(r){return r&&(this._messages=Mv(Uf(),r)),this._messages},e.validate=function(r,i,o){var s=this;i===void 0&&(i={}),o===void 0&&(o=function(){});var a=r,l=i,d=o;if(typeof l=="function"&&(d=l,l={}),!this.rules||Object.keys(this.rules).length===0)return d&&d(null,a),Promise.resolve(a);function c(g){var m=[],v={};function b(x){if(Array.isArray(x)){var E;m=(E=m).concat.apply(E,x)}else m.push(x)}for(var y=0;y<g.length;y++)b(g[y]);m.length?(v=zf(m),d(m,v)):d(null,a)}if(l.messages){var u=this.messages();u===Hf&&(u=Uf()),Mv(u,l.messages),l.messages=u}else l.messages=this.messages();var f={},p=l.keys||Object.keys(this.rules);p.forEach(function(g){var m=s.rules[g],v=a[g];m.forEach(function(b){var y=b;typeof y.transform=="function"&&(a===r&&(a=So({},a)),v=a[g]=y.transform(v)),typeof y=="function"?y={validator:y}:y=So({},y),y.validator=s.getValidationMethod(y),y.validator&&(y.field=g,y.fullField=y.fullField||g,y.type=s.getType(y),f[g]=f[g]||[],f[g].push({rule:y,value:v,source:a,field:g}))})});var h={};return t3(f,l,function(g,m){var v=g.rule,b=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");b=b&&(v.required||!v.required&&g.value),v.field=g.field;function y(A,S){return So({},S,{fullField:v.fullField+"."+A,fullFields:v.fullFields?[].concat(v.fullFields,[A]):[A]})}function x(A){A===void 0&&(A=[]);var S=Array.isArray(A)?A:[A];!l.suppressWarning&&S.length&&n.warning("async-validator:",S),S.length&&v.message!==void 0&&(S=[].concat(v.message));var w=S.map(Ov(v,a));if(l.first&&w.length)return h[v.field]=1,m(w);if(!b)m(w);else{if(v.required&&!g.value)return v.message!==void 0?w=[].concat(v.message).map(Ov(v,a)):l.error&&(w=[l.error(v,Zn(l.messages.required,v.field))]),m(w);var T={};v.defaultField&&Object.keys(g.value).map(function(P){T[P]=v.defaultField}),T=So({},T,g.rule.fields);var C={};Object.keys(T).forEach(function(P){var _=T[P],D=Array.isArray(_)?_:[_];C[P]=D.map(y.bind(null,P))});var L=new n(C);L.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),L.validate(g.value,g.rule.options||l,function(P){var _=[];w&&w.length&&_.push.apply(_,w),P&&P.length&&_.push.apply(_,P),m(_.length?_:null)})}}var E;if(v.asyncValidator)E=v.asyncValidator(v,g.value,x,g.source,l);else if(v.validator){try{E=v.validator(v,g.value,x,g.source,l)}catch(A){console.error==null||console.error(A),l.suppressValidatorError||setTimeout(function(){throw A},0),x(A.message)}E===!0?x():E===!1?x(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):E instanceof Array?x(E):E instanceof Error&&x(E.message)}E&&E.then&&E.then(function(){return x()},function(A){return x(A)})},function(g){c(g)},a)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Ca.hasOwnProperty(r.type))throw new Error(Zn("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var i=Object.keys(r),o=i.indexOf("message");return o!==-1&&i.splice(o,1),i.length===1&&i[0]==="required"?Ca.required:Ca[this.getType(r)]||void 0},n}();Is.register=function(e,t){if(typeof t!="function")throw new Error("Cannot register a validator by type, validator is not a function");Ca[e]=t};Is.warning=QN;Is.messages=Hf;Is.validators=Ca;const{cubicBezierEaseInOut:$v}=Ti;function E3({name:n="fade-down",fromOffset:e="-4px",enterDuration:t=".3s",leaveDuration:r=".3s",enterCubicBezier:i=$v,leaveCubicBezier:o=$v}={}){return[Z(`&.${n}-transition-enter-from, &.${n}-transition-leave-to`,{opacity:0,transform:`translateY(${e})`}),Z(`&.${n}-transition-enter-to, &.${n}-transition-leave-from`,{opacity:1,transform:"translateY(0)"}),Z(`&.${n}-transition-leave-active`,{transition:`opacity ${r} ${o}, transform ${r} ${o}`}),Z(`&.${n}-transition-enter-active`,{transition:`opacity ${t} ${i}, transform ${t} ${i}`})]}const R3=j("form-item",`
 display: grid;
 line-height: var(--n-line-height);
`,[j("form-item-label",`
 grid-area: label;
 align-items: center;
 line-height: 1.25;
 text-align: var(--n-label-text-align);
 font-size: var(--n-label-font-size);
 min-height: var(--n-label-height);
 padding: var(--n-label-padding);
 color: var(--n-label-text-color);
 transition: color .3s var(--n-bezier);
 box-sizing: border-box;
 font-weight: var(--n-label-font-weight);
 `,[q("asterisk",`
 white-space: nowrap;
 user-select: none;
 -webkit-user-select: none;
 color: var(--n-asterisk-color);
 transition: color .3s var(--n-bezier);
 `),q("asterisk-placeholder",`
 grid-area: mark;
 user-select: none;
 -webkit-user-select: none;
 visibility: hidden; 
 `)]),j("form-item-blank",`
 grid-area: blank;
 min-height: var(--n-blank-height);
 `),ee("auto-label-width",[j("form-item-label","white-space: nowrap;")]),ee("left-labelled",`
 grid-template-areas:
 "label blank"
 "label feedback";
 grid-template-columns: auto minmax(0, 1fr);
 grid-template-rows: auto 1fr;
 align-items: flex-start;
 `,[j("form-item-label",`
 display: grid;
 grid-template-columns: 1fr auto;
 min-height: var(--n-blank-height);
 height: auto;
 box-sizing: border-box;
 flex-shrink: 0;
 flex-grow: 0;
 `,[ee("reverse-columns-space",`
 grid-template-columns: auto 1fr;
 `),ee("left-mark",`
 grid-template-areas:
 "mark text"
 ". text";
 `),ee("right-mark",`
 grid-template-areas: 
 "text mark"
 "text .";
 `),ee("right-hanging-mark",`
 grid-template-areas: 
 "text mark"
 "text .";
 `),q("text",`
 grid-area: text; 
 `),q("asterisk",`
 grid-area: mark; 
 align-self: end;
 `)])]),ee("top-labelled",`
 grid-template-areas:
 "label"
 "blank"
 "feedback";
 grid-template-rows: minmax(var(--n-label-height), auto) 1fr;
 grid-template-columns: minmax(0, 100%);
 `,[ee("no-label",`
 grid-template-areas:
 "blank"
 "feedback";
 grid-template-rows: 1fr;
 `),j("form-item-label",`
 display: flex;
 align-items: flex-start;
 justify-content: var(--n-label-text-align);
 `)]),j("form-item-blank",`
 box-sizing: border-box;
 display: flex;
 align-items: center;
 position: relative;
 `),j("form-item-feedback-wrapper",`
 grid-area: feedback;
 box-sizing: border-box;
 min-height: var(--n-feedback-height);
 font-size: var(--n-feedback-font-size);
 line-height: 1.25;
 transform-origin: top left;
 `,[Z("&:not(:empty)",`
 padding: var(--n-feedback-padding);
 `),j("form-item-feedback",{transition:"color .3s var(--n-bezier)",color:"var(--n-feedback-text-color)"},[ee("warning",{color:"var(--n-feedback-text-color-warning)"}),ee("error",{color:"var(--n-feedback-text-color-error)"}),E3({fromOffset:"-3px",enterDuration:".3s",leaveDuration:".2s"})])])]);function A3(n){const e=Be(ll,null);return{mergedSize:U(()=>n.size!==void 0?n.size:(e==null?void 0:e.props.size)!==void 0?e.props.size:"medium")}}function I3(n){const e=Be(ll,null),t=U(()=>{const{labelPlacement:h}=n;return h!==void 0?h:e!=null&&e.props.labelPlacement?e.props.labelPlacement:"top"}),r=U(()=>t.value==="left"&&(n.labelWidth==="auto"||(e==null?void 0:e.props.labelWidth)==="auto")),i=U(()=>{if(t.value==="top")return;const{labelWidth:h}=n;if(h!==void 0&&h!=="auto")return an(h);if(r.value){const g=e==null?void 0:e.maxChildLabelWidthRef.value;return g!==void 0?an(g):void 0}if((e==null?void 0:e.props.labelWidth)!==void 0)return an(e.props.labelWidth)}),o=U(()=>{const{labelAlign:h}=n;if(h)return h;if(e!=null&&e.props.labelAlign)return e.props.labelAlign}),s=U(()=>{var h;return[(h=n.labelProps)===null||h===void 0?void 0:h.style,n.labelStyle,{width:i.value}]}),a=U(()=>{const{showRequireMark:h}=n;return h!==void 0?h:e==null?void 0:e.props.showRequireMark}),l=U(()=>{const{requireMarkPlacement:h}=n;return h!==void 0?h:(e==null?void 0:e.props.requireMarkPlacement)||"right"}),d=G(!1),c=G(!1),u=U(()=>{const{validationStatus:h}=n;if(h!==void 0)return h;if(d.value)return"error";if(c.value)return"warning"}),f=U(()=>{const{showFeedback:h}=n;return h!==void 0?h:(e==null?void 0:e.props.showFeedback)!==void 0?e.props.showFeedback:!0}),p=U(()=>{const{showLabel:h}=n;return h!==void 0?h:(e==null?void 0:e.props.showLabel)!==void 0?e.props.showLabel:!0});return{validationErrored:d,validationWarned:c,mergedLabelStyle:s,mergedLabelPlacement:t,mergedLabelAlign:o,mergedShowRequireMark:a,mergedRequireMarkPlacement:l,mergedValidationStatus:u,mergedShowFeedback:f,mergedShowLabel:p,isAutoLabelWidth:r}}function L3(n){const e=Be(ll,null),t=U(()=>{const{rulePath:s}=n;if(s!==void 0)return s;const{path:a}=n;if(a!==void 0)return a}),r=U(()=>{const s=[],{rule:a}=n;if(a!==void 0&&(Array.isArray(a)?s.push(...a):s.push(a)),e){const{rules:l}=e.props,{value:d}=t;if(l!==void 0&&d!==void 0){const c=Ha(l,d);c!==void 0&&(Array.isArray(c)?s.push(...c):s.push(c))}}return s}),i=U(()=>r.value.some(s=>s.required)),o=U(()=>i.value||n.required);return{mergedRules:r,mergedRequired:o}}var Bv=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(c){try{d(r.next(c))}catch(u){s(u)}}function l(c){try{d(r.throw(c))}catch(u){s(u)}}function d(c){c.done?o(c.value):i(c.value).then(a,l)}d((r=r.apply(n,e||[])).next())})};const P3=Object.assign(Object.assign({},Ke.props),{label:String,labelWidth:[Number,String],labelStyle:[String,Object],labelAlign:String,labelPlacement:String,path:String,first:Boolean,rulePath:String,required:Boolean,showRequireMark:{type:Boolean,default:void 0},requireMarkPlacement:String,showFeedback:{type:Boolean,default:void 0},rule:[Object,Array],size:String,ignorePathChange:Boolean,validationStatus:String,feedback:String,feedbackClass:String,feedbackStyle:[String,Object],showLabel:{type:Boolean,default:void 0},labelProps:Object});function Nv(n,e){return(...t)=>{try{const r=n(...t);return!e&&(typeof r=="boolean"||r instanceof Error||Array.isArray(r))||r!=null&&r.then?r:(r===void 0||Lr("form-item/validate",`You return a ${typeof r} typed value in the validator method, which is not recommended. Please use ${e?"`Promise`":"`boolean`, `Error` or `Promise`"} typed value instead.`),!0)}catch(r){Lr("form-item/validate","An error is catched in the validation, so the validation won't be done. Your callback in `validate` method of `n-form` or `n-form-item` won't be called in this validation."),console.error(r);return}}}const Fr=Ce({name:"FormItem",props:P3,setup(n){MI(KC,"formItems",Ie(n,"path"));const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=yt(n),r=Be(ll,null),i=A3(n),o=I3(n),{validationErrored:s,validationWarned:a}=o,{mergedRequired:l,mergedRules:d}=L3(n),{mergedSize:c}=i,{mergedLabelPlacement:u,mergedLabelAlign:f,mergedRequireMarkPlacement:p}=o,h=G([]),g=G(ko()),m=r?Ie(r.props,"disabled"):G(!1),v=Ke("Form","-form-item",R3,HC,n,e);at(Ie(n,"path"),()=>{n.ignorePathChange||b()});function b(){h.value=[],s.value=!1,a.value=!1,n.feedback&&(g.value=ko())}const y=(...D)=>Bv(this,[...D],void 0,function*(k=null,M=()=>!0,O={suppressWarning:!0}){const{path:$}=n;O?O.first||(O.first=n.first):O={};const{value:K}=d,Y=r?Ha(r.props.model,$||""):void 0,H={},B={},X=(k?K.filter(Ae=>Array.isArray(Ae.trigger)?Ae.trigger.includes(k):Ae.trigger===k):K).filter(M).map((Ae,F)=>{const z=Object.assign({},Ae);if(z.validator&&(z.validator=Nv(z.validator,!1)),z.asyncValidator&&(z.asyncValidator=Nv(z.asyncValidator,!0)),z.renderMessage){const ne=`__renderMessage__${F}`;B[ne]=z.message,z.message=ne,H[ne]=z.renderMessage}return z}),se=X.filter(Ae=>Ae.level!=="warning"),pe=X.filter(Ae=>Ae.level==="warning"),te={valid:!0,errors:void 0,warnings:void 0};if(!X.length)return te;const W=$??"__n_no_path__",de=new Is({[W]:se}),V=new Is({[W]:pe}),{validateMessages:ue}=(r==null?void 0:r.props)||{};ue&&(de.messages(ue),V.messages(ue));const Pe=Ae=>{h.value=Ae.map(F=>{const z=(F==null?void 0:F.message)||"";return{key:z,render:()=>z.startsWith("__renderMessage__")?H[z]():z}}),Ae.forEach(F=>{var z;!((z=F.message)===null||z===void 0)&&z.startsWith("__renderMessage__")&&(F.message=B[F.message])})};if(se.length){const Ae=yield new Promise(F=>{de.validate({[W]:Y},O,F)});Ae!=null&&Ae.length&&(te.valid=!1,te.errors=Ae,Pe(Ae))}if(pe.length&&!te.errors){const Ae=yield new Promise(F=>{V.validate({[W]:Y},O,F)});Ae!=null&&Ae.length&&(Pe(Ae),te.warnings=Ae)}return!te.errors&&!te.warnings?b():(s.value=!!te.errors,a.value=!!te.warnings),te});function x(){y("blur")}function E(){y("change")}function A(){y("focus")}function S(){y("input")}function w(D,k){return Bv(this,void 0,void 0,function*(){let M,O,$,K;return typeof D=="string"?(M=D,O=k):D!==null&&typeof D=="object"&&(M=D.trigger,O=D.callback,$=D.shouldRuleBeApplied,K=D.options),yield new Promise((Y,H)=>{y(M,$,K).then(({valid:B,errors:X,warnings:se})=>{B?(O&&O(void 0,{warnings:se}),Y({warnings:se})):(O&&O(X,{warnings:se}),H(X))})})})}st(Cf,{path:Ie(n,"path"),disabled:m,mergedSize:i.mergedSize,mergedValidationStatus:o.mergedValidationStatus,restoreValidation:b,handleContentBlur:x,handleContentChange:E,handleContentFocus:A,handleContentInput:S});const T={validate:w,restoreValidation:b,internalValidate:y},C=G(null);Nt(()=>{if(!o.isAutoLabelWidth.value)return;const D=C.value;if(D!==null){const k=D.style.whiteSpace;D.style.whiteSpace="nowrap",D.style.width="",r==null||r.deriveMaxChildLabelWidth(Number(getComputedStyle(D).width.slice(0,-2))),D.style.whiteSpace=k}});const L=U(()=>{var D;const{value:k}=c,{value:M}=u,O=M==="top"?"vertical":"horizontal",{common:{cubicBezierEaseInOut:$},self:{labelTextColor:K,asteriskColor:Y,lineHeight:H,feedbackTextColor:B,feedbackTextColorWarning:X,feedbackTextColorError:se,feedbackPadding:pe,labelFontWeight:te,[xe("labelHeight",k)]:W,[xe("blankHeight",k)]:de,[xe("feedbackFontSize",k)]:V,[xe("feedbackHeight",k)]:ue,[xe("labelPadding",O)]:Pe,[xe("labelTextAlign",O)]:Ae,[xe(xe("labelFontSize",M),k)]:F}}=v.value;let z=(D=f.value)!==null&&D!==void 0?D:Ae;return M==="top"&&(z=z==="right"?"flex-end":"flex-start"),{"--n-bezier":$,"--n-line-height":H,"--n-blank-height":de,"--n-label-font-size":F,"--n-label-text-align":z,"--n-label-height":W,"--n-label-padding":Pe,"--n-label-font-weight":te,"--n-asterisk-color":Y,"--n-label-text-color":K,"--n-feedback-padding":pe,"--n-feedback-font-size":V,"--n-feedback-height":ue,"--n-feedback-text-color":B,"--n-feedback-text-color-warning":X,"--n-feedback-text-color-error":se}}),P=t?Gt("form-item",U(()=>{var D;return`${c.value[0]}${u.value[0]}${((D=f.value)===null||D===void 0?void 0:D[0])||""}`}),L,n):void 0,_=U(()=>u.value==="left"&&p.value==="left"&&f.value==="left");return Object.assign(Object.assign(Object.assign(Object.assign({labelElementRef:C,mergedClsPrefix:e,mergedRequired:l,feedbackId:g,renderExplains:h,reverseColSpace:_},o),i),T),{cssVars:t?void 0:L,themeClass:P==null?void 0:P.themeClass,onRender:P==null?void 0:P.onRender})},render(){const{$slots:n,mergedClsPrefix:e,mergedShowLabel:t,mergedShowRequireMark:r,mergedRequireMarkPlacement:i,onRender:o}=this,s=r!==void 0?r:this.mergedRequired;o==null||o();const a=()=>{const l=this.$slots.label?this.$slots.label():this.label;if(!l)return null;const d=R("span",{class:`${e}-form-item-label__text`},l),c=s?R("span",{class:`${e}-form-item-label__asterisk`},i!=="left"?" *":"* "):i==="right-hanging"&&R("span",{class:`${e}-form-item-label__asterisk-placeholder`}," *"),{labelProps:u}=this;return R("label",Object.assign({},u,{class:[u==null?void 0:u.class,`${e}-form-item-label`,`${e}-form-item-label--${i}-mark`,this.reverseColSpace&&`${e}-form-item-label--reverse-columns-space`],style:this.mergedLabelStyle,ref:"labelElementRef"}),i==="left"?[c,d]:[d,c])};return R("div",{class:[`${e}-form-item`,this.themeClass,`${e}-form-item--${this.mergedSize}-size`,`${e}-form-item--${this.mergedLabelPlacement}-labelled`,this.isAutoLabelWidth&&`${e}-form-item--auto-label-width`,!t&&`${e}-form-item--no-label`],style:this.cssVars},t&&a(),R("div",{class:[`${e}-form-item-blank`,this.mergedValidationStatus&&`${e}-form-item-blank--${this.mergedValidationStatus}`]},n),this.mergedShowFeedback?R("div",{key:this.feedbackId,style:this.feedbackStyle,class:[`${e}-form-item-feedback-wrapper`,this.feedbackClass]},R(ir,{name:"fade-down-transition",mode:"out-in"},{default:()=>{const{mergedValidationStatus:l}=this;return Ct(n.feedback,d=>{var c;const{feedback:u}=this,f=d||u?R("div",{key:"__feedback__",class:`${e}-form-item-feedback__line`},d||u):this.renderExplains.length?(c=this.renderExplains)===null||c===void 0?void 0:c.map(({key:p,render:h})=>R("div",{key:p,class:`${e}-form-item-feedback__line`},h())):null;return f?l==="warning"?R("div",{key:"controlled-warning",class:`${e}-form-item-feedback ${e}-form-item-feedback--warning`},f):l==="error"?R("div",{key:"controlled-error",class:`${e}-form-item-feedback ${e}-form-item-feedback--error`},f):l==="success"?R("div",{key:"controlled-success",class:`${e}-form-item-feedback ${e}-form-item-feedback--success`},f):R("div",{key:"controlled-default",class:`${e}-form-item-feedback`},f):null})}})):null)}});function _3(n){const{primaryColor:e,baseColor:t}=n;return{color:e,iconColor:t}}const k3={name:"IconWrapper",common:Re,self:_3},D3={name:"Image",common:Re,peers:{Tooltip:mc},self:n=>{const{textColor2:e}=n;return{toolbarIconColor:e,toolbarColor:"rgba(0, 0, 0, .35)",toolbarBoxShadow:"none",toolbarBorderRadius:"24px"}}},O3={extraFontSize:"12px",width:"440px"},M3={name:"Transfer",common:Re,peers:{Checkbox:$s,Scrollbar:Gn,Input:or,Empty:Wo,Button:Wn},self(n){const{iconColorDisabled:e,iconColor:t,fontWeight:r,fontSizeLarge:i,fontSizeMedium:o,fontSizeSmall:s,heightLarge:a,heightMedium:l,heightSmall:d,borderRadius:c,inputColor:u,tableHeaderColor:f,textColor1:p,textColorDisabled:h,textColor2:g,hoverColor:m}=n;return Object.assign(Object.assign({},O3),{itemHeightSmall:d,itemHeightMedium:l,itemHeightLarge:a,fontSizeSmall:s,fontSizeMedium:o,fontSizeLarge:i,borderRadius:c,borderColor:"#0000",listColor:u,headerColor:f,titleTextColor:p,titleTextColorDisabled:h,extraTextColor:g,filterDividerColor:"#0000",itemTextColor:g,itemTextColorDisabled:h,itemColorPending:m,titleFontWeight:r,iconColor:t,iconColorDisabled:e})}};function F3(){return{}}const $3={name:"Marquee",common:Re,self:F3},B3={name:"QrCode",common:Re,self:n=>({borderRadius:n.borderRadius})},N3={name:"Skeleton",common:Re,self(n){const{heightSmall:e,heightMedium:t,heightLarge:r,borderRadius:i}=n;return{color:"rgba(255, 255, 255, 0.12)",colorEnd:"rgba(255, 255, 255, 0.18)",borderRadius:i,heightSmall:e,heightMedium:t,heightLarge:r}}},z3=Z([Z("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),j("spin-container",`
 position: relative;
 `,[j("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[sp()])]),j("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),j("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[ee("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),j("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),j("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[ee("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),U3={small:20,medium:18,large:16},H3=Object.assign(Object.assign({},Ke.props),{contentClass:String,contentStyle:[Object,String],description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0},delay:Number}),V3=Ce({name:"Spin",props:H3,slots:Object,setup(n){const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=yt(n),r=Ke("Spin","-spin",z3,hN,n,e),i=U(()=>{const{size:l}=n,{common:{cubicBezierEaseInOut:d},self:c}=r.value,{opacitySpinning:u,color:f,textColor:p}=c,h=typeof l=="number"?Zt(l):c[xe("size",l)];return{"--n-bezier":d,"--n-opacity-spinning":u,"--n-size":h,"--n-color":f,"--n-text-color":p}}),o=t?Gt("spin",U(()=>{const{size:l}=n;return typeof l=="number"?String(l):l[0]}),i,n):void 0,s=$h(n,["spinning","show"]),a=G(!1);return Vn(l=>{let d;if(s.value){const{delay:c}=n;if(c){d=window.setTimeout(()=>{a.value=!0},c),l(()=>{clearTimeout(d)});return}}a.value=s.value}),{mergedClsPrefix:e,active:a,mergedStrokeWidth:U(()=>{const{strokeWidth:l}=n;if(l!==void 0)return l;const{size:d}=n;return U3[typeof d=="number"?"medium":d]}),cssVars:t?void 0:i,themeClass:o==null?void 0:o.themeClass,onRender:o==null?void 0:o.onRender}},render(){var n,e;const{$slots:t,mergedClsPrefix:r,description:i}=this,o=t.icon&&this.rotate,s=(i||t.description)&&R("div",{class:`${r}-spin-description`},i||((n=t.description)===null||n===void 0?void 0:n.call(t))),a=t.icon?R("div",{class:[`${r}-spin-body`,this.themeClass]},R("div",{class:[`${r}-spin`,o&&`${r}-spin--rotate`],style:t.default?"":this.cssVars},t.icon()),s):R("div",{class:[`${r}-spin-body`,this.themeClass]},R(ao,{clsPrefix:r,style:t.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${r}-spin`}),s);return(e=this.onRender)===null||e===void 0||e.call(this),t.default?R("div",{class:[`${r}-spin-container`,this.themeClass],style:this.cssVars},R("div",{class:[`${r}-spin-content`,this.active&&`${r}-spin-content--spinning`,this.contentClass],style:this.contentStyle},t),R(ir,{name:"fade-in-transition"},{default:()=>this.active?a:null})):a}}),G3={name:"Split",common:Re},W3=j("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[q("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),q("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),q("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),j("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[Yn({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),q("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),q("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),q("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),Z("&:focus",[q("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),ee("round",[q("rail","border-radius: calc(var(--n-rail-height) / 2);",[q("button","border-radius: calc(var(--n-button-height) / 2);")])]),Pt("disabled",[Pt("icon",[ee("rubber-band",[ee("pressed",[q("rail",[q("button","max-width: var(--n-button-width-pressed);")])]),q("rail",[Z("&:active",[q("button","max-width: var(--n-button-width-pressed);")])]),ee("active",[ee("pressed",[q("rail",[q("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),q("rail",[Z("&:active",[q("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),ee("active",[q("rail",[q("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),q("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 opacity .3s var(--n-bezier),
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[q("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[Yn()]),q("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-height);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),ee("active",[q("rail","background-color: var(--n-rail-color-active);")]),ee("loading",[q("rail",`
 cursor: wait;
 `)]),ee("disabled",[q("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]),j3=Object.assign(Object.assign({},Ke.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]});let Js;const zv=Ce({name:"Switch",props:j3,slots:Object,setup(n){Js===void 0&&(typeof CSS<"u"?typeof CSS.supports<"u"?Js=CSS.supports("width","max(1px)"):Js=!1:Js=!0);const{mergedClsPrefixRef:e,inlineThemeDisabled:t}=yt(n),r=Ke("Switch","-switch",W3,CN,n,e),i=oo(n),{mergedSizeRef:o,mergedDisabledRef:s}=i,a=G(n.defaultValue),l=Ie(n,"value"),d=kn(l,a),c=U(()=>d.value===n.checkedValue),u=G(!1),f=G(!1),p=U(()=>{const{railStyle:w}=n;if(w)return w({focused:f.value,checked:c.value})});function h(w){const{"onUpdate:value":T,onChange:C,onUpdateValue:L}=n,{nTriggerFormInput:P,nTriggerFormChange:_}=i;T&&we(T,w),L&&we(L,w),C&&we(C,w),a.value=w,P(),_()}function g(){const{nTriggerFormFocus:w}=i;w()}function m(){const{nTriggerFormBlur:w}=i;w()}function v(){n.loading||s.value||(d.value!==n.checkedValue?h(n.checkedValue):h(n.uncheckedValue))}function b(){f.value=!0,g()}function y(){f.value=!1,m(),u.value=!1}function x(w){n.loading||s.value||w.key===" "&&(d.value!==n.checkedValue?h(n.checkedValue):h(n.uncheckedValue),u.value=!1)}function E(w){n.loading||s.value||w.key===" "&&(w.preventDefault(),u.value=!0)}const A=U(()=>{const{value:w}=o,{self:{opacityDisabled:T,railColor:C,railColorActive:L,buttonBoxShadow:P,buttonColor:_,boxShadowFocus:D,loadingColor:k,textColor:M,iconColor:O,[xe("buttonHeight",w)]:$,[xe("buttonWidth",w)]:K,[xe("buttonWidthPressed",w)]:Y,[xe("railHeight",w)]:H,[xe("railWidth",w)]:B,[xe("railBorderRadius",w)]:X,[xe("buttonBorderRadius",w)]:se},common:{cubicBezierEaseInOut:pe}}=r.value;let te,W,de;return Js?(te=`calc((${H} - ${$}) / 2)`,W=`max(${H}, ${$})`,de=`max(${B}, calc(${B} + ${$} - ${H}))`):(te=Zt((pn(H)-pn($))/2),W=Zt(Math.max(pn(H),pn($))),de=pn(H)>pn($)?B:Zt(pn(B)+pn($)-pn(H))),{"--n-bezier":pe,"--n-button-border-radius":se,"--n-button-box-shadow":P,"--n-button-color":_,"--n-button-width":K,"--n-button-width-pressed":Y,"--n-button-height":$,"--n-height":W,"--n-offset":te,"--n-opacity-disabled":T,"--n-rail-border-radius":X,"--n-rail-color":C,"--n-rail-color-active":L,"--n-rail-height":H,"--n-rail-width":B,"--n-width":de,"--n-box-shadow-focus":D,"--n-loading-color":k,"--n-text-color":M,"--n-icon-color":O}}),S=t?Gt("switch",U(()=>o.value[0]),A,n):void 0;return{handleClick:v,handleBlur:y,handleFocus:b,handleKeyup:x,handleKeydown:E,mergedRailStyle:p,pressed:u,mergedClsPrefix:e,mergedValue:d,checked:c,mergedDisabled:s,cssVars:t?void 0:A,themeClass:S==null?void 0:S.themeClass,onRender:S==null?void 0:S.onRender}},render(){const{mergedClsPrefix:n,mergedDisabled:e,checked:t,mergedRailStyle:r,onRender:i,$slots:o}=this;i==null||i();const{checked:s,unchecked:a,icon:l,"checked-icon":d,"unchecked-icon":c}=o,u=!(ps(l)&&ps(d)&&ps(c));return R("div",{role:"switch","aria-checked":t,class:[`${n}-switch`,this.themeClass,u&&`${n}-switch--icon`,t&&`${n}-switch--active`,e&&`${n}-switch--disabled`,this.round&&`${n}-switch--round`,this.loading&&`${n}-switch--loading`,this.pressed&&`${n}-switch--pressed`,this.rubberBand&&`${n}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},R("div",{class:`${n}-switch__rail`,"aria-hidden":"true",style:r},Ct(s,f=>Ct(a,p=>f||p?R("div",{"aria-hidden":!0,class:`${n}-switch__children-placeholder`},R("div",{class:`${n}-switch__rail-placeholder`},R("div",{class:`${n}-switch__button-placeholder`}),f),R("div",{class:`${n}-switch__rail-placeholder`},R("div",{class:`${n}-switch__button-placeholder`}),p)):null)),R("div",{class:`${n}-switch__button`},Ct(l,f=>Ct(d,p=>Ct(c,h=>R(Go,null,{default:()=>this.loading?R(ao,{key:"loading",clsPrefix:n,strokeWidth:20}):this.checked&&(p||f)?R("div",{class:`${n}-switch__button-icon`,key:p?"checked-icon":"icon"},p||f):!this.checked&&(h||f)?R("div",{class:`${n}-switch__button-icon`,key:h?"unchecked-icon":"icon"},h||f):null})))),Ct(s,f=>f&&R("div",{key:"checked",class:`${n}-switch__checked`},f)),Ct(a,f=>f&&R("div",{key:"unchecked",class:`${n}-switch__unchecked`},f)))))}}),K3="2.42.0";function q3({componentPrefix:n="N",components:e=[]}={}){const t=[];function r(o,s,a){o.component(n+s)||o.component(n+s,a)}function i(o){t.includes(o)||(t.push(o),e.forEach(s=>{const{name:a,alias:l}=s;r(o,a,s),l&&l.forEach(d=>{r(o,d,s)})}))}return{version:K3,componentPrefix:n,install:i}}const Y3=()=>({}),X3={name:"Equation",common:Re,self:Y3},Q3={name:"FloatButtonGroup",common:Re,self(n){const{popoverColor:e,dividerColor:t,borderRadius:r}=n;return{color:e,buttonBorderColor:t,borderRadiusSquare:r,boxShadow:"0 2px 8px 0px rgba(0, 0, 0, .12)"}}},Z3={name:"dark",common:Re,Alert:lF,Anchor:pF,AutoComplete:EF,Avatar:FS,AvatarGroup:IF,BackTop:PF,Badge:_F,Breadcrumb:OF,Button:Wn,ButtonGroup:BB,Calendar:UF,Card:zS,Carousel:qF,Cascader:QF,Checkbox:$s,Code:GS,Collapse:o$,CollapseTransition:a$,ColorPicker:d$,DataTable:L$,DatePicker:j2,Descriptions:Y2,Dialog:_C,Divider:IB,Drawer:PB,Dropdown:gp,DynamicInput:kB,DynamicTags:OB,Element:MB,Empty:Wo,Ellipsis:oC,Equation:X3,Flex:$B,Form:zB,GradientText:UB,Icon:l2,IconWrapper:k3,Image:D3,Input:or,InputNumber:HB,InputOtp:GB,LegacyTransfer:M3,Layout:WB,List:qB,LoadingBar:fB,Log:YB,Menu:JB,Mention:XB,Message:gB,Modal:nB,Notification:RB,PageHeader:nN,Pagination:JS,Popconfirm:oN,Popover:jo,Popselect:WS,Progress:VC,QrCode:B3,Radio:lC,Rate:aN,Result:cN,Row:jB,Scrollbar:Gn,Select:YS,Skeleton:N3,Slider:fN,Space:zC,Spin:pN,Statistic:mN,Steps:yN,Switch:xN,Table:EN,Tabs:IN,Tag:RS,Thing:PN,TimePicker:RC,Timeline:kN,Tooltip:mc,Transfer:ON,Tree:jC,TreeSelect:FN,Typography:NN,Upload:UN,Watermark:HN,Split:G3,FloatButton:VN,FloatButtonGroup:Q3,Marquee:$3},J3=Ce({__name:"App",setup(n){const e=Dh(),t=Ky(),r=G(null),i=async()=>{t.shouldRefill&&(console.log("队列数据不足，开始补充数据"),await t.refillQueue())};return Nt(()=>{e.loadApiList(),e.fetchApiList(),t.initializeQueue(),r.value=window.setInterval(()=>{i()},5e3)}),io(()=>{r.value&&clearInterval(r.value)}),(o,s)=>(Rt(),xn(Me(u$),{theme:Me(Z3)},{default:ut(()=>[qe(Me(CB),null,{default:ut(()=>[qe(Me(uB),null,{default:ut(()=>[qe(Me(Hy))]),_:1})]),_:1})]),_:1},8,["theme"]))}}),e5=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,t5=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,n5=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function r5(n,e){if(n==="__proto__"||n==="constructor"&&e&&typeof e=="object"&&"prototype"in e){i5(n);return}return e}function i5(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function o5(n,e={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const t=n.trim();if(t.length<=9)switch(t.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!n5.test(n)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(e5.test(n)||t5.test(n)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,r5)}return JSON.parse(n)}catch(r){if(e.strict)throw r;return n}}function s5(n,e){if(n==null)return;let t=n;for(let r=0;r<e.length;r++){if(t==null||t[e[r]]==null)return;t=t[e[r]]}return t}function xp(n,e,t){if(t.length===0)return e;const r=t[0];return t.length>1&&(e=xp(typeof n!="object"||n===null||!Object.prototype.hasOwnProperty.call(n,r)?Number.isInteger(Number(t[1]))?[]:{}:n[r],e,Array.prototype.slice.call(t,1))),Number.isInteger(Number(r))&&Array.isArray(n)?n.slice()[r]:Object.assign({},n,{[r]:e})}function YC(n,e){if(n==null||e.length===0)return n;if(e.length===1){if(n==null)return n;if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.slice.call(n,0).splice(e[0],1);const t={};for(const r in n)t[r]=n[r];return delete t[e[0]],t}if(n[e[0]]==null){if(Number.isInteger(e[0])&&Array.isArray(n))return Array.prototype.concat.call([],n);const t={};for(const r in n)t[r]=n[r];return t}return xp(n,YC(n[e[0]],Array.prototype.slice.call(e,1)),[e[0]])}function XC(n,e){return e.map(t=>t.split(".")).map(t=>[t,s5(n,t)]).filter(t=>t[1]!==void 0).reduce((t,r)=>xp(t,r[1],r[0]),{})}function QC(n,e){return e.map(t=>t.split(".")).reduce((t,r)=>YC(t,r),n)}function Uv(n,{storage:e,serializer:t,key:r,debug:i,pick:o,omit:s,beforeHydrate:a,afterHydrate:l},d,c=!0){try{c&&(a==null||a(d));const u=e.getItem(r);if(u){const f=t.deserialize(u),p=o?XC(f,o):f,h=s?QC(p,s):p;n.$patch(h)}c&&(l==null||l(d))}catch(u){i&&console.error("[pinia-plugin-persistedstate]",u)}}function Hv(n,{storage:e,serializer:t,key:r,debug:i,pick:o,omit:s}){try{const a=o?XC(n,o):n,l=s?QC(a,s):a,d=t.serialize(l);e.setItem(r,d)}catch(a){i&&console.error("[pinia-plugin-persistedstate]",a)}}function a5(n,e,t){const{pinia:r,store:i,options:{persist:o=t}}=n;if(!o)return;if(!(i.$id in r.state.value)){const l=r._s.get(i.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(o)?o:o===!0?[{}]:[o]).map(e);i.$hydrate=({runHooks:l=!0}={})=>{a.forEach(d=>{Uv(i,d,n,l)})},i.$persist=()=>{a.forEach(l=>{Hv(i.$state,l)})},a.forEach(l=>{Uv(i,l,n),i.$subscribe((d,c)=>Hv(c,l),{detached:!0})})}function l5(n={}){return function(e){a5(e,t=>({key:(n.key?n.key:r=>r)(t.key??e.store.$id),debug:t.debug??n.debug??!1,serializer:t.serializer??n.serializer??{serialize:r=>JSON.stringify(r),deserialize:r=>o5(r)},storage:t.storage??n.storage??window.localStorage,beforeHydrate:t.beforeHydrate,afterHydrate:t.afterHydrate,pick:t.pick,omit:t.omit}),n.auto??!1)}}var d5=l5();function Vv(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function Sp(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:Vv(e[r])&&Vv(n[r])&&Object.keys(e[r]).length>0&&Sp(n[r],e[r])})}const ZC={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function nr(){const n=typeof document<"u"?document:{};return Sp(n,ZC),n}const c5={document:ZC,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function hn(){const n=typeof window<"u"?window:{};return Sp(n,c5),n}function u5(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function f5(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Ad(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function vi(){return Date.now()}function h5(n){const e=hn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function p5(n,e){e===void 0&&(e="x");const t=hn();let r,i,o;const s=h5(n);return t.WebKitCSSMatrix?(i=s.transform||s.webkitTransform,i.split(",").length>6&&(i=i.split(", ").map(a=>a.replace(",",".")).join(", ")),o=new t.WebKitCSSMatrix(i==="none"?"":i)):(o=s.MozTransform||s.OTransform||s.MsTransform||s.msTransform||s.transform||s.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=o.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?i=o.m41:r.length===16?i=parseFloat(r[12]):i=parseFloat(r[4])),e==="y"&&(t.WebKitCSSMatrix?i=o.m42:r.length===16?i=parseFloat(r[13]):i=parseFloat(r[5])),i||0}function Il(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function g5(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Kn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r!=null&&!g5(r)){const i=Object.keys(Object(r)).filter(o=>e.indexOf(o)<0);for(let o=0,s=i.length;o<s;o+=1){const a=i[o],l=Object.getOwnPropertyDescriptor(r,a);l!==void 0&&l.enumerable&&(Il(n[a])&&Il(r[a])?r[a].__swiper__?n[a]=r[a]:Kn(n[a],r[a]):!Il(n[a])&&Il(r[a])?(n[a]={},r[a].__swiper__?n[a]=r[a]:Kn(n[a],r[a])):n[a]=r[a])}}}return n}function sa(n,e,t){n.style.setProperty(e,t)}function JC(n){let{swiper:e,targetPosition:t,side:r}=n;const i=hn(),o=-e.translate;let s=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",i.cancelAnimationFrame(e.cssModeFrameID);const d=t>o?"next":"prev",c=(f,p)=>d==="next"&&f>=p||d==="prev"&&f<=p,u=()=>{a=new Date().getTime(),s===null&&(s=a);const f=Math.max(Math.min((a-s)/l,1),0),p=.5-Math.cos(f*Math.PI)/2;let h=o+p*(t-o);if(c(h,t)&&(h=t),e.wrapperEl.scrollTo({[r]:h}),c(h,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:h})}),i.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=i.requestAnimationFrame(u)};u()}function Tr(n,e){e===void 0&&(e="");const t=hn(),r=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&r.push(...n.assignedElements()),e?r.filter(i=>i.matches(e)):r}function m5(n,e){const t=[e];for(;t.length>0;){const r=t.shift();if(n===r)return!0;t.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function v5(n,e){const t=hn();let r=e.contains(n);return!r&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(r=[...e.assignedElements()].includes(n),r||(r=m5(n,e))),r}function Id(n){try{console.warn(n);return}catch{}}function Ls(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:u5(e)),t}function b5(n){const e=hn(),t=nr(),r=n.getBoundingClientRect(),i=t.body,o=n.clientTop||i.clientTop||0,s=n.clientLeft||i.clientLeft||0,a=n===e?e.scrollY:n.scrollTop,l=n===e?e.scrollX:n.scrollLeft;return{top:r.top+a-o,left:r.left+l-s}}function y5(n,e){const t=[];for(;n.previousElementSibling;){const r=n.previousElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function x5(n,e){const t=[];for(;n.nextElementSibling;){const r=n.nextElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function Wi(n,e){return hn().getComputedStyle(n,null).getPropertyValue(e)}function Ld(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function Pd(n,e){const t=[];let r=n.parentElement;for(;r;)e?r.matches(e)&&t.push(r):t.push(r),r=r.parentElement;return t}function Vf(n,e,t){const r=hn();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function cn(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}function Ps(n,e){e===void 0&&(e=""),typeof trustedTypes<"u"?n.innerHTML=trustedTypes.createPolicy("html",{createHTML:t=>t}).createHTML(e):n.innerHTML=e}let Su;function S5(){const n=hn(),e=nr();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function eT(){return Su||(Su=S5()),Su}let Cu;function C5(n){let{userAgent:e}=n===void 0?{}:n;const t=eT(),r=hn(),i=r.navigator.platform,o=e||r.navigator.userAgent,s={ios:!1,android:!1},a=r.screen.width,l=r.screen.height,d=o.match(/(Android);?[\s\/]+([\d.]+)?/);let c=o.match(/(iPad).*OS\s([\d_]+)/);const u=o.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&o.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=i==="Win32";let h=i==="MacIntel";const g=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!c&&h&&t.touch&&g.indexOf(`${a}x${l}`)>=0&&(c=o.match(/(Version)\/([\d.]+)/),c||(c=[0,1,"13_0_0"]),h=!1),d&&!p&&(s.os="android",s.android=!0),(c||f||u)&&(s.os="ios",s.ios=!0),s}function tT(n){return n===void 0&&(n={}),Cu||(Cu=C5(n)),Cu}let Tu;function T5(){const n=hn(),e=tT();let t=!1;function r(){const a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(r()){const a=String(n.navigator.userAgent);if(a.includes("Version/")){const[l,d]=a.split("Version/")[1].split(" ")[0].split(".").map(c=>Number(c));t=l<16||l===16&&d<2}}const i=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),o=r(),s=o||i&&e.ios;return{isSafari:t||o,needPerspectiveFix:t,need3dFix:s,isWebView:i}}function nT(){return Tu||(Tu=T5()),Tu}function w5(n){let{swiper:e,on:t,emit:r}=n;const i=hn();let o=null,s=null;const a=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(o=new ResizeObserver(u=>{s=i.requestAnimationFrame(()=>{const{width:f,height:p}=e;let h=f,g=p;u.forEach(m=>{let{contentBoxSize:v,contentRect:b,target:y}=m;y&&y!==e.el||(h=b?b.width:(v[0]||v).inlineSize,g=b?b.height:(v[0]||v).blockSize)}),(h!==f||g!==p)&&a()})}),o.observe(e.el))},d=()=>{s&&i.cancelAnimationFrame(s),o&&o.unobserve&&e.el&&(o.unobserve(e.el),o=null)},c=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof i.ResizeObserver<"u"){l();return}i.addEventListener("resize",a),i.addEventListener("orientationchange",c)}),t("destroy",()=>{d(),i.removeEventListener("resize",a),i.removeEventListener("orientationchange",c)})}function E5(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const o=[],s=hn(),a=function(c,u){u===void 0&&(u={});const f=s.MutationObserver||s.WebkitMutationObserver,p=new f(h=>{if(e.__preventObserver__)return;if(h.length===1){i("observerUpdate",h[0]);return}const g=function(){i("observerUpdate",h[0])};s.requestAnimationFrame?s.requestAnimationFrame(g):s.setTimeout(g,0)});p.observe(c,{attributes:typeof u.attributes>"u"?!0:u.attributes,childList:e.isElement||(typeof u.childList>"u"?!0:u).childList,characterData:typeof u.characterData>"u"?!0:u.characterData}),o.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){const c=Pd(e.hostEl);for(let u=0;u<c.length;u+=1)a(c[u])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},d=()=>{o.forEach(c=>{c.disconnect()}),o.splice(0,o.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",d)}var R5={on(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const i=t?"unshift":"push";return n.split(" ").forEach(o=>{r.eventsListeners[o]||(r.eventsListeners[o]=[]),r.eventsListeners[o][i](e)}),r},once(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function i(){r.off(n,i),i.__emitterProxy&&delete i.__emitterProxy;for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];e.apply(r,s)}return i.__emitterProxy=e,r.on(n,i,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const r=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[r](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(r=>{typeof e>"u"?t.eventsListeners[r]=[]:t.eventsListeners[r]&&t.eventsListeners[r].forEach((i,o)=>{(i===e||i.__emitterProxy&&i.__emitterProxy===e)&&t.eventsListeners[r].splice(o,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,r;for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return typeof o[0]=="string"||Array.isArray(o[0])?(e=o[0],t=o.slice(1,o.length),r=n):(e=o[0].events,t=o[0].data,r=o[0].context||n),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(d=>{d.apply(r,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(d=>{d.apply(r,t)})}),n}};function A5(){const n=this;let e,t;const r=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=r.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=r.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt(Wi(r,"padding-left")||0,10)-parseInt(Wi(r,"padding-right")||0,10),t=t-parseInt(Wi(r,"padding-top")||0,10)-parseInt(Wi(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function I5(){const n=this;function e(C,L){return parseFloat(C.getPropertyValue(n.getDirectionLabel(L))||0)}const t=n.params,{wrapperEl:r,slidesEl:i,size:o,rtlTranslate:s,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,d=l?n.virtual.slides.length:n.slides.length,c=Tr(i,`.${n.params.slideClass}, swiper-slide`),u=l?n.virtual.slides.length:c.length;let f=[];const p=[],h=[];let g=t.slidesOffsetBefore;typeof g=="function"&&(g=t.slidesOffsetBefore.call(n));let m=t.slidesOffsetAfter;typeof m=="function"&&(m=t.slidesOffsetAfter.call(n));const v=n.snapGrid.length,b=n.slidesGrid.length;let y=t.spaceBetween,x=-g,E=0,A=0;if(typeof o>"u")return;typeof y=="string"&&y.indexOf("%")>=0?y=parseFloat(y.replace("%",""))/100*o:typeof y=="string"&&(y=parseFloat(y)),n.virtualSize=-y,c.forEach(C=>{s?C.style.marginLeft="":C.style.marginRight="",C.style.marginBottom="",C.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(sa(r,"--swiper-centered-offset-before",""),sa(r,"--swiper-centered-offset-after",""));const S=t.grid&&t.grid.rows>1&&n.grid;S?n.grid.initSlides(c):n.grid&&n.grid.unsetSlides();let w;const T=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(C=>typeof t.breakpoints[C].slidesPerView<"u").length>0;for(let C=0;C<u;C+=1){w=0;let L;if(c[C]&&(L=c[C]),S&&n.grid.updateSlide(C,L,c),!(c[C]&&Wi(L,"display")==="none")){if(t.slidesPerView==="auto"){T&&(c[C].style[n.getDirectionLabel("width")]="");const P=getComputedStyle(L),_=L.style.transform,D=L.style.webkitTransform;if(_&&(L.style.transform="none"),D&&(L.style.webkitTransform="none"),t.roundLengths)w=n.isHorizontal()?Vf(L,"width"):Vf(L,"height");else{const k=e(P,"width"),M=e(P,"padding-left"),O=e(P,"padding-right"),$=e(P,"margin-left"),K=e(P,"margin-right"),Y=P.getPropertyValue("box-sizing");if(Y&&Y==="border-box")w=k+$+K;else{const{clientWidth:H,offsetWidth:B}=L;w=k+M+O+$+K+(B-H)}}_&&(L.style.transform=_),D&&(L.style.webkitTransform=D),t.roundLengths&&(w=Math.floor(w))}else w=(o-(t.slidesPerView-1)*y)/t.slidesPerView,t.roundLengths&&(w=Math.floor(w)),c[C]&&(c[C].style[n.getDirectionLabel("width")]=`${w}px`);c[C]&&(c[C].swiperSlideSize=w),h.push(w),t.centeredSlides?(x=x+w/2+E/2+y,E===0&&C!==0&&(x=x-o/2-y),C===0&&(x=x-o/2-y),Math.abs(x)<1/1e3&&(x=0),t.roundLengths&&(x=Math.floor(x)),A%t.slidesPerGroup===0&&f.push(x),p.push(x)):(t.roundLengths&&(x=Math.floor(x)),(A-Math.min(n.params.slidesPerGroupSkip,A))%n.params.slidesPerGroup===0&&f.push(x),p.push(x),x=x+w+y),n.virtualSize+=w+y,E=w,A+=1}}if(n.virtualSize=Math.max(n.virtualSize,o)+m,s&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(r.style.width=`${n.virtualSize+y}px`),t.setWrapperSize&&(r.style[n.getDirectionLabel("width")]=`${n.virtualSize+y}px`),S&&n.grid.updateWrapperSize(w,f),!t.centeredSlides){const C=[];for(let L=0;L<f.length;L+=1){let P=f[L];t.roundLengths&&(P=Math.floor(P)),f[L]<=n.virtualSize-o&&C.push(P)}f=C,Math.floor(n.virtualSize-o)-Math.floor(f[f.length-1])>1&&f.push(n.virtualSize-o)}if(l&&t.loop){const C=h[0]+y;if(t.slidesPerGroup>1){const L=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),P=C*t.slidesPerGroup;for(let _=0;_<L;_+=1)f.push(f[f.length-1]+P)}for(let L=0;L<n.virtual.slidesBefore+n.virtual.slidesAfter;L+=1)t.slidesPerGroup===1&&f.push(f[f.length-1]+C),p.push(p[p.length-1]+C),n.virtualSize+=C}if(f.length===0&&(f=[0]),y!==0){const C=n.isHorizontal()&&s?"marginLeft":n.getDirectionLabel("marginRight");c.filter((L,P)=>!t.cssMode||t.loop?!0:P!==c.length-1).forEach(L=>{L.style[C]=`${y}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let C=0;h.forEach(P=>{C+=P+(y||0)}),C-=y;const L=C>o?C-o:0;f=f.map(P=>P<=0?-g:P>L?L+m:P)}if(t.centerInsufficientSlides){let C=0;h.forEach(P=>{C+=P+(y||0)}),C-=y;const L=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(C+L<o){const P=(o-C-L)/2;f.forEach((_,D)=>{f[D]=_-P}),p.forEach((_,D)=>{p[D]=_+P})}}if(Object.assign(n,{slides:c,snapGrid:f,slidesGrid:p,slidesSizesGrid:h}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){sa(r,"--swiper-centered-offset-before",`${-f[0]}px`),sa(r,"--swiper-centered-offset-after",`${n.size/2-h[h.length-1]/2}px`);const C=-n.snapGrid[0],L=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(P=>P+C),n.slidesGrid=n.slidesGrid.map(P=>P+L)}if(u!==d&&n.emit("slidesLengthChange"),f.length!==v&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==b&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const C=`${t.containerModifierClass}backface-hidden`,L=n.el.classList.contains(C);u<=t.maxBackfaceHiddenSlides?L||n.el.classList.add(C):L&&n.el.classList.remove(C)}}function L5(n){const e=this,t=[],r=e.virtual&&e.params.virtual.enabled;let i=0,o;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const s=a=>r?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(o=0;o<Math.ceil(e.params.slidesPerView);o+=1){const a=e.activeIndex+o;if(a>e.slides.length&&!r)break;t.push(s(a))}else t.push(s(e.activeIndex));for(o=0;o<t.length;o+=1)if(typeof t[o]<"u"){const a=t[o].offsetHeight;i=a>i?a:i}(i||i===0)&&(e.wrapperEl.style.height=`${i}px`)}function P5(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(n.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-t-n.cssOverflowAdjustment()}const Gv=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function _5(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:r,rtlTranslate:i,snapGrid:o}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let s=-n;i&&(s=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<r.length;l+=1){const d=r[l];let c=d.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(c-=r[0].swiperSlideOffset);const u=(s+(t.centeredSlides?e.minTranslate():0)-c)/(d.swiperSlideSize+a),f=(s-o[0]+(t.centeredSlides?e.minTranslate():0)-c)/(d.swiperSlideSize+a),p=-(s-c),h=p+e.slidesSizesGrid[l],g=p>=0&&p<=e.size-e.slidesSizesGrid[l],m=p>=0&&p<e.size-1||h>1&&h<=e.size||p<=0&&h>=e.size;m&&(e.visibleSlides.push(d),e.visibleSlidesIndexes.push(l)),Gv(d,m,t.slideVisibleClass),Gv(d,g,t.slideFullyVisibleClass),d.progress=i?-u:u,d.originalProgress=i?-f:f}}function k5(n){const e=this;if(typeof n>"u"){const c=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*c||0}const t=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:i,isBeginning:o,isEnd:s,progressLoop:a}=e;const l=o,d=s;if(r===0)i=0,o=!0,s=!0;else{i=(n-e.minTranslate())/r;const c=Math.abs(n-e.minTranslate())<1,u=Math.abs(n-e.maxTranslate())<1;o=c||i<=0,s=u||i>=1,c&&(i=0),u&&(i=1)}if(t.loop){const c=e.getSlideIndexByData(0),u=e.getSlideIndexByData(e.slides.length-1),f=e.slidesGrid[c],p=e.slidesGrid[u],h=e.slidesGrid[e.slidesGrid.length-1],g=Math.abs(n);g>=f?a=(g-f)/h:a=(g+h-p)/h,a>1&&(a-=1)}Object.assign(e,{progress:i,progressLoop:a,isBeginning:o,isEnd:s}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),o&&!l&&e.emit("reachBeginning toEdge"),s&&!d&&e.emit("reachEnd toEdge"),(l&&!o||d&&!s)&&e.emit("fromEdge"),e.emit("progress",i)}const wu=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function D5(){const n=this,{slides:e,params:t,slidesEl:r,activeIndex:i}=n,o=n.virtual&&t.virtual.enabled,s=n.grid&&t.grid&&t.grid.rows>1,a=u=>Tr(r,`.${t.slideClass}${u}, swiper-slide${u}`)[0];let l,d,c;if(o)if(t.loop){let u=i-n.virtual.slidesBefore;u<0&&(u=n.virtual.slides.length+u),u>=n.virtual.slides.length&&(u-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${u}"]`)}else l=a(`[data-swiper-slide-index="${i}"]`);else s?(l=e.find(u=>u.column===i),c=e.find(u=>u.column===i+1),d=e.find(u=>u.column===i-1)):l=e[i];l&&(s||(c=x5(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c&&(c=e[0]),d=y5(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!d===0&&(d=e[e.length-1]))),e.forEach(u=>{wu(u,u===l,t.slideActiveClass),wu(u,u===c,t.slideNextClass),wu(u,u===d,t.slidePrevClass)}),n.emitSlidesClasses()}const Yl=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,r=e.closest(t());if(r){let i=r.querySelector(`.${n.params.lazyPreloaderClass}`);!i&&n.isElement&&(r.shadowRoot?i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(i=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),i&&i.remove())})),i&&i.remove()}},Eu=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Gf=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const r=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),i=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const s=i,a=[s-e];a.push(...Array.from({length:e}).map((l,d)=>s+r+d)),n.slides.forEach((l,d)=>{a.includes(l.column)&&Eu(n,d)});return}const o=i+r-1;if(n.params.rewind||n.params.loop)for(let s=i-e;s<=o+e;s+=1){const a=(s%t+t)%t;(a<i||a>o)&&Eu(n,a)}else for(let s=Math.max(i-e,0);s<=Math.min(o+e,t-1);s+=1)s!==i&&(s>o||s<i)&&Eu(n,s)};function O5(n){const{slidesGrid:e,params:t}=n,r=n.rtlTranslate?n.translate:-n.translate;let i;for(let o=0;o<e.length;o+=1)typeof e[o+1]<"u"?r>=e[o]&&r<e[o+1]-(e[o+1]-e[o])/2?i=o:r>=e[o]&&r<e[o+1]&&(i=o+1):r>=e[o]&&(i=o);return t.normalizeSlideIndex&&(i<0||typeof i>"u")&&(i=0),i}function M5(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:i,activeIndex:o,realIndex:s,snapIndex:a}=e;let l=n,d;const c=p=>{let h=p-e.virtual.slidesBefore;return h<0&&(h=e.virtual.slides.length+h),h>=e.virtual.slides.length&&(h-=e.virtual.slides.length),h};if(typeof l>"u"&&(l=O5(e)),r.indexOf(t)>=0)d=r.indexOf(t);else{const p=Math.min(i.slidesPerGroupSkip,l);d=p+Math.floor((l-p)/i.slidesPerGroup)}if(d>=r.length&&(d=r.length-1),l===o&&!e.params.loop){d!==a&&(e.snapIndex=d,e.emit("snapIndexChange"));return}if(l===o&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=c(l);return}const u=e.grid&&i.grid&&i.grid.rows>1;let f;if(e.virtual&&i.virtual.enabled&&i.loop)f=c(l);else if(u){const p=e.slides.find(g=>g.column===l);let h=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(h)&&(h=Math.max(e.slides.indexOf(p),0)),f=Math.floor(h/i.grid.rows)}else if(e.slides[l]){const p=e.slides[l].getAttribute("data-swiper-slide-index");p?f=parseInt(p,10):f=l}else f=l;Object.assign(e,{previousSnapIndex:a,snapIndex:d,previousRealIndex:s,realIndex:f,previousIndex:o,activeIndex:l}),e.initialized&&Gf(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(s!==f&&e.emit("realIndexChange"),e.emit("slideChange"))}function F5(n,e){const t=this,r=t.params;let i=n.closest(`.${r.slideClass}, swiper-slide`);!i&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!i&&a.matches&&a.matches(`.${r.slideClass}, swiper-slide`)&&(i=a)});let o=!1,s;if(i){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===i){o=!0,s=a;break}}if(i&&o)t.clickedSlide=i,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(i.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=s;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var $5={updateSize:A5,updateSlides:I5,updateAutoHeight:L5,updateSlidesOffset:P5,updateSlidesProgress:_5,updateProgress:k5,updateSlidesClasses:D5,updateActiveIndex:M5,updateClickedSlide:F5};function B5(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:r,translate:i,wrapperEl:o}=e;if(t.virtualTranslate)return r?-i:i;if(t.cssMode)return i;let s=p5(o,n);return s+=e.cssOverflowAdjustment(),r&&(s=-s),s||0}function N5(n,e){const t=this,{rtlTranslate:r,params:i,wrapperEl:o,progress:s}=t;let a=0,l=0;const d=0;t.isHorizontal()?a=r?-n:n:l=n,i.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,i.cssMode?o[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:i.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),o.style.transform=`translate3d(${a}px, ${l}px, ${d}px)`);let c;const u=t.maxTranslate()-t.minTranslate();u===0?c=0:c=(n-t.minTranslate())/u,c!==s&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function z5(){return-this.snapGrid[0]}function U5(){return-this.snapGrid[this.snapGrid.length-1]}function H5(n,e,t,r,i){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),r===void 0&&(r=!0);const o=this,{params:s,wrapperEl:a}=o;if(o.animating&&s.preventInteractionOnTransition)return!1;const l=o.minTranslate(),d=o.maxTranslate();let c;if(r&&n>l?c=l:r&&n<d?c=d:c=n,o.updateProgress(c),s.cssMode){const u=o.isHorizontal();if(e===0)a[u?"scrollLeft":"scrollTop"]=-c;else{if(!o.support.smoothScroll)return JC({swiper:o,targetPosition:-c,side:u?"left":"top"}),!0;a.scrollTo({[u?"left":"top"]:-c,behavior:"smooth"})}return!0}return e===0?(o.setTransition(0),o.setTranslate(c),t&&(o.emit("beforeTransitionStart",e,i),o.emit("transitionEnd"))):(o.setTransition(e),o.setTranslate(c),t&&(o.emit("beforeTransitionStart",e,i),o.emit("transitionStart")),o.animating||(o.animating=!0,o.onTranslateToWrapperTransitionEnd||(o.onTranslateToWrapperTransitionEnd=function(f){!o||o.destroyed||f.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onTranslateToWrapperTransitionEnd),o.onTranslateToWrapperTransitionEnd=null,delete o.onTranslateToWrapperTransitionEnd,o.animating=!1,t&&o.emit("transitionEnd"))}),o.wrapperEl.addEventListener("transitionend",o.onTranslateToWrapperTransitionEnd))),!0}var V5={getTranslate:B5,setTranslate:N5,minTranslate:z5,maxTranslate:U5,translateTo:H5};function G5(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function rT(n){let{swiper:e,runCallbacks:t,direction:r,step:i}=n;const{activeIndex:o,previousIndex:s}=e;let a=r;a||(o>s?a="next":o<s?a="prev":a="reset"),e.emit(`transition${i}`),t&&a==="reset"?e.emit(`slideResetTransition${i}`):t&&o!==s&&(e.emit(`slideChangeTransition${i}`),a==="next"?e.emit(`slideNextTransition${i}`):e.emit(`slidePrevTransition${i}`))}function W5(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;r.cssMode||(r.autoHeight&&t.updateAutoHeight(),rT({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function j5(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;t.animating=!1,!r.cssMode&&(t.setTransition(0),rT({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var K5={setTransition:G5,transitionStart:W5,transitionEnd:j5};function q5(n,e,t,r,i){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const o=this;let s=n;s<0&&(s=0);const{params:a,snapGrid:l,slidesGrid:d,previousIndex:c,activeIndex:u,rtlTranslate:f,wrapperEl:p,enabled:h}=o;if(!h&&!r&&!i||o.destroyed||o.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=o.params.speed);const g=Math.min(o.params.slidesPerGroupSkip,s);let m=g+Math.floor((s-g)/o.params.slidesPerGroup);m>=l.length&&(m=l.length-1);const v=-l[m];if(a.normalizeSlideIndex)for(let S=0;S<d.length;S+=1){const w=-Math.floor(v*100),T=Math.floor(d[S]*100),C=Math.floor(d[S+1]*100);typeof d[S+1]<"u"?w>=T&&w<C-(C-T)/2?s=S:w>=T&&w<C&&(s=S+1):w>=T&&(s=S)}if(o.initialized&&s!==u&&(!o.allowSlideNext&&(f?v>o.translate&&v>o.minTranslate():v<o.translate&&v<o.minTranslate())||!o.allowSlidePrev&&v>o.translate&&v>o.maxTranslate()&&(u||0)!==s))return!1;s!==(c||0)&&t&&o.emit("beforeSlideChangeStart"),o.updateProgress(v);let b;s>u?b="next":s<u?b="prev":b="reset";const y=o.virtual&&o.params.virtual.enabled;if(!(y&&i)&&(f&&-v===o.translate||!f&&v===o.translate))return o.updateActiveIndex(s),a.autoHeight&&o.updateAutoHeight(),o.updateSlidesClasses(),a.effect!=="slide"&&o.setTranslate(v),b!=="reset"&&(o.transitionStart(t,b),o.transitionEnd(t,b)),!1;if(a.cssMode){const S=o.isHorizontal(),w=f?v:-v;if(e===0)y&&(o.wrapperEl.style.scrollSnapType="none",o._immediateVirtual=!0),y&&!o._cssModeVirtualInitialSet&&o.params.initialSlide>0?(o._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[S?"scrollLeft":"scrollTop"]=w})):p[S?"scrollLeft":"scrollTop"]=w,y&&requestAnimationFrame(()=>{o.wrapperEl.style.scrollSnapType="",o._immediateVirtual=!1});else{if(!o.support.smoothScroll)return JC({swiper:o,targetPosition:w,side:S?"left":"top"}),!0;p.scrollTo({[S?"left":"top"]:w,behavior:"smooth"})}return!0}const A=nT().isSafari;return y&&!i&&A&&o.isElement&&o.virtual.update(!1,!1,s),o.setTransition(e),o.setTranslate(v),o.updateActiveIndex(s),o.updateSlidesClasses(),o.emit("beforeTransitionStart",e,r),o.transitionStart(t,b),e===0?o.transitionEnd(t,b):o.animating||(o.animating=!0,o.onSlideToWrapperTransitionEnd||(o.onSlideToWrapperTransitionEnd=function(w){!o||o.destroyed||w.target===this&&(o.wrapperEl.removeEventListener("transitionend",o.onSlideToWrapperTransitionEnd),o.onSlideToWrapperTransitionEnd=null,delete o.onSlideToWrapperTransitionEnd,o.transitionEnd(t,b))}),o.wrapperEl.addEventListener("transitionend",o.onSlideToWrapperTransitionEnd)),!0}function Y5(n,e,t,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;if(i.destroyed)return;typeof e>"u"&&(e=i.params.speed);const o=i.grid&&i.params.grid&&i.params.grid.rows>1;let s=n;if(i.params.loop)if(i.virtual&&i.params.virtual.enabled)s=s+i.virtual.slidesBefore;else{let a;if(o){const f=s*i.params.grid.rows;a=i.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===f).column}else a=i.getSlideIndexByData(s);const l=o?Math.ceil(i.slides.length/i.params.grid.rows):i.slides.length,{centeredSlides:d}=i.params;let c=i.params.slidesPerView;c==="auto"?c=i.slidesPerViewDynamic():(c=Math.ceil(parseFloat(i.params.slidesPerView,10)),d&&c%2===0&&(c=c+1));let u=l-a<c;if(d&&(u=u||a<Math.ceil(c/2)),r&&d&&i.params.slidesPerView!=="auto"&&!o&&(u=!1),u){const f=d?a<i.activeIndex?"prev":"next":a-i.activeIndex-1<i.params.slidesPerView?"next":"prev";i.loopFix({direction:f,slideTo:!0,activeSlideIndex:f==="next"?a+1:a-l+1,slideRealIndex:f==="next"?i.realIndex:void 0})}if(o){const f=s*i.params.grid.rows;s=i.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===f).column}else s=i.getSlideIndexByData(s)}return requestAnimationFrame(()=>{i.slideTo(s,e,t,r)}),i}function X5(n,e,t){e===void 0&&(e=!0);const r=this,{enabled:i,params:o,animating:s}=r;if(!i||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);let a=o.slidesPerGroup;o.slidesPerView==="auto"&&o.slidesPerGroup===1&&o.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<o.slidesPerGroupSkip?1:a,d=r.virtual&&o.virtual.enabled;if(o.loop){if(s&&!d&&o.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&o.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,n,e,t)}),!0}return o.rewind&&r.isEnd?r.slideTo(0,n,e,t):r.slideTo(r.activeIndex+l,n,e,t)}function Q5(n,e,t){e===void 0&&(e=!0);const r=this,{params:i,snapGrid:o,slidesGrid:s,rtlTranslate:a,enabled:l,animating:d}=r;if(!l||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);const c=r.virtual&&i.virtual.enabled;if(i.loop){if(d&&!c&&i.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const u=a?r.translate:-r.translate;function f(b){return b<0?-Math.floor(Math.abs(b)):Math.floor(b)}const p=f(u),h=o.map(b=>f(b)),g=i.freeMode&&i.freeMode.enabled;let m=o[h.indexOf(p)-1];if(typeof m>"u"&&(i.cssMode||g)){let b;o.forEach((y,x)=>{p>=y&&(b=x)}),typeof b<"u"&&(m=g?o[b]:o[b>0?b-1:b])}let v=0;if(typeof m<"u"&&(v=s.indexOf(m),v<0&&(v=r.activeIndex-1),i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(v=v-r.slidesPerViewDynamic("previous",!0)+1,v=Math.max(v,0))),i.rewind&&r.isBeginning){const b=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(b,n,e,t)}else if(i.loop&&r.activeIndex===0&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(v,n,e,t)}),!0;return r.slideTo(v,n,e,t)}function Z5(n,e,t){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof n>"u"&&(n=r.params.speed),r.slideTo(r.activeIndex,n,e,t)}function J5(n,e,t,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const i=this;if(i.destroyed)return;typeof n>"u"&&(n=i.params.speed);let o=i.activeIndex;const s=Math.min(i.params.slidesPerGroupSkip,o),a=s+Math.floor((o-s)/i.params.slidesPerGroup),l=i.rtlTranslate?i.translate:-i.translate;if(l>=i.snapGrid[a]){const d=i.snapGrid[a],c=i.snapGrid[a+1];l-d>(c-d)*r&&(o+=i.params.slidesPerGroup)}else{const d=i.snapGrid[a-1],c=i.snapGrid[a];l-d<=(c-d)*r&&(o-=i.params.slidesPerGroup)}return o=Math.max(o,0),o=Math.min(o,i.slidesGrid.length-1),i.slideTo(o,n,e,t)}function ez(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,r=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let i=n.getSlideIndexWhenGrid(n.clickedIndex),o;const s=n.isElement?"swiper-slide":`.${e.slideClass}`,a=n.grid&&n.params.grid&&n.params.grid.rows>1;if(e.loop){if(n.animating)return;o=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?n.slideToLoop(o):i>(a?(n.slides.length-r)/2-(n.params.grid.rows-1):n.slides.length-r)?(n.loopFix(),i=n.getSlideIndex(Tr(t,`${s}[data-swiper-slide-index="${o}"]`)[0]),Ad(()=>{n.slideTo(i)})):n.slideTo(i)}else n.slideTo(i)}var tz={slideTo:q5,slideToLoop:Y5,slideNext:X5,slidePrev:Q5,slideReset:Z5,slideToClosest:J5,slideToClickedSlide:ez};function nz(n,e){const t=this,{params:r,slidesEl:i}=t;if(!r.loop||t.virtual&&t.params.virtual.enabled)return;const o=()=>{Tr(i,`.${r.slideClass}, swiper-slide`).forEach((p,h)=>{p.setAttribute("data-swiper-slide-index",h)})},s=()=>{const f=Tr(i,`.${r.slideBlankClass}`);f.forEach(p=>{p.remove()}),f.length>0&&(t.recalcSlides(),t.updateSlides())},a=t.grid&&r.grid&&r.grid.rows>1;r.loopAddBlankSlides&&(r.slidesPerGroup>1||a)&&s();const l=r.slidesPerGroup*(a?r.grid.rows:1),d=t.slides.length%l!==0,c=a&&t.slides.length%r.grid.rows!==0,u=f=>{for(let p=0;p<f;p+=1){const h=t.isElement?Ls("swiper-slide",[r.slideBlankClass]):Ls("div",[r.slideClass,r.slideBlankClass]);t.slidesEl.append(h)}};if(d){if(r.loopAddBlankSlides){const f=l-t.slides.length%l;u(f),t.recalcSlides(),t.updateSlides()}else Id("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else if(c){if(r.loopAddBlankSlides){const f=r.grid.rows-t.slides.length%r.grid.rows;u(f),t.recalcSlides(),t.updateSlides()}else Id("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");o()}else o();t.loopFix({slideRealIndex:n,direction:r.centeredSlides?void 0:"next",initial:e})}function rz(n){let{slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:i,activeSlideIndex:o,initial:s,byController:a,byMousewheel:l}=n===void 0?{}:n;const d=this;if(!d.params.loop)return;d.emit("beforeLoopFix");const{slides:c,allowSlidePrev:u,allowSlideNext:f,slidesEl:p,params:h}=d,{centeredSlides:g,initialSlide:m}=h;if(d.allowSlidePrev=!0,d.allowSlideNext=!0,d.virtual&&h.virtual.enabled){t&&(!h.centeredSlides&&d.snapIndex===0?d.slideTo(d.virtual.slides.length,0,!1,!0):h.centeredSlides&&d.snapIndex<h.slidesPerView?d.slideTo(d.virtual.slides.length+d.snapIndex,0,!1,!0):d.snapIndex===d.snapGrid.length-1&&d.slideTo(d.virtual.slidesBefore,0,!1,!0)),d.allowSlidePrev=u,d.allowSlideNext=f,d.emit("loopFix");return}let v=h.slidesPerView;v==="auto"?v=d.slidesPerViewDynamic():(v=Math.ceil(parseFloat(h.slidesPerView,10)),g&&v%2===0&&(v=v+1));const b=h.slidesPerGroupAuto?v:h.slidesPerGroup;let y=g?Math.max(b,Math.ceil(v/2)):b;y%b!==0&&(y+=b-y%b),y+=h.loopAdditionalSlides,d.loopedSlides=y;const x=d.grid&&h.grid&&h.grid.rows>1;c.length<v+y||d.params.effect==="cards"&&c.length<v+y*2?Id("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):x&&h.grid.fill==="row"&&Id("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const E=[],A=[],S=x?Math.ceil(c.length/h.grid.rows):c.length,w=s&&S-m<v&&!g;let T=w?m:d.activeIndex;typeof o>"u"?o=d.getSlideIndex(c.find(M=>M.classList.contains(h.slideActiveClass))):T=o;const C=r==="next"||!r,L=r==="prev"||!r;let P=0,_=0;const k=(x?c[o].column:o)+(g&&typeof i>"u"?-v/2+.5:0);if(k<y){P=Math.max(y-k,b);for(let M=0;M<y-k;M+=1){const O=M-Math.floor(M/S)*S;if(x){const $=S-O-1;for(let K=c.length-1;K>=0;K-=1)c[K].column===$&&E.push(K)}else E.push(S-O-1)}}else if(k+v>S-y){_=Math.max(k-(S-y*2),b),w&&(_=Math.max(_,v-S+m+1));for(let M=0;M<_;M+=1){const O=M-Math.floor(M/S)*S;x?c.forEach(($,K)=>{$.column===O&&A.push(K)}):A.push(O)}}if(d.__preventObserver__=!0,requestAnimationFrame(()=>{d.__preventObserver__=!1}),d.params.effect==="cards"&&c.length<v+y*2&&(A.includes(o)&&A.splice(A.indexOf(o),1),E.includes(o)&&E.splice(E.indexOf(o),1)),L&&E.forEach(M=>{c[M].swiperLoopMoveDOM=!0,p.prepend(c[M]),c[M].swiperLoopMoveDOM=!1}),C&&A.forEach(M=>{c[M].swiperLoopMoveDOM=!0,p.append(c[M]),c[M].swiperLoopMoveDOM=!1}),d.recalcSlides(),h.slidesPerView==="auto"?d.updateSlides():x&&(E.length>0&&L||A.length>0&&C)&&d.slides.forEach((M,O)=>{d.grid.updateSlide(O,M,d.slides)}),h.watchSlidesProgress&&d.updateSlidesOffset(),t){if(E.length>0&&L){if(typeof e>"u"){const M=d.slidesGrid[T],$=d.slidesGrid[T+P]-M;l?d.setTranslate(d.translate-$):(d.slideTo(T+Math.ceil(P),0,!1,!0),i&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-$,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-$))}else if(i){const M=x?E.length/h.grid.rows:E.length;d.slideTo(d.activeIndex+M,0,!1,!0),d.touchEventsData.currentTranslate=d.translate}}else if(A.length>0&&C)if(typeof e>"u"){const M=d.slidesGrid[T],$=d.slidesGrid[T-_]-M;l?d.setTranslate(d.translate-$):(d.slideTo(T-_,0,!1,!0),i&&(d.touchEventsData.startTranslate=d.touchEventsData.startTranslate-$,d.touchEventsData.currentTranslate=d.touchEventsData.currentTranslate-$))}else{const M=x?A.length/h.grid.rows:A.length;d.slideTo(d.activeIndex-M,0,!1,!0)}}if(d.allowSlidePrev=u,d.allowSlideNext=f,d.controller&&d.controller.control&&!a){const M={slideRealIndex:e,direction:r,setTranslate:i,activeSlideIndex:o,byController:!0};Array.isArray(d.controller.control)?d.controller.control.forEach(O=>{!O.destroyed&&O.params.loop&&O.loopFix({...M,slideTo:O.params.slidesPerView===h.slidesPerView?t:!1})}):d.controller.control instanceof d.constructor&&d.controller.control.params.loop&&d.controller.control.loopFix({...M,slideTo:d.controller.control.params.slidesPerView===h.slidesPerView?t:!1})}d.emit("loopFix")}function iz(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const r=[];n.slides.forEach(i=>{const o=typeof i.swiperSlideIndex>"u"?i.getAttribute("data-swiper-slide-index")*1:i.swiperSlideIndex;r[o]=i}),n.slides.forEach(i=>{i.removeAttribute("data-swiper-slide-index")}),r.forEach(i=>{t.append(i)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var oz={loopCreate:nz,loopFix:rz,loopDestroy:iz};function sz(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function az(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var lz={setGrabCursor:sz,unsetGrabCursor:az};function dz(n,e){e===void 0&&(e=this);function t(r){if(!r||r===nr()||r===hn())return null;r.assignedSlot&&(r=r.assignedSlot);const i=r.closest(n);return!i&&!r.getRootNode?null:i||t(r.getRootNode().host)}return t(e)}function Wv(n,e,t){const r=hn(),{params:i}=n,o=i.edgeSwipeDetection,s=i.edgeSwipeThreshold;return o&&(t<=s||t>=r.innerWidth-s)?o==="prevent"?(e.preventDefault(),!0):!1:!0}function cz(n){const e=this,t=nr();let r=n;r.originalEvent&&(r=r.originalEvent);const i=e.touchEventsData;if(r.type==="pointerdown"){if(i.pointerId!==null&&i.pointerId!==r.pointerId)return;i.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(i.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){Wv(e,r,r.targetTouches[0].pageX);return}const{params:o,touches:s,enabled:a}=e;if(!a||!o.simulateTouch&&r.pointerType==="mouse"||e.animating&&o.preventInteractionOnTransition)return;!e.animating&&o.cssMode&&o.loop&&e.loopFix();let l=r.target;if(o.touchEventsTarget==="wrapper"&&!v5(l,e.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||i.isTouched&&i.isMoved)return;const d=!!o.noSwipingClass&&o.noSwipingClass!=="",c=r.composedPath?r.composedPath():r.path;d&&r.target&&r.target.shadowRoot&&c&&(l=c[0]);const u=o.noSwipingSelector?o.noSwipingSelector:`.${o.noSwipingClass}`,f=!!(r.target&&r.target.shadowRoot);if(o.noSwiping&&(f?dz(u,l):l.closest(u))){e.allowClick=!0;return}if(o.swipeHandler&&!l.closest(o.swipeHandler))return;s.currentX=r.pageX,s.currentY=r.pageY;const p=s.currentX,h=s.currentY;if(!Wv(e,r,p))return;Object.assign(i,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),s.startX=p,s.startY=h,i.touchStartTime=vi(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,o.threshold>0&&(i.allowThresholdMove=!1);let g=!0;l.matches(i.focusableElements)&&(g=!1,l.nodeName==="SELECT"&&(i.isTouched=!1)),t.activeElement&&t.activeElement.matches(i.focusableElements)&&t.activeElement!==l&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!l.matches(i.focusableElements))&&t.activeElement.blur();const m=g&&e.allowTouchMove&&o.touchStartPreventDefault;(o.touchStartForcePreventDefault||m)&&!l.isContentEditable&&r.preventDefault(),o.freeMode&&o.freeMode.enabled&&e.freeMode&&e.animating&&!o.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function uz(n){const e=nr(),t=this,r=t.touchEventsData,{params:i,touches:o,rtlTranslate:s,enabled:a}=t;if(!a||!i.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(r.touchId!==null||l.pointerId!==r.pointerId))return;let d;if(l.type==="touchmove"){if(d=[...l.changedTouches].find(A=>A.identifier===r.touchId),!d||d.identifier!==r.touchId)return}else d=l;if(!r.isTouched){r.startMoving&&r.isScrolling&&t.emit("touchMoveOpposite",l);return}const c=d.pageX,u=d.pageY;if(l.preventedByNestedSwiper){o.startX=c,o.startY=u;return}if(!t.allowTouchMove){l.target.matches(r.focusableElements)||(t.allowClick=!1),r.isTouched&&(Object.assign(o,{startX:c,startY:u,currentX:c,currentY:u}),r.touchStartTime=vi());return}if(i.touchReleaseOnEdges&&!i.loop)if(t.isVertical()){if(u<o.startY&&t.translate<=t.maxTranslate()||u>o.startY&&t.translate>=t.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else{if(s&&(c>o.startX&&-t.translate<=t.maxTranslate()||c<o.startX&&-t.translate>=t.minTranslate()))return;if(!s&&(c<o.startX&&t.translate<=t.maxTranslate()||c>o.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,t.allowClick=!1;return}r.allowTouchCallbacks&&t.emit("touchMove",l),o.previousX=o.currentX,o.previousY=o.currentY,o.currentX=c,o.currentY=u;const f=o.currentX-o.startX,p=o.currentY-o.startY;if(t.params.threshold&&Math.sqrt(f**2+p**2)<t.params.threshold)return;if(typeof r.isScrolling>"u"){let A;t.isHorizontal()&&o.currentY===o.startY||t.isVertical()&&o.currentX===o.startX?r.isScrolling=!1:f*f+p*p>=25&&(A=Math.atan2(Math.abs(p),Math.abs(f))*180/Math.PI,r.isScrolling=t.isHorizontal()?A>i.touchAngle:90-A>i.touchAngle)}if(r.isScrolling&&t.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(o.currentX!==o.startX||o.currentY!==o.startY)&&(r.startMoving=!0),r.isScrolling||l.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;t.allowClick=!1,!i.cssMode&&l.cancelable&&l.preventDefault(),i.touchMoveStopPropagation&&!i.nested&&l.stopPropagation();let h=t.isHorizontal()?f:p,g=t.isHorizontal()?o.currentX-o.previousX:o.currentY-o.previousY;i.oneWayMovement&&(h=Math.abs(h)*(s?1:-1),g=Math.abs(g)*(s?1:-1)),o.diff=h,h*=i.touchRatio,s&&(h=-h,g=-g);const m=t.touchesDirection;t.swipeDirection=h>0?"prev":"next",t.touchesDirection=g>0?"prev":"next";const v=t.params.loop&&!i.cssMode,b=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!r.isMoved){if(v&&b&&t.loopFix({direction:t.swipeDirection}),r.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const A=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(A)}r.allowMomentumBounce=!1,i.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}let y;if(new Date().getTime(),i._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&m!==t.touchesDirection&&v&&b&&Math.abs(h)>=1){Object.assign(o,{startX:c,startY:u,currentX:c,currentY:u,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}t.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=h+r.startTranslate;let x=!0,E=i.resistanceRatio;if(i.touchReleaseOnEdges&&(E=0),h>0?(v&&b&&!y&&r.allowThresholdMove&&r.currentTranslate>(i.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>t.minTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+r.startTranslate+h)**E))):h<0&&(v&&b&&!y&&r.allowThresholdMove&&r.currentTranslate<(i.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(i.slidesPerView!=="auto"&&t.slides.length-i.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(i.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(i.slidesPerView,10)))}),r.currentTranslate<t.maxTranslate()&&(x=!1,i.resistance&&(r.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-r.startTranslate-h)**E))),x&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(r.currentTranslate=r.startTranslate),i.threshold>0)if(Math.abs(h)>i.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,o.startX=o.currentX,o.startY=o.currentY,r.currentTranslate=r.startTranslate,o.diff=t.isHorizontal()?o.currentX-o.startX:o.currentY-o.startY;return}}else{r.currentTranslate=r.startTranslate;return}!i.followFinger||i.cssMode||((i.freeMode&&i.freeMode.enabled&&t.freeMode||i.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),i.freeMode&&i.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(r.currentTranslate),t.setTranslate(r.currentTranslate))}function fz(n){const e=this,t=e.touchEventsData;let r=n;r.originalEvent&&(r=r.originalEvent);let i;if(r.type==="touchend"||r.type==="touchcancel"){if(i=[...r.changedTouches].find(E=>E.identifier===t.touchId),!i||i.identifier!==t.touchId)return}else{if(t.touchId!==null||r.pointerId!==t.pointerId)return;i=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:s,touches:a,rtlTranslate:l,slidesGrid:d,enabled:c}=e;if(!c||!s.simulateTouch&&r.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",r),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&s.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}s.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const u=vi(),f=u-t.touchStartTime;if(e.allowClick){const E=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(E&&E[0]||r.target,E),e.emit("tap click",r),f<300&&u-t.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(t.lastClickTime=vi(),Ad(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(s.followFinger?p=l?e.translate:-e.translate:p=-t.currentTranslate,s.cssMode)return;if(s.freeMode&&s.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}const h=p>=-e.maxTranslate()&&!e.params.loop;let g=0,m=e.slidesSizesGrid[0];for(let E=0;E<d.length;E+=E<s.slidesPerGroupSkip?1:s.slidesPerGroup){const A=E<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;typeof d[E+A]<"u"?(h||p>=d[E]&&p<d[E+A])&&(g=E,m=d[E+A]-d[E]):(h||p>=d[E])&&(g=E,m=d[d.length-1]-d[d.length-2])}let v=null,b=null;s.rewind&&(e.isBeginning?b=s.virtual&&s.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(v=0));const y=(p-d[g])/m,x=g<s.slidesPerGroupSkip-1?1:s.slidesPerGroup;if(f>s.longSwipesMs){if(!s.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(y>=s.longSwipesRatio?e.slideTo(s.rewind&&e.isEnd?v:g+x):e.slideTo(g)),e.swipeDirection==="prev"&&(y>1-s.longSwipesRatio?e.slideTo(g+x):b!==null&&y<0&&Math.abs(y)>s.longSwipesRatio?e.slideTo(b):e.slideTo(g))}else{if(!s.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(g+x):e.slideTo(g):(e.swipeDirection==="next"&&e.slideTo(v!==null?v:g+x),e.swipeDirection==="prev"&&e.slideTo(b!==null?b:g))}}function jv(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:i,snapGrid:o}=n,s=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const a=s&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!s?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=i,n.allowSlideNext=r,n.params.watchOverflow&&o!==n.snapGrid&&n.checkOverflow()}function hz(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function pz(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:r}=n;if(!r)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let i;const o=n.maxTranslate()-n.minTranslate();o===0?i=0:i=(n.translate-n.minTranslate())/o,i!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function gz(n){const e=this;Yl(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function mz(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const iT=(n,e)=>{const t=nr(),{params:r,el:i,wrapperEl:o,device:s}=n,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",d=e;!i||typeof i=="string"||(t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),i[l]("touchstart",n.onTouchStart,{passive:!1}),i[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&i[l]("click",n.onClick,!0),r.cssMode&&o[l]("scroll",n.onScroll),r.updateOnWindowResize?n[d](s.ios||s.android?"resize orientationchange observerUpdate":"resize observerUpdate",jv,!0):n[d]("observerUpdate",jv,!0),i[l]("load",n.onLoad,{capture:!0}))};function vz(){const n=this,{params:e}=n;n.onTouchStart=cz.bind(n),n.onTouchMove=uz.bind(n),n.onTouchEnd=fz.bind(n),n.onDocumentTouchStart=mz.bind(n),e.cssMode&&(n.onScroll=pz.bind(n)),n.onClick=hz.bind(n),n.onLoad=gz.bind(n),iT(n,"on")}function bz(){iT(this,"off")}var yz={attachEvents:vz,detachEvents:bz};const Kv=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function xz(){const n=this,{realIndex:e,initialized:t,params:r,el:i}=n,o=r.breakpoints;if(!o||o&&Object.keys(o).length===0)return;const s=nr(),a=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",l=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?n.el:s.querySelector(r.breakpointsBase),d=n.getBreakpoint(o,a,l);if(!d||n.currentBreakpoint===d)return;const u=(d in o?o[d]:void 0)||n.originalParams,f=Kv(n,r),p=Kv(n,u),h=n.params.grabCursor,g=u.grabCursor,m=r.enabled;f&&!p?(i.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),n.emitContainerClasses()):!f&&p&&(i.classList.add(`${r.containerModifierClass}grid`),(u.grid.fill&&u.grid.fill==="column"||!u.grid.fill&&r.grid.fill==="column")&&i.classList.add(`${r.containerModifierClass}grid-column`),n.emitContainerClasses()),h&&!g?n.unsetGrabCursor():!h&&g&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(A=>{if(typeof u[A]>"u")return;const S=r[A]&&r[A].enabled,w=u[A]&&u[A].enabled;S&&!w&&n[A].disable(),!S&&w&&n[A].enable()});const v=u.direction&&u.direction!==r.direction,b=r.loop&&(u.slidesPerView!==r.slidesPerView||v),y=r.loop;v&&t&&n.changeDirection(),Kn(n.params,u);const x=n.params.enabled,E=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),m&&!x?n.disable():!m&&x&&n.enable(),n.currentBreakpoint=d,n.emit("_beforeBreakpoint",u),t&&(b?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!y&&E?(n.loopCreate(e),n.updateSlides()):y&&!E&&n.loopDestroy()),n.emit("breakpoint",u)}function Sz(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let r=!1;const i=hn(),o=e==="window"?i.innerHeight:t.clientHeight,s=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:o*l,point:a}}return{value:a,point:a}});s.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<s.length;a+=1){const{point:l,value:d}=s[a];e==="window"?i.matchMedia(`(min-width: ${d}px)`).matches&&(r=l):d<=t.clientWidth&&(r=l)}return r||"max"}var Cz={setBreakpoint:xz,getBreakpoint:Sz};function Tz(n,e){const t=[];return n.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(i=>{r[i]&&t.push(e+i)}):typeof r=="string"&&t.push(e+r)}),t}function wz(){const n=this,{classNames:e,params:t,rtl:r,el:i,device:o}=n,s=Tz(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:r},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:o.android},{ios:o.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...s),i.classList.add(...e),n.emitContainerClasses()}function Ez(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var Rz={addClasses:wz,removeClasses:Ez};function Az(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:r}=t;if(r){const i=n.slides.length-1,o=n.slidesGrid[i]+n.slidesSizesGrid[i]+r*2;n.isLocked=n.size>o}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var Iz={checkOverflow:Az},Wf={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function Lz(n,e){return function(r){r===void 0&&(r={});const i=Object.keys(r)[0],o=r[i];if(typeof o!="object"||o===null){Kn(e,r);return}if(n[i]===!0&&(n[i]={enabled:!0}),i==="navigation"&&n[i]&&n[i].enabled&&!n[i].prevEl&&!n[i].nextEl&&(n[i].auto=!0),["pagination","scrollbar"].indexOf(i)>=0&&n[i]&&n[i].enabled&&!n[i].el&&(n[i].auto=!0),!(i in n&&"enabled"in o)){Kn(e,r);return}typeof n[i]=="object"&&!("enabled"in n[i])&&(n[i].enabled=!0),n[i]||(n[i]={enabled:!1}),Kn(e,r)}}const Ru={eventsEmitter:R5,update:$5,translate:V5,transition:K5,slide:tz,loop:oz,grabCursor:lz,events:yz,breakpoints:Cz,checkOverflow:Iz,classes:Rz},Au={};let Cp=class ci{constructor(){let e,t;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];i.length===1&&i[0].constructor&&Object.prototype.toString.call(i[0]).slice(8,-1)==="Object"?t=i[0]:[e,t]=i,t||(t={}),t=Kn({},t),e&&!t.el&&(t.el=e);const s=nr();if(t.el&&typeof t.el=="string"&&s.querySelectorAll(t.el).length>1){const c=[];return s.querySelectorAll(t.el).forEach(u=>{const f=Kn({},t,{el:u});c.push(new ci(f))}),c}const a=this;a.__swiper__=!0,a.support=eT(),a.device=tT({userAgent:t.userAgent}),a.browser=nT(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(c=>{c({params:t,swiper:a,extendParams:Lz(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const d=Kn({},Wf,l);return a.params=Kn({},d,Au,t),a.originalParams=Kn({},a.params),a.passedParams=Kn({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(c=>{a.on(c,a.params.on[c])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:r}=this,i=Tr(t,`.${r.slideClass}, swiper-slide`),o=Ld(i[0]);return Ld(e)-o}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&(this.params.grid.fill==="column"?e=Math.floor(e/this.params.grid.rows):this.params.grid.fill==="row"&&(e=e%Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const e=this,{slidesEl:t,params:r}=e;e.slides=Tr(t,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const r=this;e=Math.min(Math.max(e,0),1);const i=r.minTranslate(),s=(r.maxTranslate()-i)*e+i;r.translateTo(s,typeof t>"u"?0:t),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(r=>{const i=e.getSlideClasses(r);t.push({slideEl:r,classNames:i}),e.emit("_slideClass",r,i)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const r=this,{params:i,slides:o,slidesGrid:s,slidesSizesGrid:a,size:l,activeIndex:d}=r;let c=1;if(typeof i.slidesPerView=="number")return i.slidesPerView;if(i.centeredSlides){let u=o[d]?Math.ceil(o[d].swiperSlideSize):0,f;for(let p=d+1;p<o.length;p+=1)o[p]&&!f&&(u+=Math.ceil(o[p].swiperSlideSize),c+=1,u>l&&(f=!0));for(let p=d-1;p>=0;p-=1)o[p]&&!f&&(u+=o[p].swiperSlideSize,c+=1,u>l&&(f=!0))}else if(e==="current")for(let u=d+1;u<o.length;u+=1)(t?s[u]+a[u]-s[d]<l:s[u]-s[d]<l)&&(c+=1);else for(let u=d-1;u>=0;u-=1)s[d]-s[u]<l&&(c+=1);return c}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(s=>{s.complete&&Yl(e,s)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function i(){const s=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(s,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let o;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)i(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const s=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;o=e.slideTo(s.length-1,0,!1,!0)}else o=e.slideTo(e.activeIndex,0,!1,!0);o||i()}r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const r=this,i=r.params.direction;return e||(e=i==="horizontal"?"vertical":"horizontal"),e===i||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${i}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(o=>{e==="vertical"?o.style.width="":o.style.height=""}),r.emit("changeDirection"),t&&r.update()),r}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let r=e||t.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=t,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const i=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let s=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(i()):Tr(r,i())[0];return!s&&t.params.createElements&&(s=Ls("div",t.params.wrapperClass),r.append(s),Tr(r,`.${t.params.slideClass}`).forEach(a=>{s.append(a)})),Object.assign(t,{el:r,wrapperEl:s,slidesEl:t.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:s,hostEl:t.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||Wi(r,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||Wi(r,"direction")==="rtl"),wrongRTL:Wi(s,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(o=>{o.complete?Yl(t,o):o.addEventListener("load",s=>{Yl(t,s.target)})}),Gf(t),t.initialized=!0,Gf(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const r=this,{params:i,el:o,wrapperEl:s,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),i.loop&&r.loopDestroy(),t&&(r.removeClasses(),o&&typeof o!="string"&&o.removeAttribute("style"),s&&s.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(i.slideVisibleClass,i.slideFullyVisibleClass,i.slideActiveClass,i.slideNextClass,i.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),f5(r)),r.destroyed=!0),null}static extendDefaults(e){Kn(Au,e)}static get extendedDefaults(){return Au}static get defaults(){return Wf}static installModule(e){ci.prototype.__modules__||(ci.prototype.__modules__=[]);const t=ci.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>ci.installModule(t)),ci):(ci.installModule(e),ci)}};Object.keys(Ru).forEach(n=>{Object.keys(Ru[n]).forEach(e=>{Cp.prototype[e]=Ru[n][e]})});Cp.use([w5,E5]);const oT=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function Mo(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function gs(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:Mo(e[r])&&Mo(n[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?n[r]=e[r]:gs(n[r],e[r]):n[r]=e[r]})}function sT(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function aT(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function lT(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function dT(n){n===void 0&&(n="");const e=n.split(" ").map(r=>r.trim()).filter(r=>!!r),t=[];return e.forEach(r=>{t.indexOf(r)<0&&t.push(r)}),t.join(" ")}function Pz(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function _z(n){let{swiper:e,slides:t,passedParams:r,changedParams:i,nextEl:o,prevEl:s,scrollbarEl:a,paginationEl:l}=n;const d=i.filter(T=>T!=="children"&&T!=="direction"&&T!=="wrapperClass"),{params:c,pagination:u,navigation:f,scrollbar:p,virtual:h,thumbs:g}=e;let m,v,b,y,x,E,A,S;i.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&c.thumbs&&(!c.thumbs.swiper||c.thumbs.swiper.destroyed)&&(m=!0),i.includes("controller")&&r.controller&&r.controller.control&&c.controller&&!c.controller.control&&(v=!0),i.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(c.pagination||c.pagination===!1)&&u&&!u.el&&(b=!0),i.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(c.scrollbar||c.scrollbar===!1)&&p&&!p.el&&(y=!0),i.includes("navigation")&&r.navigation&&(r.navigation.prevEl||s)&&(r.navigation.nextEl||o)&&(c.navigation||c.navigation===!1)&&f&&!f.prevEl&&!f.nextEl&&(x=!0);const w=T=>{e[T]&&(e[T].destroy(),T==="navigation"?(e.isElement&&(e[T].prevEl.remove(),e[T].nextEl.remove()),c[T].prevEl=void 0,c[T].nextEl=void 0,e[T].prevEl=void 0,e[T].nextEl=void 0):(e.isElement&&e[T].el.remove(),c[T].el=void 0,e[T].el=void 0))};i.includes("loop")&&e.isElement&&(c.loop&&!r.loop?E=!0:!c.loop&&r.loop?A=!0:S=!0),d.forEach(T=>{if(Mo(c[T])&&Mo(r[T]))Object.assign(c[T],r[T]),(T==="navigation"||T==="pagination"||T==="scrollbar")&&"enabled"in r[T]&&!r[T].enabled&&w(T);else{const C=r[T];(C===!0||C===!1)&&(T==="navigation"||T==="pagination"||T==="scrollbar")?C===!1&&w(T):c[T]=r[T]}}),d.includes("controller")&&!v&&e.controller&&e.controller.control&&c.controller&&c.controller.control&&(e.controller.control=c.controller.control),i.includes("children")&&t&&h&&c.virtual.enabled?(h.slides=t,h.update(!0)):i.includes("virtual")&&h&&c.virtual.enabled&&(t&&(h.slides=t),h.update(!0)),i.includes("children")&&t&&c.loop&&(S=!0),m&&g.init()&&g.update(!0),v&&(e.controller.control=c.controller.control),b&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(c.pagination.el=l),u.init(),u.render(),u.update()),y&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(c.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),x&&(e.isElement&&((!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-next"),Ps(o,e.hostEl.constructor.nextButtonSvg),o.part.add("button-next"),e.el.appendChild(o)),(!s||typeof s=="string")&&(s=document.createElement("div"),s.classList.add("swiper-button-prev"),Ps(s,e.hostEl.constructor.prevButtonSvg),s.part.add("button-prev"),e.el.appendChild(s))),o&&(c.navigation.nextEl=o),s&&(c.navigation.prevEl=s),f.init(),f.update()),i.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),i.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),i.includes("direction")&&e.changeDirection(r.direction,!1),(E||S)&&e.loopDestroy(),(A||S)&&e.loopCreate(),e.update()}function qv(n,e){n===void 0&&(n={});const t={on:{}},r={},i={};gs(t,Wf),t._emitClasses=!0,t.init=!1;const o={},s=oT.map(l=>l.replace(/_/,"")),a=Object.assign({},n);return Object.keys(a).forEach(l=>{typeof n[l]>"u"||(s.indexOf(l)>=0?Mo(n[l])?(t[l]={},i[l]={},gs(t[l],n[l]),gs(i[l],n[l])):(t[l]=n[l],i[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:o[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:i,rest:o,events:r}}function kz(n,e){let{el:t,nextEl:r,prevEl:i,paginationEl:o,scrollbarEl:s,swiper:a}=n;sT(e)&&r&&i&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=i,a.originalParams.navigation.prevEl=i),aT(e)&&o&&(a.params.pagination.el=o,a.originalParams.pagination.el=o),lT(e)&&s&&(a.params.scrollbar.el=s,a.originalParams.scrollbar.el=s),a.init(t)}function Dz(n,e,t,r,i){const o=[];if(!e)return o;const s=l=>{o.indexOf(l)<0&&o.push(l)};if(t&&r){const l=r.map(i),d=t.map(i);l.join("")!==d.join("")&&s("children"),r.length!==t.length&&s("children")}return oT.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(Mo(n[l])&&Mo(e[l])){const d=Object.keys(n[l]),c=Object.keys(e[l]);d.length!==c.length?s(l):(d.forEach(u=>{n[l][u]!==e[l][u]&&s(l)}),c.forEach(u=>{n[l][u]!==e[l][u]&&s(l)}))}else n[l]!==e[l]&&s(l)}),o}const Oz=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.emit("_virtualUpdated"),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function Iu(n,e,t){n===void 0&&(n={});const r=[],i={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},o=(s,a)=>{Array.isArray(s)&&s.forEach(l=>{const d=typeof l.type=="symbol";a==="default"&&(a="container-end"),d&&l.children?o(l.children,a):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")||l.componentOptions&&l.componentOptions.tag==="SwiperSlide"?r.push(l):i[a]&&i[a].push(l)})};return Object.keys(n).forEach(s=>{if(typeof n[s]!="function")return;const a=n[s]();o(a,s)}),t.value=e.value,e.value=r,{slides:r,slots:i}}function Mz(n,e,t){if(!t)return null;const r=c=>{let u=c;return c<0?u=e.length+c:u>=e.length&&(u=u-e.length),u},i=n.value.isHorizontal()?{[n.value.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:o,to:s}=t,a=n.value.params.loop?-e.length:0,l=n.value.params.loop?e.length*2:e.length,d=[];for(let c=a;c<l;c+=1)c>=o&&c<=s&&d.length<e.length&&d.push(e[r(c)]);return d.map(c=>{if(c.props||(c.props={}),c.props.style||(c.props.style={}),c.props.swiperRef=n,c.props.style=i,c.type)return R(c.type,{...c.props},c.children);if(c.componentOptions)return R(c.componentOptions.Ctor,{...c.props},c.componentOptions.children)})}const Tp={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},swiperElementNodeName:{type:String,default:"SWIPER-CONTAINER"},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},breakpointsBase:{type:String,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},loopAdditionalSlides:{type:Number,default:void 0},loopAddBlankSlides:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideFullyVisibleClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","_virtualUpdated","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slidesUpdated","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(n,e){let{slots:t,emit:r}=e;const{tag:i,wrapperTag:o}=n,s=G("swiper"),a=G(null),l=G(!1),d=G(!1),c=G(null),u=G(null),f=G(null),p={value:[]},h={value:[]},g=G(null),m=G(null),v=G(null),b=G(null),{params:y,passedParams:x}=qv(n);Iu(t,p,h),f.value=x,h.value=p.value;const E=()=>{Iu(t,p,h),l.value=!0};y.onAny=function(w){for(var T=arguments.length,C=new Array(T>1?T-1:0),L=1;L<T;L++)C[L-1]=arguments[L];r(w,...C)},Object.assign(y.on,{_beforeBreakpoint:E,_containerClasses(w,T){s.value=T}});const A={...y};if(delete A.wrapperClass,u.value=new Cp(A),u.value.virtual&&u.value.params.virtual.enabled){u.value.virtual.slides=p.value;const w={cache:!1,slides:p.value,renderExternal:T=>{a.value=T},renderExternalUpdate:!1};gs(u.value.params.virtual,w),gs(u.value.originalParams.virtual,w)}Zd(()=>{!d.value&&u.value&&(u.value.emitSlidesClasses(),d.value=!0);const{passedParams:w}=qv(n),T=Dz(w,f.value,p.value,h.value,C=>C.props&&C.props.key);f.value=w,(T.length||l.value)&&u.value&&!u.value.destroyed&&_z({swiper:u.value,slides:p.value,passedParams:w,changedParams:T,nextEl:g.value,prevEl:m.value,scrollbarEl:b.value,paginationEl:v.value}),l.value=!1}),st("swiper",u),at(a,()=>{wn(()=>{Oz(u.value)})}),Nt(()=>{c.value&&(kz({el:c.value,nextEl:g.value,prevEl:m.value,paginationEl:v.value,scrollbarEl:b.value,swiper:u.value},y),r("swiper",u.value))}),jt(()=>{u.value&&!u.value.destroyed&&u.value.destroy(!0,!1)});function S(w){return y.virtual?Mz(u,w,a.value):(w.forEach((T,C)=>{T.props||(T.props={}),T.props.swiperRef=u,T.props.swiperSlideIndex=C}),w)}return()=>{const{slides:w,slots:T}=Iu(t,p,h);return R(i,{ref:c,class:dT(s.value)},[T["container-start"],R(o,{class:Pz(y.wrapperClass)},[T["wrapper-start"],S(w),T["wrapper-end"]]),sT(n)&&[R("div",{ref:m,class:"swiper-button-prev"}),R("div",{ref:g,class:"swiper-button-next"})],lT(n)&&R("div",{ref:b,class:"swiper-scrollbar"}),aT(n)&&R("div",{ref:v,class:"swiper-pagination"}),T["container-end"]])}}},wp={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(n,e){let{slots:t}=e,r=!1;const{swiperRef:i}=n,o=G(null),s=G("swiper-slide"),a=G(!1);function l(u,f,p){f===o.value&&(s.value=p)}Nt(()=>{!i||!i.value||(i.value.on("_slideClass",l),r=!0)}),Zb(()=>{r||!i||!i.value||(i.value.on("_slideClass",l),r=!0)}),Zd(()=>{!o.value||!i||!i.value||(typeof n.swiperSlideIndex<"u"&&(o.value.swiperSlideIndex=n.swiperSlideIndex),i.value.destroyed&&s.value!=="swiper-slide"&&(s.value="swiper-slide"))}),jt(()=>{!i||!i.value||i.value.off("_slideClass",l)});const d=U(()=>({isActive:s.value.indexOf("swiper-slide-active")>=0,isVisible:s.value.indexOf("swiper-slide-visible")>=0,isPrev:s.value.indexOf("swiper-slide-prev")>=0,isNext:s.value.indexOf("swiper-slide-next")>=0}));st("swiperSlide",d);const c=()=>{a.value=!0};return()=>R(n.tag,{class:dT(`${s.value}`),ref:o,"data-swiper-slide-index":typeof n.virtualIndex>"u"&&i&&i.value&&i.value.params.loop?n.swiperSlideIndex:n.virtualIndex,onLoadCapture:c},n.zoom?R("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof n.zoom=="number"?n.zoom:void 0},[t.default&&t.default(d.value),n.lazy&&!a.value&&R("div",{class:"swiper-lazy-preloader"})]):[t.default&&t.default(d.value),n.lazy&&!a.value&&R("div",{class:"swiper-lazy-preloader"})])}};function Fz(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;t({virtual:{enabled:!1,slides:[],cache:!0,renderSlide:null,renderExternal:null,renderExternalUpdate:!0,addSlidesBefore:0,addSlidesAfter:0}});let o;const s=nr();e.virtual={cache:{},from:void 0,to:void 0,slides:[],offset:0,slidesGrid:[]};const a=s.createElement("div");function l(h,g){const m=e.params.virtual;if(m.cache&&e.virtual.cache[g])return e.virtual.cache[g];let v;return m.renderSlide?(v=m.renderSlide.call(e,h,g),typeof v=="string"&&(Ps(a,v),v=a.children[0])):e.isElement?v=Ls("swiper-slide"):v=Ls("div",e.params.slideClass),v.setAttribute("data-swiper-slide-index",g),m.renderSlide||Ps(v,h),m.cache&&(e.virtual.cache[g]=v),v}function d(h,g,m){const{slidesPerView:v,slidesPerGroup:b,centeredSlides:y,loop:x,initialSlide:E}=e.params;if(g&&!x&&E>0)return;const{addSlidesBefore:A,addSlidesAfter:S}=e.params.virtual,{from:w,to:T,slides:C,slidesGrid:L,offset:P}=e.virtual;e.params.cssMode||e.updateActiveIndex();const _=typeof m>"u"?e.activeIndex||0:m;let D;e.rtlTranslate?D="right":D=e.isHorizontal()?"left":"top";let k,M;y?(k=Math.floor(v/2)+b+S,M=Math.floor(v/2)+b+A):(k=v+(b-1)+S,M=(x?v:b)+A);let O=_-M,$=_+k;x||(O=Math.max(O,0),$=Math.min($,C.length-1));let K=(e.slidesGrid[O]||0)-(e.slidesGrid[0]||0);x&&_>=M?(O-=M,y||(K+=e.slidesGrid[0])):x&&_<M&&(O=-M,y&&(K+=e.slidesGrid[0])),Object.assign(e.virtual,{from:O,to:$,offset:K,slidesGrid:e.slidesGrid,slidesBefore:M,slidesAfter:k});function Y(){e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),i("virtualUpdate")}if(w===O&&T===$&&!h){e.slidesGrid!==L&&K!==P&&e.slides.forEach(te=>{te.style[D]=`${K-Math.abs(e.cssOverflowAdjustment())}px`}),e.updateProgress(),i("virtualUpdate");return}if(e.params.virtual.renderExternal){e.params.virtual.renderExternal.call(e,{offset:K,from:O,to:$,slides:function(){const W=[];for(let de=O;de<=$;de+=1)W.push(C[de]);return W}()}),e.params.virtual.renderExternalUpdate?Y():i("virtualUpdate");return}const H=[],B=[],X=te=>{let W=te;return te<0?W=C.length+te:W>=C.length&&(W=W-C.length),W};if(h)e.slides.filter(te=>te.matches(`.${e.params.slideClass}, swiper-slide`)).forEach(te=>{te.remove()});else for(let te=w;te<=T;te+=1)if(te<O||te>$){const W=X(te);e.slides.filter(de=>de.matches(`.${e.params.slideClass}[data-swiper-slide-index="${W}"], swiper-slide[data-swiper-slide-index="${W}"]`)).forEach(de=>{de.remove()})}const se=x?-C.length:0,pe=x?C.length*2:C.length;for(let te=se;te<pe;te+=1)if(te>=O&&te<=$){const W=X(te);typeof T>"u"||h?B.push(W):(te>T&&B.push(W),te<w&&H.push(W))}if(B.forEach(te=>{e.slidesEl.append(l(C[te],te))}),x)for(let te=H.length-1;te>=0;te-=1){const W=H[te];e.slidesEl.prepend(l(C[W],W))}else H.sort((te,W)=>W-te),H.forEach(te=>{e.slidesEl.prepend(l(C[te],te))});Tr(e.slidesEl,".swiper-slide, swiper-slide").forEach(te=>{te.style[D]=`${K-Math.abs(e.cssOverflowAdjustment())}px`}),Y()}function c(h){if(typeof h=="object"&&"length"in h)for(let g=0;g<h.length;g+=1)h[g]&&e.virtual.slides.push(h[g]);else e.virtual.slides.push(h);d(!0)}function u(h){const g=e.activeIndex;let m=g+1,v=1;if(Array.isArray(h)){for(let b=0;b<h.length;b+=1)h[b]&&e.virtual.slides.unshift(h[b]);m=g+h.length,v=h.length}else e.virtual.slides.unshift(h);if(e.params.virtual.cache){const b=e.virtual.cache,y={};Object.keys(b).forEach(x=>{const E=b[x],A=E.getAttribute("data-swiper-slide-index");A&&E.setAttribute("data-swiper-slide-index",parseInt(A,10)+v),y[parseInt(x,10)+v]=E}),e.virtual.cache=y}d(!0),e.slideTo(m,0)}function f(h){if(typeof h>"u"||h===null)return;let g=e.activeIndex;if(Array.isArray(h))for(let m=h.length-1;m>=0;m-=1)e.params.virtual.cache&&(delete e.virtual.cache[h[m]],Object.keys(e.virtual.cache).forEach(v=>{v>h&&(e.virtual.cache[v-1]=e.virtual.cache[v],e.virtual.cache[v-1].setAttribute("data-swiper-slide-index",v-1),delete e.virtual.cache[v])})),e.virtual.slides.splice(h[m],1),h[m]<g&&(g-=1),g=Math.max(g,0);else e.params.virtual.cache&&(delete e.virtual.cache[h],Object.keys(e.virtual.cache).forEach(m=>{m>h&&(e.virtual.cache[m-1]=e.virtual.cache[m],e.virtual.cache[m-1].setAttribute("data-swiper-slide-index",m-1),delete e.virtual.cache[m])})),e.virtual.slides.splice(h,1),h<g&&(g-=1),g=Math.max(g,0);d(!0),e.slideTo(g,0)}function p(){e.virtual.slides=[],e.params.virtual.cache&&(e.virtual.cache={}),d(!0),e.slideTo(0,0)}r("beforeInit",()=>{if(!e.params.virtual.enabled)return;let h;if(typeof e.passedParams.virtual.slides>"u"){const g=[...e.slidesEl.children].filter(m=>m.matches(`.${e.params.slideClass}, swiper-slide`));g&&g.length&&(e.virtual.slides=[...g],h=!0,g.forEach((m,v)=>{m.setAttribute("data-swiper-slide-index",v),e.virtual.cache[v]=m,m.remove()}))}h||(e.virtual.slides=e.params.virtual.slides),e.classNames.push(`${e.params.containerModifierClass}virtual`),e.params.watchSlidesProgress=!0,e.originalParams.watchSlidesProgress=!0,d(!1,!0)}),r("setTranslate",()=>{e.params.virtual.enabled&&(e.params.cssMode&&!e._immediateVirtual?(clearTimeout(o),o=setTimeout(()=>{d()},100)):d())}),r("init update resize",()=>{e.params.virtual.enabled&&e.params.cssMode&&sa(e.wrapperEl,"--swiper-virtual-size",`${e.virtualSize}px`)}),Object.assign(e.virtual,{appendSlide:c,prependSlide:u,removeSlide:f,removeAllSlides:p,update:d})}function $z(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const o=nr(),s=hn();e.keyboard={enabled:!1},t({keyboard:{enabled:!1,onlyInViewport:!0,pageUpDown:!0}});function a(c){if(!e.enabled)return;const{rtlTranslate:u}=e;let f=c;f.originalEvent&&(f=f.originalEvent);const p=f.keyCode||f.charCode,h=e.params.keyboard.pageUpDown,g=h&&p===33,m=h&&p===34,v=p===37,b=p===39,y=p===38,x=p===40;if(!e.allowSlideNext&&(e.isHorizontal()&&b||e.isVertical()&&x||m)||!e.allowSlidePrev&&(e.isHorizontal()&&v||e.isVertical()&&y||g))return!1;if(!(f.shiftKey||f.altKey||f.ctrlKey||f.metaKey)&&!(o.activeElement&&(o.activeElement.isContentEditable||o.activeElement.nodeName&&(o.activeElement.nodeName.toLowerCase()==="input"||o.activeElement.nodeName.toLowerCase()==="textarea")))){if(e.params.keyboard.onlyInViewport&&(g||m||v||b||y||x)){let E=!1;if(Pd(e.el,`.${e.params.slideClass}, swiper-slide`).length>0&&Pd(e.el,`.${e.params.slideActiveClass}`).length===0)return;const A=e.el,S=A.clientWidth,w=A.clientHeight,T=s.innerWidth,C=s.innerHeight,L=b5(A);u&&(L.left-=A.scrollLeft);const P=[[L.left,L.top],[L.left+S,L.top],[L.left,L.top+w],[L.left+S,L.top+w]];for(let _=0;_<P.length;_+=1){const D=P[_];if(D[0]>=0&&D[0]<=T&&D[1]>=0&&D[1]<=C){if(D[0]===0&&D[1]===0)continue;E=!0}}if(!E)return}e.isHorizontal()?((g||m||v||b)&&(f.preventDefault?f.preventDefault():f.returnValue=!1),((m||b)&&!u||(g||v)&&u)&&e.slideNext(),((g||v)&&!u||(m||b)&&u)&&e.slidePrev()):((g||m||y||x)&&(f.preventDefault?f.preventDefault():f.returnValue=!1),(m||x)&&e.slideNext(),(g||y)&&e.slidePrev()),i("keyPress",p)}}function l(){e.keyboard.enabled||(o.addEventListener("keydown",a),e.keyboard.enabled=!0)}function d(){e.keyboard.enabled&&(o.removeEventListener("keydown",a),e.keyboard.enabled=!1)}r("init",()=>{e.params.keyboard.enabled&&l()}),r("destroy",()=>{e.keyboard.enabled&&d()}),Object.assign(e.keyboard,{enable:l,disable:d})}function Bz(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const o=hn();t({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),e.mousewheel={enabled:!1};let s,a=vi(),l;const d=[];function c(y){let S=0,w=0,T=0,C=0;return"detail"in y&&(w=y.detail),"wheelDelta"in y&&(w=-y.wheelDelta/120),"wheelDeltaY"in y&&(w=-y.wheelDeltaY/120),"wheelDeltaX"in y&&(S=-y.wheelDeltaX/120),"axis"in y&&y.axis===y.HORIZONTAL_AXIS&&(S=w,w=0),T=S*10,C=w*10,"deltaY"in y&&(C=y.deltaY),"deltaX"in y&&(T=y.deltaX),y.shiftKey&&!T&&(T=C,C=0),(T||C)&&y.deltaMode&&(y.deltaMode===1?(T*=40,C*=40):(T*=800,C*=800)),T&&!S&&(S=T<1?-1:1),C&&!w&&(w=C<1?-1:1),{spinX:S,spinY:w,pixelX:T,pixelY:C}}function u(){e.enabled&&(e.mouseEntered=!0)}function f(){e.enabled&&(e.mouseEntered=!1)}function p(y){return e.params.mousewheel.thresholdDelta&&y.delta<e.params.mousewheel.thresholdDelta||e.params.mousewheel.thresholdTime&&vi()-a<e.params.mousewheel.thresholdTime?!1:y.delta>=6&&vi()-a<60?!0:(y.direction<0?(!e.isEnd||e.params.loop)&&!e.animating&&(e.slideNext(),i("scroll",y.raw)):(!e.isBeginning||e.params.loop)&&!e.animating&&(e.slidePrev(),i("scroll",y.raw)),a=new o.Date().getTime(),!1)}function h(y){const x=e.params.mousewheel;if(y.direction<0){if(e.isEnd&&!e.params.loop&&x.releaseOnEdges)return!0}else if(e.isBeginning&&!e.params.loop&&x.releaseOnEdges)return!0;return!1}function g(y){let x=y,E=!0;if(!e.enabled||y.target.closest(`.${e.params.mousewheel.noMousewheelClass}`))return;const A=e.params.mousewheel;e.params.cssMode&&x.preventDefault();let S=e.el;e.params.mousewheel.eventsTarget!=="container"&&(S=document.querySelector(e.params.mousewheel.eventsTarget));const w=S&&S.contains(x.target);if(!e.mouseEntered&&!w&&!A.releaseOnEdges)return!0;x.originalEvent&&(x=x.originalEvent);let T=0;const C=e.rtlTranslate?-1:1,L=c(x);if(A.forceToAxis)if(e.isHorizontal())if(Math.abs(L.pixelX)>Math.abs(L.pixelY))T=-L.pixelX*C;else return!0;else if(Math.abs(L.pixelY)>Math.abs(L.pixelX))T=-L.pixelY;else return!0;else T=Math.abs(L.pixelX)>Math.abs(L.pixelY)?-L.pixelX*C:-L.pixelY;if(T===0)return!0;A.invert&&(T=-T);let P=e.getTranslate()+T*A.sensitivity;if(P>=e.minTranslate()&&(P=e.minTranslate()),P<=e.maxTranslate()&&(P=e.maxTranslate()),E=e.params.loop?!0:!(P===e.minTranslate()||P===e.maxTranslate()),E&&e.params.nested&&x.stopPropagation(),!e.params.freeMode||!e.params.freeMode.enabled){const _={time:vi(),delta:Math.abs(T),direction:Math.sign(T),raw:y};d.length>=2&&d.shift();const D=d.length?d[d.length-1]:void 0;if(d.push(_),D?(_.direction!==D.direction||_.delta>D.delta||_.time>D.time+150)&&p(_):p(_),h(_))return!0}else{const _={time:vi(),delta:Math.abs(T),direction:Math.sign(T)},D=l&&_.time<l.time+500&&_.delta<=l.delta&&_.direction===l.direction;if(!D){l=void 0;let k=e.getTranslate()+T*A.sensitivity;const M=e.isBeginning,O=e.isEnd;if(k>=e.minTranslate()&&(k=e.minTranslate()),k<=e.maxTranslate()&&(k=e.maxTranslate()),e.setTransition(0),e.setTranslate(k),e.updateProgress(),e.updateActiveIndex(),e.updateSlidesClasses(),(!M&&e.isBeginning||!O&&e.isEnd)&&e.updateSlidesClasses(),e.params.loop&&e.loopFix({direction:_.direction<0?"next":"prev",byMousewheel:!0}),e.params.freeMode.sticky){clearTimeout(s),s=void 0,d.length>=15&&d.shift();const $=d.length?d[d.length-1]:void 0,K=d[0];if(d.push(_),$&&(_.delta>$.delta||_.direction!==$.direction))d.splice(0);else if(d.length>=15&&_.time-K.time<500&&K.delta-_.delta>=1&&_.delta<=6){const Y=T>0?.8:.2;l=_,d.splice(0),s=Ad(()=>{e.destroyed||!e.params||e.slideToClosest(e.params.speed,!0,void 0,Y)},0)}s||(s=Ad(()=>{if(e.destroyed||!e.params)return;const Y=.5;l=_,d.splice(0),e.slideToClosest(e.params.speed,!0,void 0,Y)},500))}if(D||i("scroll",x),e.params.autoplay&&e.params.autoplay.disableOnInteraction&&e.autoplay.stop(),A.releaseOnEdges&&(k===e.minTranslate()||k===e.maxTranslate()))return!0}}return x.preventDefault?x.preventDefault():x.returnValue=!1,!1}function m(y){let x=e.el;e.params.mousewheel.eventsTarget!=="container"&&(x=document.querySelector(e.params.mousewheel.eventsTarget)),x[y]("mouseenter",u),x[y]("mouseleave",f),x[y]("wheel",g)}function v(){return e.params.cssMode?(e.wrapperEl.removeEventListener("wheel",g),!0):e.mousewheel.enabled?!1:(m("addEventListener"),e.mousewheel.enabled=!0,!0)}function b(){return e.params.cssMode?(e.wrapperEl.addEventListener(event,g),!0):e.mousewheel.enabled?(m("removeEventListener"),e.mousewheel.enabled=!1,!0):!1}r("init",()=>{!e.params.mousewheel.enabled&&e.params.cssMode&&b(),e.params.mousewheel.enabled&&v()}),r("destroy",()=>{e.params.cssMode&&v(),e.mousewheel.enabled&&b()}),Object.assign(e.mousewheel,{enable:v,disable:b})}function cT(n,e,t,r){return n.params.createElements&&Object.keys(r).forEach(i=>{if(!t[i]&&t.auto===!0){let o=Tr(n.el,`.${r[i]}`)[0];o||(o=Ls("div",r[i]),o.className=r[i],n.el.append(o)),t[i]=o,e[i]=o}}),t}function Nz(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function o(h){let g;return h&&typeof h=="string"&&e.isElement&&(g=e.el.querySelector(h)||e.hostEl.querySelector(h),g)?g:(h&&(typeof h=="string"&&(g=[...document.querySelectorAll(h)]),e.params.uniqueNavElements&&typeof h=="string"&&g&&g.length>1&&e.el.querySelectorAll(h).length===1?g=e.el.querySelector(h):g&&g.length===1&&(g=g[0])),h&&!g?h:g)}function s(h,g){const m=e.params.navigation;h=cn(h),h.forEach(v=>{v&&(v.classList[g?"add":"remove"](...m.disabledClass.split(" ")),v.tagName==="BUTTON"&&(v.disabled=g),e.params.watchOverflow&&e.enabled&&v.classList[e.isLocked?"add":"remove"](m.lockClass))})}function a(){const{nextEl:h,prevEl:g}=e.navigation;if(e.params.loop){s(g,!1),s(h,!1);return}s(g,e.isBeginning&&!e.params.rewind),s(h,e.isEnd&&!e.params.rewind)}function l(h){h.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),i("navigationPrev"))}function d(h){h.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),i("navigationNext"))}function c(){const h=e.params.navigation;if(e.params.navigation=cT(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(h.nextEl||h.prevEl))return;let g=o(h.nextEl),m=o(h.prevEl);Object.assign(e.navigation,{nextEl:g,prevEl:m}),g=cn(g),m=cn(m);const v=(b,y)=>{b&&b.addEventListener("click",y==="next"?d:l),!e.enabled&&b&&b.classList.add(...h.lockClass.split(" "))};g.forEach(b=>v(b,"next")),m.forEach(b=>v(b,"prev"))}function u(){let{nextEl:h,prevEl:g}=e.navigation;h=cn(h),g=cn(g);const m=(v,b)=>{v.removeEventListener("click",b==="next"?d:l),v.classList.remove(...e.params.navigation.disabledClass.split(" "))};h.forEach(v=>m(v,"next")),g.forEach(v=>m(v,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?p():(c(),a())}),r("toEdge fromEdge lock unlock",()=>{a()}),r("destroy",()=>{u()}),r("enable disable",()=>{let{nextEl:h,prevEl:g}=e.navigation;if(h=cn(h),g=cn(g),e.enabled){a();return}[...h,...g].filter(m=>!!m).forEach(m=>m.classList.add(e.params.navigation.lockClass))}),r("click",(h,g)=>{let{nextEl:m,prevEl:v}=e.navigation;m=cn(m),v=cn(v);const b=g.target;let y=v.includes(b)||m.includes(b);if(e.isElement&&!y){const x=g.path||g.composedPath&&g.composedPath();x&&(y=x.find(E=>m.includes(E)||v.includes(E)))}if(e.params.navigation.hideOnClick&&!y){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===b||e.pagination.el.contains(b)))return;let x;m.length?x=m[0].classList.contains(e.params.navigation.hiddenClass):v.length&&(x=v[0].classList.contains(e.params.navigation.hiddenClass)),i(x===!0?"navigationShow":"navigationHide"),[...m,...v].filter(E=>!!E).forEach(E=>E.classList.toggle(e.params.navigation.hiddenClass))}});const f=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),c(),a()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(e.navigation,{enable:f,disable:p,update:a,init:c,destroy:u})}function ea(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function zz(n){let{swiper:e,extendParams:t,on:r,emit:i}=n;const o="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:b=>b,formatFractionTotal:b=>b,bulletClass:`${o}-bullet`,bulletActiveClass:`${o}-bullet-active`,modifierClass:`${o}-`,currentClass:`${o}-current`,totalClass:`${o}-total`,hiddenClass:`${o}-hidden`,progressbarFillClass:`${o}-progressbar-fill`,progressbarOppositeClass:`${o}-progressbar-opposite`,clickableClass:`${o}-clickable`,lockClass:`${o}-lock`,horizontalClass:`${o}-horizontal`,verticalClass:`${o}-vertical`,paginationDisabledClass:`${o}-disabled`}}),e.pagination={el:null,bullets:[]};let s,a=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function d(b,y){const{bulletActiveClass:x}=e.params.pagination;b&&(b=b[`${y==="prev"?"previous":"next"}ElementSibling`],b&&(b.classList.add(`${x}-${y}`),b=b[`${y==="prev"?"previous":"next"}ElementSibling`],b&&b.classList.add(`${x}-${y}-${y}`)))}function c(b,y,x){if(b=b%x,y=y%x,y===b+1)return"next";if(y===b-1)return"previous"}function u(b){const y=b.target.closest(ea(e.params.pagination.bulletClass));if(!y)return;b.preventDefault();const x=Ld(y)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===x)return;const E=c(e.realIndex,x,e.slides.length);E==="next"?e.slideNext():E==="previous"?e.slidePrev():e.slideToLoop(x)}else e.slideTo(x)}function f(){const b=e.rtl,y=e.params.pagination;if(l())return;let x=e.pagination.el;x=cn(x);let E,A;const S=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,w=e.params.loop?Math.ceil(S/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(A=e.previousRealIndex||0,E=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(E=e.snapIndex,A=e.previousSnapIndex):(A=e.previousIndex||0,E=e.activeIndex||0),y.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const T=e.pagination.bullets;let C,L,P;if(y.dynamicBullets&&(s=Vf(T[0],e.isHorizontal()?"width":"height"),x.forEach(_=>{_.style[e.isHorizontal()?"width":"height"]=`${s*(y.dynamicMainBullets+4)}px`}),y.dynamicMainBullets>1&&A!==void 0&&(a+=E-(A||0),a>y.dynamicMainBullets-1?a=y.dynamicMainBullets-1:a<0&&(a=0)),C=Math.max(E-a,0),L=C+(Math.min(T.length,y.dynamicMainBullets)-1),P=(L+C)/2),T.forEach(_=>{const D=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(k=>`${y.bulletActiveClass}${k}`)].map(k=>typeof k=="string"&&k.includes(" ")?k.split(" "):k).flat();_.classList.remove(...D)}),x.length>1)T.forEach(_=>{const D=Ld(_);D===E?_.classList.add(...y.bulletActiveClass.split(" ")):e.isElement&&_.setAttribute("part","bullet"),y.dynamicBullets&&(D>=C&&D<=L&&_.classList.add(...`${y.bulletActiveClass}-main`.split(" ")),D===C&&d(_,"prev"),D===L&&d(_,"next"))});else{const _=T[E];if(_&&_.classList.add(...y.bulletActiveClass.split(" ")),e.isElement&&T.forEach((D,k)=>{D.setAttribute("part",k===E?"bullet-active":"bullet")}),y.dynamicBullets){const D=T[C],k=T[L];for(let M=C;M<=L;M+=1)T[M]&&T[M].classList.add(...`${y.bulletActiveClass}-main`.split(" "));d(D,"prev"),d(k,"next")}}if(y.dynamicBullets){const _=Math.min(T.length,y.dynamicMainBullets+4),D=(s*_-s)/2-P*s,k=b?"right":"left";T.forEach(M=>{M.style[e.isHorizontal()?k:"top"]=`${D}px`})}}x.forEach((T,C)=>{if(y.type==="fraction"&&(T.querySelectorAll(ea(y.currentClass)).forEach(L=>{L.textContent=y.formatFractionCurrent(E+1)}),T.querySelectorAll(ea(y.totalClass)).forEach(L=>{L.textContent=y.formatFractionTotal(w)})),y.type==="progressbar"){let L;y.progressbarOpposite?L=e.isHorizontal()?"vertical":"horizontal":L=e.isHorizontal()?"horizontal":"vertical";const P=(E+1)/w;let _=1,D=1;L==="horizontal"?_=P:D=P,T.querySelectorAll(ea(y.progressbarFillClass)).forEach(k=>{k.style.transform=`translate3d(0,0,0) scaleX(${_}) scaleY(${D})`,k.style.transitionDuration=`${e.params.speed}ms`})}y.type==="custom"&&y.renderCustom?(Ps(T,y.renderCustom(e,E+1,w)),C===0&&i("paginationRender",T)):(C===0&&i("paginationRender",T),i("paginationUpdate",T)),e.params.watchOverflow&&e.enabled&&T.classList[e.isLocked?"add":"remove"](y.lockClass)})}function p(){const b=e.params.pagination;if(l())return;const y=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let x=e.pagination.el;x=cn(x);let E="";if(b.type==="bullets"){let A=e.params.loop?Math.ceil(y/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&A>y&&(A=y);for(let S=0;S<A;S+=1)b.renderBullet?E+=b.renderBullet.call(e,S,b.bulletClass):E+=`<${b.bulletElement} ${e.isElement?'part="bullet"':""} class="${b.bulletClass}"></${b.bulletElement}>`}b.type==="fraction"&&(b.renderFraction?E=b.renderFraction.call(e,b.currentClass,b.totalClass):E=`<span class="${b.currentClass}"></span> / <span class="${b.totalClass}"></span>`),b.type==="progressbar"&&(b.renderProgressbar?E=b.renderProgressbar.call(e,b.progressbarFillClass):E=`<span class="${b.progressbarFillClass}"></span>`),e.pagination.bullets=[],x.forEach(A=>{b.type!=="custom"&&Ps(A,E||""),b.type==="bullets"&&e.pagination.bullets.push(...A.querySelectorAll(ea(b.bulletClass)))}),b.type!=="custom"&&i("paginationRender",x[0])}function h(){e.params.pagination=cT(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const b=e.params.pagination;if(!b.el)return;let y;typeof b.el=="string"&&e.isElement&&(y=e.el.querySelector(b.el)),!y&&typeof b.el=="string"&&(y=[...document.querySelectorAll(b.el)]),y||(y=b.el),!(!y||y.length===0)&&(e.params.uniqueNavElements&&typeof b.el=="string"&&Array.isArray(y)&&y.length>1&&(y=[...e.el.querySelectorAll(b.el)],y.length>1&&(y=y.find(x=>Pd(x,".swiper")[0]===e.el))),Array.isArray(y)&&y.length===1&&(y=y[0]),Object.assign(e.pagination,{el:y}),y=cn(y),y.forEach(x=>{b.type==="bullets"&&b.clickable&&x.classList.add(...(b.clickableClass||"").split(" ")),x.classList.add(b.modifierClass+b.type),x.classList.add(e.isHorizontal()?b.horizontalClass:b.verticalClass),b.type==="bullets"&&b.dynamicBullets&&(x.classList.add(`${b.modifierClass}${b.type}-dynamic`),a=0,b.dynamicMainBullets<1&&(b.dynamicMainBullets=1)),b.type==="progressbar"&&b.progressbarOpposite&&x.classList.add(b.progressbarOppositeClass),b.clickable&&x.addEventListener("click",u),e.enabled||x.classList.add(b.lockClass)}))}function g(){const b=e.params.pagination;if(l())return;let y=e.pagination.el;y&&(y=cn(y),y.forEach(x=>{x.classList.remove(b.hiddenClass),x.classList.remove(b.modifierClass+b.type),x.classList.remove(e.isHorizontal()?b.horizontalClass:b.verticalClass),b.clickable&&(x.classList.remove(...(b.clickableClass||"").split(" ")),x.removeEventListener("click",u))})),e.pagination.bullets&&e.pagination.bullets.forEach(x=>x.classList.remove(...b.bulletActiveClass.split(" ")))}r("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const b=e.params.pagination;let{el:y}=e.pagination;y=cn(y),y.forEach(x=>{x.classList.remove(b.horizontalClass,b.verticalClass),x.classList.add(e.isHorizontal()?b.horizontalClass:b.verticalClass)})}),r("init",()=>{e.params.pagination.enabled===!1?v():(h(),p(),f())}),r("activeIndexChange",()=>{typeof e.snapIndex>"u"&&f()}),r("snapIndexChange",()=>{f()}),r("snapGridLengthChange",()=>{p(),f()}),r("destroy",()=>{g()}),r("enable disable",()=>{let{el:b}=e.pagination;b&&(b=cn(b),b.forEach(y=>y.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),r("lock unlock",()=>{f()}),r("click",(b,y)=>{const x=y.target,E=cn(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&E&&E.length>0&&!x.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&x===e.navigation.nextEl||e.navigation.prevEl&&x===e.navigation.prevEl))return;const A=E[0].classList.contains(e.params.pagination.hiddenClass);i(A===!0?"paginationShow":"paginationHide"),E.forEach(S=>S.classList.toggle(e.params.pagination.hiddenClass))}});const m=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:b}=e.pagination;b&&(b=cn(b),b.forEach(y=>y.classList.remove(e.params.pagination.paginationDisabledClass))),h(),p(),f()},v=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:b}=e.pagination;b&&(b=cn(b),b.forEach(y=>y.classList.add(e.params.pagination.paginationDisabledClass))),g()};Object.assign(e.pagination,{enable:m,disable:v,render:p,update:f,init:h,destroy:g})}function uT(n){let{swiper:e,extendParams:t,on:r,emit:i,params:o}=n;e.autoplay={running:!1,paused:!1,timeLeft:0},t({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let s,a,l=o&&o.autoplay?o.autoplay.delay:3e3,d=o&&o.autoplay?o.autoplay.delay:3e3,c,u=new Date().getTime(),f,p,h,g,m,v,b;function y($){!e||e.destroyed||!e.wrapperEl||$.target===e.wrapperEl&&(e.wrapperEl.removeEventListener("transitionend",y),!(b||$.detail&&$.detail.bySwiperTouchMove)&&C())}const x=()=>{if(e.destroyed||!e.autoplay.running)return;e.autoplay.paused?f=!0:f&&(d=c,f=!1);const $=e.autoplay.paused?c:u+d-new Date().getTime();e.autoplay.timeLeft=$,i("autoplayTimeLeft",$,$/l),a=requestAnimationFrame(()=>{x()})},E=()=>{let $;return e.virtual&&e.params.virtual.enabled?$=e.slides.find(Y=>Y.classList.contains("swiper-slide-active")):$=e.slides[e.activeIndex],$?parseInt($.getAttribute("data-swiper-autoplay"),10):void 0},A=$=>{if(e.destroyed||!e.autoplay.running)return;cancelAnimationFrame(a),x();let K=typeof $>"u"?e.params.autoplay.delay:$;l=e.params.autoplay.delay,d=e.params.autoplay.delay;const Y=E();!Number.isNaN(Y)&&Y>0&&typeof $>"u"&&(K=Y,l=Y,d=Y),c=K;const H=e.params.speed,B=()=>{!e||e.destroyed||(e.params.autoplay.reverseDirection?!e.isBeginning||e.params.loop||e.params.rewind?(e.slidePrev(H,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(e.slides.length-1,H,!0,!0),i("autoplay")):!e.isEnd||e.params.loop||e.params.rewind?(e.slideNext(H,!0,!0),i("autoplay")):e.params.autoplay.stopOnLastSlide||(e.slideTo(0,H,!0,!0),i("autoplay")),e.params.cssMode&&(u=new Date().getTime(),requestAnimationFrame(()=>{A()})))};return K>0?(clearTimeout(s),s=setTimeout(()=>{B()},K)):requestAnimationFrame(()=>{B()}),K},S=()=>{u=new Date().getTime(),e.autoplay.running=!0,A(),i("autoplayStart")},w=()=>{e.autoplay.running=!1,clearTimeout(s),cancelAnimationFrame(a),i("autoplayStop")},T=($,K)=>{if(e.destroyed||!e.autoplay.running)return;clearTimeout(s),$||(v=!0);const Y=()=>{i("autoplayPause"),e.params.autoplay.waitForTransition?e.wrapperEl.addEventListener("transitionend",y):C()};if(e.autoplay.paused=!0,K){m&&(c=e.params.autoplay.delay),m=!1,Y();return}c=(c||e.params.autoplay.delay)-(new Date().getTime()-u),!(e.isEnd&&c<0&&!e.params.loop)&&(c<0&&(c=0),Y())},C=()=>{e.isEnd&&c<0&&!e.params.loop||e.destroyed||!e.autoplay.running||(u=new Date().getTime(),v?(v=!1,A(c)):A(),e.autoplay.paused=!1,i("autoplayResume"))},L=()=>{if(e.destroyed||!e.autoplay.running)return;const $=nr();$.visibilityState==="hidden"&&(v=!0,T(!0)),$.visibilityState==="visible"&&C()},P=$=>{$.pointerType==="mouse"&&(v=!0,b=!0,!(e.animating||e.autoplay.paused)&&T(!0))},_=$=>{$.pointerType==="mouse"&&(b=!1,e.autoplay.paused&&C())},D=()=>{e.params.autoplay.pauseOnMouseEnter&&(e.el.addEventListener("pointerenter",P),e.el.addEventListener("pointerleave",_))},k=()=>{e.el&&typeof e.el!="string"&&(e.el.removeEventListener("pointerenter",P),e.el.removeEventListener("pointerleave",_))},M=()=>{nr().addEventListener("visibilitychange",L)},O=()=>{nr().removeEventListener("visibilitychange",L)};r("init",()=>{e.params.autoplay.enabled&&(D(),M(),S())}),r("destroy",()=>{k(),O(),e.autoplay.running&&w()}),r("_freeModeStaticRelease",()=>{(h||v)&&C()}),r("_freeModeNoMomentumRelease",()=>{e.params.autoplay.disableOnInteraction?w():T(!0,!0)}),r("beforeTransitionStart",($,K,Y)=>{e.destroyed||!e.autoplay.running||(Y||!e.params.autoplay.disableOnInteraction?T(!0,!0):w())}),r("sliderFirstMove",()=>{if(!(e.destroyed||!e.autoplay.running)){if(e.params.autoplay.disableOnInteraction){w();return}p=!0,h=!1,v=!1,g=setTimeout(()=>{v=!0,h=!0,T(!0)},200)}}),r("touchEnd",()=>{if(!(e.destroyed||!e.autoplay.running||!p)){if(clearTimeout(g),clearTimeout(s),e.params.autoplay.disableOnInteraction){h=!1,p=!1;return}h&&e.params.cssMode&&C(),h=!1,p=!1}}),r("slideChange",()=>{e.destroyed||!e.autoplay.running||(m=!0)}),Object.assign(e.autoplay,{start:S,stop:w,pause:T,resume:C})}const Uz={class:"image-gallery-swiper"},Hz={class:"swiper-slide-container"},Vz=["src"],Gz=Ce({__name:"ImageGallerySwiper",props:{images:{},isActive:{type:Boolean}},emits:["update:isEnd"],setup(n,{expose:e,emit:t}){const r=n,i=t,o=_o(),s=[uT,zz];at(()=>r.isActive,(f,p)=>{var h,g;c=!1,console.log("isActive变化:",p,"->",f),a.value&&(f?(h=a.value.autoplay)==null||h.start():(g=a.value.autoplay)==null||g.stop())});const a=G(null),l=f=>{console.log("ImageGallerySwiper实例已创建"),console.log("初始isActive值:",r.isActive),console.log("自动播放配置:",f.params.autoplay),a.value=f};Nt(()=>{console.log("组件已挂载，isActive值:",r.isActive),a.value&&(r.isActive?(a.value.autoplay.start(),console.log("已手动启动自动播放")):(a.value.autoplay.stop(),console.log("已手动停止自动播放")))}),e({toggleAutoplay:()=>{a.value&&(a.value.autoplay.running?(a.value.autoplay.stop(),console.log("已手动停止自动播放")):(a.value.autoplay.start(),console.log("已手动启动自动播放")))}});let c=!1;const u=()=>{a.value.isEnd&&!o.isLoop&&r.isActive&&(c?console.log("图片切换: 已触发过结束事件，3秒内不再重复触发"):(console.log("图片切换: 当前为活动状态，到达最后一张，非循环播放, 延迟3秒后触发isEnd事件"),c=!0,setTimeout(()=>{r.isActive&&i("update:isEnd",!0)},1500)))};return(f,p)=>(Rt(),_n("div",Uz,[qe(Me(Tp),{modules:s,"slides-per-view":"auto","space-between":1,loop:Me(o).isLoop,autoplay:f.isActive?{delay:1500,disableOnInteraction:!0}:!1,pagination:{clickable:!0,type:"fraction"},nested:!0,class:"gallery-swiper",onSwiper:l,onSlideChangeTransitionEnd:u},{default:ut(()=>[(Rt(!0),_n(mt,null,ld(f.images,(h,g)=>(Rt(),xn(Me(wp),{key:g},{default:ut(()=>[rt("div",Hz,[rt("img",{src:h,alt:"图片 {{ idx }}",class:"swiper-slide-image"},null,8,Vz)])]),_:2},1024))),128))]),_:1},8,["loop","autoplay"])]))}}),wi=(n,e)=>{const t=n.__vccOpts||n;for(const[r,i]of e)t[r]=i;return t},Wz=wi(Gz,[["__scopeId","data-v-03ba1aeb"]]),jz={class:"bottom-info-bar"},Kz={class:"author"},qz=Ce({__name:"BottomInfoBar",props:{item:{}},setup(n){return(e,t)=>(Rt(),_n("div",jz,[rt("h3",null,"@"+mn(e.item.author),1),rt("p",Kz,mn(e.item.title),1)]))}}),Yz=wi(qz,[["__scopeId","data-v-499e7a75"]]),Xz="/comment_white.svg",Qz=rc("itemState",{state:()=>({likes:[],favorites:[],follows:[]}),getters:{isLiked:n=>e=>n.likes.includes(e),isFavorited:n=>e=>n.favorites.includes(e),isFollowing:n=>e=>n.follows.includes(e)},actions:{toggleLike(n){const e=this.likes.indexOf(n);e>-1?this.likes.splice(e,1):this.likes.push(n)},toggleFavorite(n){const e=this.favorites.indexOf(n);e>-1?this.favorites.splice(e,1):this.favorites.push(n)},toggleFollow(n){const e=this.follows.indexOf(n);e>-1?this.follows.splice(e,1):this.follows.push(n)}},persist:!0}),Zz={class:"sidebar-icons"},Jz={class:"avatar-container"},e4=["src","alt"],t4=["src","alt","title"],n4={class:"icons-container"},r4={class:"icon-item",title:"喜欢"},i4=["src","alt"],o4={class:"count"},s4={class:"icon-item",title:"评论"},a4={class:"count"},l4={class:"icon-item",title:"收藏"},d4=["src","alt"],c4={class:"count"},u4=["src","alt"],f4={class:"count"},h4=Ce({__name:"SidebarIcons",props:{item:{},index:{}},setup(n){const e=n,t=Qz(),r=_o(),i=U(()=>t.isFollowing(e.item.author)),o=U(()=>t.isLiked(e.item.videoUrl)),s=U(()=>t.isFavorited(e.item.videoUrl)),a=G(null),l=()=>{a.value&&(a.value.src="/src/assets/vue.svg")},c=(()=>{const h={};return(g,m)=>(h[m]||(h[m]=Math.floor(Math.random()*g)),h[m])})(),u=()=>{console.log(`【卡片 ${e.index}】切换${t.isFollowing(e.item.author)?"取消":"关注"}状态`,e.item.author),t.toggleFollow(e.item.author)},f=()=>{console.log(`【卡片 ${e.index}】切换${t.isLiked(e.item.videoUrl)?"取消":"喜欢❤️"}状态`,e.item.videoUrl),t.toggleLike(e.item.videoUrl)},p=()=>{console.log(`【卡片 ${e.index}】切换${t.isFavorited(e.item.videoUrl)?"取消":"收藏⭐"}状态`,e.item.videoUrl),t.toggleFavorite(e.item.videoUrl)};return(h,g)=>(Rt(),_n("div",Zz,[rt("div",Jz,[rt("img",{src:`https://picsum.photos/50/50?random=${Me(c)(1e3,"avatar_"+e.item.author)}`,alt:h.item.author,class:"avatar",onError:l,ref_key:"avatarRef",ref:a},null,40,e4),rt("div",{class:"follow-icon",onClick:u},[rt("img",{src:i.value?"/followed.svg":"/follow.svg",alt:i.value?"已关注":"关注",title:i.value?"已关注":"关注",style:{width:"24px",height:"24px"}},null,8,t4)])]),rt("div",n4,[rt("div",r4,[rt("img",{onClick:f,src:o.value?"/liked.svg":"/like.svg",alt:o.value?"已喜欢":"喜欢",style:{width:"24px",height:"24px",cursor:"pointer"}},null,8,i4),rt("span",o4,mn(Me(c)(1e3,"like_count_"+e.item.id))+"w",1)]),rt("div",s4,[g[1]||(g[1]=rt("img",{src:Xz,alt:"评论",style:{width:"24px",height:"24px"}},null,-1)),rt("span",a4,mn(Me(c)(100,"comment_count_"+e.item.id))+"w",1)]),rt("div",l4,[rt("img",{onClick:p,src:s.value?"/collected.svg":"/collect.svg",alt:s.value?"已收藏":"收藏",style:{width:"24px",height:"24px",cursor:"pointer"}},null,8,d4),rt("span",c4,mn(Me(c)(1e3,"favorite_count_"+e.item.id)),1)]),rt("div",{class:"icon-item",title:"分享",onClick:g[0]||(g[0]=m=>Me(r).toggleLoop())},[rt("img",{src:Me(r).isLoop?"/shared.svg":"/share.svg",alt:Me(r).isLoop?"已分享":"分享",style:{width:"24px",height:"24px",cursor:"pointer"}},null,8,u4),rt("span",f4,mn(Me(r).isLoop?"循环":"切换"),1)])])]))}}),p4=wi(h4,[["__scopeId","data-v-4108ac0e"]]),Oe=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},g4=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=m4},m4=Number.MAX_SAFE_INTEGER||9007199254740991;let Ge=function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n}({}),oe=function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",n.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",n.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.ASSET_LIST_LOAD_ERROR="assetListLoadError",n.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",n.ASSET_LIST_PARSING_ERROR="assetListParsingError",n.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.ATTACH_MEDIA_ERROR="attachMediaError",n.UNKNOWN="unknown",n}({}),I=function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.MEDIA_ENDED="hlsMediaEnded",n.STALL_RESOLVED="hlsStallResolved",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFERED_TO_END="hlsBufferedToEnd",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n.ASSET_LIST_LOADING="hlsAssetListLoading",n.ASSET_LIST_LOADED="hlsAssetListLoaded",n.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",n.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",n.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",n.INTERSTITIAL_STARTED="hlsInterstitialStarted",n.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",n.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",n.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",n.INTERSTITIAL_ENDED="hlsInterstitialEnded",n.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",n.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",n.EVENT_CUE_ENTER="hlsEventCueEnter",n}({});var ct={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Ue={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class es{constructor(e,t=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=r}sample(e,t){const r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class v4{constructor(e,t,r,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new es(e),this.fast_=new es(t),this.defaultTTFB_=i,this.ttfb_=new es(e)}update(e,t){const{slow_:r,fast_:i,ttfb_:o}=this;r.halfLife!==e&&(this.slow_=new es(e,r.getEstimate(),r.getTotalWeight())),i.halfLife!==t&&(this.fast_=new es(t,i.getEstimate(),i.getTotalWeight())),o.halfLife!==e&&(this.ttfb_=new es(e,o.getEstimate(),o.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const r=8*t,i=e/1e3,o=r/i;this.fast_.sample(i,o),this.slow_.sample(i,o)}sampleTTFB(e){const t=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function b4(n,e,t){return(e=x4(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kt(){return kt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},kt.apply(null,arguments)}function Yv(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function _t(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yv(Object(t),!0).forEach(function(r){b4(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yv(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function y4(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function x4(n){var e=y4(n,"string");return typeof e=="symbol"?e:e+""}class kr{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${e}]:`;this.trace=Ui,this.debug=t.debug.bind(null,r),this.log=t.log.bind(null,r),this.warn=t.warn.bind(null,r),this.info=t.info.bind(null,r),this.error=t.error.bind(null,r)}}const Ui=function(){},S4={trace:Ui,debug:Ui,log:Ui,warn:Ui,info:Ui,error:Ui};function jf(){return kt({},S4)}function C4(n,e){const t=self.console[n];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${n}] >`):Ui}function Xv(n,e,t){return e[n]?e[n].bind(e):C4(n,t)}const Kf=jf();function T4(n,e,t){const r=jf();if(typeof console=="object"&&n===!0||typeof n=="object"){const i=["debug","log","info","warn","error"];i.forEach(o=>{r[o]=Xv(o,n,t)});try{r.log(`Debug logs enabled for "${e}" in hls.js version 1.6.8`)}catch{return jf()}i.forEach(o=>{Kf[o]=Xv(o,n)})}else kt(Kf,r);return r}const wt=Kf;function Zi(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function w4(n){return typeof self<"u"&&n===self.ManagedMediaSource}function fT(n,e){const t=Object.keys(n),r=Object.keys(e),i=t.length,o=r.length;return!i||!o||i===o&&!t.some(s=>r.indexOf(s)===-1)}function rr(n,e=!1){if(typeof TextDecoder<"u"){const d=new TextDecoder("utf-8").decode(n);if(e){const c=d.indexOf("\0");return c!==-1?d.substring(0,c):d}return d.replace(/\0/g,"")}const t=n.length;let r,i,o,s="",a=0;for(;a<t;){if(r=n[a++],r===0&&e)return s;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:s+=String.fromCharCode(r);break;case 12:case 13:i=n[a++],s+=String.fromCharCode((r&31)<<6|i&63);break;case 14:i=n[a++],o=n[a++],s+=String.fromCharCode((r&15)<<12|(i&63)<<6|(o&63)<<0);break}}return s}const fi={hexDump:function(n){let e="";for(let t=0;t<n.length;t++){let r=n[t].toString(16);r.length<2&&(r="0"+r),e+=r}return e}};function hT(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function E4(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lu={exports:{}},Qv;function R4(){return Qv||(Qv=1,function(n,e){(function(t){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,o=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,d,c){if(c=c||{},l=l.trim(),d=d.trim(),!d){if(!c.alwaysNormalize)return l;var u=a.parseURL(l);if(!u)throw new Error("Error trying to parse base URL.");return u.path=a.normalizePath(u.path),a.buildURLFromParts(u)}var f=a.parseURL(d);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return c.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):d;var p=a.parseURL(l);if(!p)throw new Error("Error trying to parse base URL.");if(!p.netLoc&&p.path&&p.path[0]!=="/"){var h=i.exec(p.path);p.netLoc=h[1],p.path=h[2]}p.netLoc&&!p.path&&(p.path="/");var g={scheme:p.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(g.netLoc=p.netLoc,f.path[0]!=="/"))if(!f.path)g.path=p.path,f.params||(g.params=p.params,f.query||(g.query=p.query));else{var m=p.path,v=m.substring(0,m.lastIndexOf("/")+1)+f.path;g.path=a.normalizePath(v)}return g.path===null&&(g.path=c.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(g)},parseURL:function(l){var d=r.exec(l);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(o,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=a})()}(Lu)),Lu.exports}var Ep=R4();class Rp{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var Mt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class pT{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,I4(this,"stats")}setByteRange(e,t){const r=e.split("@",2);let i;r.length===1?i=(t==null?void 0:t.byteRangeEndOffset)||0:i=parseInt(r[1]),this._byteRange=[i,parseInt(r[0])+i]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[Mt.AUDIO]:null,[Mt.VIDEO]:null,[Mt.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Rp),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=Ep.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[Mt.AUDIO]=null,e[Mt.VIDEO]=null,e[Mt.AUDIOVIDEO]=null}}function en(n){return n.sn!=="initSegment"}class Pu extends pT{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(Oe(e)&&Oe(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1){const i=this._decryptdata=this.levelkeys[r[0]]||null;if(i)return i.getDecryptData(this.sn)}}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=Oe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const r=Object.keys(this.levelkeys),i=r.length;if(i>1||i===1&&(t=this.levelkeys[r[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!Oe(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return en(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,r,i,o,s=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:t,endPTS:r,startDTS:i,endDTS:o,partial:s};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,r),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,o)}}class A4 extends pT{constructor(e,t,r,i,o){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const s=e.enumeratedString("BYTERANGE");s&&this.setByteRange(s,o),o&&(this.fragOffset=o.fragOffset+o.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function gT(n,e){const t=Object.getPrototypeOf(n);if(t){const r=Object.getOwnPropertyDescriptor(t,e);return r||gT(t,e)}}function I4(n,e){const t=gT(n,e);t&&(t.enumerable=!0,Object.defineProperty(n,e,t))}const Zv=Math.pow(2,32)-1,L4=[].push,mT={video:1,audio:2,id3:3,text:4};function nn(n){return String.fromCharCode.apply(null,n)}function vT(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function Je(n,e){const t=bT(n,e);return t<0?4294967296+t:t}function Jv(n,e){let t=Je(n,e);return t*=Math.pow(2,32),t+=Je(n,e+4),t}function bT(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function P4(n){const e=n.byteLength;for(let t=0;t<e;){const r=Je(n,t);if(r>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=r>1?t+r:e}return!1}function dt(n,e){const t=[];if(!e.length)return t;const r=n.byteLength;for(let i=0;i<r;){const o=Je(n,i),s=nn(n.subarray(i+4,i+8)),a=o>1?i+o:r;if(s===e[0])if(e.length===1)t.push(n.subarray(i+8,a));else{const l=dt(n.subarray(i+8,a),e.slice(1));l.length&&L4.apply(t,l)}i=a}return t}function _4(n){const e=[],t=n[0];let r=8;const i=Je(n,r);r+=4;let o=0,s=0;t===0?(o=Je(n,r),s=Je(n,r+4),r+=8):(o=Jv(n,r),s=Jv(n,r+8),r+=16),r+=2;let a=n.length+s;const l=vT(n,r);r+=2;for(let d=0;d<l;d++){let c=r;const u=Je(n,c);c+=4;const f=u&2147483647;if((u&2147483648)>>>31===1)return wt.warn("SIDX has hierarchical references (not supported)"),null;const h=Je(n,c);c+=4,e.push({referenceSize:f,subsegmentDuration:h,info:{duration:h/i,start:a,end:a+f-1}}),a+=f,c+=4,r=c}return{earliestPresentationTime:o,timescale:i,version:t,referencesCount:l,references:e}}function yT(n){const e=[],t=dt(n,["moov","trak"]);for(let i=0;i<t.length;i++){const o=t[i],s=dt(o,["tkhd"])[0];if(s){let a=s[0];const l=Je(s,a===0?12:20),d=dt(o,["mdia","mdhd"])[0];if(d){a=d[0];const c=Je(d,a===0?12:20),u=dt(o,["mdia","hdlr"])[0];if(u){const f=nn(u.subarray(8,12)),p={soun:Mt.AUDIO,vide:Mt.VIDEO}[f],h=dt(o,["mdia","minf","stbl","stsd"])[0],g=k4(h);p?(e[l]={timescale:c,type:p,stsd:g},e[p]=_t({timescale:c,id:l},g)):e[l]={timescale:c,type:f,stsd:g}}}}}return dt(n,["moov","mvex","trex"]).forEach(i=>{const o=Je(i,4),s=e[o];s&&(s.default={duration:Je(i,12),flags:Je(i,20)})}),e}function k4(n){const e=n.subarray(8),t=e.subarray(86),r=nn(e.subarray(4,8));let i=r,o;const s=r==="enca"||r==="encv";if(s){const d=dt(e,[r])[0].subarray(r==="enca"?28:78);dt(d,["sinf"]).forEach(u=>{const f=dt(u,["schm"])[0];if(f){const p=nn(f.subarray(4,8));if(p==="cbcs"||p==="cenc"){const h=dt(u,["frma"])[0];h&&(i=nn(h))}}})}const a=i;switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const l=dt(t,["avcC"])[0];l&&l.length>3&&(i+="."+Pl(l[1])+Pl(l[2])+Pl(l[3]),o=Ll(a==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const l=dt(e,[r])[0],d=dt(l.subarray(28),["esds"])[0];if(d&&d.length>7){let c=4;if(d[c++]!==3)break;c=_u(d,c),c+=2;const u=d[c++];if(u&128&&(c+=2),u&64&&(c+=d[c++]),d[c++]!==4)break;c=_u(d,c);const f=d[c++];if(f===64)i+="."+Pl(f);else break;if(c+=12,d[c++]!==5)break;c=_u(d,c);const p=d[c++];let h=(p&248)>>3;h===31&&(h+=1+((p&7)<<3)+((d[c]&224)>>5)),i+="."+h}break}case"hvc1":case"hev1":{const l=dt(t,["hvcC"])[0];if(l&&l.length>12){const d=l[1],c=["","A","B","C"][d>>6],u=d&31,f=Je(l,2),p=(d&32)>>5?"H":"L",h=l[12],g=l.subarray(6,12);i+="."+c+u,i+="."+D4(f).toString(16).toUpperCase(),i+="."+p+h;let m="";for(let v=g.length;v--;){const b=g[v];(b||m)&&(m="."+b.toString(16).toUpperCase()+m)}i+=m}o=Ll(a=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{i=Ll(i,t)||i;break}case"vp09":{const l=dt(t,["vpcC"])[0];if(l&&l.length>6){const d=l[4],c=l[5],u=l[6]>>4&15;i+="."+zr(d)+"."+zr(c)+"."+zr(u)}break}case"av01":{const l=dt(t,["av1C"])[0];if(l&&l.length>2){const d=l[1]>>>5,c=l[1]&31,u=l[2]>>>7?"H":"M",f=(l[2]&64)>>6,p=(l[2]&32)>>5,h=d===2&&f?p?12:10:f?10:8,g=(l[2]&16)>>4,m=(l[2]&8)>>3,v=(l[2]&4)>>2,b=l[2]&3;i+="."+d+"."+zr(c)+u+"."+zr(h)+"."+g+"."+m+v+b+"."+zr(1)+"."+zr(1)+"."+zr(1)+"."+0,o=Ll("dav1",t)}break}}return{codec:i,encrypted:s,supplemental:o}}function Ll(n,e){const t=dt(e,["dvvC"]),r=t.length?t[0]:dt(e,["dvcC"])[0];if(r){const i=r[2]>>1&127,o=r[2]<<5&32|r[3]>>3&31;return n+"."+zr(i)+"."+zr(o)}}function D4(n){let e=0;for(let t=0;t<32;t++)e|=(n>>t&1)<<31-t;return e>>>0}function _u(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function Pl(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function zr(n){return(n<10?"0":"")+n}function O4(n,e){if(!n||!e)return n;const t=e.keyId;return t&&e.isCommonEncryption&&dt(n,["moov","trak"]).forEach(i=>{const s=dt(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let a=dt(s,["enca"]);const l=a.length>0;l||(a=dt(s,["encv"])),a.forEach(d=>{const c=l?d.subarray(28):d.subarray(78);dt(c,["sinf"]).forEach(f=>{const p=xT(f);if(p){const h=p.subarray(8,24);h.some(g=>g!==0)||(wt.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${fi.hexDump(h)} -> ${fi.hexDump(t)}`),p.set(t,8))}})})}),n}function xT(n){const e=dt(n,["schm"])[0];if(e){const t=nn(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return dt(n,["schi","tenc"])[0]}return null}function M4(n,e,t){const r={},i=dt(n,["moof","traf"]);for(let o=0;o<i.length;o++){const s=i[o],a=dt(s,["tfhd"])[0],l=Je(a,4),d=e[l];if(!d)continue;const c=r[l]||(r[l]={start:NaN,duration:0,sampleCount:0,timescale:d.timescale,type:d.type}),u=dt(s,["tfdt"])[0];if(u){const y=u[0];let x=Je(u,4);y===1&&(x===Zv?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(x*=Zv+1,x+=Je(u,8))),Oe(x)&&(!Oe(c.start)||x<c.start)&&(c.start=x)}const f=d.default,p=Je(a,0)|(f==null?void 0:f.flags);let h=(f==null?void 0:f.duration)||0;p&8&&(p&2?h=Je(a,12):h=Je(a,8));const g=dt(s,["trun"]);let m=c.start||0,v=0,b=h;for(let y=0;y<g.length;y++){const x=g[y],E=Je(x,4),A=c.sampleCount;c.sampleCount+=E;const S=x[3]&1,w=x[3]&4,T=x[2]&1,C=x[2]&2,L=x[2]&4,P=x[2]&8;let _=8,D=E;for(S&&(_+=4),w&&E&&(!(x[_+1]&1)&&c.keyFrameIndex===void 0&&(c.keyFrameIndex=A),_+=4,T?(b=Je(x,_),_+=4):b=h,C&&(_+=4),P&&(_+=4),m+=b,v+=b,D--);D--;)T?(b=Je(x,_),_+=4):b=h,C&&(_+=4),L&&(x[_+1]&1||c.keyFrameIndex===void 0&&(c.keyFrameIndex=c.sampleCount-(D+1),c.keyFrameStart=m),_+=4),P&&(_+=4),m+=b,v+=b;!v&&h&&(v+=h*E)}c.duration+=v}if(!Object.keys(r).some(o=>r[o].duration)){let o=1/0,s=0;const a=dt(n,["sidx"]);for(let l=0;l<a.length;l++){const d=_4(a[l]);if(d!=null&&d.references){o=Math.min(o,d.earliestPresentationTime/d.timescale);const c=d.references.reduce((u,f)=>u+f.info.duration||0,0);s=Math.max(s,c+d.earliestPresentationTime/d.timescale)}}s&&Oe(s)&&Object.keys(r).forEach(l=>{r[l].duration||(r[l].duration=s*r[l].timescale-r[l].start)})}return r}function F4(n){const e={valid:null,remainder:null},t=dt(n,["moof"]);if(t.length<2)return e.remainder=n,e;const r=t[t.length-1];return e.valid=n.slice(0,r.byteOffset-8),e.remainder=n.slice(r.byteOffset-8),e}function mr(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function e0(n,e){const t=[],r=e.samples,i=e.timescale,o=e.id;let s=!1;return dt(r,["moof"]).map(l=>{const d=l.byteOffset-8;dt(l,["traf"]).map(u=>{const f=dt(u,["tfdt"]).map(p=>{const h=p[0];let g=Je(p,4);return h===1&&(g*=Math.pow(2,32),g+=Je(p,8)),g/i})[0];return f!==void 0&&(n=f),dt(u,["tfhd"]).map(p=>{const h=Je(p,4),g=Je(p,0)&16777215,m=(g&1)!==0,v=(g&2)!==0,b=(g&8)!==0;let y=0;const x=(g&16)!==0;let E=0;const A=(g&32)!==0;let S=8;h===o&&(m&&(S+=8),v&&(S+=4),b&&(y=Je(p,S),S+=4),x&&(E=Je(p,S),S+=4),A&&(S+=4),e.type==="video"&&(s=yc(e.codec)),dt(u,["trun"]).map(w=>{const T=w[0],C=Je(w,0)&16777215,L=(C&1)!==0;let P=0;const _=(C&4)!==0,D=(C&256)!==0;let k=0;const M=(C&512)!==0;let O=0;const $=(C&1024)!==0,K=(C&2048)!==0;let Y=0;const H=Je(w,4);let B=8;L&&(P=Je(w,B),B+=4),_&&(B+=4);let X=P+d;for(let se=0;se<H;se++){if(D?(k=Je(w,B),B+=4):k=y,M?(O=Je(w,B),B+=4):O=E,$&&(B+=4),K&&(T===0?Y=Je(w,B):Y=bT(w,B),B+=4),e.type===Mt.VIDEO){let pe=0;for(;pe<O;){const te=Je(r,X);if(X+=4,$4(s,r[X])){const W=r.subarray(X,X+te);Ap(W,s?2:1,n+Y/i,t)}X+=te,pe+=te+4}}n+=k/i}}))})})}),t}function yc(n){if(!n)return!1;const e=n.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function $4(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Ap(n,e,t,r){const i=ST(n);let o=0;o+=e;let s=0,a=0,l=0;for(;o<i.length;){s=0;do{if(o>=i.length)break;l=i[o++],s+=l}while(l===255);a=0;do{if(o>=i.length)break;l=i[o++],a+=l}while(l===255);const d=i.length-o;let c=o;if(a<d)o+=a;else if(a>d){wt.error(`Malformed SEI payload. ${a} is too small, only ${d} bytes left to parse.`);break}if(s===4){if(i[c++]===181){const f=vT(i,c);if(c+=2,f===49){const p=Je(i,c);if(c+=4,p===1195456820){const h=i[c++];if(h===3){const g=i[c++],m=31&g,v=64&g,b=v?2+m*3:0,y=new Uint8Array(b);if(v){y[0]=g;for(let x=1;x<b;x++)y[x]=i[c++]}r.push({type:h,payloadType:s,pts:t,bytes:y})}}}}}else if(s===5&&a>16){const u=[];for(let h=0;h<16;h++){const g=i[c++].toString(16);u.push(g.length==1?"0"+g:g),(h===3||h===5||h===7||h===9)&&u.push("-")}const f=a-16,p=new Uint8Array(f);for(let h=0;h<f;h++)p[h]=i[c++];r.push({payloadType:s,pts:t,uuid:u.join(""),userData:rr(p),userDataBytes:p})}}}function ST(n){const e=n.byteLength,t=[];let r=1;for(;r<e-2;)n[r]===0&&n[r+1]===0&&n[r+2]===3?(t.push(r+2),r+=2):r++;if(t.length===0)return n;const i=e-t.length,o=new Uint8Array(i);let s=0;for(r=0;r<i;s++,r++)s===t[0]&&(s++,t.shift()),o[r]=n[s];return o}function B4(n){const e=n[0];let t="",r="",i=0,o=0,s=0,a=0,l=0,d=0;if(e===0){for(;nn(n.subarray(d,d+1))!=="\0";)t+=nn(n.subarray(d,d+1)),d+=1;for(t+=nn(n.subarray(d,d+1)),d+=1;nn(n.subarray(d,d+1))!=="\0";)r+=nn(n.subarray(d,d+1)),d+=1;r+=nn(n.subarray(d,d+1)),d+=1,i=Je(n,12),o=Je(n,16),a=Je(n,20),l=Je(n,24),d=28}else if(e===1){d+=4,i=Je(n,d),d+=4;const u=Je(n,d);d+=4;const f=Je(n,d);for(d+=4,s=2**32*u+f,g4(s)||(s=Number.MAX_SAFE_INTEGER,wt.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=Je(n,d),d+=4,l=Je(n,d),d+=4;nn(n.subarray(d,d+1))!=="\0";)t+=nn(n.subarray(d,d+1)),d+=1;for(t+=nn(n.subarray(d,d+1)),d+=1;nn(n.subarray(d,d+1))!=="\0";)r+=nn(n.subarray(d,d+1)),d+=1;r+=nn(n.subarray(d,d+1)),d+=1}const c=n.subarray(d,n.byteLength);return{schemeIdUri:t,value:r,timeScale:i,presentationTime:s,presentationTimeDelta:o,eventDuration:a,id:l,payload:c}}function N4(n,...e){const t=e.length;let r=8,i=t;for(;i--;)r+=e[i].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(n,4),i=0,r=8;i<t;i++)o.set(e[i],r),r+=e[i].byteLength;return o}function z4(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let r,i;r=0,i=new Uint8Array;let o;r>0?(o=new Uint8Array(4),e.length>0&&new DataView(o.buffer).setUint32(0,e.length,!1)):o=new Uint8Array;const s=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(s.buffer).setUint32(0,t.byteLength,!1),N4([112,115,115,104],new Uint8Array([r,0,0,0]),n,o,i,s,t||new Uint8Array)}const CT=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),_s={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Ip(n,e){const t=_s[e];return!!t&&!!t[n.slice(0,4)]}function qf(n,e,t=!0){return!n.split(",").some(r=>!Lp(r,e,t))}function Lp(n,e,t=!0){var r;const i=Zi(t);return(r=i==null?void 0:i.isTypeSupported(Ga(n,e)))!=null?r:!1}function Ga(n,e){return`${e}/mp4;codecs=${n}`}function t0(n){if(n){const e=n.substring(0,4);return _s.video[e]}return 2}function _d(n){const e=CT();return n.split(",").reduce((t,r)=>{const o=e&&yc(r)?9:_s.video[r];return o?(o*2+t)/(t?3:2):(_s.audio[r]+t)/(t?2:1)},0)}const ku={};function U4(n,e=!0){if(ku[n])return ku[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[n];for(let i=0;i<t.length;i++){var r;if(Lp(t[i],"audio",e))return ku[n]=t[i],t[i];if(t[i]==="mp3"&&(r=Zi(e))!=null&&r.isTypeSupported("audio/mpeg"))return""}return n}const H4=/flac|opus|mp4a\.40\.34/i;function kd(n,e=!0){return n.replace(H4,t=>U4(t.toLowerCase(),e))}function V4(n,e){const t=[];if(n){const r=n.split(",");for(let i=0;i<r.length;i++)Ip(r[i],"video")||t.push(r[i])}return e&&t.push(e),t.join(",")}function Xl(n,e){if(n&&(n.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(n)!==-1)&&(n0(n,"audio")||n0(n,"video")))return n;if(e){const t=e.split(",");if(t.length>1){if(n){for(let r=t.length;r--;)if(t[r].substring(0,4)===n.substring(0,4))return t[r]}return t[0]}}return e||n}function n0(n,e){return Ip(n,e)&&Lp(n,e)}function G4(n){const e=n.split(",");for(let t=0;t<e.length;t++){const r=e[t].split(".");r.length>2&&r[0]==="avc1"&&(e[t]=`avc1.${parseInt(r[1]).toString(16)}${("000"+parseInt(r[2]).toString(16)).slice(-4)}`)}return e.join(",")}function W4(n){if(n.startsWith("av01.")){const e=n.split("."),t=["0","111","01","01","01","0"];for(let r=e.length;r>4&&r<10;r++)e[r]=t[r-4];return e.join(".")}return n}function r0(n){const e=Zi(n)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Yf(n){return n.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const TT={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function wT(n,e){return{supported:!1,configurations:e,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:n}}function j4(n,e,t,r,i,o){const s=n.videoCodec,a=n.audioCodec?n.audioGroups:null,l=o==null?void 0:o.audioCodec,d=o==null?void 0:o.channels,c=d?parseInt(d):l?1/0:2;let u=null;if(a!=null&&a.length)try{a.length===1&&a[0]?u=e.groups[a[0]].channels:u=a.reduce((f,p)=>{if(p){const h=e.groups[p];if(!h)throw new Error(`Audio track group ${p} not found`);Object.keys(h.channels).forEach(g=>{f[g]=(f[g]||0)+h.channels[g]})}return f},{2:0})}catch{return!0}return s!==void 0&&(s.split(",").some(f=>yc(f))||n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(r,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(i,8e6))||!!u&&Oe(c)&&Object.keys(u).some(f=>parseInt(f)>c)}function ET(n,e,t,r={}){const i=n.videoCodec;if(!i&&!n.audioCodec||!t)return Promise.resolve(TT);const o=[],s=K4(n),a=s.length,l=q4(n,e,a>0),d=l.length;for(let c=a||1*d||1;c--;){const u={type:"media-source"};if(a&&(u.video=s[c%a]),d){u.audio=l[c%d];const f=u.audio.bitrate;u.video&&f&&(u.video.bitrate-=f)}o.push(u)}if(i){const c=navigator.userAgent;if(i.split(",").some(u=>yc(u))&&CT())return Promise.resolve(wT(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${c})`),o))}return Promise.all(o.map(c=>{const u=X4(c);return r[u]||(r[u]=t.decodingInfo(c))})).then(c=>({supported:!c.some(u=>!u.supported),configurations:o,decodingInfoResults:c})).catch(c=>({supported:!1,configurations:o,decodingInfoResults:[],error:c}))}function K4(n){var e;const t=(e=n.videoCodec)==null?void 0:e.split(","),r=RT(n),i=n.width||640,o=n.height||480,s=n.frameRate||30,a=n.videoRange.toLowerCase();return t?t.map(l=>{const d={contentType:Ga(W4(l),"video"),width:i,height:o,bitrate:r,framerate:s};return a!=="sdr"&&(d.transferFunction=a),d}):[]}function q4(n,e,t){var r;const i=(r=n.audioCodec)==null?void 0:r.split(","),o=RT(n);return i&&n.audioGroups?n.audioGroups.reduce((s,a)=>{var l;const d=a?(l=e.groups[a])==null?void 0:l.tracks:null;return d?d.reduce((c,u)=>{if(u.groupId===a){const f=parseFloat(u.channels||"");i.forEach(p=>{const h={contentType:Ga(p,"audio"),bitrate:t?Y4(p,o):o};f&&(h.channels=""+f),c.push(h)})}return c},s):s},[]):[]}function Y4(n,e){if(e<=1)return 1;let t=128e3;return n==="ec-3"?t=768e3:n==="ac-3"&&(t=64e4),Math.min(e/2,t)}function RT(n){return Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)/1e3)*1e3||1}function X4(n){let e="";const{audio:t,video:r}=n;if(r){const i=Yf(r.contentType);e+=`${i}_r${r.height}x${r.width}f${Math.ceil(r.framerate)}${r.transferFunction||"sd"}_${Math.ceil(r.bitrate/1e5)}`}if(t){const i=Yf(t.contentType);e+=`${r?"_":""}${i}_c${t.channels}`}return e}const Xf=["NONE","TYPE-0","TYPE-1",null];function Q4(n){return Xf.indexOf(n)>-1}const Dd=["SDR","PQ","HLG"];function Z4(n){return!!n&&Dd.indexOf(n)>-1}var Ql={No:"",Yes:"YES",v2:"v2"};function i0(n){const{canSkipUntil:e,canSkipDateRanges:t,age:r}=n,i=r<e/2;return e&&i?t?Ql.v2:Ql.Yes:Ql.No}class o0{constructor(e,t,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=r}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Wa{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const r=(t=e.supplemental)==null?void 0:t.videoCodec;r&&r!==e.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return s0(this._audioGroups,e)}hasSubtitleGroup(e){return s0(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(t)===-1&&r.push(t)}else if(e==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(t)===-1&&r.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function s0(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function J4(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function eU(n,e){let t=!1,r=[];if(n&&(t=n!=="SDR",r=[n]),e){r=e.allowedVideoRanges||Dd.slice(0);const i=r.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:i&&J4(),t||(r=["SDR"])}return{preferHDR:t,allowedVideoRanges:r}}const tU=n=>{const e=new WeakSet;return(t,r)=>{if(n&&(r=n(t,r)),typeof r=="object"&&r!==null){if(e.has(r))return;e.add(r)}return r}},Ut=(n,e)=>JSON.stringify(n,tU(e));function nU(n,e,t,r,i){const o=Object.keys(n),s=r==null?void 0:r.channels,a=r==null?void 0:r.audioCodec,l=i==null?void 0:i.videoCodec,d=s&&parseInt(s)===2;let c=!1,u=!1,f=1/0,p=1/0,h=1/0,g=1/0,m=0,v=[];const{preferHDR:b,allowedVideoRanges:y}=eU(e,i);for(let w=o.length;w--;){const T=n[o[w]];c||(c=T.channels[2]>0),f=Math.min(f,T.minHeight),p=Math.min(p,T.minFramerate),h=Math.min(h,T.minBitrate),y.filter(L=>T.videoRanges[L]>0).length>0&&(u=!0)}f=Oe(f)?f:0,p=Oe(p)?p:0;const x=Math.max(1080,f),E=Math.max(30,p);h=Oe(h)?h:t,t=Math.max(h,t),u||(e=void 0);const A=o.length>1;return{codecSet:o.reduce((w,T)=>{const C=n[T];if(T===w)return w;if(v=u?y.filter(L=>C.videoRanges[L]>0):[],A){if(C.minBitrate>t)return $r(T,`min bitrate of ${C.minBitrate} > current estimate of ${t}`),w;if(!C.hasDefaultAudio)return $r(T,"no renditions with default or auto-select sound found"),w;if(a&&T.indexOf(a.substring(0,4))%5!==0)return $r(T,`audio codec preference "${a}" not found`),w;if(s&&!d){if(!C.channels[s])return $r(T,`no renditions with ${s} channel sound found (channels options: ${Object.keys(C.channels)})`),w}else if((!a||d)&&c&&C.channels[2]===0)return $r(T,"no renditions with stereo sound found"),w;if(C.minHeight>x)return $r(T,`min resolution of ${C.minHeight} > maximum of ${x}`),w;if(C.minFramerate>E)return $r(T,`min framerate of ${C.minFramerate} > maximum of ${E}`),w;if(!v.some(L=>C.videoRanges[L]>0))return $r(T,`no variants with VIDEO-RANGE of ${Ut(v)} found`),w;if(l&&T.indexOf(l.substring(0,4))%5!==0)return $r(T,`video codec preference "${l}" not found`),w;if(C.maxScore<m)return $r(T,`max score of ${C.maxScore} < selected max of ${m}`),w}return w&&(_d(T)>=_d(w)||C.fragmentError>n[w].fragmentError)?w:(g=C.minIndex,m=C.maxScore,T)},void 0),videoRanges:v,preferHDR:b,minFramerate:p,minBitrate:h,minIndex:g}}function $r(n,e){wt.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function AT(n){return n.reduce((e,t)=>{let r=e.groups[t.groupId];r||(r=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(t);const i=t.channels||"2";return r.channels[i]=(r.channels[i]||0)+1,r.hasDefault=r.hasDefault||t.default,r.hasAutoSelect=r.hasAutoSelect||t.autoselect,r.hasDefault&&(e.hasDefaultAudio=!0),r.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function rU(n,e,t,r){return n.slice(t,r+1).reduce((i,o,s)=>{if(!o.codecSet)return i;const a=o.audioGroups;let l=i[o.codecSet];l||(i[o.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:s,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,o.bitrate);const d=Math.min(o.height,o.width);return l.minHeight=Math.min(l.minHeight,d),l.minFramerate=Math.min(l.minFramerate,o.frameRate),l.minIndex=Math.min(l.minIndex,s),l.maxScore=Math.max(l.maxScore,o.score),l.fragmentError+=o.fragmentError,l.videoRanges[o.videoRange]=(l.videoRanges[o.videoRange]||0)+1,a&&a.forEach(c=>{if(!c)return;const u=e.groups[c];u&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?u.hasDefault:u.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(u.channels).forEach(f=>{l.channels[f]=(l.channels[f]||0)+u.channels[f]}))}),i},{})}function a0(n){if(!n)return n;const{lang:e,assocLang:t,characteristics:r,channels:i,audioCodec:o}=n;return{lang:e,assocLang:t,characteristics:r,channels:i,audioCodec:o}}function Vr(n,e,t){if("attrs"in n){const r=e.indexOf(n);if(r!==-1)return r}for(let r=0;r<e.length;r++){const i=e[r];if(Ao(n,i,t))return r}return-1}function Ao(n,e,t){const{groupId:r,name:i,lang:o,assocLang:s,default:a}=n,l=n.forced;return(r===void 0||e.groupId===r)&&(i===void 0||e.name===i)&&(o===void 0||iU(o,e.lang))&&(o===void 0||e.assocLang===s)&&(a===void 0||e.default===a)&&(l===void 0||e.forced===l)&&(!("characteristics"in n)||oU(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function iU(n,e="--"){return n.length===e.length?n===e:n.startsWith(e)||e.startsWith(n)}function oU(n,e=""){const t=n.split(","),r=e.split(",");return t.length===r.length&&!t.some(i=>r.indexOf(i)===-1)}function vo(n,e){const{audioCodec:t,channels:r}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(r===void 0||r===(e.channels||"2"))}function sU(n,e,t,r,i){const o=e[r],a=e.reduce((f,p,h)=>{const g=p.uri;return(f[g]||(f[g]=[])).push(h),f},{})[o.uri];a.length>1&&(r=Math.max.apply(Math,a));const l=o.videoRange,d=o.frameRate,c=o.codecSet.substring(0,4),u=l0(e,r,f=>{if(f.videoRange!==l||f.frameRate!==d||f.codecSet.substring(0,4)!==c)return!1;const p=f.audioGroups,h=t.filter(g=>!p||p.indexOf(g.groupId)!==-1);return Vr(n,h,i)>-1});return u>-1?u:l0(e,r,f=>{const p=f.audioGroups,h=t.filter(g=>!p||p.indexOf(g.groupId)!==-1);return Vr(n,h,i)>-1})}function l0(n,e,t){for(let r=e;r>-1;r--)if(t(n[r]))return r;for(let r=e+1;r<n.length;r++)if(t(n[r]))return r;return-1}function Od(n,e){var t;return!!n&&n!==((t=e.loadLevelObj)==null?void 0:t.uri)}class aU extends kr{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var r;const{fragCurrent:i,partCurrent:o,hls:s}=this,{autoLevelEnabled:a,media:l}=s;if(!i||!l)return;const d=performance.now(),c=o?o.stats:i.stats,u=o?o.duration:i.duration,f=d-c.loading.start,p=s.minAutoLevel,h=i.level,g=this._nextAutoLevel;if(c.aborted||c.loaded&&c.loaded===c.total||h<=p){this.clearTimer(),this._nextAutoLevel=-1;return}if(!a)return;const m=g>-1&&g!==h,v=!!t||m;if(!v&&(l.paused||!l.playbackRate||!l.readyState))return;const b=s.mainForwardBufferInfo;if(!v&&b===null)return;const y=this.bwEstimator.getEstimateTTFB(),x=Math.abs(l.playbackRate);if(f<=Math.max(y,1e3*(u/(x*2))))return;const E=b?b.len/x:0,A=c.loading.first?c.loading.first-c.loading.start:-1,S=c.loaded&&A>-1,w=this.getBwEstimate(),T=s.levels,C=T[h],L=Math.max(c.loaded,Math.round(u*(i.bitrate||C.averageBitrate)/8));let P=S?f-A:f;P<1&&S&&(P=Math.min(f,c.loaded*8/w));const _=S?c.loaded*1e3/P:0,D=y/1e3,k=_?(L-c.loaded)/_:L*8/w+D;if(k<=E)return;const M=_?_*8:w,O=((r=(t==null?void 0:t.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,$=this.hls.config.abrBandWidthUpFactor;let K=Number.POSITIVE_INFINITY,Y;for(Y=h-1;Y>p;Y--){const se=T[Y].maxBitrate,pe=!T[Y].details||O;if(K=this.getTimeToLoadFrag(D,M,u*se,pe),K<Math.min(E,u+D))break}if(K>=k||K>u*10)return;S?this.bwEstimator.sample(f-Math.min(y,A),c.loaded):this.bwEstimator.sampleTTFB(f);const H=T[Y].maxBitrate;this.getBwEstimate()*$>H&&this.resetEstimator(H);const B=this.findBestLevel(H,p,Y,0,E,1,1);B>-1&&(Y=B),this.warn(`Fragment ${i.sn}${o?" part "+o.index:""} of level ${h} is loading too slowly;
      Fragment duration: ${i.duration.toFixed(3)}
      Time to underbuffer: ${E.toFixed(3)} s
      Estimated load time for current fragment: ${k.toFixed(3)} s
      Estimated load time for down switch fragment: ${K.toFixed(3)} s
      TTFB estimate: ${A|0} ms
      Current BW estimate: ${Oe(w)?w|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Y} @ ${H|0} bps`),s.nextLoadLevel=s.nextAutoLevel=Y,this.clearTimer();const X=()=>{if(this.clearTimer(),this.fragCurrent===i&&this.hls.loadLevel===Y&&Y>0){const se=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Y>0?"and switching down":""}
      Fragment duration: ${i.duration.toFixed(3)} s
      Time to underbuffer: ${se.toFixed(3)} s`),i.abortRequests(),this.fragCurrent=this.partCurrent=null,Y>p){let pe=this.findBestLevel(this.hls.levels[p].bitrate,p,Y,0,se,1,1);pe===-1&&(pe=p),this.hls.nextLoadLevel=this.hls.nextAutoLevel=pe,this.resetEstimator(this.hls.levels[pe].bitrate)}}};m||k>K*2?X():this.timer=self.setInterval(X,K*1e3),s.trigger(I.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,part:o,stats:c})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new v4(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(I.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const r=t.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var i;this.fragCurrent=r,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case oe.BUFFER_ADD_CODEC_ERROR:case oe.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case oe.FRAG_LOAD_TIMEOUT:{const r=t.frag,{fragCurrent:i,partCurrent:o}=this;if(r&&i&&r.sn===i.sn&&r.level===i.level){const s=performance.now(),a=o?o.stats:r.stats,l=s-a.loading.start,d=a.loading.first?a.loading.first-a.loading.start:-1;if(a.loaded&&d>-1){const u=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(u,d),a.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,r,i){const o=e+r/t,s=i?e+this.lastLevelLoadSec:0;return o+s}onLevelLoaded(e,t){const r=this.hls.config,{loading:i}=t.stats,o=i.end-i.first;Oe(o)&&(this.lastLevelLoadSec=o/1e3),t.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:r}){const i=r?r.stats:t.stats;if(t.type===Ue.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const o=r?r.duration:t.duration,s=this.hls.levels[t.level],a=(s.loaded?s.loaded.bytes:0)+i.loaded,l=(s.loaded?s.loaded.duration:0)+o;s.loaded={bytes:a,duration:l},s.realBitrate=Math.round(8*a/l)}if(t.bitrateTest){const o={stats:i,frag:t,part:r,id:t.type};this.onFragBuffered(I.FRAG_BUFFERED,o),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:r,part:i}=t,o=i!=null&&i.stats.loaded?i.stats:r.stats;if(o.aborted||this.ignoreFragment(r))return;const s=o.parsing.end-o.loading.start-Math.min(o.loading.first-o.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(s,o.loaded),o.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=s/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Ue.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,r=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,o=this.findBestLevel(r,t,e,0,i,1,1);if(o>-1)return o;const s=this.hls.firstLevel,a=Math.min(Math.max(s,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${s} clamped to ${a}`),a}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!r||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const o=r&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const s=this.hls.levels;if(s.length>Math.max(e,o)&&s[e].loadError<=s[o].loadError)return e}return this._nextAutoLevel=o,this.nextAutoLevelKey=this.getAutoLevelKey(),o}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:i,config:o,minAutoLevel:s}=r,a=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),d=this.getStarvationDelay();let c=o.abrBandWidthFactor,u=o.abrBandWidthUpFactor;if(d){const m=this.findBestLevel(l,s,i,d,0,c,u);if(m>=0)return this.rebufferNotice=-1,m}let f=a?Math.min(a,o.maxStarvationDelay):o.maxStarvationDelay;if(!d){const m=this.bitrateTestDelay;m&&(f=(a?Math.min(a,o.maxLoadingDelay):o.maxLoadingDelay)-m,this.info(`bitrate test took ${Math.round(1e3*m)}ms, set first fragment max fetchDuration to ${Math.round(1e3*f)} ms`),c=u=1)}const p=this.findBestLevel(l,s,i,d,f,c,u);if(this.rebufferNotice!==p&&(this.rebufferNotice=p,this.info(`${d?"rebuffering expected":"buffer is empty"}, optimal quality level ${p}`)),p>-1)return p;const h=r.levels[s],g=r.loadLevelObj;return g&&(h==null?void 0:h.bitrate)<g.bitrate?s:r.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const r=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,r,i,o,s,a){var l;const d=i+o,c=this.lastLoadedFragLevel,u=c===-1?this.hls.firstLevel:c,{fragCurrent:f,partCurrent:p}=this,{levels:h,allAudioTracks:g,loadLevel:m,config:v}=this.hls;if(h.length===1)return 0;const b=h[u],y=!!((l=this.hls.latestLevelDetails)!=null&&l.live),x=m===-1||c===-1;let E,A="SDR",S=(b==null?void 0:b.frameRate)||0;const{audioPreference:w,videoPreference:T}=v,C=this.audioTracksByGroup||(this.audioTracksByGroup=AT(g));let L=-1;if(x){if(this.firstSelection!==-1)return this.firstSelection;const M=this.codecTiers||(this.codecTiers=rU(h,C,t,r)),O=nU(M,A,e,w,T),{codecSet:$,videoRanges:K,minFramerate:Y,minBitrate:H,minIndex:B,preferHDR:X}=O;L=B,E=$,A=X?K[K.length-1]:K[0],S=Y,e=Math.max(e,H),this.log(`picked start tier ${Ut(O)}`)}else E=b==null?void 0:b.codecSet,A=b==null?void 0:b.videoRange;const P=p?p.duration:f?f.duration:0,_=this.bwEstimator.getEstimateTTFB()/1e3,D=[];for(let M=r;M>=t;M--){var k;const O=h[M],$=M>u;if(!O)continue;if(v.useMediaCapabilities&&!O.supportedResult&&!O.supportedPromise){const pe=navigator.mediaCapabilities;typeof(pe==null?void 0:pe.decodingInfo)=="function"&&j4(O,C,A,S,e,w)?(O.supportedPromise=ET(O,C,pe,this.supportedCache),O.supportedPromise.then(te=>{if(!this.hls)return;O.supportedResult=te;const W=this.hls.levels,de=W.indexOf(O);te.error?this.warn(`MediaCapabilities decodingInfo error: "${te.error}" for level ${de} ${Ut(te)}`):te.supported?te.decodingInfoResults.some(V=>V.smooth===!1||V.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${de} not smooth or powerEfficient: ${Ut(te)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${de} ${Ut(te)}`),de>-1&&W.length>1&&(this.log(`Removing unsupported level ${de}`),this.hls.removeLevel(de),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):O.supportedResult=TT}if((E&&O.codecSet!==E||A&&O.videoRange!==A||$&&S>O.frameRate||!$&&S>0&&S<O.frameRate||(k=O.supportedResult)!=null&&(k=k.decodingInfoResults)!=null&&k.some(pe=>pe.smooth===!1))&&(!x||M!==L)){D.push(M);continue}const K=O.details,Y=(p?K==null?void 0:K.partTarget:K==null?void 0:K.averagetargetduration)||P;let H;$?H=a*e:H=s*e;const B=P&&i>=P*2&&o===0?O.averageBitrate:O.maxBitrate,X=this.getTimeToLoadFrag(_,H,B*Y,K===void 0);if(H>=B&&(M===c||O.loadError===0&&O.fragmentError===0)&&(X<=_||!Oe(X)||y&&!this.bitrateTestDelay||X<d)){const pe=this.forcedAutoLevel;return M!==m&&(pe===-1||pe!==m)&&(D.length&&this.trace(`Skipped level(s) ${D.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${h[D[0]].codecs}" ${h[D[0]].videoRange}; not compatible with "${E}" ${A}`),this.info(`switch candidate:${u}->${M} adjustedbw(${Math.round(H)})-bitrate=${Math.round(H-B)} ttfb:${_.toFixed(1)} avgDuration:${Y.toFixed(1)} maxFetchDuration:${d.toFixed(1)} fetchDuration:${X.toFixed(1)} firstSelection:${x} codecSet:${O.codecSet} videoRange:${O.videoRange} hls.loadLevel:${m}`)),x&&(this.firstSelection=M),M}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:r}=this.hls;return Math.min(Math.max(e,r),t)}}const IT={search:function(n,e){let t=0,r=n.length-1,i=null,o=null;for(;t<=r;){i=(t+r)/2|0,o=n[i];const s=e(o);if(s>0)t=i+1;else if(s<0)r=i-1;else return o}return null}};function lU(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!Oe(e))return null;const r=n[0].programDateTime;if(e<(r||0))return null;const i=n[n.length-1].endProgramDateTime;if(e>=(i||0))return null;for(let o=0;o<n.length;++o){const s=n[o];if(cU(e,t,s))return s}return null}function Fo(n,e,t=0,r=0,i=.005){let o=null;if(n){o=e[1+n.sn-e[0].sn]||null;const a=n.endDTS-t;a>0&&a<15e-7&&(t+=15e-7),o&&n.level!==o.level&&o.end<=n.end&&(o=e[2+n.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(o=e[0]);if(o&&((!n||n.level===o.level)&&d0(t,r,o)===0||dU(o,n,Math.min(i,r))))return o;const s=IT.search(e,d0.bind(null,t,r));return s&&(s!==n||!o)?s:o}function dU(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const r=e.tagList.reduce((i,o)=>(o[0]==="INF"&&(i+=parseFloat(o[1])),i),t);return n.start<=r}return!1}function d0(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-r<=n?1:t.start-r>n&&t.start?-1:0}function cU(n,e,t){const r=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-r>n}function LT(n,e,t){if(n&&n.startCC<=e&&n.endCC>=e){let r=n.fragments;const{fragmentHint:i}=n;i&&(r=r.concat(i));let o;return IT.search(r,s=>s.cc<e?1:s.cc>e?-1:(o=s,s.end<=t?1:s.start>t?-1:0)),o||null}return null}function Md(n){switch(n.details){case oe.FRAG_LOAD_TIMEOUT:case oe.KEY_LOAD_TIMEOUT:case oe.LEVEL_LOAD_TIMEOUT:case oe.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function c0(n,e){const t=Md(e);return n.default[`${t?"timeout":"error"}Retry`]}function Pp(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function u0(n){return _t(_t({},n),{errorRetry:null,timeoutRetry:null})}function Fd(n,e,t,r){if(!n)return!1;const i=r==null?void 0:r.code,o=e<n.maxNumRetry&&(uU(i)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,r,o):o}function uU(n){return n===0&&navigator.onLine===!1||!!n&&(n<400||n>499)}var yn={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},xr={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class fU extends kr{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(I.ERROR,this.onError,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(I.ERROR,this.onError,this),e.off(I.ERROR,this.onErrorOut,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Ue.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var r;if(t.fatal)return;const i=this.hls,o=t.context;switch(t.details){case oe.FRAG_LOAD_ERROR:case oe.FRAG_LOAD_TIMEOUT:case oe.KEY_LOAD_ERROR:case oe.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case oe.FRAG_PARSING_ERROR:if((r=t.frag)!=null&&r.gap){t.errorAction=ja();return}case oe.FRAG_GAP:case oe.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=yn.SendAlternateToPenaltyBox;return}case oe.LEVEL_EMPTY_ERROR:case oe.LEVEL_PARSING_ERROR:{var s;const l=t.parent===Ue.MAIN?t.level:i.loadLevel;t.details===oe.LEVEL_EMPTY_ERROR&&((s=t.context)!=null&&(s=s.levelDetails)!=null&&s.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,l):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,l))}return;case oe.LEVEL_LOAD_ERROR:case oe.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,o.level));return;case oe.AUDIO_TRACK_LOAD_ERROR:case oe.AUDIO_TRACK_LOAD_TIMEOUT:case oe.SUBTITLE_LOAD_ERROR:case oe.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const l=i.loadLevelObj;if(l&&(o.type===ct.AUDIO_TRACK&&l.hasAudioGroup(o.groupId)||o.type===ct.SUBTITLE_TRACK&&l.hasSubtitleGroup(o.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,i.loadLevel),t.errorAction.action=yn.SendAlternateToPenaltyBox,t.errorAction.flags=xr.MoveAllAlternatesMatchingHost;return}}return;case oe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const l=i.loadLevelObj,d=l==null?void 0:l.attrs["HDCP-LEVEL"];d?t.errorAction={action:yn.SendAlternateToPenaltyBox,flags:xr.MoveAllAlternatesMatchingHDCP,hdcpLevel:d}:this.keySystemError(t)}return;case oe.BUFFER_ADD_CODEC_ERROR:case oe.REMUX_ALLOC_ERROR:case oe.BUFFER_APPEND_ERROR:if(!t.errorAction){var a;t.errorAction=this.getLevelSwitchAction(t,(a=t.level)!=null?a:i.loadLevel)}return;case oe.INTERNAL_EXCEPTION:case oe.BUFFER_APPENDING_ERROR:case oe.BUFFER_FULL_ERROR:case oe.LEVEL_SWITCH_ERROR:case oe.BUFFER_STALLED_ERROR:case oe.BUFFER_SEEK_OVER_HOLE:case oe.BUFFER_NUDGE_ON_STALL:t.errorAction=ja();return}t.type===Ge.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const r=this.hls,i=c0(r.config.playlistLoadPolicy,e),o=this.playlistError++;if(Fd(i,o,Md(e),e.response))return{action:yn.RetryRequest,flags:xr.None,retryConfig:i,retryCount:o};const a=this.getLevelSwitchAction(e,t);return i&&(a.retryConfig=i,a.retryCount=o),a}getFragRetryOrSwitchAction(e){const t=this.hls,r=this.getVariantLevelIndex(e.frag),i=t.levels[r],{fragLoadPolicy:o,keyLoadPolicy:s}=t.config,a=c0(e.details.startsWith("key")?s:o,e),l=t.levels.reduce((c,u)=>c+u.fragmentError,0);if(i&&(e.details!==oe.FRAG_GAP&&i.fragmentError++,Fd(a,l,Md(e),e.response)))return{action:yn.RetryRequest,flags:xr.None,retryConfig:a,retryCount:l};const d=this.getLevelSwitchAction(e,r);return a&&(d.retryConfig=a,d.retryCount=l),d}getLevelSwitchAction(e,t){const r=this.hls;t==null&&(t=r.loadLevel);const i=this.hls.levels[t];if(i){var o,s;const d=e.details;i.loadError++,d===oe.BUFFER_APPEND_ERROR&&i.fragmentError++;let c=-1;const{levels:u,loadLevel:f,minAutoLevel:p,maxAutoLevel:h}=r;!r.autoLevelEnabled&&!r.config.preserveManualLevelOnError&&(r.loadLevel=-1);const g=(o=e.frag)==null?void 0:o.type,v=(g===Ue.AUDIO&&d===oe.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(d===oe.BUFFER_ADD_CODEC_ERROR||d===oe.BUFFER_APPEND_ERROR))&&u.some(({audioCodec:A})=>i.audioCodec!==A),y=e.sourceBufferName==="video"&&(d===oe.BUFFER_ADD_CODEC_ERROR||d===oe.BUFFER_APPEND_ERROR)&&u.some(({codecSet:A,audioCodec:S})=>i.codecSet!==A&&i.audioCodec===S),{type:x,groupId:E}=(s=e.context)!=null?s:{};for(let A=u.length;A--;){const S=(A+f)%u.length;if(S!==f&&S>=p&&S<=h&&u[S].loadError===0){var a,l;const w=u[S];if(d===oe.FRAG_GAP&&g===Ue.MAIN&&e.frag){const T=u[S].details;if(T){const C=Fo(e.frag,T.fragments,e.frag.start);if(C!=null&&C.gap)continue}}else{if(x===ct.AUDIO_TRACK&&w.hasAudioGroup(E)||x===ct.SUBTITLE_TRACK&&w.hasSubtitleGroup(E))continue;if(g===Ue.AUDIO&&(a=i.audioGroups)!=null&&a.some(T=>w.hasAudioGroup(T))||g===Ue.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(T=>w.hasSubtitleGroup(T))||v&&i.audioCodec===w.audioCodec||!v&&i.audioCodec!==w.audioCodec||y&&i.codecSet===w.codecSet)continue}c=S;break}}if(c>-1&&r.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:yn.SendAlternateToPenaltyBox,flags:xr.None,nextAutoLevel:c}}return{action:yn.SendAlternateToPenaltyBox,flags:xr.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var r;switch((r=t.errorAction)==null?void 0:r.action){case yn.DoNothing:break;case yn.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==oe.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,r=e.errorAction;if(!r)return;const{flags:i,hdcpLevel:o,nextAutoLevel:s}=r;switch(i){case xr.None:this.switchLevel(e,s);break;case xr.MoveAllAlternatesMatchingHDCP:o&&(t.maxHdcpLevel=Xf[Xf.indexOf(o)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,s)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===oe.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const r=Yf(e.mimeType),i=this.hls.levels;for(let o=i.length;o--;)i[o][`${e.sourceBufferName}Codec`]===r&&this.hls.removeLevel(o)}}}function ja(n){const e={action:yn.DoNothing,flags:xr.None};return n&&(e.resolved=!0),e}var rn={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class hU{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.BUFFER_APPENDED,this.onBufferAppended,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.BUFFER_APPENDED,this.onBufferAppended,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const r=this.activePartLists[t];if(r)for(let i=r.length;i--;){const o=r[i];if(!o)break;if(o.start<=e&&e<=o.end&&o.loaded)return o}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,r){const{fragments:i}=this,o=Object.keys(i);for(let s=o.length;s--;){const a=i[o[s]];if((a==null?void 0:a.body.type)===t&&(!r||a.buffered)){const l=a.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,t,r,i,o){this.timeRanges&&(this.timeRanges[e]=t);const s=(i==null?void 0:i.fragment.sn)||-1;Object.keys(this.fragments).forEach(a=>{const l=this.fragments[a];if(!l||s>=l.body.sn)return;if(!l.buffered&&(!l.loaded||o)){l.body.type===r&&this.removeFragment(l.body);return}const d=l.range[e];if(d){if(d.time.length===0){this.removeFragment(l.body);return}d.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,t);return u&&this.removeFragment(l.body),u})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const r=e.frag,i=ts(r),o=this.fragments[i];if(!o||o.buffered&&r.gap)return;const s=!r.relurl;Object.keys(t).forEach(a=>{const l=r.elementaryStreams[a];if(!l)return;const d=t[a],c=s||l.partial===!0;o.range[a]=this.getBufferedTimes(r,e.part,c,d)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=r.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),_l(o)||this.removeParts(r.sn-1,r.type)):this.removeFragment(o.body)}removeParts(e,t){const r=this.activePartLists[t];r&&(this.activePartLists[t]=f0(r,i=>i.fragment.sn>=e))}fragBuffered(e,t){const r=ts(e);let i=this.fragments[r];!i&&t&&(i=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,r,i){const o={time:[],partial:r},s=e.start,a=e.end,l=e.minEndPTS||a,d=e.maxStartPTS||s;for(let c=0;c<i.length;c++){const u=i.start(c)-this.bufferPadding,f=i.end(c)+this.bufferPadding;if(d>=u&&l<=f){o.time.push({startPTS:Math.max(s,i.start(c)),endPTS:Math.min(a,i.end(c))});break}else if(s<f&&a>u){const p=Math.max(s,i.start(c)),h=Math.min(a,i.end(c));h>p&&(o.partial=!0,o.time.push({startPTS:p,endPTS:h}))}else if(a<=u)break}return o}getPartialFragment(e){let t=null,r,i,o,s=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(d=>{const c=l[d];c&&_l(c)&&(i=c.body.start-a,o=c.body.end+a,e>=i&&e<=o&&(r=Math.min(e-i,o-e),s<=r&&(t=c.body,s=r)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||_l(t))}getState(e){const t=ts(e),r=this.fragments[t];return r?r.buffered?_l(r)?rn.PARTIAL:rn.OK:rn.APPENDING:rn.NOT_LOADED}isTimeBuffered(e,t,r){let i,o;for(let s=0;s<r.length;s++){if(i=r.start(s)-this.bufferPadding,o=r.end(s)+this.bufferPadding,e>=i&&t<=o)return!0;if(t<=i)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const r=t.frag,i=t.part?null:t,o=ts(r);this.fragments[o]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:r,part:i,timeRanges:o,type:s}=t;if(r.sn==="initSegment")return;const a=r.type;if(i){let d=this.activePartLists[a];d||(this.activePartLists[a]=d=[]),d.push(i)}this.timeRanges=o;const l=o[s];this.detectEvictedFragments(s,l,a,i)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=ts(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,r=Object.keys(t);if(!e)return r.length>0;for(let i=r.length;i--;){const o=t[r[i]];if((o==null?void 0:o.body.type)===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,r,i,o){i&&!this.hasGaps||Object.keys(this.fragments).forEach(s=>{const a=this.fragments[s];if(!a)return;const l=a.body;l.type!==r||i&&!l.gap||l.start<t&&l.end>e&&(a.buffered||o)&&this.removeFragment(l)})}removeFragment(e){const t=ts(e);e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const i=e.sn;this.activePartLists[e.type]=f0(r,o=>o.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(r=>r.clearElementaryStreamInfo())}}function _l(n){var e,t,r;return n.buffered&&!!(n.body.gap||(e=n.range.video)!=null&&e.partial||(t=n.range.audio)!=null&&t.partial||(r=n.range.audiovideo)!=null&&r.partial)}function ts(n){return`${n.type}_${n.level}_${n.sn}`}function f0(n,e){return n.filter(t=>{const r=e(t);return r||t.clearElementaryStreamInfo(),r})}var Ji={cbc:0,ctr:1};class pU{constructor(e,t,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=r}decrypt(e,t){switch(this.aesMode){case Ji.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Ji.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function gU(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?n.slice(0,e-t):n}class mU{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),r=new Uint32Array(4);for(let i=0;i<4;i++)r[i]=t.getUint32(i*4);return r}initTable(){const e=this.sBox,t=this.invSBox,r=this.subMix,i=r[0],o=r[1],s=r[2],a=r[3],l=this.invSubMix,d=l[0],c=l[1],u=l[2],f=l[3],p=new Uint32Array(256);let h=0,g=0,m=0;for(m=0;m<256;m++)m<128?p[m]=m<<1:p[m]=m<<1^283;for(m=0;m<256;m++){let v=g^g<<1^g<<2^g<<3^g<<4;v=v>>>8^v&255^99,e[h]=v,t[v]=h;const b=p[h],y=p[b],x=p[y];let E=p[v]*257^v*16843008;i[h]=E<<24|E>>>8,o[h]=E<<16|E>>>16,s[h]=E<<8|E>>>24,a[h]=E,E=x*16843009^y*65537^b*257^h*16843008,d[v]=E<<24|E>>>8,c[v]=E<<16|E>>>16,u[v]=E<<8|E>>>24,f[v]=E,h?(h=b^p[p[p[x^b]]],g^=p[p[g]]):h=g=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let r=!0,i=0;for(;i<t.length&&r;)r=t[i]===this.key[i],i++;if(r)return;this.key=t;const o=this.keySize=t.length;if(o!==4&&o!==6&&o!==8)throw new Error("Invalid aes key size="+o);const s=this.ksRows=(o+6+1)*4;let a,l;const d=this.keySchedule=new Uint32Array(s),c=this.invKeySchedule=new Uint32Array(s),u=this.sBox,f=this.rcon,p=this.invSubMix,h=p[0],g=p[1],m=p[2],v=p[3];let b,y;for(a=0;a<s;a++){if(a<o){b=d[a]=t[a];continue}y=b,a%o===0?(y=y<<8|y>>>24,y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[y&255],y^=f[a/o|0]<<24):o>6&&a%o===4&&(y=u[y>>>24]<<24|u[y>>>16&255]<<16|u[y>>>8&255]<<8|u[y&255]),d[a]=b=(d[a-o]^y)>>>0}for(l=0;l<s;l++)a=s-l,l&3?y=d[a]:y=d[a-4],l<4||a<=4?c[l]=y:c[l]=h[u[y>>>24]]^g[u[y>>>16&255]]^m[u[y>>>8&255]]^v[u[y&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,r){const i=this.keySize+6,o=this.invKeySchedule,s=this.invSBox,a=this.invSubMix,l=a[0],d=a[1],c=a[2],u=a[3],f=this.uint8ArrayToUint32Array_(r);let p=f[0],h=f[1],g=f[2],m=f[3];const v=new Int32Array(e),b=new Int32Array(v.length);let y,x,E,A,S,w,T,C,L,P,_,D,k,M;const O=this.networkToHostOrderSwap;for(;t<v.length;){for(L=O(v[t]),P=O(v[t+1]),_=O(v[t+2]),D=O(v[t+3]),S=L^o[0],w=D^o[1],T=_^o[2],C=P^o[3],k=4,M=1;M<i;M++)y=l[S>>>24]^d[w>>16&255]^c[T>>8&255]^u[C&255]^o[k],x=l[w>>>24]^d[T>>16&255]^c[C>>8&255]^u[S&255]^o[k+1],E=l[T>>>24]^d[C>>16&255]^c[S>>8&255]^u[w&255]^o[k+2],A=l[C>>>24]^d[S>>16&255]^c[w>>8&255]^u[T&255]^o[k+3],S=y,w=x,T=E,C=A,k=k+4;y=s[S>>>24]<<24^s[w>>16&255]<<16^s[T>>8&255]<<8^s[C&255]^o[k],x=s[w>>>24]<<24^s[T>>16&255]<<16^s[C>>8&255]<<8^s[S&255]^o[k+1],E=s[T>>>24]<<24^s[C>>16&255]<<16^s[S>>8&255]<<8^s[w&255]^o[k+2],A=s[C>>>24]<<24^s[S>>16&255]<<16^s[w>>8&255]<<8^s[T&255]^o[k+3],b[t]=O(y^p),b[t+1]=O(A^h),b[t+2]=O(E^g),b[t+3]=O(x^m),p=L,h=P,g=_,m=D,t=t+4}return b.buffer}}class vU{constructor(e,t,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=r}expandKey(){const e=bU(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function bU(n){switch(n){case Ji.cbc:return"AES-CBC";case Ji.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${n}`)}}const yU=16;class _p{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?gU(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,r,i){return this.useSoftware?new Promise((o,s)=>{const a=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(a,t,r,i);const l=this.flush();l?o(l.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,r,i)}softwareDecrypt(e,t,r,i){const{currentIV:o,currentResult:s,remainderData:a}=this;if(i!==Ji.cbc||t.byteLength!==16)return wt.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),a&&(e=mr(a,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;o&&(r=o);let d=this.softwareDecrypter;d||(d=this.softwareDecrypter=new mU),d.expandKey(t);const c=s;return this.currentResult=d.decrypt(l.buffer,0,r),this.currentIV=l.slice(-16).buffer,c||null}webCryptoDecrypt(e,t,r,i){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,r,i));this.key=t,this.fastAesKey=new vU(this.subtle,t,i)}return this.fastAesKey.expandKey().then(o=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new pU(this.subtle,new Uint8Array(r),i).decrypt(e.buffer,o)):Promise.reject(new Error("web crypto not initialized"))).catch(o=>(wt.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${o.name}: ${o.message}`),this.onWebCryptoError(e,t,r,i)))}onWebCryptoError(e,t,r,i){const o=this.enableSoftwareAES;if(o){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,r,i);const s=this.flush();if(s)return s.buffer}throw new Error("WebCrypto"+(o?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const r=e.length-e.length%yU;return r!==e.length&&(t=e.slice(0,r),this.remainderData=e.slice(r)),t}logOnce(e){this.logEnabled&&(wt.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const h0=Math.pow(2,17);class xU{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const r=e.url;if(!r)return Promise.reject(new hi({type:Ge.NETWORK_ERROR,details:oe.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,o=i.fLoader,s=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(h=>h[0]==="GAP")){l(g0(e));return}else e.gap=!1;const d=this.loader=o?new o(i):new s(i),c=p0(e);e.loader=d;const u=u0(i.fragLoadPolicy.default),f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:h0};e.stats=d.stats;const p={onSuccess:(h,g,m,v)=>{this.resetLoader(e,d);let b=h.data;m.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(b.slice(0,16)),b=b.slice(16)),a({frag:e,part:null,payload:b,networkDetails:v})},onError:(h,g,m,v)=>{this.resetLoader(e,d),l(new hi({type:Ge.NETWORK_ERROR,details:oe.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:_t({url:r,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:m,stats:v}))},onAbort:(h,g,m)=>{this.resetLoader(e,d),l(new hi({type:Ge.NETWORK_ERROR,details:oe.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:m,stats:h}))},onTimeout:(h,g,m)=>{this.resetLoader(e,d),l(new hi({type:Ge.NETWORK_ERROR,details:oe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:m,stats:h}))}};t&&(p.onProgress=(h,g,m,v)=>t({frag:e,part:null,payload:m,networkDetails:v})),d.load(c,f,p)})}loadPart(e,t,r){this.abort();const i=this.config,o=i.fLoader,s=i.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(g0(e,t));return}const d=this.loader=o?new o(i):new s(i),c=p0(e,t);e.loader=d;const u=u0(i.fragLoadPolicy.default),f={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:h0};t.stats=d.stats,d.load(c,f,{onSuccess:(p,h,g,m)=>{this.resetLoader(e,d),this.updateStatsFromPart(e,t);const v={frag:e,part:t,payload:p.data,networkDetails:m};r(v),a(v)},onError:(p,h,g,m)=>{this.resetLoader(e,d),l(new hi({type:Ge.NETWORK_ERROR,details:oe.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:_t({url:c.url,data:void 0},p),error:new Error(`HTTP Error ${p.code} ${p.text}`),networkDetails:g,stats:m}))},onAbort:(p,h,g)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,d),l(new hi({type:Ge.NETWORK_ERROR,details:oe.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:g,stats:p}))},onTimeout:(p,h,g)=>{this.resetLoader(e,d),l(new hi({type:Ge.NETWORK_ERROR,details:oe.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:p}))}})})}updateStatsFromPart(e,t){const r=e.stats,i=t.stats,o=i.total;if(r.loaded+=i.loaded,o){const l=Math.round(e.duration/t.duration),d=Math.min(Math.round(r.loaded/o),l),u=(l-d)*Math.round(r.loaded/d);r.total=r.loaded+u}else r.total=Math.max(r.loaded,r.total);const s=r.loading,a=i.loading;s.start?s.first+=a.first-a.start:(s.start=a.start,s.first=a.first),s.end=a.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function p0(n,e=null){const t=e||n,r={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,o=t.byteRangeEndOffset;if(Oe(i)&&Oe(o)){var s;let a=i,l=o;if(n.sn==="initSegment"&&SU((s=n.decryptdata)==null?void 0:s.method)){const d=o-i;d%16&&(l=o+(16-d%16)),i!==0&&(r.resetIV=!0,a=i-16)}r.rangeStart=a,r.rangeEnd=l}return r}function g0(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),r={type:Ge.MEDIA_ERROR,details:oe.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(r.part=e),(e||n).stats.aborted=!0,new hi(r)}function SU(n){return n==="AES-128"||n==="AES-256"}class hi extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class PT extends kr{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class kp{constructor(e,t,r,i=0,o=-1,s=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=kl(),this.buffering={audio:kl(),video:kl(),audiovideo:kl()},this.level=e,this.sn=t,this.id=r,this.size=i,this.part=o,this.partial=s}}function kl(){return{start:0,executeStart:0,executeEnd:0,end:0}}const m0={length:0,start:()=>0,end:()=>0};class tt{static isBuffered(e,t){if(e){const r=tt.getBuffered(e);for(let i=r.length;i--;)if(t>=r.start(i)&&t<=r.end(i))return!0}return!1}static bufferedRanges(e){if(e){const t=tt.getBuffered(e);return tt.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}static bufferInfo(e,t,r){if(e){const i=tt.bufferedRanges(e);if(i.length)return tt.bufferedInfo(i,t,r)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,r){t=Math.max(0,t),e.length>1&&e.sort((c,u)=>c.start-u.start||u.end-c.end);let i=-1,o=[];if(r)for(let c=0;c<e.length;c++){t>=e[c].start&&t<=e[c].end&&(i=c);const u=o.length;if(u){const f=o[u-1].end;e[c].start-f<r?e[c].end>f&&(o[u-1].end=e[c].end):o.push(e[c])}else o.push(e[c])}else o=e;let s=0,a,l=t,d=t;for(let c=0;c<o.length;c++){const u=o[c].start,f=o[c].end;if(i===-1&&t>=u&&t<=f&&(i=c),t+r>=u&&t<f)l=u,d=f,s=d-t;else if(t+r<u){a=u;break}}return{len:s,start:l||0,end:d||0,nextStart:a,buffered:e,bufferedIndex:i}}static getBuffered(e){try{return e.buffered||m0}catch(t){return wt.log("failed to get media.buffered",t),m0}}}const _T=/\{\$([a-zA-Z0-9-_]+)\}/g;function v0(n){return _T.test(n)}function Qf(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(_T,r=>{const i=r.substring(2,r.length-1),o=t==null?void 0:t[i];return o===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),r):o})}return e}function b0(n,e,t){let r=n.variableList;r||(n.variableList=r={});let i,o;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const s=new self.URL(t).searchParams;if(s.has(i))o=s.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(s){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${s.message}`))}}else i=e.NAME,o=e.VALUE;i in r?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):r[i]=o||""}function CU(n,e,t){const r=e.IMPORT;if(t&&r in t){let i=n.variableList;i||(n.variableList=i={}),i[r]=t[r]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const TU=/^(\d+)x(\d+)$/,y0=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Wt{constructor(e,t){typeof e=="string"&&(e=Wt.parseAttrList(e,t)),kt(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const r=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)r[i]=parseInt(t.slice(i*2,i*2+2),16);return r}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const r=this[e];return r?parseFloat(r):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const r=this[e];return(r?r.split(/[ ,]+/):[]).reduce((i,o)=>(i[o.toLowerCase()]=!0,i),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=TU.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let r;const i={},o='"';for(y0.lastIndex=0;(r=y0.exec(e))!==null;){const s=r[1].trim();let a=r[2];const l=a.indexOf(o)===0&&a.lastIndexOf(o)===a.length-1;let d=!1;if(l)a=a.slice(1,-1);else switch(s){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":d=!0}if(t&&(l||d))a=Qf(t,a);else if(!d&&!l)switch(s){case"CLOSED-CAPTIONS":if(a==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":wt.warn(`${e}: attribute ${s} is missing quotes`)}i[s]=a}return i}}const wU="com.apple.hls.interstitial";function EU(n){return n!=="ID"&&n!=="CLASS"&&n!=="CUE"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function RU(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"||n==="SCTE35-CMD"}class kT{constructor(e,t,r=0){var i;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(t==null?void 0:t.tagAnchor)||null,this.tagOrder=(i=t==null?void 0:t.tagOrder)!=null?i:r,t){const o=t.attr;for(const s in o)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==o[s]){wt.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=kt(new Wt({}),o,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const o=(t==null?void 0:t.endDate)||new Date(this.attr["END-DATE"]);Oe(o.getTime())&&(this._endDate=o)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(wt.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Oe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===wU}get isValid(){return!!this.id&&!this._badValueForSameId&&Oe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const AU=10;class IU{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}get hasProgramDateTime(){return this.fragments.length?Oe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||AU}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let r=e.length;r--;)if(e[r].index>t)return e[r].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function ms(n){return n==="AES-128"||n==="AES-256"||n==="AES-256-CTR"}function Dp(n){switch(n){case"AES-128":case"AES-256":return Ji.cbc;case"AES-256-CTR":return Ji.ctr;default:throw new Error(`invalid full segment method ${n}`)}}function Op(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function Zf(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}function LU(n){const e=Zf(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function PU(n){const e=function(r,i,o){const s=r[i];r[i]=r[o],r[o]=s};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function _U(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),i=r[r.length-1].split(",");if(i.length===2){const o=i[0]==="base64",s=i[1];o?(r.splice(-1,1),t=Op(s)):t=LU(s)}}return t}const $d=typeof self<"u"?self:void 0;var qt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Un={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Zl(n){switch(n){case Un.FAIRPLAY:return qt.FAIRPLAY;case Un.PLAYREADY:return qt.PLAYREADY;case Un.WIDEVINE:return qt.WIDEVINE;case Un.CLEARKEY:return qt.CLEARKEY}}function Du(n){switch(n){case qt.FAIRPLAY:return Un.FAIRPLAY;case qt.PLAYREADY:return Un.PLAYREADY;case qt.WIDEVINE:return Un.WIDEVINE;case qt.CLEARKEY:return Un.CLEARKEY}}function aa(n){const{drmSystems:e,widevineLicenseUrl:t}=n,r=e?[qt.FAIRPLAY,qt.WIDEVINE,qt.PLAYREADY,qt.CLEARKEY].filter(i=>!!e[i]):[];return!r[qt.WIDEVINE]&&t&&r.push(qt.WIDEVINE),r}const DT=function(n){return $d!=null&&(n=$d.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function kU(n,e,t,r){let i;switch(n){case qt.FAIRPLAY:i=["cenc","sinf"];break;case qt.WIDEVINE:case qt.PLAYREADY:i=["cenc"];break;case qt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return DU(i,e,t,r)}function DU(n,e,t,r){return[{initDataTypes:n,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(o=>({contentType:`audio/mp4; codecs=${o}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:t.map(o=>({contentType:`video/mp4; codecs=${o}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function OU(n){var e;return n.sessionType==="persistent-license"||!!((e=n.sessionTypes)!=null&&e.some(t=>t==="persistent-license"))}function MU(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),r=t.substring(t.indexOf("<"),t.length),s=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(s){const a=s.childNodes[0]?s.childNodes[0].nodeValue:s.getAttribute("VALUE");if(a){const l=Op(a).subarray(0,16);return PU(l),l}}return null}let Dl={};class xc{static clearKeyUriToKeyIdMap(){Dl={}}constructor(e,t,r,i=[1],o=null,s){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=r,this.keyFormatVersions=i,this.iv=o,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!ms(e),s!=null&&s.startsWith("0x")&&(this.keyId=new Uint8Array(hT(s)))}matches(e){var t,r;return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&e.keyFormatVersions.join(",")===this.keyFormatVersions.join(",")&&((t=e.iv)==null?void 0:t.join(","))===((r=this.iv)==null?void 0:r.join(","))}isSupported(){if(this.method){if(ms(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Un.FAIRPLAY:case Un.WIDEVINE:case Un.PLAYREADY:case Un.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(ms(this.method)&&this.uri&&!this.iv){typeof e!="number"&&(wt.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=FU(e);return new xc(this.method,this.uri,"identity",this.keyFormatVersions,r)}if(this.pssh&&this.keyId)return this;const t=_U(this.uri);if(t)switch(this.keyFormat){case Un.WIDEVINE:if(this.pssh=t,!this.keyId&&t.length>=22){const r=t.length-22;this.keyId=t.subarray(r,r+16)}break;case Un.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=z4(r,null,t),this.keyId=MU(t);break}default:{let r=t.subarray(0,16);if(r.length!==16){const i=new Uint8Array(16);i.set(r,16-r.length),r=i}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=Dl[this.uri];if(!r){const i=Object.keys(Dl).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,i),Dl[this.uri]=r}this.keyId=r}return this}}function FU(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const x0=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,S0=/#EXT-X-MEDIA:(.*)/g,$U=/^#EXT(?:INF|-X-TARGETDURATION):/m,Ou=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),BU=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Gr{static findGroup(e,t){for(let r=0;r<e.length;r++){const i=e[r];if(i.id===t)return i}}static resolve(e,t){return Ep.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return $U.test(e)}static parseMasterPlaylist(e,t){const r=v0(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},o=[];x0.lastIndex=0;let s;for(;(s=x0.exec(e))!=null;)if(s[1]){var a;const d=new Wt(s[1],i),c=Qf(i,s[2]),u={attrs:d,bitrate:d.decimalInteger("BANDWIDTH")||d.decimalInteger("AVERAGE-BANDWIDTH"),name:d.NAME,url:Gr.resolve(c,t)},f=d.decimalResolution("RESOLUTION");f&&(u.width=f.width,u.height=f.height),w0(d.CODECS,u);const p=d["SUPPLEMENTAL-CODECS"];p&&(u.supplemental={},w0(p,u.supplemental)),(a=u.unknownCodecs)!=null&&a.length||o.push(u),i.levels.push(u)}else if(s[3]){const d=s[3],c=s[4];switch(d){case"SESSION-DATA":{const u=new Wt(c,i),f=u["DATA-ID"];f&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[f]=u);break}case"SESSION-KEY":{const u=C0(c,t,i);u.encrypted&&u.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(u)):wt.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const u=new Wt(c,i);b0(i,u,t)}break}case"CONTENT-STEERING":{const u=new Wt(c,i);i.contentSteering={uri:Gr.resolve(u["SERVER-URI"],t),pathwayId:u["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=T0(c);break}}}const l=o.length>0&&o.length<i.levels.length;return i.levels=l?o:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,r){let i;const o={},s=r.levels,a={AUDIO:s.map(d=>({id:d.attrs.AUDIO,audioCodec:d.audioCodec})),SUBTITLES:s.map(d=>({id:d.attrs.SUBTITLES,textCodec:d.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(S0.lastIndex=0;(i=S0.exec(e))!==null;){const d=new Wt(i[1],r),c=d.TYPE;if(c){const u=a[c],f=o[c]||[];o[c]=f;const p=d.LANGUAGE,h=d["ASSOC-LANGUAGE"],g=d.CHANNELS,m=d.CHARACTERISTICS,v=d["INSTREAM-ID"],b={attrs:d,bitrate:0,id:l++,groupId:d["GROUP-ID"]||"",name:d.NAME||p||"",type:c,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:p,url:d.URI?Gr.resolve(d.URI,t):""};if(h&&(b.assocLang=h),g&&(b.channels=g),m&&(b.characteristics=m),v&&(b.instreamId=v),u!=null&&u.length){const y=Gr.findGroup(u,b.groupId)||u[0];E0(b,y,"audioCodec"),E0(b,y,"textCodec")}f.push(b)}}return o}static parseLevelPlaylist(e,t,r,i,o,s){var a;const l={url:t},d=new IU(t),c=d.fragments,u=[];let f=null,p=0,h=0,g=0,m=0,v=0,b=null,y=new Pu(i,l),x,E,A,S=-1,w=!1,T=null,C;if(Ou.lastIndex=0,d.m3u8=e,d.hasVariableRefs=v0(e),((a=Ou.exec(e))==null?void 0:a[0])!=="#EXTM3U")return d.playlistParsingError=new Error("Missing format identifier #EXTM3U"),d;for(;(x=Ou.exec(e))!==null;){w&&(w=!1,y=new Pu(i,l),y.playlistOffset=g,y.setStart(g),y.sn=p,y.cc=m,v&&(y.bitrate=v),y.level=r,f&&(y.initSegment=f,f.rawProgramDateTime&&(y.rawProgramDateTime=f.rawProgramDateTime,f.rawProgramDateTime=null),T&&(y.setByteRange(T),T=null)));const D=x[1];if(D){y.duration=parseFloat(D);const k=(" "+x[2]).slice(1);y.title=k||null,y.tagList.push(k?["INF",D,k]:["INF",D])}else if(x[3]){if(Oe(y.duration)){y.playlistOffset=g,y.setStart(g),A&&A0(y,A,d),y.sn=p,y.level=r,y.cc=m,c.push(y);const k=(" "+x[3]).slice(1);y.relurl=Qf(d,k),Jf(y,b,u),b=y,g+=y.duration,p++,h=0,w=!0}}else{if(x=x[0].match(BU),!x){wt.warn("No matches on slow regex match for level playlist!");continue}for(E=1;E<x.length&&x[E]===void 0;E++);const k=(" "+x[E]).slice(1),M=(" "+x[E+1]).slice(1),O=x[E+2]?(" "+x[E+2]).slice(1):null;switch(k){case"BYTERANGE":b?y.setByteRange(M,b):y.setByteRange(M);break;case"PROGRAM-DATE-TIME":y.rawProgramDateTime=M,y.tagList.push(["PROGRAM-DATE-TIME",M]),S===-1&&(S=c.length);break;case"PLAYLIST-TYPE":d.type&&ai(d,k,x),d.type=M.toUpperCase();break;case"MEDIA-SEQUENCE":d.startSN!==0?ai(d,k,x):c.length>0&&I0(d,k,x),p=d.startSN=parseInt(M);break;case"SKIP":{d.skippedSegments&&ai(d,k,x);const $=new Wt(M,d),K=$.decimalInteger("SKIPPED-SEGMENTS");if(Oe(K)){d.skippedSegments+=K;for(let H=K;H--;)c.push(null);p+=K}const Y=$.enumeratedString("RECENTLY-REMOVED-DATERANGES");Y&&(d.recentlyRemovedDateranges=(d.recentlyRemovedDateranges||[]).concat(Y.split("	")));break}case"TARGETDURATION":d.targetduration!==0&&ai(d,k,x),d.targetduration=Math.max(parseInt(M),1);break;case"VERSION":d.version!==null&&ai(d,k,x),d.version=parseInt(M);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":d.live||ai(d,k,x),d.live=!1;break;case"#":(M||O)&&y.tagList.push(O?[M,O]:[M]);break;case"DISCONTINUITY":m++,y.tagList.push(["DIS"]);break;case"GAP":y.gap=!0,y.tagList.push([k]);break;case"BITRATE":y.tagList.push([k,M]),v=parseInt(M)*1e3,Oe(v)?y.bitrate=v:v=0;break;case"DATERANGE":{const $=new Wt(M,d),K=new kT($,d.dateRanges[$.ID],d.dateRangeTagCount);d.dateRangeTagCount++,K.isValid||d.skippedSegments?d.dateRanges[K.id]=K:wt.warn(`Ignoring invalid DATERANGE tag: "${M}"`),y.tagList.push(["EXT-X-DATERANGE",M]);break}case"DEFINE":{{const $=new Wt(M,d);"IMPORT"in $?CU(d,$,s):b0(d,$,t)}break}case"DISCONTINUITY-SEQUENCE":d.startCC!==0?ai(d,k,x):c.length>0&&I0(d,k,x),d.startCC=m=parseInt(M);break;case"KEY":{const $=C0(M,t,d);if($.isSupported()){if($.method==="NONE"){A=void 0;break}A||(A={});const K=A[$.keyFormat];K!=null&&K.matches($)||(K&&(A=kt({},A)),A[$.keyFormat]=$)}else wt.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${M}"`);break}case"START":d.startTimeOffset=T0(M);break;case"MAP":{const $=new Wt(M,d);if(y.duration){const K=new Pu(i,l);R0(K,$,r,A),f=K,y.initSegment=f,f.rawProgramDateTime&&!y.rawProgramDateTime&&(y.rawProgramDateTime=f.rawProgramDateTime)}else{const K=y.byteRangeEndOffset;if(K){const Y=y.byteRangeStartOffset;T=`${K-Y}@${Y}`}else T=null;R0(y,$,r,A),f=y,w=!0}f.cc=m;break}case"SERVER-CONTROL":{C&&ai(d,k,x),C=new Wt(M),d.canBlockReload=C.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=C.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=d.canSkipUntil>0&&C.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=C.optionalFloat("PART-HOLD-BACK",0),d.holdBack=C.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{d.partTarget&&ai(d,k,x);const $=new Wt(M);d.partTarget=$.decimalFloatingPoint("PART-TARGET");break}case"PART":{let $=d.partList;$||($=d.partList=[]);const K=h>0?$[$.length-1]:void 0,Y=h++,H=new Wt(M,d),B=new A4(H,y,l,Y,K);$.push(B),y.duration+=B.duration;break}case"PRELOAD-HINT":{const $=new Wt(M,d);d.preloadHint=$;break}case"RENDITION-REPORT":{const $=new Wt(M,d);d.renditionReports=d.renditionReports||[],d.renditionReports.push($);break}default:wt.warn(`line parsed but not handled: ${x}`);break}}}b&&!b.relurl?(c.pop(),g-=b.duration,d.partList&&(d.fragmentHint=b)):d.partList&&(Jf(y,b,u),y.cc=m,d.fragmentHint=y,A&&A0(y,A,d)),d.targetduration||(d.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const L=c.length,P=c[0],_=c[L-1];if(g+=d.skippedSegments*d.targetduration,g>0&&L&&_){d.averagetargetduration=g/L;const D=_.sn;d.endSN=D!=="initSegment"?D:0,d.live||(_.endList=!0),S>0&&(zU(c,S),P&&u.unshift(P))}return d.fragmentHint&&(g+=d.fragmentHint.duration),d.totalduration=g,u.length&&d.dateRangeTagCount&&P&&OT(u,d),d.endCC=m,d}}function OT(n,e){const t=n.length;if(!t)return;const r=n[t-1],i=e.live?1/0:e.totalduration,o=Object.keys(e.dateRanges);for(let s=o.length;s--;){const a=e.dateRanges[o[s]],l=a.startDate.getTime();a.tagAnchor=r.ref;for(let d=t;d--;){const c=NU(e,l,n,d,i);if(c!==-1){a.tagAnchor=e.fragments[c].ref;break}}}}function NU(n,e,t,r,i){const o=t[r];if(o){const a=o.programDateTime;if(e>=a||r===0){var s;const l=(((s=t[r+1])==null?void 0:s.start)||i)-o.start;if(e<=a+l*1e3){const d=t[r].sn-n.startSN,c=n.fragments;if(c.length>t.length){const f=(t[r+1]||c[c.length-1]).sn-n.startSN;for(let p=f;p>d;p--){const h=c[p].programDateTime;if(e>=h&&e<h+c[p].duration*1e3)return p}}return d}}}return-1}function C0(n,e,t){var r,i;const o=new Wt(n,t),s=(r=o.METHOD)!=null?r:"",a=o.URI,l=o.hexadecimalInteger("IV"),d=o.KEYFORMATVERSIONS,c=(i=o.KEYFORMAT)!=null?i:"identity";a&&o.IV&&!l&&wt.error(`Invalid IV: ${o.IV}`);const u=a?Gr.resolve(a,e):"",f=(d||"1").split("/").map(Number).filter(Number.isFinite);return new xc(s,u,c,f,l,o.KEYID)}function T0(n){const t=new Wt(n).decimalFloatingPoint("TIME-OFFSET");return Oe(t)?t:null}function w0(n,e){let t=(n||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const i=t.filter(o=>Ip(o,r));i.length&&(e[`${r}Codec`]=i.map(o=>o.split("/")[0]).join(","),t=t.filter(o=>i.indexOf(o)===-1))}),e.unknownCodecs=t}function E0(n,e,t){const r=e[t];r&&(n[t]=r)}function zU(n,e){let t=n[e];for(let r=e;r--;){const i=n[r];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function Jf(n,e,t){n.rawProgramDateTime?t.push(n):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime)}function R0(n,e,t,r){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",r&&(n.levelkeys=r),n.initSegment=null}function A0(n,e,t){n.levelkeys=e;const{encryptedFragments:r}=t;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&r.push(n)}function ai(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function I0(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function Mu(n,e){const t=e.startPTS;if(Oe(t)){let r=0,i;e.sn>n.sn?(r=t-n.start,i=n):(r=n.start-t,i=e),i.duration!==r&&i.setDuration(r)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.setStart(n.start+(n.minEndPTS-n.start)):e.setStart(n.start+n.duration):e.setStart(Math.max(n.start-e.duration,0))}function MT(n,e,t,r,i,o){r-t<=0&&(wt.warn("Fragment should have a positive duration",e),r=t+e.duration,o=i+e.duration);let a=t,l=r;const d=e.startPTS,c=e.endPTS;if(Oe(d)){const m=Math.abs(d-t);Oe(e.deltaPTS)?e.deltaPTS=Math.max(m,e.deltaPTS):e.deltaPTS=m,a=Math.max(t,d),t=Math.min(t,d),i=Math.min(i,e.startDTS),l=Math.min(r,c),r=Math.max(r,c),o=Math.max(o,e.endDTS)}const u=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(r-e.start),e.startPTS=t,e.maxStartPTS=a,e.startDTS=i,e.endPTS=r,e.minEndPTS=l,e.endDTS=o;const f=e.sn;if(!n||f<n.startSN||f>n.endSN)return 0;let p;const h=f-n.startSN,g=n.fragments;for(g[h]=e,p=h;p>0;p--)Mu(g[p],g[p-1]);for(p=h;p<g.length-1;p++)Mu(g[p],g[p+1]);return n.fragmentHint&&Mu(g[g.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,u}function UU(n,e){if(n===e)return;let t=null;const r=n.fragments;for(let d=r.length-1;d>=0;d--){const c=r[d].initSegment;if(c){t=c;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let i;GU(n,e,(d,c,u,f)=>{if((!e.startCC||e.skippedSegments)&&c.cc!==d.cc){const p=d.cc-c.cc;for(let h=u;h<f.length;h++)f[h].cc+=p;e.endCC=f[f.length-1].cc}Oe(d.startPTS)&&Oe(d.endPTS)&&(c.setStart(c.startPTS=d.startPTS),c.startDTS=d.startDTS,c.maxStartPTS=d.maxStartPTS,c.endPTS=d.endPTS,c.endDTS=d.endDTS,c.minEndPTS=d.minEndPTS,c.setDuration(d.endPTS-d.startPTS),c.duration&&(i=c),e.PTSKnown=e.alignedSliding=!0),d.hasStreams&&(c.elementaryStreams=d.elementaryStreams),c.loader=d.loader,d.hasStats&&(c.stats=d.stats),d.initSegment&&(c.initSegment=d.initSegment,t=d.initSegment)});const o=e.fragments,s=e.fragmentHint?o.concat(e.fragmentHint):o;if(t&&s.forEach(d=>{var c;d&&(!d.initSegment||d.initSegment.relurl===((c=t)==null?void 0:c.relurl))&&(d.initSegment=t)}),e.skippedSegments){if(e.deltaUpdateFailed=o.some(d=>!d),e.deltaUpdateFailed){wt.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let d=e.skippedSegments;d--;)o.shift();e.startSN=o[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=HU(n.dateRanges,e));const d=n.fragments.filter(c=>c.rawProgramDateTime);if(n.hasProgramDateTime&&!e.hasProgramDateTime)for(let c=1;c<s.length;c++)s[c].programDateTime===null&&Jf(s[c],s[c-1],d);OT(d,e)}e.endCC=o[o.length-1].cc}if(!e.startCC){var a;const d=BT(n,e.startSN-1);e.startCC=(a=d==null?void 0:d.cc)!=null?a:o[0].cc}VU(n.partList,e.partList,(d,c)=>{c.elementaryStreams=d.elementaryStreams,c.stats=d.stats}),i?MT(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):FT(n,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const l=e.advancedDateTime;if(e.advanced&&l){const d=e.edge;e.driftStart||(e.driftStartTime=l,e.driftStart=d),e.driftEndTime=l,e.driftEnd=d}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=n.requestScheduled)}function HU(n,e){const{dateRanges:t,recentlyRemovedDateranges:r}=e,i=kt({},n);r&&r.forEach(a=>{delete i[a]});const s=Object.keys(i).length;return s&&Object.keys(t).forEach(a=>{const l=i[a],d=new kT(t[a].attr,l);d.isValid?(i[a]=d,l||(d.tagOrder+=s)):wt.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Ut(t[a].attr)}"`)}),i}function VU(n,e,t){if(n&&e){let r=0;for(let i=0,o=n.length;i<=o;i++){const s=n[i],a=e[i+r];s&&a&&s.index===a.index&&s.fragment.sn===a.fragment.sn?t(s,a):r--}}}function GU(n,e,t){const r=e.skippedSegments,i=Math.max(n.startSN,e.startSN)-e.startSN,o=(n.fragmentHint?1:0)+(r?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,s=e.startSN-n.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let d=i;d<=o;d++){const c=l[s+d];let u=a[d];if(r&&!u&&c&&(u=e.fragments[d]=c),c&&u){if(t(c,u,d,a),c.url&&c.url!==u.url){e.playlistParsingError=L0(`media sequence mismatch ${u.sn}:`,n,e,c,u);return}else if(c.cc!==u.cc){e.playlistParsingError=L0(`discontinuity sequence mismatch (${c.cc}!=${u.cc})`,n,e,c,u);return}}}}function L0(n,e,t,r,i){return new Error(`${n} ${i.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function FT(n,e,t=!0){const r=e.startSN+e.skippedSegments-n.startSN,i=n.fragments,o=r>=0;let s=0;if(o&&r<i.length)s=i[r].start;else if(o&&e.startSN===n.endSN+1)s=n.fragmentEnd;else if(o&&t)s=n.fragmentStart+r*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)s=n.fragmentStart;else return;eh(e,s)}function eh(n,e){if(e){const t=n.fragments;for(let r=n.skippedSegments;r<t.length;r++)t[r].addStart(e);n.fragmentHint&&n.fragmentHint.addStart(e)}}function $T(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const r=n.fragments;if(r.length&&t*4>e){const o=r[r.length-1].duration*1e3;o<t&&(t=o)}}else t/=2;return Math.round(t)}function BT(n,e,t){if(!n)return null;let r=n.fragments[e-n.startSN];return r||(r=n.fragmentHint,r&&r.sn===e)?r:e<n.startSN&&t&&t.sn===e?t:null}function P0(n,e,t){return n?NT(n.partList,e,t):null}function NT(n,e,t){if(n)for(let r=n.length;r--;){const i=n[r];if(i.index===t&&i.fragment.sn===e)return i}return null}function zT(n){n.forEach((e,t)=>{var r;(r=e.details)==null||r.fragments.forEach(i=>{i.level=t,i.initSegment&&(i.initSegment.level=t)})})}function Ta(n,e){for(let r=0,i=n.length;r<i;r++){var t;if(((t=n[r])==null?void 0:t.cc)===e)return n[r]}return null}function WU(n,e){return!!(n&&e.startCC<n.endCC&&e.endCC>n.startCC)}function _0(n,e){const t=n.start+e;n.startPTS=t,n.setStart(t),n.endPTS=t+n.duration}function UT(n,e){const t=e.fragments;for(let r=0,i=t.length;r<i;r++)_0(t[r],n);e.fragmentHint&&_0(e.fragmentHint,n),e.alignedSliding=!0}function jU(n,e){n&&(HT(e,n),e.alignedSliding||Bd(e,n),!e.alignedSliding&&!e.skippedSegments&&FT(n,e,!1))}function HT(n,e){if(!WU(e,n))return;const t=Math.min(e.endCC,n.endCC),r=Ta(e.fragments,t),i=Ta(n.fragments,t);if(!r||!i)return;wt.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const o=r.start-i.start;UT(o,n)}function Bd(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,r=e.fragments;if(!t.length||!r.length)return;let i,o;const s=Math.min(e.endCC,n.endCC);e.startCC<s&&n.startCC<s&&(i=Ta(r,s),o=Ta(t,s)),(!i||!o)&&(i=r[Math.floor(r.length/2)],o=Ta(t,i.cc)||t[Math.floor(t.length/2)]);const a=i.programDateTime,l=o.programDateTime;if(!a||!l)return;const d=(l-a)/1e3-(o.start-i.start);UT(d,n)}const KU={toString:function(n){let e="";const t=n.length;for(let r=0;r<t;r++)e+=`[${n.start(r).toFixed(3)}-${n.end(r).toFixed(3)}]`;return e}},ye={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Mp extends PT{constructor(e,t,r,i,o){super(i,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ye.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:s,fragCurrent:a,media:l,mediaBuffer:d,state:c}=this,u=l?l.currentTime:0,f=tt.bufferInfo(d||l,u,s.maxBufferHole),p=!f.len;if(this.log(`Media seeking to ${Oe(u)?u.toFixed(3):u}, state: ${c}, ${p?"out of":"in"} buffer`),this.state===ye.ENDED)this.resetLoadingState();else if(a){const h=s.maxFragLookUpTolerance,g=a.start-h,m=a.start+a.duration+h;if(p||m<f.start||g>f.end){const v=u>m;(u<g||v)&&(v&&a.loader&&(this.log(`Cancelling fragment load for seek (sn: ${a.sn})`),a.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(u,1/0,this.playlistType,!0);const h=this.lastCurrentTime;if(u>h&&(this.lastCurrentTime=u),!this.loadingParts){const g=Math.max(f.end,u),m=this.shouldLoadParts(this.getLevelDetails(),g);m&&(this.log(`LL-Part loading ON after seeking to ${u.toFixed(2)} with buffer @${g.toFixed(2)}`),this.loadingParts=m)}}this.hls.hasEnoughToStart||(this.log(`Setting ${p?"startPosition":"nextLoadPosition"} to ${u} for seek without enough to start`),this.nextLoadPosition=u,p&&(this.startPosition=u)),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=o,this.hls=e,this.fragmentLoader=new xU(e.config),this.keyLoader=r,this.fragmentTracker=t,this.config=e.config,this.decrypter=new _p(e.config)}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===ye.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ye.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const r=e.end||0,i=this.config.timelineOffset||0;if(r<=i)return!1;const o=e.buffered;this.config.maxBufferHole&&o&&o.length>1&&(e=tt.bufferedInfo(o,e.start,0));const s=e.nextStart;if(s&&s>i&&s<t.edge||this.media.currentTime<e.start)return!1;const l=t.partList;if(l!=null&&l.length){const c=l[l.length-1];return tt.isBuffered(this.media,c.start+c.duration/2)}const d=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(d)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const r=this.media=this.mediaBuffer=t.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);const i=this.config;this.levels&&i.autoStartLoad&&this.state===ye.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(e,t){const r=!!t.transferMedia,i=this.media;if(i!==null){if(i.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),i.removeEventListener("seeking",this.onMediaSeeking),i.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=ye.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,r){this.startFragRequested=!0,this._loadFragForPlayback(e,t,r)}_loadFragForPlayback(e,t,r){const i=o=>{const s=o.frag;if(this.fragContextChanged(s)){this.warn(`${s.type} sn: ${s.sn}${o.part?" part: "+o.part.index:""} of ${this.fragInfo(s,!1,o.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(s);return}s.stats.chunkCount++,this._handleFragmentLoadProgress(o)};this._doFragLoad(e,t,r,i).then(o=>{if(!o)return;const s=this.state,a=o.frag;if(this.fragContextChanged(a)){(s===ye.FRAG_LOADING||!this.fragCurrent&&s===ye.PARSING)&&(this.fragmentTracker.removeFragment(a),this.state=ye.IDLE);return}"payload"in o&&(this.log(`Loaded ${a.type} sn: ${a.sn} of ${this.playlistLabel()} ${a.level}`),this.hls.trigger(I.FRAG_LOADED,o)),this._handleFragmentLoadComplete(o)}).catch(o=>{this.state===ye.STOPPED||this.state===ye.ERROR||(this.warn(`Frag error: ${(o==null?void 0:o.message)||o}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:r}=this;if(r.getState(e)===rn.APPENDING){const o=e.type,s=this.getFwdBufferInfo(this.mediaBuffer,o),a=Math.max(e.duration,s?s.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(a,e.duration))&&r.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===rn.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return(t==null?void 0:t.live)&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,r=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:r};this.hls.trigger(I.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(r=>{const i=r==null?void 0:r.frag;if(!i||this.fragContextChanged(i)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:i}=this,{frag:o,payload:s}=r,a=o.decryptdata;if(s&&s.byteLength>0&&a!=null&&a.key&&a.iv&&ms(a.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),a.key.buffer,a.iv.buffer,Dp(a.method)).catch(d=>{throw i.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.FRAG_DECRYPT_ERROR,fatal:!1,error:d,reason:d.message,frag:o}),d}).then(d=>{const c=self.performance.now();return i.trigger(I.FRAG_DECRYPTED,{frag:o,payload:d,stats:{tstart:l,tdecrypt:c}}),r.payload=d,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===ye.STOPPED||this.state===ye.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const r=e.frag.stats;this.state!==ye.STOPPED&&(this.state=ye.IDLE),e.frag.data=new Uint8Array(e.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${r?KU.toString(tt.getBuffered(r)):"(detached)"})`),en(e)){var i;if(e.type!==Ue.SUBTITLE){const s=e.elementaryStreams;if(!Object.keys(s).some(a=>!!s[a])){this.state=ye.IDLE;return}}const o=(i=this.levels)==null?void 0:i[e.level];o!=null&&o.fragmentError&&(this.log(`Resetting level fragment error count of ${o.fragmentError} on frag buffered`),o.fragmentError=0)}this.state=ye.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:r,part:i,partsLoaded:o}=e,s=!o||o.length===0||o.some(l=>!l),a=new kp(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!s);t.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,r=null,i){var o;this.fragCurrent=e;const s=t==null?void 0:t.details;if(!this.levels||!s)throw new Error(`frag load aborted, missing level${s?"":" detail"}s`);let a=null;e.encrypted&&!((o=e.decryptdata)!=null&&o.key)?(this.log(`Loading key for ${e.sn} of [${s.startSN}-${s.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=ye.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(f=>{if(!this.fragContextChanged(f.frag))return this.hls.trigger(I.KEY_LOADED,f),this.state===ye.KEY_LOADING&&(this.state=ye.IDLE),f}),this.hls.trigger(I.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):e.encrypted||(a=this.keyLoader.loadClear(e,s.encryptedFragments,this.startFragRequested),a&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(en(e)&&(!l||e.sn!==l.sn)){const f=this.shouldLoadParts(t.details,e.end);f!==this.loadingParts&&(this.log(`LL-Part loading ${f?"ON":"OFF"} loading sn ${l==null?void 0:l.sn}->${e.sn}`),this.loadingParts=f)}if(r=Math.max(e.start,r||0),this.loadingParts&&en(e)){const f=s.partList;if(f&&i){r>e.end&&s.fragmentHint&&(e=s.fragmentHint);const p=this.getNextPart(f,e,r);if(p>-1){const h=f[p];e=this.fragCurrent=h.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${h.index} (${p}/${f.length-1}) of ${this.fragInfo(e,!1,h)}) cc: ${e.cc} [${s.startSN}-${s.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=ye.FRAG_LOADING;let g;return a?g=a.then(m=>!m||this.fragContextChanged(m.frag)?null:this.doFragPartsLoad(e,h,t,i)).catch(m=>this.handleFragLoadError(m)):g=this.doFragPartsLoad(e,h,t,i).catch(m=>this.handleFragLoadError(m)),this.hls.trigger(I.FRAG_LOADING,{frag:e,part:h,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):g}else if(!e.url||this.loadedEndOfParts(f,r))return Promise.resolve(null)}}if(en(e)&&this.loadingParts){var d;this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(d=s.partList)==null?void 0:d.filter(f=>f.loaded).map(f=>`[${f.start}-${f.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${s?"["+s.startSN+"-"+s.endSN+"]":""}, target: ${parseFloat(r.toFixed(3))}`),Oe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ye.FRAG_LOADING;const c=this.config.progressive;let u;return c&&a?u=a.then(f=>!f||this.fragContextChanged(f==null?void 0:f.frag)?null:this.fragmentLoader.load(e,i)).catch(f=>this.handleFragLoadError(f)):u=Promise.all([this.fragmentLoader.load(e,c?i:void 0),a]).then(([f])=>(!c&&f&&i&&i(f),f)).catch(f=>this.handleFragLoadError(f)),this.hls.trigger(I.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):u}doFragPartsLoad(e,t,r,i){return new Promise((o,s)=>{var a;const l=[],d=(a=r.details)==null?void 0:a.partList,c=u=>{this.fragmentLoader.loadPart(e,u,i).then(f=>{l[u.index]=f;const p=f.part;this.hls.trigger(I.FRAG_LOADED,f);const h=P0(r.details,e.sn,u.index+1)||NT(d,e.sn,u.index+1);if(h)c(h);else return o({frag:e,part:p,partsLoaded:l})}).catch(s)};c(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===oe.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(I.ERROR,t)}else this.hls.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==ye.PARSING){!this.fragCurrent&&this.state!==ye.STOPPED&&this.state!==ye.ERROR&&(this.state=ye.IDLE);return}const{frag:r,part:i,level:o}=t,s=self.performance.now();r.stats.parsing.end=s,i&&(i.stats.parsing.end=s);const a=this.getLevelDetails(),d=a&&r.sn>a.endSN||this.shouldLoadParts(a,r.end);d!==this.loadingParts&&(this.log(`LL-Part loading ${d?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=d),this.updateLevelTiming(r,i,o,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e!=null&&e.partList){var r;const o=e.partList[0],s=o.end+(((r=e.fragmentHint)==null?void 0:r.duration)||0);if(t>=s){var i;if((this.hls.hasEnoughToStart?((i=this.media)==null?void 0:i.currentTime)||this.lastCurrentTime:this.getLoadPosition())>o.start-o.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:r}=this,{level:i,sn:o,part:s}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${o} of ${this.playlistLabel()} ${i}. The current chunk will not be buffered.`),null;const a=t[i],l=a.details,d=s>-1?P0(l,o,s):null,c=d?d.fragment:BT(l,o,r);return c?(r&&r!==c&&(c.stats=r.stats),{frag:c,part:d,level:a}):null}bufferFragmentData(e,t,r,i,o){var s;if(!e||this.state!==ye.PARSING)return;const{data1:a,data2:l}=e;let d=a;if(a&&l&&(d=mr(a,l)),!((s=d)!=null&&s.length))return;const c=this.initPTS[t.cc],u=c?-c.baseTime/c.timescale:void 0,f={type:e.type,frag:t,part:r,chunkMeta:i,offset:u,parent:t.type,data:d};if(this.hls.trigger(I.BUFFER_APPENDING,f),e.dropped&&e.independent&&!r){if(o)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!tt.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const r=t.currentTime,i=tt.bufferInfo(t,r,0),o=e.duration,s=Math.min(this.config.maxFragLookUpTolerance*2,o*.25),a=Math.max(Math.min(e.start-s,i.end-s),r+s);e.start-a>s&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,t){var r;const i=this.getLoadPosition();if(!Oe(i))return null;const s=this.lastCurrentTime>i||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,i,t,s)}getFwdBufferInfoAtPos(e,t,r,i){const o=tt.bufferInfo(e,t,i);if(o.len===0&&o.nextStart!==void 0){const s=this.fragmentTracker.getBufferedFrag(t,r);if(s&&(o.nextStart<=s.end||s.gap)){const a=Math.max(Math.min(o.nextStart,s.end)-t,i);return tt.bufferInfo(e,t,a)}}return o}getMaxBufferLength(e){const{config:t}=this;let r;return e?r=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):r=t.maxBufferLength,Math.min(r,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const r=this.config,i=Math.max(Math.min(e-t,r.maxBufferLength),t),o=Math.max(e-t*3,r.maxMaxBufferLength/2,i);return o>=i?(r.maxMaxBufferLength=o,this.warn(`Reduce max buffer length to ${o}s`),!0):!1}getAppendedFrag(e,t=Ue.MAIN){var r;const i=(r=this.fragmentTracker)==null?void 0:r.getAppendedFrag(e,t);return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const r=t.fragments,i=r.length;if(!i)return null;const{config:o}=this,s=r[0].start,a=o.lowLatencyMode&&!!t.partList;let l=null;if(t.live){const u=o.initialLiveManifestSize;if(i<u)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${u})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<s){var d;a&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(t);const f=this.hls.startPosition,p=this.hls.liveSyncPosition,h=l?(f!==-1&&f>=s?f:p)||l.start:e;this.log(`Setting startPosition to ${h} to match start frag at live edge. mainStart: ${f} liveSyncPosition: ${p} frag.start: ${(d=l)==null?void 0:d.start}`),this.startPosition=this.nextLoadPosition=h}}else e<=s&&(l=r[0]);if(!l){const u=this.loadingParts?t.partEnd:t.fragmentEnd;l=this.getFragmentAtPosition(e,u,t)}let c=this.filterReplacedPrimary(l,t);if(!c&&l){const u=l.sn-t.startSN;c=this.filterReplacedPrimary(r[u+1]||null,t)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,t){const r=this.fragmentTracker.getState(e);return(r===rn.OK||r===rn.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,r,i,o){let s=null;if(e.gap&&(s=this.getNextFragment(this.nextLoadPosition,t),s&&!s.gap&&r.nextStart)){const a=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i,0);if(a!==null&&r.len+a.len>=o){const l=s.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,s}get primaryPrefetch(){if(k0(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if(k0(this.config)&&e.type!==Ue.SUBTITLE){const r=this.hls.interstitialsManager,i=r==null?void 0:r.bufferingItem;if(i){const s=i.event;if(s){if(s.appendInPlace||Math.abs(e.start-i.start)>1||i.start===0)return null}else if(e.end<=i.start&&(t==null?void 0:t.live)===!1||e.start>i.end&&i.nextEvent&&(i.nextEvent.appendInPlace||e.start-i.end>1))return null}const o=r==null?void 0:r.playerQueue;if(o)for(let s=o.length;s--;){const a=o[s].interstitial;if(a.appendInPlace&&e.start>=a.startTime&&e.end<=a.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,r){let i=-1,o=!1,s=!0;for(let a=0,l=e.length;a<l;a++){const d=e[a];if(s=s&&!d.independent,i>-1&&r<d.start)break;const c=d.loaded;c?i=-1:(o||(d.independent||s)&&d.fragment===t)&&(d.fragment!==t&&this.warn(`Need buffer at ${r} but next unloaded part starts at ${d.start}`),i=a),o=c}return i}loadedEndOfParts(e,t){let r;for(let i=e.length;i--;){if(r=e[i],!r.loaded)return!1;if(t>r.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,r=this.fragPrevious;let i=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),i=lU(t,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const o=r.sn+1;if(o>=e.startSN&&o<=e.endSN){const s=t[o-e.startSN];r.cc===s.cc&&(i=s,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=LT(e,r.cc,r.end),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const o=this.hls.liveSyncPosition;o!==null&&(i=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,r){const{config:i}=this;let{fragPrevious:o}=this,{fragments:s,endSN:a}=r;const{fragmentHint:l}=r,{maxFragLookUpTolerance:d}=i,c=r.partList,u=!!(this.loadingParts&&c!=null&&c.length&&l);u&&l&&!this.bitrateTest&&c[c.length-1].fragment.sn===l.sn&&(s=s.concat(l),a=l.sn);let f;if(e<t){var p;const g=e<this.lastCurrentTime||e>t-d||(p=this.media)!=null&&p.paused||!this.startFragRequested?0:d;f=Fo(o,s,e,g)}else f=s[s.length-1];if(f){const h=f.sn-r.startSN,g=this.fragmentTracker.getState(f);if((g===rn.OK||g===rn.PARTIAL&&f.gap)&&(o=f),o&&f.sn===o.sn&&(!u||c[0].fragment.sn>f.sn||!r.live&&!u)&&o&&f.level===o.level){const v=s[h+1];f.sn<a&&this.fragmentTracker.getState(v)!==rn.OK?f=v:f=null}}return f}alignPlaylists(e,t,r){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const o=e.fragmentStart,s=!t,a=e.alignedSliding&&Oe(o);if(s||!a&&!o){jU(r,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${i}`),l}return o}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let r=this.startPosition;r<t&&(r=-1);const i=this.timelineOffset;if(r===-1){const o=this.startTimeOffset!==null,s=o?this.startTimeOffset:e.startTimeOffset;s!==null&&Oe(s)?(r=t+s,s<0&&(r+=e.edge),r=Math.min(Math.max(t,r),t+e.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${s} found in ${o?"multivariant":"media"} playlist`),this.startPosition=r):e.live?(r=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+i}this.nextLoadPosition=r+i}getLoadPosition(){var e;const{media:t}=this;let r=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?r=t.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&en(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ye.FRAG_LOADING_WAITING_RETRY)&&(this.state=ye.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const h=this.getCurrentContext(t.chunkMeta);h&&(t.frag=h.frag)}const r=t.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var i;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const o=t.details===oe.FRAG_GAP;o&&this.fragmentTracker.fragBuffered(r,!0);const s=t.errorAction,{action:a,flags:l,retryCount:d=0,retryConfig:c}=s||{},u=!!s&&!!c,f=u&&a===yn.RetryRequest,p=u&&!s.resolved&&l===xr.MoveAllAlternatesMatchingHost;if(!f&&p&&en(r)&&!r.endList)this.resetFragmentErrors(e),this.treatAsGap(r),s.resolved=!0;else if((f||p)&&d<c.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const h=Pp(c,d);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${t.details}, retrying loading ${d+1}/${c.maxNumRetry} in ${h}ms`),s.resolved=!0,this.retryDate=self.performance.now()+h,this.state=ye.FRAG_LOADING_WAITING_RETRY}else if(c&&s)if(this.resetFragmentErrors(e),d<c.maxNumRetry)!o&&a!==yn.RemoveAlternatePermanently&&(s.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${d})`);return}else a===yn.SendAlternateToPenaltyBox?this.state=ye.WAITING_LEVEL:this.state=ye.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ye.PARSING||this.state===ye.PARSED){const t=e.frag,r=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,r),o=i&&i.len>.5;o&&this.reduceMaxBufferLength(i.len,(t==null?void 0:t.duration)||10);const s=!o;return s&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${r} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),s}return!1}resetFragmentErrors(e){e===Ue.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==ye.STOPPED&&(this.state=ye.IDLE)}afterBufferFlushed(e,t,r){if(!e)return;const i=tt.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,r),this.state===ye.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==ye.STOPPED&&(this.state=ye.IDLE)}resetStartWhenNotLoaded(e){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of ${this.playlistLabel()} ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,r,i){const o=r.details;if(!o){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,d)=>{const c=e.elementaryStreams[d];if(c){const u=c.endPTS-c.startPTS;if(u<=0)return this.warn(`Could not parse fragment ${e.sn} ${d} duration reliably (${u})`),l||!1;const f=i?0:MT(o,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(I.LEVEL_PTS_UPDATED,{details:o,level:r,drift:f,type:d,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)){var a;if(r.fragmentError===0&&this.treatAsGap(e,r),((a=this.transmuxer)==null?void 0:a.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(l.message),this.hls.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=ye.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(I.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===Ue.MAIN?"level":"track"}fragInfo(e,t=!0,r){var i,o;return`${this.playlistLabel()} ${e.level} (${r?"part":"frag"}:[${((i=t&&!r?e.startPTS:(r||e).start)!=null?i:NaN).toFixed(3)}-${((o=t&&!r?e.endPTS:(r||e).end)!=null?o:NaN).toFixed(3)}]${r&&e.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function k0(n){return!!n.interstitialsController&&n.enableInterstitialPlayback!==!1}class VT{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let r;if(e.length)e.length===1?r=e[0]:r=qU(e,t);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function qU(n,e){const t=new Uint8Array(e);let r=0;for(let i=0;i<n.length;i++){const o=n[i];t.set(o,r),r+=o.length}return t}var Fu={exports:{}},D0;function YU(){return D0||(D0=1,function(n){var e=Object.prototype.hasOwnProperty,t="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(t=!1));function i(l,d,c){this.fn=l,this.context=d,this.once=c||!1}function o(l,d,c,u,f){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new i(c,u||l,f),h=t?t+d:d;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],p]:l._events[h].push(p):(l._events[h]=p,l._eventsCount++),l}function s(l,d){--l._eventsCount===0?l._events=new r:delete l._events[d]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var d=[],c,u;if(this._eventsCount===0)return d;for(u in c=this._events)e.call(c,u)&&d.push(t?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(c)):d},a.prototype.listeners=function(d){var c=t?t+d:d,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var f=0,p=u.length,h=new Array(p);f<p;f++)h[f]=u[f].fn;return h},a.prototype.listenerCount=function(d){var c=t?t+d:d,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(d,c,u,f,p,h){var g=t?t+d:d;if(!this._events[g])return!1;var m=this._events[g],v=arguments.length,b,y;if(m.fn){switch(m.once&&this.removeListener(d,m.fn,void 0,!0),v){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,c),!0;case 3:return m.fn.call(m.context,c,u),!0;case 4:return m.fn.call(m.context,c,u,f),!0;case 5:return m.fn.call(m.context,c,u,f,p),!0;case 6:return m.fn.call(m.context,c,u,f,p,h),!0}for(y=1,b=new Array(v-1);y<v;y++)b[y-1]=arguments[y];m.fn.apply(m.context,b)}else{var x=m.length,E;for(y=0;y<x;y++)switch(m[y].once&&this.removeListener(d,m[y].fn,void 0,!0),v){case 1:m[y].fn.call(m[y].context);break;case 2:m[y].fn.call(m[y].context,c);break;case 3:m[y].fn.call(m[y].context,c,u);break;case 4:m[y].fn.call(m[y].context,c,u,f);break;default:if(!b)for(E=1,b=new Array(v-1);E<v;E++)b[E-1]=arguments[E];m[y].fn.apply(m[y].context,b)}}return!0},a.prototype.on=function(d,c,u){return o(this,d,c,u,!1)},a.prototype.once=function(d,c,u){return o(this,d,c,u,!0)},a.prototype.removeListener=function(d,c,u,f){var p=t?t+d:d;if(!this._events[p])return this;if(!c)return s(this,p),this;var h=this._events[p];if(h.fn)h.fn===c&&(!f||h.once)&&(!u||h.context===u)&&s(this,p);else{for(var g=0,m=[],v=h.length;g<v;g++)(h[g].fn!==c||f&&!h[g].once||u&&h[g].context!==u)&&m.push(h[g]);m.length?this._events[p]=m.length===1?m[0]:m:s(this,p)}return this},a.prototype.removeAllListeners=function(d){var c;return d?(c=t?t+d:d,this._events[c]&&s(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,n.exports=a}(Fu)),Fu.exports}var XU=YU(),Fp=E4(XU);const Ka="1.6.8",ks={};function QU(){return typeof __HLS_WORKER_BUNDLE__=="function"}function ZU(){const n=ks[Ka];if(n)return n.clientCount++,n;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),i={worker:new self.Worker(t),objectURL:t,clientCount:1};return ks[Ka]=i,i}function JU(n){const e=ks[n];if(e)return e.clientCount++,e;const t=new self.URL(n,self.location.href).href,i={worker:new self.Worker(t),scriptURL:t,clientCount:1};return ks[n]=i,i}function e8(n){const e=ks[n||Ka];if(e&&e.clientCount--===1){const{worker:r,objectURL:i}=e;delete ks[n||Ka],i&&self.URL.revokeObjectURL(i),r.terminate()}}function GT(n,e){return e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function $p(n,e){return e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function Sc(n,e){let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t}function qa(n,e){const t=e;let r=0;for(;$p(n,e);){r+=10;const i=Sc(n,e+6);r+=i,GT(n,e+10)&&(r+=10),e+=r}if(r>0)return n.subarray(t,t+r)}function t8(n,e,t,r){const i=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],o=e[t+2],s=o>>2&15;if(s>12){const p=new Error(`invalid ADTS sampling index:${s}`);n.emit(I.ERROR,I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.FRAG_PARSING_ERROR,fatal:!0,error:p,reason:p.message});return}const a=(o>>6&3)+1,l=e[t+3]>>6&3|(o&1)<<2,d="mp4a.40."+a,c=i[s];let u=s;(a===5||a===29)&&(u-=3);const f=[a<<3|(u&14)>>1,(u&1)<<7|l<<3];return wt.log(`manifest codec:${r}, parsed codec:${d}, channels:${l}, rate:${c} (ADTS object type:${a} sampling index:${s})`),{config:f,samplerate:c,channelCount:l,codec:d,parsedCodec:d,manifestCodec:r}}function WT(n,e){return n[e]===255&&(n[e+1]&246)===240}function jT(n,e){return n[e+1]&1?7:9}function Bp(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function n8(n,e){return e+5<n.length}function Nd(n,e){return e+1<n.length&&WT(n,e)}function r8(n,e){return n8(n,e)&&WT(n,e)&&Bp(n,e)<=n.length-e}function i8(n,e){if(Nd(n,e)){const t=jT(n,e);if(e+t>=n.length)return!1;const r=Bp(n,e);if(r<=t)return!1;const i=e+r;return i===n.length||Nd(n,i)}return!1}function KT(n,e,t,r,i){if(!n.samplerate){const o=t8(e,t,r,i);if(!o)return;kt(n,o)}}function qT(n){return 1024*9e4/n}function o8(n,e){const t=jT(n,e);if(e+t<=n.length){const r=Bp(n,e)-t;if(r>0)return{headerLength:t,frameLength:r}}}function YT(n,e,t,r,i){const o=qT(n.samplerate),s=r+i*o,a=o8(e,t);let l;if(a){const{frameLength:u,headerLength:f}=a,p=f+u,h=Math.max(0,t+p-e.length);h?(l=new Uint8Array(p-f),l.set(e.subarray(t+f,e.length),0)):l=e.subarray(t+f,t+p);const g={unit:l,pts:s};return h||n.samples.push(g),{sample:g,length:p,missing:h}}const d=e.length-t;return l=new Uint8Array(d),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:s},length:d,missing:-1}}function s8(n,e){return $p(n,e)&&Sc(n,e+6)+10<=n.length-e}function a8(n){return n instanceof ArrayBuffer?n:n.byteOffset==0&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function $u(n,e=0,t=1/0){return l8(n,e,t,Uint8Array)}function l8(n,e,t,r){const i=d8(n);let o=1;"BYTES_PER_ELEMENT"in r&&(o=r.BYTES_PER_ELEMENT);const s=c8(n)?n.byteOffset:0,a=(s+n.byteLength)/o,l=(s+e)/o,d=Math.floor(Math.max(0,Math.min(l,a))),c=Math.floor(Math.min(d+Math.max(t,0),a));return new r(i,d,c-d)}function d8(n){return n instanceof ArrayBuffer?n:n.buffer}function c8(n){return n&&n.buffer instanceof ArrayBuffer&&n.byteLength!==void 0&&n.byteOffset!==void 0}function u8(n){const e={key:n.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(n.size<2)return;if(n.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const r=n.data.subarray(1).indexOf(0);if(r===-1)return;const i=rr($u(n.data,1,r)),o=n.data[2+r],s=n.data.subarray(3+r).indexOf(0);if(s===-1)return;const a=rr($u(n.data,3+r,s));let l;return i==="-->"?l=rr($u(n.data,4+r+s)):l=a8(n.data.subarray(4+r+s)),e.mimeType=i,e.pictureType=o,e.description=a,e.data=l,e}function f8(n){if(n.size<2)return;const e=rr(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}}function h8(n){if(n.size<2)return;if(n.type==="TXXX"){let t=1;const r=rr(n.data.subarray(t),!0);t+=r.length+1;const i=rr(n.data.subarray(t));return{key:n.type,info:r,data:i}}const e=rr(n.data.subarray(1));return{key:n.type,info:"",data:e}}function p8(n){if(n.type==="WXXX"){if(n.size<2)return;let t=1;const r=rr(n.data.subarray(t),!0);t+=r.length+1;const i=rr(n.data.subarray(t));return{key:n.type,info:r,data:i}}const e=rr(n.data);return{key:n.type,info:"",data:e}}function g8(n){return n.type==="PRIV"?f8(n):n.type[0]==="W"?p8(n):n.type==="APIC"?u8(n):h8(n)}function m8(n){const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=Sc(n,4),r=10;return{type:e,size:t,data:n.subarray(r,r+t)}}const Ol=10,v8=10;function XT(n){let e=0;const t=[];for(;$p(n,e);){const r=Sc(n,e+6);n[e+5]>>6&1&&(e+=Ol),e+=Ol;const i=e+r;for(;e+v8<i;){const o=m8(n.subarray(e)),s=g8(o);s&&t.push(s),e+=o.size+Ol}GT(n,e)&&(e+=Ol)}return t}function QT(n){return n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp"}function b8(n){if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,t&&(r+=4772185884e-2),Math.round(r)}}function Np(n){const e=XT(n);for(let t=0;t<e.length;t++){const r=e[t];if(QT(r))return b8(r)}}let qn=function(n){return n.audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3",n.misbklv="urn:misb:KLV:bin:1910.1",n}({});function Hr(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class zp{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,r){}demux(e,t){this.cachedData&&(e=mr(this.cachedData,e),this.cachedData=null);let r=qa(e,0),i=r?r.length:0,o;const s=this._audioTrack,a=this._id3Track,l=r?Np(r):void 0,d=e.length;for((this.basePTS===null||this.frameIndex===0&&Oe(l))&&(this.basePTS=y8(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:qn.audioId3,duration:Number.POSITIVE_INFINITY});i<d;){if(this.canParse(e,i)){const c=this.appendFrame(s,e,i);c?(this.frameIndex++,this.lastPTS=c.sample.pts,i+=c.length,o=i):i=d}else s8(e,i)?(r=qa(e,i),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:qn.audioId3,duration:Number.POSITIVE_INFINITY}),i+=r.length,o=i):i++;if(i===d&&o!==d){const c=e.slice(o);this.cachedData?this.cachedData=mr(this.cachedData,c):this.cachedData=c}}return{audioTrack:s,videoTrack:Hr(),id3Track:a,textTrack:Hr()}}demuxSampleAes(e,t,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:Hr(),id3Track:this._id3Track,textTrack:Hr()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const y8=(n,e,t)=>{if(Oe(n))return n*90;const r=t?t.baseTime*9e4/t.timescale:0;return e*9e4+r};let Ml=null;const x8=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],S8=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],C8=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],T8=[0,1,1,4];function ZT(n,e,t,r,i){if(t+24>e.length)return;const o=JT(e,t);if(o&&t+o.frameLength<=e.length){const s=o.samplesPerFrame*9e4/o.sampleRate,a=r+i*s,l={unit:e.subarray(t,t+o.frameLength),pts:a,dts:a};return n.config=[],n.channelCount=o.channelCount,n.samplerate=o.sampleRate,n.samples.push(l),{sample:l,length:o.frameLength,missing:0}}}function JT(n,e){const t=n[e+1]>>3&3,r=n[e+1]>>1&3,i=n[e+2]>>4&15,o=n[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&o!==3){const s=n[e+2]>>1&1,a=n[e+3]>>6,l=t===3?3-r:r===3?3:4,d=x8[l*14+i-1]*1e3,u=S8[(t===3?0:t===2?1:2)*3+o],f=a===3?1:2,p=C8[t][r],h=T8[r],g=p*8*h,m=Math.floor(p*d/u+s)*h;if(Ml===null){const y=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ml=y?parseInt(y[1]):0}return!!Ml&&Ml<=87&&r===2&&d>=224e3&&a===0&&(n[e+3]=n[e+3]|128),{sampleRate:u,channelCount:f,frameLength:m,samplesPerFrame:g}}}function Up(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function ew(n,e){return e+1<n.length&&Up(n,e)}function w8(n,e){return Up(n,e)&&4<=n.length-e}function tw(n,e){if(e+1<n.length&&Up(n,e)){const r=JT(n,e);let i=4;r!=null&&r.frameLength&&(i=r.frameLength);const o=e+i;return o===n.length||ew(n,o)}return!1}class E8 extends zp{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const r=qa(e,0);let i=(r==null?void 0:r.length)||0;if(tw(e,i))return!1;for(let o=e.length;i<o;i++)if(i8(e,i))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return r8(e,t)}appendFrame(e,t,r){KT(e,this.observer,t,r,e.manifestCodec);const i=YT(e,t,r,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const nw=(n,e)=>{let t=0,r=5;e+=r;const i=new Uint32Array(1),o=new Uint32Array(1),s=new Uint8Array(1);for(;r>0;){s[0]=n[e];const a=Math.min(r,8),l=8-a;o[0]=4278190080>>>24+l<<l,i[0]=(s[0]&o[0])>>l,t=t?t<<a|i[0]:i[0],e+=1,r-=a}return t};class R8 extends zp{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,r){const i=rw(e,t,r,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=qa(e,0);if(!t)return!1;const r=t.length;return e[r]===11&&e[r+1]===119&&Np(t)!==void 0&&nw(e,r)<16}}function rw(n,e,t,r,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const o=e[t+4]>>6;if(o>=3)return-1;const a=[48e3,44100,32e3][o],l=e[t+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+o]*2;if(t+c>e.length)return-1;const u=e[t+6]>>5;let f=0;u===2?f+=2:(u&1&&u!==1&&(f+=2),u&4&&(f+=2));const p=(e[t+6]<<8|e[t+7])>>12-f&1,g=[2,1,2,3,3,4,4,5][u]+p,m=e[t+5]>>3,v=e[t+5]&7,b=new Uint8Array([o<<6|m<<1|v>>2,(v&3)<<6|u<<3|p<<2|l>>4,l<<4&224]),y=1536/a*9e4,x=r+i*y,E=e.subarray(t,t+c);return n.config=b,n.channelCount=g,n.samplerate=a,n.samples.push({unit:E,pts:x}),c}class A8 extends zp{resetInitSegment(e,t,r,i){super.resetInitSegment(e,t,r,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=qa(e,0);let r=(t==null?void 0:t.length)||0;if(t&&e[r]===11&&e[r+1]===119&&Np(t)!==void 0&&nw(e,r)<=16)return!1;for(let i=e.length;r<i;r++)if(tw(e,r))return wt.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return w8(e,t)}appendFrame(e,t,r){if(this.basePTS!==null)return ZT(e,t,r,this.basePTS,this.frameIndex)}}const I8=/\/emsg[-/]ID3/i;class L8{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,r,i){const o=this.videoTrack=Hr("video",1),s=this.audioTrack=Hr("audio",1),a=this.txtTrack=Hr("text",1);if(this.id3Track=Hr("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=yT(e);if(l.video){const{id:d,timescale:c,codec:u,supplemental:f}=l.video;o.id=d,o.timescale=a.timescale=c,o.codec=u,o.supplemental=f}if(l.audio){const{id:d,timescale:c,codec:u}=l.audio;s.id=d,s.timescale=c,s.codec=u}a.id=mT.text,o.sampleDuration=0,o.duration=s.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return P4(e)}demux(e,t){this.timeOffset=t;let r=e;const i=this.videoTrack,o=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=mr(this.remainderData,e));const a=F4(r);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=r;const s=this.extractID3Track(i,t);return o.samples=e0(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,r=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return r.samples=e0(e,t),{videoTrack:t,audioTrack:Hr(),id3Track:i,textTrack:Hr()}}extractID3Track(e,t){const r=this.id3Track;if(e.samples.length){const i=dt(e.samples,["emsg"]);i&&i.forEach(o=>{const s=B4(o);if(I8.test(s.schemeIdUri)){const a=O0(s,t);let l=s.eventDuration===4294967295?Number.POSITIVE_INFINITY:s.eventDuration/s.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const d=s.payload;r.samples.push({data:d,len:d.byteLength,dts:a,pts:a,type:qn.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&s.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const a=O0(s,t);r.samples.push({data:s.payload,len:s.payload.byteLength,dts:a,pts:a,type:qn.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(e,t,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function O0(n,e){return Oe(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale}class P8{constructor(e,t,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new _p(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Ji.cbc)}decryptAacSample(e,t,r){const i=e[t].unit;if(i.length<=16)return;const o=i.subarray(16,i.length-i.length%16),s=o.buffer.slice(o.byteOffset,o.byteOffset+o.length);this.decryptBuffer(s).then(a=>{const l=new Uint8Array(a);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,r)})}decryptAacSamples(e,t,r){for(;;t++){if(t>=e.length){r();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)r.set(e.subarray(o,o+16),i);return r}getAvcDecryptedUnit(e,t){const r=new Uint8Array(t);let i=0;for(let o=32;o<e.length-16;o+=160,i+=16)e.set(r.subarray(i,i+16),o);return e}decryptAvcSample(e,t,r,i,o){const s=ST(o.data),a=this.getAvcEncryptedData(s);this.decryptBuffer(a.buffer).then(l=>{o.data=this.getAvcDecryptedUnit(s,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,r+1,i)})}decryptAvcSamples(e,t,r,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length){i();return}const o=e[t].units;for(;!(r>=o.length);r++){const s=o[r];if(!(s.data.length<=48||s.type!==1&&s.type!==5)&&(this.decryptAvcSample(e,t,r,i,s),!this.decrypter.isSync()))return}}}}class iw{constructor(){this.VideoSample=null}createVideoSample(e,t,r){return{key:e,frame:!1,pts:t,dts:r,units:[],length:0}}getLastNalUnit(e){var t;let r=this.VideoSample,i;if((!r||r.units.length===0)&&(r=e[e.length-1]),(t=r)!=null&&t.units){const o=r.units;i=o[o.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const r=t.samples,i=r.length;if(i){const o=r[i-1];e.pts=o.pts,e.dts=o.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,r){const i=t.byteLength;let o=e.naluState||0;const s=o,a=[];let l=0,d,c,u,f=-1,p=0;for(o===-1&&(f=0,p=this.getNALuType(t,0),o=0,l=1);l<i;){if(d=t[l++],!o){o=d?0:1;continue}if(o===1){o=d?0:2;continue}if(!d)o=3;else if(d===1){if(c=l-o-1,f>=0){const h={data:t.subarray(f,c),type:p};a.push(h)}else{const h=this.getLastNalUnit(e.samples);h&&(s&&l<=4-s&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-s)),c>0&&(h.data=mr(h.data,t.subarray(0,c)),h.state=0))}l<i?(u=this.getNALuType(t,l),f=l,p=u,o=0):o=-1}else o=0}if(f>=0&&o>=0){const h={data:t.subarray(f,i),type:p,state:o};a.push(h)}if(a.length===0){const h=this.getLastNalUnit(e.samples);h&&(h.data=mr(h.data,t))}return e.naluState=o,a}}class wa{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,r=e.byteLength-t,i=new Uint8Array(4),o=Math.min(4,t);if(o===0)throw new Error("no bytes available");i.set(e.subarray(r,r+o)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=o*8,this.bytesAvailable-=o}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const r=this.word>>>32-t;if(e>32&&wt.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class _8 extends iw{parsePES(e,t,r,i){const o=this.parseNALu(e,r.data,i);let s=this.VideoSample,a,l=!1;r.data=null,s&&o.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.forEach(d=>{var c,u;switch(d.type){case 1:{let g=!1;a=!0;const m=d.data;if(l&&m.length>4){const v=this.readSliceType(m);(v===2||v===4||v===7||v===9)&&(g=!0)}if(g){var f;(f=s)!=null&&f.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.frame=!0,s.key=g;break}case 5:a=!0,(c=s)!=null&&c.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 6:{a=!0,Ap(d.data,1,r.pts,t.samples);break}case 7:{var p,h;a=!0,l=!0;const g=d.data,m=this.readSPS(g);if(!e.sps||e.width!==m.width||e.height!==m.height||((p=e.pixelRatio)==null?void 0:p[0])!==m.pixelRatio[0]||((h=e.pixelRatio)==null?void 0:h[1])!==m.pixelRatio[1]){e.width=m.width,e.height=m.height,e.pixelRatio=m.pixelRatio,e.sps=[g];const v=g.subarray(1,4);let b="avc1.";for(let y=0;y<3;y++){let x=v[y].toString(16);x.length<2&&(x="0"+x),b+=x}e.codec=b}break}case 8:a=!0,e.pps=[d.data];break;case 9:a=!0,e.audFound=!0,(u=s)!=null&&u.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:a=!0;break;default:a=!1;break}s&&a&&s.units.push(d)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new wa(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let r=8,i=8,o;for(let s=0;s<e;s++)i!==0&&(o=t.readEG(),i=(r+o+256)%256),r=i===0?r:i}readSPS(e){const t=new wa(e);let r=0,i=0,o=0,s=0,a,l,d;const c=t.readUByte.bind(t),u=t.readBits.bind(t),f=t.readUEG.bind(t),p=t.readBoolean.bind(t),h=t.skipBits.bind(t),g=t.skipEG.bind(t),m=t.skipUEG.bind(t),v=this.skipScalingList.bind(this);c();const b=c();if(u(5),h(3),c(),m(),b===100||b===110||b===122||b===244||b===44||b===83||b===86||b===118||b===128){const w=f();if(w===3&&h(1),m(),m(),h(1),p())for(l=w!==3?8:12,d=0;d<l;d++)p()&&(d<6?v(16,t):v(64,t))}m();const y=f();if(y===0)f();else if(y===1)for(h(1),g(),g(),a=f(),d=0;d<a;d++)g();m(),h(1);const x=f(),E=f(),A=u(1);A===0&&h(1),h(1),p()&&(r=f(),i=f(),o=f(),s=f());let S=[1,1];if(p()&&p())switch(c()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:{S=[c()<<8|c(),c()<<8|c()];break}}return{width:Math.ceil((x+1)*16-r*2-i*2),height:(2-A)*(E+1)*16-(A?2:4)*(o+s),pixelRatio:S}}}class k8 extends iw{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,r,i){const o=this.parseNALu(e,r.data,i);let s=this.VideoSample,a,l=!1;r.data=null,s&&o.length&&!e.audFound&&(this.pushAccessUnit(s,e),s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),o.forEach(d=>{var c,u;switch(d.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),s.frame=!0,a=!0;break;case 16:case 17:case 18:case 21:if(a=!0,l){var f;(f=s)!=null&&f.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null)}s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 19:case 20:a=!0,(c=s)!=null&&c.frame&&!s.key&&(this.pushAccessUnit(s,e),s=this.VideoSample=null),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0,s.frame=!0;break;case 39:a=!0,Ap(d.data,2,r.pts,t.samples);break;case 32:a=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=kt(e.params,this.readVPS(d.data)),this.initVPS=d.data),e.vps=[d.data];break;case 33:if(a=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],d.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const p=this.readSPS(d.data);e.width=p.width,e.height=p.height,e.pixelRatio=p.pixelRatio,e.codec=p.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const h in p.params)e.params[h]=p.params[h]}this.pushParameterSet(e.sps,d.data,e.vps),s||(s=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),s.key=!0;break;case 34:if(a=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const p=this.readPPS(d.data);for(const h in p)e.params[h]=p[h]}this.pushParameterSet(e.pps,d.data,e.vps)}break;case 35:a=!0,e.audFound=!0,(u=s)!=null&&u.frame&&(this.pushAccessUnit(s,e),s=null),s||(s=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:a=!1;break}s&&a&&s.units.push(d)}),i&&s&&(this.pushAccessUnit(s,e),this.VideoSample=null)}pushParameterSet(e,t,r){(r&&r[0]===this.initVPS||!r&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let r=0;for(let i=0;i<e.byteLength;i++)i>=2&&e[i]===3&&e[i-1]===0&&e[i-2]===0||(t[r]=e[i],r++);return new Uint8Array(t.buffer,0,r)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new wa(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const r=t.readBits(3),i=t.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:i}}readSPS(e){const t=new wa(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const r=t.readBits(3);t.readBoolean();const i=t.readBits(2),o=t.readBoolean(),s=t.readBits(5),a=t.readUByte(),l=t.readUByte(),d=t.readUByte(),c=t.readUByte(),u=t.readUByte(),f=t.readUByte(),p=t.readUByte(),h=t.readUByte(),g=t.readUByte(),m=t.readUByte(),v=t.readUByte(),b=[],y=[];for(let ae=0;ae<r;ae++)b.push(t.readBoolean()),y.push(t.readBoolean());if(r>0)for(let ae=r;ae<8;ae++)t.readBits(2);for(let ae=0;ae<r;ae++)b[ae]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),y[ae]&&t.readUByte();t.readUEG();const x=t.readUEG();x==3&&t.skipBits(1);const E=t.readUEG(),A=t.readUEG(),S=t.readBoolean();let w=0,T=0,C=0,L=0;S&&(w+=t.readUEG(),T+=t.readUEG(),C+=t.readUEG(),L+=t.readUEG());const P=t.readUEG(),_=t.readUEG(),D=t.readUEG(),k=t.readBoolean();for(let ae=k?0:r;ae<=r;ae++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let le=0;le<4;le++)for(let me=0;me<(le===3?2:6);me++)if(!t.readBoolean())t.readUEG();else{const ce=Math.min(64,1<<4+(le<<1));le>1&&t.readEG();for(let ve=0;ve<ce;ve++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const $=t.readUEG();let K=0;for(let ae=0;ae<$;ae++){let le=!1;if(ae!==0&&(le=t.readBoolean()),le){ae===$&&t.readUEG(),t.readBoolean(),t.readUEG();let me=0;for(let fe=0;fe<=K;fe++){const ce=t.readBoolean();let ve=!1;ce||(ve=t.readBoolean()),(ce||ve)&&me++}K=me}else{const me=t.readUEG(),fe=t.readUEG();K=me+fe;for(let ce=0;ce<me;ce++)t.readUEG(),t.readBoolean();for(let ce=0;ce<fe;ce++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const ae=t.readUEG();for(let le=0;le<ae;le++){for(let me=0;me<D+4;me++)t.readBits(1);t.readBits(1)}}let H=0,B=1,X=1,se=!0,pe=1,te=0;t.readBoolean(),t.readBoolean();let W=!1;if(t.readBoolean()){if(t.readBoolean()){const he=t.readUByte(),_e=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],re=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];he>0&&he<16?(B=_e[he-1],X=re[he-1]):he===255&&(B=t.readBits(16),X=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),W=t.readBoolean(),W&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(pe=t.readBits(32),te=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const re=t.readBoolean(),ge=t.readBoolean();let Ee=!1;(re||ge)&&(Ee=t.readBoolean(),Ee&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),Ee&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let He=0;He<=r;He++){se=t.readBoolean();const et=se||t.readBoolean();let Xe=!1;et?t.readEG():Xe=t.readBoolean();const lt=Xe?1:t.readUEG()+1;if(re)for(let Qe=0;Qe<lt;Qe++)t.readUEG(),t.readUEG(),Ee&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(ge)for(let Qe=0;Qe<lt;Qe++)t.readUEG(),t.readUEG(),Ee&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),H=t.readUEG())}let V=E,ue=A;if(S){let ae=1,le=1;x===1?ae=le=2:x==2&&(ae=2),V=E-ae*T-ae*w,ue=A-le*L-le*C}const Pe=i?["A","B","C"][i]:"",Ae=a<<24|l<<16|d<<8|c;let F=0;for(let ae=0;ae<32;ae++)F=(F|(Ae>>ae&1)<<31-ae)>>>0;let z=F.toString(16);return s===1&&z==="2"&&(z="6"),{codecString:`hvc1.${Pe}${s}.${z}.${o?"H":"L"}${v}.B0`,params:{general_tier_flag:o,general_profile_idc:s,general_profile_space:i,general_profile_compatibility_flags:[a,l,d,c],general_constraint_indicator_flags:[u,f,p,h,g,m],general_level_idc:v,bit_depth:P+8,bit_depth_luma_minus8:P,bit_depth_chroma_minus8:_,min_spatial_segmentation_idc:H,chroma_format_idc:x,frame_rate:{fixed:se,fps:te/pe}},width:V,height:ue,pixelRatio:[B,X]}}readPPS(e){const t=new wa(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const i=t.readBoolean(),o=t.readBoolean();let s=1;return o&&i?s=0:o?s=3:i&&(s=2),{parallelismType:s}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const dn=188;class Hi{constructor(e,t,r,i){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.logger=i,this.videoParser=null}static probe(e,t){const r=Hi.syncOffset(e);return r>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(e){const t=e.length;let r=Math.min(dn*5,t-dn)+1,i=0;for(;i<r;){let o=!1,s=-1,a=0;for(let l=i;l<t;l+=dn)if(e[l]===71&&(t-l===dn||e[l+dn]===71)){if(a++,s===-1&&(s=l,s!==0&&(r=Math.min(s+dn*99,e.length-dn)+1)),o||(o=th(e,l)===0),o&&a>1&&(s===0&&a>2||l+dn>r))return s}else{if(a)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:mT[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,r,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=Hi.createTrack("video"),this._videoTrack.duration=i,this._audioTrack=Hi.createTrack("audio",i),this._id3Track=Hi.createTrack("id3"),this._txtTrack=Hi.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:r}=this;e&&(e.pesData=null),t&&(t.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,r=!1,i=!1){r||(this.sampleAes=null);let o;const s=this._videoTrack,a=this._audioTrack,l=this._id3Track,d=this._txtTrack;let c=s.pid,u=s.pesData,f=a.pid,p=l.pid,h=a.pesData,g=l.pesData,m=null,v=this.pmtParsed,b=this._pmtId,y=e.length;if(this.remainderData&&(e=mr(this.remainderData,e),y=e.length,this.remainderData=null),y<dn&&!i)return this.remainderData=e,{audioTrack:a,videoTrack:s,id3Track:l,textTrack:d};const x=Math.max(0,Hi.syncOffset(e));y-=(y-x)%dn,y<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,y,e.buffer.byteLength-y));let E=0;for(let S=x;S<y;S+=dn)if(e[S]===71){const w=!!(e[S+1]&64),T=th(e,S),C=(e[S+3]&48)>>4;let L;if(C>1){if(L=S+5+e[S+4],L===S+dn)continue}else L=S+4;switch(T){case c:w&&(u&&(o=ns(u,this.logger))&&(this.readyVideoParser(s.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(s,d,o,!1)),u={data:[],size:0}),u&&(u.data.push(e.subarray(L,S+dn)),u.size+=S+dn-L);break;case f:if(w){if(h&&(o=ns(h,this.logger)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,o);break;case"mp3":this.parseMPEGPES(a,o);break;case"ac3":this.parseAC3PES(a,o);break}h={data:[],size:0}}h&&(h.data.push(e.subarray(L,S+dn)),h.size+=S+dn-L);break;case p:w&&(g&&(o=ns(g,this.logger))&&this.parseID3PES(l,o),g={data:[],size:0}),g&&(g.data.push(e.subarray(L,S+dn)),g.size+=S+dn-L);break;case 0:w&&(L+=e[L]+1),b=this._pmtId=D8(e,L);break;case b:{w&&(L+=e[L]+1);const P=O8(e,L,this.typeSupported,r,this.observer,this.logger);c=P.videoPid,c>0&&(s.pid=c,s.segmentCodec=P.segmentVideoCodec),f=P.audioPid,f>0&&(a.pid=f,a.segmentCodec=P.segmentAudioCodec),p=P.id3Pid,p>0&&(l.pid=p),m!==null&&!v&&(this.logger.warn(`MPEG-TS PMT found at ${S} after unknown PID '${m}'. Backtracking to sync byte @${x} to parse all TS packets.`),m=null,S=x-188),v=this.pmtParsed=!0;break}case 17:case 8191:break;default:m=T;break}}else E++;E>0&&nh(this.observer,new Error(`Found ${E} TS packet/s that do not start with 0x47`),void 0,this.logger),s.pesData=u,a.pesData=h,l.pesData=g;const A={audioTrack:a,videoTrack:s,id3Track:l,textTrack:d};return i&&this.extractRemainingSamples(A),A}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:r,id3Track:i,textTrack:o}=e,s=r.pesData,a=t.pesData,l=i.pesData;let d;if(s&&(d=ns(s,this.logger))?(this.readyVideoParser(r.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(r,o,d,!0),r.pesData=null)):r.pesData=s,a&&(d=ns(a,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,d);break;case"mp3":this.parseMPEGPES(t,d);break;case"ac3":this.parseAC3PES(t,d);break}t.pesData=null}else a!=null&&a.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=a;l&&(d=ns(l,this.logger))?(this.parseID3PES(i,d),i.pesData=null):i.pesData=l}demuxSampleAes(e,t,r){const i=this.demux(e,r,!0,!this.config.progressive),o=this.sampleAes=new P8(this.observer,this.config,t);return this.decrypt(i,o)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new _8:e==="hevc"&&(this.videoParser=new k8))}decrypt(e,t){return new Promise(r=>{const{audioTrack:i,videoTrack:o}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{o.samples?t.decryptAvcSamples(o.samples,0,0,()=>{r(e)}):r(e)}):o.samples&&t.decryptAvcSamples(o.samples,0,0,()=>{r(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let r=0;const i=this.aacOverFlow;let o=t.data;if(i){this.aacOverFlow=null;const u=i.missing,f=i.sample.unit.byteLength;if(u===-1)o=mr(i.sample.unit,o);else{const p=f-u;i.sample.unit.set(o.subarray(0,u),p),e.samples.push(i.sample),r=i.missing}}let s,a;for(s=r,a=o.length;s<a-1&&!Nd(o,s);s++);if(s!==r){let u;const f=s<a-1;if(f?u=`AAC PES did not start with ADTS header,offset:${s}`:u="No ADTS header found in AAC PES",nh(this.observer,new Error(u),f,this.logger),!f)return}KT(e,this.observer,o,s,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(i){const u=qT(e.samplerate);l=i.sample.pts+u}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let d=0,c;for(;s<a;)if(c=YT(e,o,s,l,d),s+=c.length,c.missing){this.aacOverFlow=c;break}else for(d++;s<a-1&&!Nd(o,s);s++);}parseMPEGPES(e,t){const r=t.data,i=r.length;let o=0,s=0;const a=t.pts;if(a===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;s<i;)if(ew(r,s)){const l=ZT(e,r,s,a,o);if(l)s+=l.length,o++;else break}else s++}parseAC3PES(e,t){{const r=t.data,i=t.pts;if(i===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const o=r.length;let s=0,a=0,l;for(;a<o&&(l=rw(e,r,a,i,s++))>0;)a+=l}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=kt({},t,{type:this._videoTrack?qn.emsg:qn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function th(n,e){return((n[e+1]&31)<<8)+n[e+2]}function D8(n,e){return(n[e+10]&31)<<8|n[e+11]}function O8(n,e,t,r,i,o){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(n[e+1]&15)<<8|n[e+2],l=e+3+a-4,d=(n[e+10]&15)<<8|n[e+11];for(e+=12+d;e<l;){const c=th(n,e),u=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!r){Bu("ADTS AAC",o);break}case 15:s.audioPid===-1&&(s.audioPid=c);break;case 21:s.id3Pid===-1&&(s.id3Pid=c);break;case 219:if(!r){Bu("H.264",o);break}case 27:s.videoPid===-1&&(s.videoPid=c);break;case 3:case 4:!t.mpeg&&!t.mp3?o.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="mp3");break;case 193:if(!r){Bu("AC-3",o);break}case 129:t.ac3?s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="ac3"):o.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&u>0){let f=e+5,p=u;for(;p>2;){switch(n[f]){case 106:t.ac3!==!0?o.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=c,s.segmentAudioCodec="ac3");break}const g=n[f+1]+2;f+=g,p-=g}}break;case 194:case 135:return nh(i,new Error("Unsupported EC-3 in M2TS found"),void 0,o),s;case 36:s.videoPid===-1&&(s.videoPid=c,s.segmentVideoCodec="hevc",o.log("HEVC in M2TS found"));break}e+=u+5}return s}function nh(n,e,t,r){r.warn(`parsing error: ${e.message}`),n.emit(I.ERROR,I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function Bu(n,e){e.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function ns(n,e){let t=0,r,i,o,s,a;const l=n.data;if(!n||n.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=mr(l[0],l[1]),l.splice(1,1);if(r=l[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(i=(r[4]<<8)+r[5],i&&i>n.size-6)return null;const c=r[7];c&192&&(s=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,c&64?(a=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,s-a>60*9e4&&(e.warn(`${Math.round((s-a)/9e4)}s delta between PTS and DTS, align them`),s=a)):a=s),o=r[8];let u=o+9;if(n.size<=u)return null;n.size-=u;const f=new Uint8Array(n.size);for(let p=0,h=l.length;p<h;p++){r=l[p];let g=r.byteLength;if(u)if(u>g){u-=g;continue}else r=r.subarray(u),g-=u,u=0;f.set(r,t),t+=g}return i&&(i-=o+3),{data:f,pts:s,dts:a,len:i}}return null}class M8{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const _i=Math.pow(2,32)-1;class ie{static init(){ie.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in ie.types)ie.types.hasOwnProperty(e)&&(ie.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ie.HDLR_TYPES={video:t,audio:r};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);ie.STTS=ie.STSC=ie.STCO=o,ie.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ie.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ie.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ie.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const s=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);ie.FTYP=ie.box(ie.types.ftyp,s,l,s,a),ie.DINF=ie.box(ie.types.dinf,ie.box(ie.types.dref,i))}static box(e,...t){let r=8,i=t.length;const o=i;for(;i--;)r+=t[i].byteLength;const s=new Uint8Array(r);for(s[0]=r>>24&255,s[1]=r>>16&255,s[2]=r>>8&255,s[3]=r&255,s.set(e,4),i=0,r=8;i<o;i++)s.set(t[i],r),r+=t[i].byteLength;return s}static hdlr(e){return ie.box(ie.types.hdlr,ie.HDLR_TYPES[e])}static mdat(e){return ie.box(ie.types.mdat,e)}static mdhd(e,t){t*=e;const r=Math.floor(t/(_i+1)),i=Math.floor(t%(_i+1));return ie.box(ie.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return ie.box(ie.types.mdia,ie.mdhd(e.timescale||0,e.duration||0),ie.hdlr(e.type),ie.minf(e))}static mfhd(e){return ie.box(ie.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?ie.box(ie.types.minf,ie.box(ie.types.smhd,ie.SMHD),ie.DINF,ie.stbl(e)):ie.box(ie.types.minf,ie.box(ie.types.vmhd,ie.VMHD),ie.DINF,ie.stbl(e))}static moof(e,t,r){return ie.box(ie.types.moof,ie.mfhd(e),ie.traf(r,t))}static moov(e){let t=e.length;const r=[];for(;t--;)r[t]=ie.trak(e[t]);return ie.box.apply(null,[ie.types.moov,ie.mvhd(e[0].timescale||0,e[0].duration||0)].concat(r).concat(ie.mvex(e)))}static mvex(e){let t=e.length;const r=[];for(;t--;)r[t]=ie.trex(e[t]);return ie.box.apply(null,[ie.types.mvex,...r])}static mvhd(e,t){t*=e;const r=Math.floor(t/(_i+1)),i=Math.floor(t%(_i+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ie.box(ie.types.mvhd,o)}static sdtp(e){const t=e.samples||[],r=new Uint8Array(4+t.length);let i,o;for(i=0;i<t.length;i++)o=t[i].flags,r[i+4]=o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy;return ie.box(ie.types.sdtp,r)}static stbl(e){return ie.box(ie.types.stbl,ie.stsd(e),ie.box(ie.types.stts,ie.STTS),ie.box(ie.types.stsc,ie.STSC),ie.box(ie.types.stsz,ie.STSZ),ie.box(ie.types.stco,ie.STCO))}static avc1(e){let t=[],r=[],i,o,s;for(i=0;i<e.sps.length;i++)o=e.sps[i],s=o.byteLength,t.push(s>>>8&255),t.push(s&255),t=t.concat(Array.prototype.slice.call(o));for(i=0;i<e.pps.length;i++)o=e.pps[i],s=o.byteLength,r.push(s>>>8&255),r.push(s&255),r=r.concat(Array.prototype.slice.call(o));const a=ie.box(ie.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(r))),l=e.width,d=e.height,c=e.pixelRatio[0],u=e.pixelRatio[1];return ie.box(ie.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,ie.box(ie.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ie.box(ie.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,u>>24,u>>16&255,u>>8&255,u&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return ie.box(ie.types.mp4a,ie.audioStsd(e),ie.box(ie.types.esds,ie.esds(e)))}static mp3(e){return ie.box(ie.types[".mp3"],ie.audioStsd(e))}static ac3(e){return ie.box(ie.types["ac-3"],ie.audioStsd(e),ie.box(ie.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return ie.box(ie.types.stsd,ie.STSD,ie.mp4a(e));if(t==="ac3"&&e.config)return ie.box(ie.types.stsd,ie.STSD,ie.ac3(e));if(t==="mp3"&&e.codec==="mp3")return ie.box(ie.types.stsd,ie.STSD,ie.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return ie.box(ie.types.stsd,ie.STSD,ie.avc1(e));if(t==="hevc"&&e.vps)return ie.box(ie.types.stsd,ie.STSD,ie.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,r=(e.duration||0)*(e.timescale||0),i=e.width||0,o=e.height||0,s=Math.floor(r/(_i+1)),a=Math.floor(r%(_i+1));return ie.box(ie.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,o>>8&255,o&255,0,0]))}static traf(e,t){const r=ie.sdtp(e),i=e.id,o=Math.floor(t/(_i+1)),s=Math.floor(t%(_i+1));return ie.box(ie.types.traf,ie.box(ie.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),ie.box(ie.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,s>>24,s>>16&255,s>>8&255,s&255])),ie.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,ie.box(ie.types.trak,ie.tkhd(e),ie.mdia(e))}static trex(e){const t=e.id;return ie.box(ie.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const r=e.samples||[],i=r.length,o=12+16*i,s=new Uint8Array(o);let a,l,d,c,u,f;for(t+=8+o,s.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),a=0;a<i;a++)l=r[a],d=l.duration,c=l.size,u=l.flags,f=l.cts,s.set([d>>>24&255,d>>>16&255,d>>>8&255,d&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,u.isLeading<<2|u.dependsOn,u.isDependedOn<<6|u.hasRedundancy<<4|u.paddingValue<<1|u.isNonSync,u.degradPrio&61440,u.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return ie.box(ie.types.trun,s)}static initSegment(e){ie.types||ie.init();const t=ie.moov(e);return mr(ie.FTYP,t)}static hvc1(e){const t=e.params,r=[e.vps,e.sps,e.pps],i=4,o=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),i-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),r.length]);let s=o.length;for(let h=0;h<r.length;h+=1){s+=3;for(let g=0;g<r[h].length;g+=1)s+=2+r[h][g].length}const a=new Uint8Array(s);a.set(o,0),s=o.length;const l=r.length-1;for(let h=0;h<r.length;h+=1){a.set(new Uint8Array([32+h|(h===l?128:0),0,r[h].length]),s),s+=3;for(let g=0;g<r[h].length;g+=1)a.set(new Uint8Array([r[h][g].length>>8,r[h][g].length&255]),s),s+=2,a.set(r[h][g],s),s+=r[h][g].length}const d=ie.box(ie.types.hvcC,a),c=e.width,u=e.height,f=e.pixelRatio[0],p=e.pixelRatio[1];return ie.box(ie.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d,ie.box(ie.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ie.box(ie.types.pasp,new Uint8Array([f>>24,f>>16&255,f>>8&255,f&255,p>>24,p>>16&255,p>>8&255,p&255])))}}ie.types=void 0;ie.HDLR_TYPES=void 0;ie.STTS=void 0;ie.STSC=void 0;ie.STCO=void 0;ie.STSZ=void 0;ie.VMHD=void 0;ie.SMHD=void 0;ie.STSD=void 0;ie.FTYP=void 0;ie.DINF=void 0;const ow=9e4;function Hp(n,e,t=1,r=!1){const i=n*e*t;return r?Math.round(i):i}function F8(n,e,t=1,r=!1){return Hp(n,e,1/t,r)}function ta(n,e=!1){return Hp(n,1e3,1/ow,e)}function $8(n,e=1){return Hp(n,ow,1/e)}const B8=10*1e3,N8=1024,z8=1152,U8=1536;let rs=null,Nu=null;function M0(n,e,t,r){return{duration:e,size:t,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:n?2:1,isNonSync:n?0:1}}}class Jl extends kr{constructor(e,t,r,i){if(super("mp4-remuxer",i),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=r,this.ISGenerated=!1,rs===null){const s=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);rs=s?parseInt(s[1]):0}if(Nu===null){const o=navigator.userAgent.match(/Safari\/(\d+)/i);Nu=o?parseInt(o[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){this.log("initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const r=e[0].pts,i=e.reduce((o,s)=>{let a=s.pts,l=a-o;return l<-4294967296&&(t=!0,a=cr(a,r),l=a-o),l>0?o:a},r);return t&&this.debug("PTS rollover detected"),i}remux(e,t,r,i,o,s,a,l){let d,c,u,f,p,h,g=o,m=o;const v=e.pid>-1,b=t.pid>-1,y=t.samples.length,x=e.samples.length>0,E=a&&y>0||y>1;if((!v||x)&&(!b||E)||this.ISGenerated||a){if(this.ISGenerated){var S,w,T,C;const D=this.videoTrackConfig;(D&&(t.width!==D.width||t.height!==D.height||((S=t.pixelRatio)==null?void 0:S[0])!==((w=D.pixelRatio)==null?void 0:w[0])||((T=t.pixelRatio)==null?void 0:T[1])!==((C=D.pixelRatio)==null?void 0:C[1]))||!D&&E||this.nextAudioTs===null&&x)&&this.resetInitSegment()}this.ISGenerated||(u=this.generateIS(e,t,o,s));const L=this.isVideoContiguous;let P=-1,_;if(E&&(P=H8(t.samples),!L&&this.config.forceKeyFrameOnDiscontinuity))if(h=!0,P>0){this.warn(`Dropped ${P} out of ${y} video samples due to a missing keyframe`);const D=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(P),t.dropped+=P,m+=(t.samples[0].pts-D)/t.inputTimeScale,_=m}else P===-1&&(this.warn(`No keyframe found out of ${y} video samples`),h=!1);if(this.ISGenerated){if(x&&E){const D=this.getVideoStartPts(t.samples),M=(cr(e.samples[0].pts,D)-D)/t.inputTimeScale;g+=Math.max(0,M),m+=Math.max(0,-M)}if(x){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),u=this.generateIS(e,t,o,s)),c=this.remuxAudio(e,g,this.isAudioContiguous,s,b||E||l===Ue.AUDIO?m:void 0),E){const D=c?c.endPTS-c.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),u=this.generateIS(e,t,o,s)),d=this.remuxVideo(t,m,L,D)}}else E&&(d=this.remuxVideo(t,m,L,0));d&&(d.firstKeyFrame=P,d.independent=P!==-1,d.firstKeyFramePTS=_)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(p=sw(r,o,this._initPTS,this._initDTS)),i.samples.length&&(f=aw(i,o,this._initPTS))),{audio:c,video:d,initSegment:u,independent:h,text:f,id3:p}}generateIS(e,t,r,i){const o=e.samples,s=t.samples,a=this.typeSupported,l={},d=this._initPTS;let c=!d||i,u="audio/mp4",f,p,h,g=-1;if(c&&(f=p=1/0),e.config&&o.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(u="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:u,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):ie.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(g=e.id,h=e.inputTimeScale,!d||h!==d.timescale?f=p=o[0].pts-Math.round(h*r):c=!1)}if(t.sps&&t.pps&&s.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:ie.initSegment([t]),metadata:{width:t.width,height:t.height}},c)if(g=t.id,h=t.inputTimeScale,!d||h!==d.timescale){const m=this.getVideoStartPts(s),v=Math.round(h*r);p=Math.min(p,cr(s[0].dts,m)-v),f=Math.min(f,m-v)}else c=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(d&&this.warn(`Timestamps at playlist time: ${i?"":"~"}${r} ${f/h} != initPTS: ${d.baseTime/d.timescale} (${d.baseTime}/${d.timescale}) trackId: ${d.trackId}`),this.log(`Found initPTS at playlist time: ${r} offset: ${f/h} (${f}/${h}) trackId: ${g}`),this._initPTS={baseTime:f,timescale:h,trackId:g},this._initDTS={baseTime:p,timescale:h,trackId:g}):f=h=void 0,{tracks:l,initPTS:f,timescale:h,trackId:g}}remuxVideo(e,t,r,i){const o=e.inputTimeScale,s=e.samples,a=[],l=s.length,d=this._initPTS,c=d.baseTime*o/d.timescale;let u=this.nextVideoTs,f=8,p=this.videoSampleDuration,h,g,m=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,b=!1;if(!r||u===null){const H=c+t*o,B=s[0].pts-cr(s[0].dts,s[0].pts);rs&&u!==null&&Math.abs(H-B-(u+c))<15e3?r=!0:u=H-B-c}const y=u+c;for(let H=0;H<l;H++){const B=s[H];B.pts=cr(B.pts,y),B.dts=cr(B.dts,y),B.dts<s[H>0?H-1:H].dts&&(b=!0)}b&&s.sort(function(H,B){const X=H.dts-B.dts,se=H.pts-B.pts;return X||se}),h=s[0].dts,g=s[s.length-1].dts;const x=g-h,E=x?Math.round(x/(l-1)):p||e.inputTimeScale/30;if(r){const H=h-y,B=H>E,X=H<-1;if((B||X)&&(B?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${ta(H,!0)} ms (${H}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${ta(-H,!0)} ms (${H}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!X||y>=s[0].pts||rs)){h=y;const se=s[0].pts-H;if(B)s[0].dts=h,s[0].pts=se;else{let pe=!0;for(let te=0;te<s.length&&!(s[te].dts>se&&pe);te++){const W=s[te].pts;if(s[te].dts-=H,s[te].pts-=H,te<s.length-1){const de=s[te+1].pts,V=s[te].pts,ue=de<=V,Pe=de<=W;pe=ue==Pe}}}this.log(`Video: Initial PTS/DTS adjusted: ${ta(se,!0)}/${ta(h,!0)}, delta: ${ta(H,!0)} ms`)}}h=Math.max(0,h);let A=0,S=0,w=h;for(let H=0;H<l;H++){const B=s[H],X=B.units,se=X.length;let pe=0;for(let te=0;te<se;te++)pe+=X[te].data.length;S+=pe,A+=se,B.length=pe,B.dts<w?(B.dts=w,w+=E/4|0||1):w=B.dts,m=Math.min(B.pts,m),v=Math.max(B.pts,v)}g=s[l-1].dts;const T=S+4*A+8;let C;try{C=new Uint8Array(T)}catch(H){this.observer.emit(I.ERROR,I.ERROR,{type:Ge.MUX_ERROR,details:oe.REMUX_ALLOC_ERROR,fatal:!1,error:H,bytes:T,reason:`fail allocating video mdat ${T}`});return}const L=new DataView(C.buffer);L.setUint32(0,T),C.set(ie.types.mdat,4);let P=!1,_=Number.POSITIVE_INFINITY,D=Number.POSITIVE_INFINITY,k=Number.NEGATIVE_INFINITY,M=Number.NEGATIVE_INFINITY;for(let H=0;H<l;H++){const B=s[H],X=B.units;let se=0;for(let W=0,de=X.length;W<de;W++){const V=X[W],ue=V.data,Pe=V.data.byteLength;L.setUint32(f,Pe),f+=4,C.set(ue,f),f+=Pe,se+=4+Pe}let pe;if(H<l-1)p=s[H+1].dts-B.dts,pe=s[H+1].pts-B.pts;else{const W=this.config,de=H>0?B.dts-s[H-1].dts:E;if(pe=H>0?B.pts-s[H-1].pts:E,W.stretchShortVideoTrack&&this.nextAudioTs!==null){const V=Math.floor(W.maxBufferHole*o),ue=(i?m+i*o:this.nextAudioTs+c)-B.pts;ue>V?(p=ue-de,p<0?p=de:P=!0,this.log(`It is approximately ${ue/90} ms to the next segment; using duration ${p/90} ms for the last video frame.`)):p=de}else p=de}const te=Math.round(B.pts-B.dts);_=Math.min(_,p),k=Math.max(k,p),D=Math.min(D,pe),M=Math.max(M,pe),a.push(M0(B.key,p,se,te))}if(a.length){if(rs){if(rs<70){const H=a[0].flags;H.dependsOn=2,H.isNonSync=0}}else if(Nu&&M-D<k-_&&E/k<.025&&a[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let H=h;for(let B=0,X=a.length;B<X;B++){const se=H+a[B].duration,pe=H+a[B].cts;if(B<X-1){const te=se+a[B+1].cts;a[B].duration=te-pe}else a[B].duration=B?a[B-1].duration:E;a[B].cts=0,H=se}}}p=P||!p?E:p;const O=g+p;this.nextVideoTs=u=O-c,this.videoSampleDuration=p,this.isVideoContiguous=!0;const Y={data1:ie.moof(e.sequenceNumber++,h,kt(e,{samples:a})),data2:C,startPTS:(m-c)/o,endPTS:(v+p-c)/o,startDTS:(h-c)/o,endDTS:u/o,type:"video",hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Y}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return z8;case"ac3":return U8;default:return N8}}remuxAudio(e,t,r,i,o){const s=e.inputTimeScale,a=e.samplerate?e.samplerate:s,l=s/a,d=this.getSamplesPerFrame(e),c=d*l,u=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,p=[],h=o!==void 0;let g=e.samples,m=f?0:8,v=this.nextAudioTs||-1;const b=u.baseTime*s/u.timescale,y=b+t*s;if(this.isAudioContiguous=r=r||g.length&&v>0&&(i&&Math.abs(y-(v+b))<9e3||Math.abs(cr(g[0].pts,y)-(v+b))<20*c),g.forEach(function(M){M.pts=cr(M.pts,y)}),!r||v<0){if(g=g.filter(M=>M.pts>=0),!g.length)return;o===0?v=0:i&&!h?v=Math.max(0,y-b):v=g[0].pts-b}if(e.segmentCodec==="aac"){const M=this.config.maxAudioFramesDrift;for(let O=0,$=v+b;O<g.length;O++){const K=g[O],Y=K.pts,H=Y-$,B=Math.abs(1e3*H/s);if(H<=-M*c&&h)O===0&&(this.warn(`Audio frame @ ${(Y/s).toFixed(3)}s overlaps marker by ${Math.round(1e3*H/s)} ms.`),this.nextAudioTs=v=Y-b,$=Y);else if(H>=M*c&&B<B8&&h){let X=Math.round(H/c);for($=Y-X*c;$<0&&X&&c;)X--,$+=c;O===0&&(this.nextAudioTs=v=$-b),this.warn(`Injecting ${X} audio frames @ ${(($-b)/s).toFixed(3)}s due to ${Math.round(1e3*H/s)} ms gap.`);for(let se=0;se<X;se++){let pe=M8.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);pe||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),pe=K.unit.subarray()),g.splice(O,0,{unit:pe,pts:$}),$+=c,O++}}K.pts=$,$+=c}}let x=null,E=null,A,S=0,w=g.length;for(;w--;)S+=g[w].unit.byteLength;for(let M=0,O=g.length;M<O;M++){const $=g[M],K=$.unit;let Y=$.pts;if(E!==null){const B=p[M-1];B.duration=Math.round((Y-E)/l)}else if(r&&e.segmentCodec==="aac"&&(Y=v+b),x=Y,S>0){S+=m;try{A=new Uint8Array(S)}catch(B){this.observer.emit(I.ERROR,I.ERROR,{type:Ge.MUX_ERROR,details:oe.REMUX_ALLOC_ERROR,fatal:!1,error:B,bytes:S,reason:`fail allocating audio mdat ${S}`});return}f||(new DataView(A.buffer).setUint32(0,S),A.set(ie.types.mdat,4))}else return;A.set(K,m);const H=K.byteLength;m+=H,p.push(M0(!0,d,H,0)),E=Y}const T=p.length;if(!T)return;const C=p[p.length-1];v=E-b,this.nextAudioTs=v+l*C.duration;const L=f?new Uint8Array(0):ie.moof(e.sequenceNumber++,x/l,kt({},e,{samples:p}));e.samples=[];const P=(x-b)/s,_=v/s,k={data1:L,data2:A,startPTS:P,endPTS:_,startDTS:P,endDTS:_,type:"audio",hasAudio:!0,hasVideo:!1,nb:T};return this.isAudioContiguous=!0,k}}function cr(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function H8(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function sw(n,e,t,r){const i=n.samples.length;if(!i)return;const o=n.inputTimeScale;for(let a=0;a<i;a++){const l=n.samples[a];l.pts=cr(l.pts-t.baseTime*o/t.timescale,e*o)/o,l.dts=cr(l.dts-r.baseTime*o/r.timescale,e*o)/o}const s=n.samples;return n.samples=[],{samples:s}}function aw(n,e,t){const r=n.samples.length;if(!r)return;const i=n.inputTimeScale;for(let s=0;s<r;s++){const a=n.samples[s];a.pts=cr(a.pts-t.baseTime*i/t.timescale,e*i)/i}n.samples.sort((s,a)=>s.pts-a.pts);const o=n.samples;return n.samples=[],{samples:o}}class V8 extends kr{constructor(e,t,r,i){super("passthrough-remuxer",i),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,r,i){this.audioCodec=t,this.videoCodec=r,this.generateInitSegment(O4(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=yT(e);i.audio&&(t=F0(i.audio,Mt.AUDIO,this)),i.video&&(r=F0(i.video,Mt.VIDEO,this));const o={};i.audio&&i.video?o.audiovideo={container:"video/mp4",codec:t+","+r,supplemental:i.video.supplemental,initSegment:e,id:"main"}:i.audio?o.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?o.video={container:"video/mp4",codec:r,supplemental:i.video.supplemental,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,t,r,i,o,s){var a,l;let{initPTS:d,lastEndTime:c}=this;const u={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};Oe(c)||(c=this.lastEndTime=o||0);const f=t.samples;if(!(f!=null&&f.length))return u;const p={initPTS:void 0,timescale:void 0,trackId:void 0};let h=this.initData;if((a=h)!=null&&a.length||(this.generateInitSegment(f),h=this.initData),!((l=h)!=null&&l.length))return this.warn("Failed to generate initSegment."),u;this.emitInitSegment&&(p.tracks=this.initTracks,this.emitInitSegment=!1);const g=M4(f,h,this),m=h.audio?g[h.audio.id]:null,v=h.video?g[h.video.id]:null,b=Fl(v,1/0),y=Fl(m,1/0),x=Fl(v,0,!0),E=Fl(m,0,!0);let A=o,S=0;const w=m&&(!v||!d&&y<b||d&&d.trackId===h.audio.id),T=w?m:v;if(T){const O=T.timescale,$=T.start-o*O,K=w?h.audio.id:h.video.id;A=T.start/O,S=w?E-y:x-b,(s||!d)&&(G8(d,A,o,S)||O!==d.timescale)&&(d&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${o} ${$/O} != initPTS: ${d.baseTime/d.timescale} (${d.baseTime}/${d.timescale}) trackId: ${d.trackId}`),this.log(`Found initPTS at playlist time: ${o} offset: ${A-o} (${$}/${O}) trackId: ${K}`),d=null,p.initPTS=$,p.timescale=O,p.trackId=K)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${o}`);d?(p.initPTS=d.baseTime,p.timescale=d.timescale,p.trackId=d.trackId):((!p.timescale||p.trackId===void 0||p.initPTS===void 0)&&(this.warn("Could not set initPTS"),p.initPTS=A,p.timescale=1,p.trackId=-1),this.initPTS=d={baseTime:p.initPTS,timescale:p.timescale,trackId:p.trackId});const C=e?A-d.baseTime/d.timescale:c,L=C+S;S>0?this.lastEndTime=L:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const P=!!h.audio,_=!!h.video;let D="";P&&(D+="audio"),_&&(D+="video");const k={data1:f,startPTS:C,startDTS:C,endPTS:L,endDTS:L,type:D,hasAudio:P,hasVideo:_,nb:1,dropped:0};u.audio=P&&!_?k:void 0,u.video=_?k:void 0;const M=v==null?void 0:v.sampleCount;if(M){const O=v.keyFrameIndex,$=O!==-1;k.nb=M,k.dropped=O===0||this.isVideoContiguous?0:$?O:M,k.independent=$,k.firstKeyFrame=O,$&&v.keyFrameStart&&(k.firstKeyFramePTS=(v.keyFrameStart-d.baseTime)/d.timescale),this.isVideoContiguous||(u.independent=$),this.isVideoContiguous||(this.isVideoContiguous=$),k.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${O}/${M} dropped: ${k.dropped} start: ${k.firstKeyFramePTS||"NA"}`)}return u.initSegment=p,u.id3=sw(r,o,d,d),i.samples.length&&(u.text=aw(i,o,d)),u}}function Fl(n,e,t=!1){return(n==null?void 0:n.start)!==void 0?(n.start+(t?n.duration:0))/n.timescale:e}function G8(n,e,t,r){if(n===null)return!0;const i=Math.max(r,1),o=e-n.baseTime/n.timescale;return Math.abs(o-t)>i}function F0(n,e,t){const r=n==null?void 0:n.codec;return r&&r.length>4?r:e===Mt.AUDIO?r==="ec-3"||r==="ac-3"||r==="alac"?r:r==="fLaC"||r==="Opus"?kd(r,!1):(t.warn(`Unhandled audio codec "${r}" in mp4 MAP`),r||"mp4a"):(t.warn(`Unhandled video codec "${r}" in mp4 MAP`),r||"avc1")}let pi;try{pi=self.performance.now.bind(self.performance)}catch{pi=Date.now}const ed=[{demux:L8,remux:V8},{demux:Hi,remux:Jl},{demux:E8,remux:Jl},{demux:A8,remux:Jl}];ed.splice(2,0,{demux:R8,remux:Jl});class $0{constructor(e,t,r,i,o,s){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=r,this.id=o,this.logger=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,r,i){const o=r.transmuxing;o.executeStart=pi();let s=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:d,discontinuity:c,trackSwitch:u,accurateTimeOffset:f,timeOffset:p,initSegmentChange:h}=i||a,{audioCodec:g,videoCodec:m,defaultInitPts:v,duration:b,initSegmentData:y}=l,x=W8(s,t);if(x&&ms(x.method)){const w=this.getDecrypter(),T=Dp(x.method);if(w.isSync()){let C=w.softwareDecrypt(s,x.key.buffer,x.iv.buffer,T);if(r.part>-1){const P=w.flush();C=P&&P.buffer}if(!C)return o.executeEnd=pi(),zu(r);s=new Uint8Array(C)}else return this.asyncResult=!0,this.decryptionPromise=w.webCryptoDecrypt(s,x.key.buffer,x.iv.buffer,T).then(C=>{const L=this.push(C,null,r);return this.decryptionPromise=null,L}),this.decryptionPromise}const E=this.needsProbing(c,u);if(E){const w=this.configureTransmuxer(s);if(w)return this.logger.warn(`[transmuxer] ${w.message}`),this.observer.emit(I.ERROR,I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.FRAG_PARSING_ERROR,fatal:!1,error:w,reason:w.message}),o.executeEnd=pi(),zu(r)}(c||u||h||E)&&this.resetInitSegment(y,g,m,b,t),(c||h||E)&&this.resetInitialTimestamp(v),d||this.resetContiguity();const A=this.transmux(s,x,p,f,r);this.asyncResult=Ya(A);const S=this.currentTransmuxState;return S.contiguous=!0,S.discontinuity=!1,S.trackSwitch=!1,o.executeEnd=pi(),A}flush(e){const t=e.transmuxing;t.executeStart=pi();const{decrypter:r,currentTransmuxState:i,decryptionPromise:o}=this;if(o)return this.asyncResult=!0,o.then(()=>this.flush(e));const s=[],{timeOffset:a}=i;if(r){const u=r.flush();u&&s.push(this.push(u.buffer,null,e))}const{demuxer:l,remuxer:d}=this;if(!l||!d){t.executeEnd=pi();const u=[zu(e)];return this.asyncResult?Promise.resolve(u):u}const c=l.flush(a);return Ya(c)?(this.asyncResult=!0,c.then(u=>(this.flushRemux(s,u,e),s))):(this.flushRemux(s,c,e),this.asyncResult?Promise.resolve(s):s)}flushRemux(e,t,r){const{audioTrack:i,videoTrack:o,id3Track:s,textTrack:a}=t,{accurateTimeOffset:l,timeOffset:d}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===Ue.MAIN?"level":"track"} ${r.level}`);const c=this.remuxer.remux(i,o,s,a,d,l,!0,this.id);e.push({remuxResult:c,chunkMeta:r}),r.transmuxing.executeEnd=pi()}resetInitialTimestamp(e){const{demuxer:t,remuxer:r}=this;!t||!r||(t.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,r,i,o){const{demuxer:s,remuxer:a}=this;!s||!a||(s.resetInitSegment(e,t,r,i),a.resetInitSegment(e,t,r,o))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,r,i,o){let s;return t&&t.method==="SAMPLE-AES"?s=this.transmuxSampleAes(e,t,r,i,o):s=this.transmuxUnencrypted(e,r,i,o),s}transmuxUnencrypted(e,t,r,i){const{audioTrack:o,videoTrack:s,id3Track:a,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(o,s,a,l,t,r,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,r,i,o){return this.demuxer.demuxSampleAes(e,t,r).then(s=>({remuxResult:this.remuxer.remux(s.audioTrack,s.videoTrack,s.id3Track,s.textTrack,r,i,!1,this.id),chunkMeta:o}))}configureTransmuxer(e){const{config:t,observer:r,typeSupported:i}=this;let o;for(let u=0,f=ed.length;u<f;u++){var s;if((s=ed[u].demux)!=null&&s.probe(e,this.logger)){o=ed[u];break}}if(!o)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,l=this.remuxer,d=o.remux,c=o.demux;(!l||!(l instanceof d))&&(this.remuxer=new d(r,t,i,this.logger)),(!a||!(a instanceof c))&&(this.demuxer=new c(r,t,i,this.logger),this.probe=c.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new _p(this.config)),e}}function W8(n,e){let t=null;return n.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const zu=n=>({remuxResult:{},chunkMeta:n});function Ya(n){return"then"in n&&n.then instanceof Function}class j8{constructor(e,t,r,i,o){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=r,this.duration=i,this.defaultInitPts=o||null}}class K8{constructor(e,t,r,i,o,s){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=o,this.initSegmentChange=s}}let B0=0;class lw{constructor(e,t,r,i){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=B0++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const d=l.data,c=this.hls;if(!(!c||!(d!=null&&d.event)||d.instanceNo!==this.instanceNo))switch(d.event){case"init":{var u;const f=(u=this.workerContext)==null?void 0:u.objectURL;f&&self.URL.revokeObjectURL(f);break}case"transmuxComplete":{this.handleTransmuxComplete(d.data);break}case"flush":{this.onFlush(d.data);break}case"workerLog":{c.logger[d.data.logType]&&c.logger[d.data.logType](d.data.message);break}default:{d.data=d.data||{},d.data.frag=this.frag,d.data.part=this.part,d.data.id=this.id,c.trigger(d.event,d.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const d=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:d})};const o=e.config;this.hls=e,this.id=t,this.useWorker=!!o.enableWorker,this.onTransmuxComplete=r,this.onFlush=i;const s=(l,d)=>{d=d||{},d.frag=this.frag||void 0,l===I.ERROR&&(d=d,d.parent=this.id,d.part=this.part,this.error=d.error),this.hls.trigger(l,d)};this.observer=new Fp,this.observer.on(I.FRAG_DECRYPTED,s),this.observer.on(I.ERROR,s);const a=r0(o.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(o.workerPath||QU()){try{o.workerPath?(l.log(`loading Web Worker ${o.workerPath} for "${t}"`),this.workerContext=JU(o.workerPath)):(l.log(`injecting Web Worker for "${t}"`),this.workerContext=ZU());const{worker:c}=this.workerContext;c.addEventListener("message",this.onWorkerMessage),c.addEventListener("error",this.onWorkerError),c.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:a,id:t,config:Ut(o)})}catch(c){l.warn(`Error setting up "${t}" Web Worker, fallback to inline`,c),this.terminateWorker(),this.error=null,this.transmuxer=new $0(this.observer,a,o,"",t,e.logger)}return}}this.transmuxer=new $0(this.observer,a,o,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=B0++;const t=this.hls.config,r=r0(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:r,id:this.id,config:Ut(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),e8(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,r,i,o,s,a,l,d,c){var u,f;d.transmuxing.start=self.performance.now();const{instanceNo:p,transmuxer:h}=this,g=s?s.start:o.start,m=o.decryptdata,v=this.frag,b=!(v&&o.cc===v.cc),y=!(v&&d.level===v.level),x=v?d.sn-v.sn:-1,E=this.part?d.part-this.part.index:-1,A=x===0&&d.id>1&&d.id===(v==null?void 0:v.stats.chunkCount),S=!y&&(x===1||x===0&&(E===1||A&&E<=0)),w=self.performance.now();(y||x||o.stats.parsing.start===0)&&(o.stats.parsing.start=w),s&&(E||!S)&&(s.stats.parsing.start=w);const T=!(v&&((u=o.initSegment)==null?void 0:u.url)===((f=v.initSegment)==null?void 0:f.url)),C=new K8(b,S,l,y,g,T);if(!S||b||T){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${o.type} sn: ${d.sn}${d.part>-1?" part: "+d.part:""} ${this.id===Ue.MAIN?"level":"track"}: ${d.level} id: ${d.id}
        discontinuity: ${b}
        trackSwitch: ${y}
        contiguous: ${S}
        accurateTimeOffset: ${l}
        timeOffset: ${g}
        initSegmentChange: ${T}`);const L=new j8(r,i,t,a,c);this.configureTransmuxer(L)}if(this.frag=o,this.part=s,this.workerContext)this.workerContext.worker.postMessage({instanceNo:p,cmd:"demux",data:e,decryptdata:m,chunkMeta:d,state:C},e instanceof ArrayBuffer?[e]:[]);else if(h){const L=h.push(e,m,d,C);Ya(L)?L.then(P=>{this.handleTransmuxComplete(P)}).catch(P=>{this.transmuxerError(P,d,"transmuxer-interface push error")}):this.handleTransmuxComplete(L)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(r){const i=r.flush(e);Ya(i)?i.then(o=>{this.handleFlushResult(o,e)}).catch(o=>{this.transmuxerError(o,e,"transmuxer-interface flush error")}):this.handleFlushResult(i,e)}}transmuxerError(e,t,r){this.hls&&(this.error=e,this.hls.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,t){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):r&&r.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const N0=100;class q8 extends Mp{constructor(e,t,r){super(e,t,r,"audio-stream-controller",Ue.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(I.BUFFER_RESET,this.onBufferReset,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(I.BUFFER_RESET,this.onBufferReset,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:o,trackId:s}){if(r===Ue.MAIN){const a=t.cc,l=this.fragCurrent;if(this.initPTS[a]={baseTime:i,timescale:o,trackId:s},this.log(`InitPTS for cc: ${a} found from main: ${i/o} (${i}/${o}) trackId: ${s}`),this.mainAnchor=t,this.state===ye.WAITING_INIT_PTS){const d=this.waitingData;(!d&&!this.loadingParts||d&&d.frag.cc!==a)&&this.syncWithAnchor(t,d==null?void 0:d.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==a?(l.abortRequests(),this.syncWithAnchor(t,l)):this.state===ye.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var r;const i=((r=this.mainFragLoading)==null?void 0:r.frag)||null;if(t&&(i==null?void 0:i.cc)===t.cc)return;const o=(i||e).cc,s=this.getLevelDetails(),a=this.getLoadPosition(),l=LT(s,o,a);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===ye.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=ye.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(N0),r>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r,this.state=ye.IDLE):this.state=ye.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case ye.IDLE:this.doTickIdle();break;case ye.WAITING_TRACK:{const{levels:t,trackId:r}=this,i=t==null?void 0:t[r],o=i==null?void 0:i.details;if(o&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(o))break;this.state=ye.WAITING_INIT_PTS}break}case ye.FRAG_LOADING_WAITING_RETRY:{var e;const t=performance.now(),r=this.retryDate;if(!r||t>=r||(e=this.media)!=null&&e.seeking){const{levels:i,trackId:o}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((i==null?void 0:i[o])||null),this.state=ye.IDLE}break}case ye.WAITING_INIT_PTS:{const t=this.waitingData;if(t){const{frag:r,part:i,cache:o,complete:s}=t,a=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=ye.FRAG_LOADING;const l=o.flush().buffer,d={frag:r,part:i,payload:l,networkDetails:null};this._handleFragmentLoadProgress(d),s&&super._handleFragmentLoadComplete(d)}else a&&a.cc!==t.frag.cc&&this.syncWithAnchor(a,t.frag)}else this.state=ye.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:r,media:i,trackId:o}=this,s=t.config;if(!this.buffering||!i&&!this.primaryPrefetch&&(this.startFragRequested||!s.startFragPrefetch)||!(r!=null&&r[o]))return;const a=r[o],l=a.details;if(!l||this.waitForLive(a)||this.waitForCdnTuneIn(l)){this.state=ye.WAITING_TRACK,this.startFragRequested=!1;return}const d=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&d&&(this.bufferFlushed=!1,this.afterBufferFlushed(d,Mt.AUDIO,Ue.AUDIO));const c=this.getFwdBufferInfo(d,Ue.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,l)){t.trigger(I.BUFFER_EOS,{type:"audio"}),this.state=ye.ENDED;return}const u=c.len,f=t.maxBufferLength,p=l.fragments,h=p[0].start,g=this.getLoadPosition(),m=this.flushing?g:c.end;if(this.switchingTrack&&i){const y=g;l.PTSKnown&&y<h&&(c.end>h||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),i.currentTime=h+.05)}if(u>=f&&!this.switchingTrack&&m<p[p.length-1].start)return;let v=this.getNextFragment(m,l);if(v&&this.isLoopLoading(v,m)&&(v=this.getNextFragmentLoopLoading(v,l,c,Ue.MAIN,f)),!v){this.bufferFlushed=!0;return}let b=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&b&&en(v)&&!v.endList&&(!l.live||!this.loadingParts&&m<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(b)===rn.OK&&(this.mainFragLoading=b=null),b&&en(b))){if(v.start>b.end){const x=this.fragmentTracker.getFragAtPos(m,Ue.MAIN);x&&x.end>b.end&&(b=x,this.mainFragLoading={frag:x,targetBufferTime:null})}if(v.start>b.end)return}this.loadFragment(v,a,m)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(r=>new Wa(r))}onAudioTrackSwitching(e,t){const r=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==ye.STOPPED&&(this.setInterval(N0),this.state=ye.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(I.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(e,t){var r;const{levels:i}=this,{details:o,id:s,groupId:a,track:l}=t;if(!i){this.warn(`Audio tracks reset while loading track ${s} "${l.name}" of "${a}"`);return}const d=this.mainDetails;if(!d||o.endCC>d.endCC||d.expired){this.cachedTrackLoadedData=t,this.state!==ye.STOPPED&&(this.state=ye.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${s} "${l.name}" of "${a}" loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""},duration:${o.totalduration}`);const c=i[s];let u=0;if(o.live||(r=c.details)!=null&&r.live){if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;if(c.details){var f;u=this.alignPlaylists(o,c.details,(f=this.levelLastLoaded)==null?void 0:f.details)}o.alignedSliding||(HT(o,d),o.alignedSliding||Bd(o,d),u=o.fragmentStart)}c.details=o,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(d,u),this.hls.trigger(I.AUDIO_TRACK_UPDATED,{details:o,id:s,groupId:t.groupId}),this.state===ye.WAITING_TRACK&&!this.waitForCdnTuneIn(o)&&(this.state=ye.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:i,payload:o}=e,{config:s,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const d=l[a];if(!d){this.warn("Audio track is undefined on fragment load progress");return}const c=d.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const u=s.defaultAudioCodec||d.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new lw(this.hls,Ue.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const p=this.initPTS[r.cc],h=(t=r.initSegment)==null?void 0:t.data;if(p!==void 0){const m=i?i.index:-1,v=m!==-1,b=new kp(r.level,r.sn,r.stats.chunkCount,o.byteLength,m,v);f.push(o,h,u,"",r,i,c.totalduration,!1,b,p)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${c.startSN} ,${c.endSN}],track ${a}`);const{cache:g}=this.waitingData=this.waitingData||{frag:r,part:i,cache:new VT,complete:!1};g.push(new Uint8Array(o)),this.state!==ye.STOPPED&&(this.state=ye.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const r=t.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===Ue.MAIN&&en(t.frag)&&(this.mainFragLoading=t,this.state===ye.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:r,part:i}=t;if(r.type!==Ue.AUDIO){!this.audioOnly&&r.type===Ue.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(en(r)){this.fragPrevious=r;const o=this.switchingTrack;o&&(this.bufferedTrack=o,this.switchingTrack=null,this.hls.trigger(I.AUDIO_TRACK_SWITCHED,_t({},o)))}this.fragBufferedComplete(r,i),this.media&&this.tick()}onError(e,t){var r;if(t.fatal){this.state=ye.ERROR;return}switch(t.details){case oe.FRAG_GAP:case oe.FRAG_PARSING_ERROR:case oe.FRAG_DECRYPT_ERROR:case oe.FRAG_LOAD_ERROR:case oe.FRAG_LOAD_TIMEOUT:case oe.KEY_LOAD_ERROR:case oe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ue.AUDIO,t);break;case oe.AUDIO_TRACK_LOAD_ERROR:case oe.AUDIO_TRACK_LOAD_TIMEOUT:case oe.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ye.WAITING_TRACK&&((r=t.context)==null?void 0:r.type)===ct.AUDIO_TRACK&&(this.state=ye.IDLE);break;case oe.BUFFER_ADD_CODEC_ERROR:case oe.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case oe.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case oe.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==Mt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==Mt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===ye.ENDED&&(this.state=ye.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,t,Ue.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const r="audio",{hls:i}=this,{remuxResult:o,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a){this.resetWhenMissingContext(s);return}const{frag:l,part:d,level:c}=a,{details:u}=c,{audio:f,text:p,id3:h,initSegment:g}=o;if(this.fragContextChanged(l)||!u){this.fragmentTracker.removeFragment(l);return}if(this.state=ye.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const m=l.initSegment||l;this._bufferInitSegment(c,g.tracks,m,s),i.trigger(I.FRAG_PARSING_INIT_SEGMENT,{frag:m,id:r,tracks:g.tracks})}if(f){const{startPTS:m,endPTS:v,startDTS:b,endDTS:y}=f;d&&(d.elementaryStreams[Mt.AUDIO]={startPTS:m,endPTS:v,startDTS:b,endDTS:y}),l.setElementaryStreamInfo(Mt.AUDIO,m,v,b,y),this.bufferFragmentData(f,l,d,s)}if(h!=null&&(t=h.samples)!=null&&t.length){const m=kt({id:r,frag:l,details:u},h);i.trigger(I.FRAG_PARSING_METADATA,m)}if(p){const m=kt({id:r,frag:l,details:u},p);i.trigger(I.FRAG_PARSING_USERDATA,m)}}_bufferInitSegment(e,t,r,i){if(this.state!==ye.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const o=t.audio;o.id=Ue.AUDIO;const s=e.audioCodec;this.log(`Init audio buffer, container:${o.container}, codecs[level/parsed]=[${s}/${o.codec}]`),s&&s.split(",").length===1&&(o.levelCodec=s),this.hls.trigger(I.BUFFER_CODECS,t);const a=o.initSegment;if(a!=null&&a.byteLength){const l={type:"audio",frag:r,part:null,chunkMeta:i,parent:r.type,data:a};this.hls.trigger(I.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,r){const i=this.fragmentTracker.getState(e);if(this.switchingTrack||i===rn.NOT_LOADED||i===rn.PARTIAL){var o;if(!en(e))this._loadInitSegment(e,t);else if((o=t.details)!=null&&o.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ye.WAITING_INIT_PTS;const s=this.mainDetails;s&&s.fragmentStart!==t.details.fragmentStart&&Bd(t.details,s)}else super.loadFragment(e,t,r)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:r,assocLang:i,characteristics:o,audioCodec:s,channels:a}=this.bufferedTrack;Ao({name:t,lang:r,assocLang:i,characteristics:o,audioCodec:s,channels:a},e,vo)||(Od(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(I.AUDIO_TRACK_SWITCHED,_t({},e))}}class Vp extends kr{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,r){const i=t==null?void 0:t.renditionReports;if(i){let o=-1;for(let s=0;s<i.length;s++){const a=i[s];let l;try{l=new self.URL(a.URI,t.url).href}catch(d){this.warn(`Could not construct new URL for Rendition Report: ${d}`),l=a.URI||""}if(l===e){o=s;break}else l===e.substring(0,l.length)&&(o=s)}if(o!==-1){const s=i[o],a=parseInt(s["LAST-MSN"])||t.lastPartSn;let l=parseInt(s["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const c=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&c>t.partTarget&&(l+=1)}const d=r&&i0(r);return new o0(a,l>=0?l:void 0,d)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return e}playlistLoaded(e,t,r){const{details:i,stats:o}=t,s=self.performance.now(),a=o.loading.first?Math.max(0,s-o.loading.first):0;i.advancedDateTime=Date.now()-a;const l=this.hls.config.timelineOffset;if(l!==i.appliedTimelineOffset){const c=Math.max(l||0,0);i.appliedTimelineOffset=c,i.fragments.forEach(u=>{u.setStart(u.playlistOffset+c)})}if(i.live||r!=null&&r.live){const c="levelInfo"in t?t.levelInfo:t.track;if(i.reloaded(r),r&&i.fragments.length>0){UU(r,i);const b=i.playlistParsingError;if(b){this.warn(b);const y=this.hls;if(!y.config.ignorePlaylistParsingErrors){var d;const{networkDetails:x}=t;y.trigger(I.ERROR,{type:Ge.NETWORK_ERROR,details:oe.LEVEL_PARSING_ERROR,fatal:!1,url:i.url,error:b,reason:b.message,level:t.level||void 0,parent:(d=i.fragments[0])==null?void 0:d.type,networkDetails:x,stats:o});return}i.playlistParsingError=null}}i.requestScheduled===-1&&(i.requestScheduled=o.loading.start);const u=this.hls.mainForwardBufferInfo,f=u?u.end-u.len:0,p=(i.edge-f)*1e3,h=$T(i,p);if(i.requestScheduled+h<s?i.requestScheduled=s:i.requestScheduled+=h,this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),!this.canLoad||!i.live)return;let g,m,v;if(i.canBlockReload&&i.endSN&&i.advanced){const b=this.hls.config.lowLatencyMode,y=i.lastPartSn,x=i.endSN,E=i.lastPartIndex,A=E!==-1,S=y===x;A?S?(m=x+1,v=b?0:E):(m=y,v=b?E+1:i.maxPartIndex):m=x+1;const w=i.age,T=w+i.ageHeader;let C=Math.min(T-i.partTarget,i.targetduration*1.5);if(C>0){if(T>i.targetduration*3)this.log(`Playlist last advanced ${w.toFixed(2)}s ago. Omitting segment and part directives.`),m=void 0,v=void 0;else if(r!=null&&r.tuneInGoal&&T-i.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${C} with playlist age: ${i.age}`),C=0;else{const L=Math.floor(C/i.targetduration);if(m+=L,v!==void 0){const P=Math.round(C%i.targetduration/i.partTarget);v+=P}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${w.toFixed(2)}s goal: ${C} skip sn ${L} to part ${v}`)}i.tuneInGoal=C}if(g=this.getDeliveryDirectives(i,t.deliveryDirectives,m,v),b||!S){i.requestScheduled=s,this.loadingPlaylist(c,g);return}}else(i.canBlockReload||i.canSkipUntil)&&(g=this.getDeliveryDirectives(i,t.deliveryDirectives,m,v));g&&m!==void 0&&i.canBlockReload&&(i.requestScheduled=o.loading.first+Math.max(h-a*2,h/2)),this.scheduleLoading(c,g,i)}else this.clearTimer()}scheduleLoading(e,t,r){const i=r||e.details;if(!i){this.loadingPlaylist(e,t);return}const o=self.performance.now(),s=i.requestScheduled;if(o>=s){this.loadingPlaylist(e,t);return}const a=s-o;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(a)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),a)}getDeliveryDirectives(e,t,r,i){let o=i0(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(r=t.msn,i=t.part,o=Ql.No),new o0(r,i,o)}checkRetry(e){const t=e.details,r=Md(e),i=e.errorAction,{action:o,retryCount:s=0,retryConfig:a}=i||{},l=!!i&&!!a&&(o===yn.RetryRequest||!i.resolved&&o===yn.SendAlternateToPenaltyBox);if(l){var d;if(s>=a.maxNumRetry)return!1;if(r&&(d=e.context)!=null&&d.deliveryDirectives)this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const c=Pp(a,s);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${s+1}/${a.maxNumRetry} after "${t}" in ${c}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}function dw(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Xa(n[t].attrs,e[t].attrs))return!1;return!0}function Xa(n,e,t){const r=n["STABLE-RENDITION-ID"];return r&&!t?r===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>n[i]!==e[i])}function rh(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class Y8 extends Vp{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(I.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:r,groupId:i,details:o}=t,s=this.tracksInGroup[r];if(!s||s.groupId!==i){this.warn(`Audio track with id:${r} and group:${i} not found in active group ${s==null?void 0:s.groupId}`);return}const a=s.details;s.details=t.details,this.log(`Audio track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.audioGroups||null,i=this.groupIds;let o=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(a=>(i==null?void 0:i.indexOf(a))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(f=>!r||r.indexOf(f.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(f=>f.default)&&(this.selectDefaultTrack=!1),a.forEach((f,p)=>{f.id=p});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const l=this.hls.config.audioPreference;if(!o&&l){const f=Vr(l,a,vo);if(f>-1)o=a[f];else{const p=Vr(l,this.tracks);o=this.tracks[p]}}let d=this.findTrackId(o);d===-1&&o&&(d=this.findTrackId(null));const c={audioTracks:a};this.log(`Updating audio tracks, ${a.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(I.AUDIO_TRACKS_UPDATED,c);const u=this.trackId;if(d!==-1&&u===-1)this.setAudioTrack(d);else if(a.length&&u===-1){var s;const f=new Error(`No audio track selected for current audio group-ID(s): ${(s=this.groupIds)==null?void 0:s.join(",")} track count: ${a.length}`);this.warn(f.message),this.hls.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:f})}}}onError(e,t){t.fatal||!t.context||t.context.type===ct.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const i=this.currentTrack;if(i&&Ao(e,i,vo))return i;const o=Vr(e,this.tracksInGroup,vo);if(o>-1){const s=this.tracksInGroup[o];return this.setAudioTrack(o),s}else if(i){let s=t.loadLevel;s===-1&&(s=t.firstAutoLevel);const a=sU(e,t.levels,r,s,vo);if(a===-1)return null;t.nextLoadLevel=a}if(e.channels||e.audioCodec){const s=Vr(e,r);if(s>-1)return r[s]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e],o=i.details&&!i.details.live;if(e===this.trackId&&i===r&&o||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(I.AUDIO_TRACK_SWITCHING,_t({},i)),o))return;const s=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(s)}findTrackId(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const i=t[r];if(!(this.selectDefaultTrack&&!i.default)&&(!e||Ao(e,i,vo)))return r}if(e){const{name:r,lang:i,assocLang:o,characteristics:s,audioCodec:a,channels:l}=e;for(let d=0;d<t.length;d++){const c=t[d];if(Ao({name:r,lang:i,assocLang:o,characteristics:s,audioCodec:a,channels:l},c,vo))return d}for(let d=0;d<t.length;d++){const c=t[d];if(Xa(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(let d=0;d<t.length;d++){const c=t[d];if(Xa(e.attrs,c.attrs,["LANGUAGE"]))return d}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&Od(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,i=e.groupId,o=this.getUrlWithDirectives(e.url,t),s=e.details,a=s==null?void 0:s.age;this.log(`Loading audio-track ${r} "${e.name}" lang:${e.lang} group:${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${o}`),this.hls.trigger(I.AUDIO_TRACK_LOADING,{url:o,id:r,groupId:i,deliveryDirectives:t||null,track:e})}}class X8{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,r){if(this.queues===null||this.tracks===null)return;const i=this.queues[t];i.push(e),i.length===1&&!r&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const r={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const r={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const r=(t=e[0])==null?void 0:t.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const i=t[0];try{i.execute()}catch(o){var r;if(i.onError(o),this.queues===null||this.tracks===null)return;const s=(r=this.tracks[e])==null?void 0:r.buffer;s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,r;return(t=this.queues)!=null&&t[e]||(r=this.tracks)!=null&&r[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const r=(t=this.tracks)==null?void 0:t[e],i=r==null?void 0:r.buffer;return i?`SourceBuffer${i.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(r=>r.label).join(", "))||""}}const z0=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,cw="HlsJsTrackRemovedError";class Q8 extends Error{constructor(e){super(e),this.name=cw}}class Z8 extends kr{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var i;this.hls&&((i=this.mediaSource)==null?void 0:i.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:i,mediaSource:o}=this;r&&this.log("Media source opened"),!(!i||!o)&&(o.removeEventListener("sourceopen",this._onMediaSourceOpen),i.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(I.MEDIA_ATTACHED,{media:i,mediaSource:o}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:i}=this;r!==i&&this.error(`Media element src was set while attaching MediaSource (${i} > ${r})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=w4(Zi(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.BUFFER_RESET,this.onBufferReset,this),e.on(I.BUFFER_APPENDING,this.onBufferAppending,this),e.on(I.BUFFER_CODECS,this.onBufferCodecs,this),e.on(I.BUFFER_EOS,this.onBufferEos,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.FRAG_PARSED,this.onFragParsed,this),e.on(I.FRAG_CHANGED,this.onFragChanged,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.BUFFER_RESET,this.onBufferReset,this),e.off(I.BUFFER_APPENDING,this.onBufferAppending,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.BUFFER_EOS,this.onBufferEos,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.FRAG_PARSED,this.onFragParsed,this),e.off(I.FRAG_CHANGED,this.onFragChanged,this),e.off(I.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const r={};if(this.operationQueue){const o=this.isUpdating();o||this.operationQueue.removeBlockers();const s=this.isQueued();(o||s)&&this.warn(`Transfering MediaSource with${s?" operations in queue":""}${o?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const i=this.transferData;return!this.sourceBufferCount&&i&&i.mediaSource===t?kt(r,i.tracks):this.sourceBuffers.forEach(o=>{const[s]=o;s&&(r[s]=kt({},this.tracks[s]),this.removeBuffer(s)),o[0]=o[1]=null}),{media:e,mediaSource:t,tracks:r}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var r;let i=2;(t.audio&&!t.video||!t.altAudio)&&(i=1),this.bufferCodecEventsTotal=i,this.log(`${i} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&i&&this.bufferCreated()}onMediaAttaching(e,t){const r=this.media=t.media;this.transferData=this.overrides=void 0;const i=Zi(this.appendSource);if(i){const o=!!t.mediaSource;(o||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const s=this.mediaSource=t.mediaSource||new i;if(this.assignMediaSource(s),o)this._objectUrl=r.src,this.attachTransferred();else{const a=this._objectUrl=self.URL.createObjectURL(s);if(this.appendSource)try{r.removeAttribute("src");const l=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||l&&s instanceof l,U0(r),J8(r,a),r.load()}catch{r.src=a}else r.src=a}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,r;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(r=e.constructor)==null?void 0:r.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const r=this.tracks,i=t.tracks,o=i?Object.keys(i):null,s=o?o.length:0,a=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(i&&o&&s){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Ut(r,(l,d)=>l==="initSegment"?void 0:d)};
transfer tracks: ${Ut(i,(l,d)=>l==="initSegment"?void 0:d)}}`),!fT(i,r)){t.mediaSource=null,t.tracks=void 0;const l=e.currentTime,d=this.details,c=Math.max(l,(d==null?void 0:d.fragments[0].start)||0);if(c-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${c}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(i)}"->"${Object.keys(r)}") start time: ${c} currentTime: ${l}`),this.onMediaDetaching(I.MEDIA_DETACHING,{}),this.onMediaAttaching(I.MEDIA_ATTACHING,t),e.currentTime=c;return}this.transferData=void 0,o.forEach(l=>{const d=l,c=i[d];if(c){const u=c.buffer;if(u){const f=this.fragmentTracker,p=c.id;if(f.hasFragments(p)||f.hasParts(p)){const m=tt.getBuffered(u);f.detectEvictedFragments(d,m,p,null,!0)}const h=Uu(d),g=[d,u];this.sourceBuffers[h]=g,u.updating&&this.operationQueue&&this.operationQueue.prependBlocker(d),this.trackSourceBuffer(d,c)}}}),a(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),a()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const r=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:i,mediaSource:o,_objectUrl:s}=this;if(o){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([a])=>{a&&this.removeBuffer(a)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const a=o.readyState==="open";try{const l=o.sourceBuffers;for(let d=l.length;d--;)a&&l[d].abort(),o.removeSourceBuffer(l[d]);a&&o.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}o.removeEventListener("sourceopen",this._onMediaSourceOpen),o.removeEventListener("sourceended",this._onMediaSourceEnded),o.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(o.removeEventListener("startstreaming",this._onStartStreaming),o.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}i&&(i.removeEventListener("emptied",this._onMediaEmptied),r||(s&&self.URL.revokeObjectURL(s),this.mediaSrc===s?(i.removeAttribute("src"),this.appendSource&&U0(i),i.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(I.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const r=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),r)try{var i;(i=this.mediaSource)!=null&&i.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(o){this.warn(`onBufferReset ${e}`,o)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[Uu(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new X8(this.tracks)}onBufferCodecs(e,t){const r=this.tracks,i=Object.keys(t);this.log(`BUFFER_CODECS: "${i}" (current SB count ${this.sourceBufferCount})`);const o="audiovideo"in t&&(r.audio||r.video)||r.audiovideo&&("audio"in t||"video"in t),s=!o&&this.sourceBufferCount&&this.media&&i.some(a=>!r[a]);if(o||s){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${i}" SourceBuffers`);return}i.forEach(a=>{var l,d;const c=t[a],{id:u,codec:f,levelCodec:p,container:h,metadata:g,supplemental:m}=c;let v=r[a];const b=(l=this.transferData)==null||(l=l.tracks)==null?void 0:l[a],y=b!=null&&b.buffer?b:v,x=(y==null?void 0:y.pendingCodec)||(y==null?void 0:y.codec),E=y==null?void 0:y.levelCodec;v||(v=r[a]={buffer:void 0,listeners:[],codec:f,supplemental:m,container:h,levelCodec:p,metadata:g,id:u});const A=Xl(x,E),S=A==null?void 0:A.replace(z0,"$1");let w=Xl(f,p);const T=(d=w)==null?void 0:d.replace(z0,"$1");w&&A&&S!==T&&(a.slice(0,5)==="audio"&&(w=kd(w,this.appendSource)),this.log(`switching codec ${x} to ${w}`),w!==(v.pendingCodec||v.codec)&&(v.pendingCodec=w),v.container=h,this.appendChangeType(a,h,w))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const r=this.tracks[t];return e[t]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},e},{})}appendChangeType(e,t,r){const i=`${t};codecs=${r}`,o={label:`change-type=${i}`,execute:()=>{const s=this.tracks[e];if(s){const a=s.buffer;a!=null&&a.changeType&&(this.log(`changing ${e} sourceBuffer type to ${i}`),a.changeType(i),s.codec=r,s.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};this.append(o,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const r=e.start,i=r+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(r,Ue.MAIN))==null?void 0:t.gap)===!0)return;const s={label:"block-audio",execute:()=>{var a;const l=this.tracks.video;(this.lastVideoAppendEnd>i||l!=null&&l.buffer&&tt.isBuffered(l.buffer,i)||((a=this.fragmentTracker.getAppendedFrag(i,Ue.MAIN))==null?void 0:a.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn("Error executing block-audio operation",a)}};this.blockedAudioAppend={op:s,frag:e},this.append(s,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:r}=this,{data:i,type:o,parent:s,frag:a,part:l,chunkMeta:d,offset:c}=t,u=d.buffering[o],{sn:f,cc:p}=a,h=self.performance.now();u.start=h;const g=a.stats.buffering,m=l?l.stats.buffering:null;g.start===0&&(g.start=h),m&&m.start===0&&(m.start=h);const v=r.audio;let b=!1;o==="audio"&&(v==null?void 0:v.container)==="audio/mpeg"&&(b=!this.lastMpegAudioChunk||d.id===1||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const y=r.video,x=y==null?void 0:y.buffer;if(x&&f!=="initSegment"){const S=l||a,w=this.blockedAudioAppend;if(o==="audio"&&s!=="main"&&!this.blockedAudioAppend&&!(y.ending||y.ended)){const C=S.start+S.duration*.05,L=x.buffered,P=this.currentOp("video");!L.length&&!P?this.blockAudio(S):!P&&!tt.isBuffered(x,C)&&this.lastVideoAppendEnd<C&&this.blockAudio(S)}else if(o==="video"){const T=S.end;if(w){const C=w.frag.start;(T>C||T<this.lastVideoAppendEnd||tt.isBuffered(x,C))&&this.unblockAudio()}this.lastVideoAppendEnd=T}}const E=(l||a).start,A={label:`append-${o}`,execute:()=>{var S;u.executeStart=self.performance.now();const w=(S=this.tracks[o])==null?void 0:S.buffer;w&&(b?this.updateTimestampOffset(w,E,.1,o,f,p):c!==void 0&&Oe(c)&&this.updateTimestampOffset(w,c,1e-6,o,f,p)),this.appendExecutor(i,o)},onStart:()=>{},onComplete:()=>{const S=self.performance.now();u.executeEnd=u.end=S,g.first===0&&(g.first=S),m&&m.first===0&&(m.first=S);const w={};this.sourceBuffers.forEach(([T,C])=>{T&&(w[T]=tt.getBuffered(C))}),this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(I.BUFFER_APPENDED,{type:o,frag:a,part:l,chunkMeta:d,parent:a.type,timeRanges:w})},onError:S=>{var w;const T={type:Ge.MEDIA_ERROR,parent:a.type,details:oe.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:a,part:l,chunkMeta:d,error:S,err:S,fatal:!1},C=(w=this.media)==null?void 0:w.error;if(S.code===DOMException.QUOTA_EXCEEDED_ERR||S.name=="QuotaExceededError"||"quota"in S)T.details=oe.BUFFER_FULL_ERROR;else if(S.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!C)T.errorAction=ja(!0);else if(S.name===cw&&this.sourceBufferCount===0)T.errorAction=ja(!0);else{const L=++this.appendErrors[o];this.warn(`Failed ${L}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer (${C||"no media error"})`),(L>=this.hls.config.appendErrorMaxRetry||C)&&(T.fatal=!0)}this.hls.trigger(I.ERROR,T)}};this.append(A,o,this.isPending(this.tracks[o]))}getFlushOp(e,t,r){return this.log(`queuing "${e}" remove ${t}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(I.BUFFER_FLUSHED,{type:e})},onError:i=>{this.warn(`Failed to remove ${t}-${r} from "${e}" SourceBuffer`,i)}}}onBufferFlushing(e,t){const{type:r,startOffset:i,endOffset:o}=t;r?this.append(this.getFlushOp(r,i,o),r):this.sourceBuffers.forEach(([s])=>{s&&this.append(this.getFlushOp(s,i,o),s)})}onFragParsed(e,t){const{frag:r,part:i}=t,o=[],s=i?i.elementaryStreams:r.elementaryStreams;s[Mt.AUDIOVIDEO]?o.push("audiovideo"):(s[Mt.AUDIO]&&o.push("audio"),s[Mt.VIDEO]&&o.push("video"));const a=()=>{const l=self.performance.now();r.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const d=i?i.stats:r.stats;this.hls.trigger(I.FRAG_BUFFERED,{frag:r,part:i,stats:d,id:r.type})};o.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(a,o).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var r;this.sourceBuffers.forEach(([s])=>{if(s){const a=this.tracks[s];(!t.type||t.type===s)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${s} buffer reached EOS`)))}});const i=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([s])=>{var a;return s&&!((a=this.tracks[s])!=null&&a.ended)})?i?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:s}=this;if(!s||s.readyState!=="open"){s&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${s.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),s.endOfStream(),this.hls.trigger(I.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(I.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===oe.BUFFER_APPEND_ERROR&&t.frag){var r;const i=(r=t.errorAction)==null?void 0:r.nextAutoLevel;Oe(i)&&i!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:r}=this;if(!r||t===null||!this.sourceBufferCount)return;const i=e.config,o=r.currentTime,s=t.levelTargetDuration,a=t.live&&i.liveBackBufferLength!==null?i.liveBackBufferLength:i.backBufferLength;if(Oe(a)&&a>=0){const d=Math.max(a,s),c=Math.floor(o/s)*s-d;this.flushBackBuffer(o,s,c)}const l=i.frontBufferFlushThreshold;if(Oe(l)&&l>0){const d=Math.max(i.maxBufferLength,l),c=Math.max(d,s),u=Math.floor(o/s)*s+c;this.flushFrontBuffer(o,s,u)}}flushBackBuffer(e,t,r){this.sourceBuffers.forEach(([i,o])=>{if(o){const a=tt.getBuffered(o);if(a.length>0&&r>a.start(0)){var s;this.hls.trigger(I.BACK_BUFFER_REACHED,{bufferEnd:r});const l=this.tracks[i];if((s=this.details)!=null&&s.live)this.hls.trigger(I.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(l!=null&&l.ended){this.log(`Cannot flush ${i} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:i})}}})}flushFrontBuffer(e,t,r){this.sourceBuffers.forEach(([i,o])=>{if(o){const s=tt.getBuffered(o),a=s.length;if(a<2)return;const l=s.start(a-1),d=s.end(a-1);if(r>l||e>=l&&e<=d)return;this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:i})}})}getDurationAndRange(){var e;const{details:t,mediaSource:r}=this;if(!t||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const i=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&r.setLiveSeekableRange){const d=Math.max(0,t.fragmentStart),c=Math.max(d,i);return{duration:1/0,start:d,end:c}}return{duration:1/0}}const o=(e=this.overrides)==null?void 0:e.duration;if(o)return Oe(o)?{duration:o}:null;const s=this.media.duration,a=Oe(r.duration)?r.duration:0;return i>a&&i>s||!Oe(s)?{duration:i}:null}updateMediaSource({duration:e,start:t,end:r}){const i=this.mediaSource;!this.media||!i||i.readyState!=="open"||(i.duration!==e&&(Oe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),i.duration=e),t!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${i.duration}. Setting seekable range to ${t}-${r}.`),i.setLiveSeekableRange(t,r)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${Ut(r)}`),this.tracksReady){var i;const o=(i=this.transferData)==null?void 0:i.tracks;o&&Object.keys(o).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,r])=>{if(t){const i=this.tracks[t];e[t]={buffer:r,container:i.container,codec:i.codec,supplemental:i.supplemental,levelCodec:i.levelCodec,id:i.id,metadata:i.metadata}}}),this.hls.trigger(I.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const o in e){const s=o,a=e[s];if(this.isPending(a)){const l=this.getTrackCodec(a,s),d=`${a.container};codecs=${l}`;a.codec=l,this.log(`creating sourceBuffer(${d})${this.currentOp(s)?" Queued":""} ${Ut(a)}`);try{const c=r.addSourceBuffer(d),u=Uu(s),f=[s,c];t[u]=f,a.buffer=c}catch(c){var i;this.error(`error while trying to add sourceBuffer: ${c.message}`),this.shiftAndExecuteNext(s),(i=this.operationQueue)==null||i.removeBlockers(),delete this.tracks[s],this.hls.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:s,mimeType:d,parent:a.id});return}this.trackSourceBuffer(s,a)}}this.bufferCreated()}getTrackCodec(e,t){const r=e.supplemental;let i=e.codec;r&&(t==="video"||t==="audiovideo")&&qf(r,"video")&&(i=V4(i,r));const o=Xl(i,e.levelCodec);return o?t.slice(0,5)==="audio"?kd(o,this.appendSource):o:""}trackSourceBuffer(e,t){const r=t.buffer;if(!r)return;const i=this.getTrackCodec(t,e);this.tracks[e]={buffer:r,codec:i,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(o,s)=>{const a=s.removedRanges;a!=null&&a.length&&this.hls.trigger(I.BUFFER_FLUSHED,{type:o})})}get mediaSrc(){var e,t;const r=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const r=this.currentOp(e);r&&(r.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var r;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${i}`,t),this.hls.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const o=this.currentOp(e);o&&o.onError(i)}updateTimestampOffset(e,t,r,i,o,s){const a=t-e.timestampOffset;Math.abs(a)>=r&&(this.log(`Updating ${i} SourceBuffer timestampOffset to ${t} (sn: ${o} cc: ${s})`),e.timestampOffset=t)}removeExecutor(e,t,r){const{media:i,mediaSource:o}=this,s=this.tracks[e],a=s==null?void 0:s.buffer;if(!i||!o||!a){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=Oe(i.duration)?i.duration:1/0,d=Oe(o.duration)?o.duration:1/0,c=Math.max(0,t),u=Math.min(r,l,d);u>c&&(!s.ending||s.ended)?(s.ended=!1,this.log(`Removing [${c},${u}] from the ${e} SourceBuffer`),a.remove(c,u)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const r=this.tracks[t],i=r==null?void 0:r.buffer;if(!i)throw new Q8(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,i.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:r}=this,i=t.map(s=>this.appendBlocker(s));return t.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(i).then(s=>{r===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var r;const i=(r=this.tracks[t])==null?void 0:r.buffer;!i||i.updating||this.shiftAndExecuteNext(t)})}append(e,t,r){this.operationQueue&&this.operationQueue.append(e,t,r)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,r){const i=this.tracks[e];if(!i)return;const o=i.buffer;if(!o)return;const s=r.bind(this,e);i.listeners.push({event:t,listener:s}),o.addEventListener(t,s)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const r=t.buffer;r&&(t.listeners.forEach(i=>{r.removeEventListener(i.event,i.listener)}),t.listeners.length=0)}}function U0(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function J8(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}function Uu(n){return n==="audio"?1:0}class Gp{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(I.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.BUFFER_CODECS,this.onBufferCodecs,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(I.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const r=this.hls.levels[t.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const r=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,r.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Oe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,r=this.getMaxLevel(e.length-1);r!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${r}: ${e[r].height}p@${e[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=r,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const r=t.filter((i,o)=>this.isLevelAllowed(i)&&o<=e);return this.clientRect=null,Gp.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const r=e.getBoundingClientRect();t.width=r.width,t.height=r.height,!t.width&&!t.height&&(t.width=r.right-r.left||e.width||0,t.height=r.bottom-r.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(r=>e.bitrate===r.bitrate&&e.width===r.width&&e.height===r.height)}static getMaxLevelByMediaSize(e,t,r){if(!(e!=null&&e.length))return-1;const i=(a,l)=>l?a.width!==l.width||a.height!==l.height:!0;let o=e.length-1;const s=Math.max(t,r);for(let a=0;a<e.length;a+=1){const l=e[a];if((l.width>=s||l.height>=s)&&i(l,e[a+1])){o=a;break}}return o}}const e6={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Bn=e6,t6={HLS:"h"},n6=t6;class Xr{constructor(e,t){Array.isArray(e)&&(e=e.map(r=>r instanceof Xr?r:new Xr(r))),this.value=e,this.params=t}}const r6="Dict";function i6(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function o6(n,e,t,r){return new Error(`failed to ${n} "${i6(e)}" as ${t}`,{cause:r})}function Qr(n,e,t){return o6("serialize",n,e,t)}class uw{constructor(e){this.description=e}}const H0="Bare Item",s6="Boolean";function a6(n){if(typeof n!="boolean")throw Qr(n,s6);return n?"?1":"?0"}function l6(n){return btoa(String.fromCharCode(...n))}const d6="Byte Sequence";function c6(n){if(ArrayBuffer.isView(n)===!1)throw Qr(n,d6);return`:${l6(n)}:`}const u6="Integer";function f6(n){return n<-999999999999999||999999999999999<n}function fw(n){if(f6(n))throw Qr(n,u6);return n.toString()}function h6(n){return`@${fw(n.getTime()/1e3)}`}function hw(n,e){if(n<0)return-hw(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const i=Math.floor(n*t);return(i%2===0?i:i+1)/t}else return Math.round(n*t)/t}const p6="Decimal";function g6(n){const e=hw(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Qr(n,p6);const t=e.toString();return t.includes(".")?t:`${t}.0`}const m6="String",v6=/[\x00-\x1f\x7f]+/;function b6(n){if(v6.test(n))throw Qr(n,m6);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function y6(n){return n.description||n.toString().slice(7,-1)}const x6="Token";function V0(n){const e=y6(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Qr(e,x6);return e}function ih(n){switch(typeof n){case"number":if(!Oe(n))throw Qr(n,H0);return Number.isInteger(n)?fw(n):g6(n);case"string":return b6(n);case"symbol":return V0(n);case"boolean":return a6(n);case"object":if(n instanceof Date)return h6(n);if(n instanceof Uint8Array)return c6(n);if(n instanceof uw)return V0(n);default:throw Qr(n,H0)}}const S6="Key";function oh(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw Qr(n,S6);return n}function Wp(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${oh(e)}`:`;${oh(e)}=${ih(t)}`).join("")}function pw(n){return n instanceof Xr?`${ih(n.value)}${Wp(n.params)}`:ih(n)}function C6(n){return`(${n.value.map(pw).join(" ")})${Wp(n.params)}`}function T6(n,e={whitespace:!0}){if(typeof n!="object"||n==null)throw Qr(n,r6);const t=n instanceof Map?n.entries():Object.entries(n),r=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,o])=>{o instanceof Xr||(o=new Xr(o));let s=oh(i);return o.value===!0?s+=Wp(o.params):(s+="=",Array.isArray(o.value)?s+=C6(o):s+=pw(o)),s}).join(`,${r}`)}function gw(n,e){return T6(n,e)}const Br="CMCD-Object",Kt="CMCD-Request",po="CMCD-Session",ki="CMCD-Status",w6={br:Br,ab:Br,d:Br,ot:Br,tb:Br,tpb:Br,lb:Br,tab:Br,lab:Br,url:Br,pb:Kt,bl:Kt,tbl:Kt,dl:Kt,ltc:Kt,mtp:Kt,nor:Kt,nrr:Kt,rc:Kt,sn:Kt,sta:Kt,su:Kt,ttfb:Kt,ttfbb:Kt,ttlb:Kt,cmsdd:Kt,cmsds:Kt,smrt:Kt,df:Kt,cs:Kt,ts:Kt,cid:po,pr:po,sf:po,sid:po,st:po,v:po,msd:po,bs:ki,bsd:ki,cdn:ki,rtp:ki,bg:ki,pt:ki,ec:ki,e:ki},E6={REQUEST:Kt};function R6(n){return Object.keys(n).reduce((e,t)=>{var r;return(r=n[t])===null||r===void 0||r.forEach(i=>e[i]=t),e},{})}function A6(n,e){const t={};if(!n)return t;const r=Object.keys(n),i=e?R6(e):{};return r.reduce((o,s)=>{var a;const l=w6[s]||i[s]||E6.REQUEST,d=(a=o[l])!==null&&a!==void 0?a:o[l]={};return d[s]=n[s],o},t)}function I6(n){return["ot","sf","st","e","sta"].includes(n)}function L6(n){return typeof n=="number"?Oe(n):n!=null&&n!==""&&n!==!1}const mw="event";function P6(n,e){const t=new URL(n),r=new URL(e);if(t.origin!==r.origin)return n;const i=t.pathname.split("/").slice(1),o=r.pathname.split("/").slice(1,-1);for(;i[0]===o[0];)i.shift(),o.shift();for(;o.length;)o.shift(),i.unshift("..");return i.join("/")+t.search+t.hash}const td=n=>Math.round(n),sh=(n,e)=>Array.isArray(n)?n.map(t=>sh(t,e)):n instanceof Xr&&typeof n.value=="string"?new Xr(sh(n.value,e),n.params):(e.baseUrl&&(n=P6(n,e.baseUrl)),e.version===1?encodeURIComponent(n):n),$l=n=>td(n/100)*100,_6=(n,e)=>{let t=n;return e.version>=2&&(n instanceof Xr&&typeof n.value=="string"?t=new Xr([n]):typeof n=="string"&&(t=[n])),sh(t,e)},k6={br:td,d:td,bl:$l,dl:$l,mtp:$l,nor:_6,rtp:$l,tb:td},vw="request",bw="response",jp=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],D6=["e"],O6=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Cc(n){return O6.test(n)}function M6(n){return jp.includes(n)||D6.includes(n)||Cc(n)}const yw=["d","dl","nor","ot","rtp","su"];function F6(n){return jp.includes(n)||yw.includes(n)||Cc(n)}const $6=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function B6(n){return jp.includes(n)||yw.includes(n)||$6.includes(n)||Cc(n)}const N6=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function z6(n){return N6.includes(n)||Cc(n)}const U6={[bw]:B6,[mw]:M6,[vw]:F6};function xw(n,e={}){const t={};if(n==null||typeof n!="object")return t;const r=e.version||n.v||1,i=e.reportingMode||vw,o=r===1?z6:U6[i];let s=Object.keys(n).filter(o);const a=e.filter;typeof a=="function"&&(s=s.filter(a));const l=i===bw||i===mw;l&&!s.includes("ts")&&s.push("ts"),r>1&&!s.includes("v")&&s.push("v");const d=kt({},k6,e.formatters),c={version:r,reportingMode:i,baseUrl:e.baseUrl};return s.sort().forEach(u=>{let f=n[u];const p=d[u];if(typeof p=="function"&&(f=p(f,c)),u==="v"){if(r===1)return;f=r}u=="pr"&&f===1||(l&&u==="ts"&&!Oe(f)&&(f=Date.now()),L6(f)&&(I6(u)&&typeof f=="string"&&(f=new uw(f)),t[u]=f))}),t}function H6(n,e={}){const t={};if(!n)return t;const r=xw(n,e),i=A6(r,e==null?void 0:e.customHeaderMap);return Object.entries(i).reduce((o,[s,a])=>{const l=gw(a,{whitespace:!1});return l&&(o[s]=l),o},t)}function V6(n,e,t){return kt(n,H6(e,t))}const G6="CMCD";function W6(n,e={}){return n?gw(xw(n,e),{whitespace:!1}):""}function j6(n,e={}){if(!n)return"";const t=W6(n,e);return encodeURIComponent(t)}function K6(n,e={}){if(!n)return"";const t=j6(n,e);return`${G6}=${t}`}const G0=/CMCD=[^&#]+/;function q6(n,e,t){const r=K6(e,t);if(!r)return n;if(G0.test(n))return n.replace(G0,r);const i=n.includes("?")?"&":"?";return`${n}${i}${r}`}class Y6{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Bn.MANIFEST,su:!this.initialized})}catch(o){this.hls.logger.warn("Could not generate manifest CMCD data.",o)}},this.applyFragmentData=i=>{try{const{frag:o,part:s}=i,a=this.hls.levels[o.level],l=this.getObjectType(o),d={d:(s||o).duration*1e3,ot:l};(l===Bn.VIDEO||l===Bn.AUDIO||l==Bn.MUXED)&&(d.br=a.bitrate/1e3,d.tb=this.getTopBandwidth(l)/1e3,d.bl=this.getBufferLength(l));const c=s?this.getNextPart(s):this.getNextFrag(o);c!=null&&c.url&&c.url!==o.url&&(d.nor=c.url),this.apply(i,d)}catch(o){this.hls.logger.warn("Could not generate segment CMCD data.",o)}},this.hls=e;const t=this.config=e.config,{cmcd:r}=t;r!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||e.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHED,this.onMediaDetached,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHED,this.onMediaDetached,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var r,i;this.audioBuffer=(r=t.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:n6.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){kt(t,this.createData());const r=t.ot===Bn.INIT||t.ot===Bn.VIDEO||t.ot===Bn.MUXED;this.starved&&r&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((s,a)=>(i.includes(a)&&(s[a]=t[a]),s),{}));const o={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),V6(e.headers,t,o)):e.url=q6(e.url,t,o)}getNextFrag(e){var t;const r=(t=this.hls.levels[e.level])==null?void 0:t.details;if(r){const i=e.sn-r.startSN;return r.fragments[i+1]}}getNextPart(e){var t;const{index:r,fragment:i}=e,o=(t=this.hls.levels[i.level])==null||(t=t.details)==null?void 0:t.partList;if(o){const{sn:s}=i;for(let a=o.length-1;a>=0;a--){const l=o[a];if(l.index===r&&l.fragment.sn===s)return o[a+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Bn.TIMED_TEXT;if(e.sn==="initSegment")return Bn.INIT;if(t==="audio")return Bn.AUDIO;if(t==="main")return this.hls.audioTracks.length?Bn.VIDEO:Bn.MUXED}getTopBandwidth(e){let t=0,r;const i=this.hls;if(e===Bn.AUDIO)r=i.audioTracks;else{const o=i.maxAutoLevel,s=o>-1?o+1:i.levels.length;r=i.levels.slice(0,s)}return r.forEach(o=>{o.bitrate>t&&(t=o.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,r=e===Bn.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!t?NaN:tt.bufferInfo(r,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new r(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,s,a){t(o),this.loader.load(o,s,a)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,r=e||this.config.loader;return class{constructor(o){this.loader=void 0,this.loader=new r(o)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(o,s,a){t(o),this.loader.load(o,s,a)}}}}const X6=3e5;class Q6 extends kr{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:r}=t;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:r}=t;if((r==null?void 0:r.action)===yn.SendAlternateToPenaltyBox&&r.flags===xr.MoveAllAlternatesMatchingHost){const i=this.levels;let o=this._pathwayPriority,s=this.pathwayId;if(t.context){const{groupId:a,pathwayId:l,type:d}=t.context;a&&i?s=this.getPathwayForGroupId(a,d,s):l&&(s=l)}s in this.penalizedPathways||(this.penalizedPathways[s]=performance.now()),!o&&i&&(o=this.pathways()),o&&o.length>1&&(this.updatePathwayPriority(o),r.resolved=this.pathwayId!==s),t.details===oe.BUFFER_APPEND_ERROR&&!t.fatal?r.resolved=!0:r.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${s} levels: ${i&&i.length} priorities: ${Ut(o)} penalized: ${Ut(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),t=this.getLevelsForPathway(r),this.pathwayId=r}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach(o=>{i-r[o]>X6&&delete r[o]});for(let o=0;o<e.length;o++){const s=e[o];if(s in r)continue;if(s===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(t=this.getLevelsForPathway(s),t.length>0){this.log(`Setting Pathway to "${s}"`),this.pathwayId=s,zT(t),this.hls.trigger(I.LEVELS_UPDATED,{levels:t});const d=this.hls.levels[a];l&&d&&this.levels&&(d.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&d.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${d.bitrate}`),this.hls.nextLoadLevel=a);break}}}getPathwayForGroupId(e,t,r){const i=this.getLevelsForPathway(r).concat(this.levels||[]);for(let o=0;o<i.length;o++)if(t===ct.AUDIO_TRACK&&i[o].hasAudioGroup(e)||t===ct.SUBTITLE_TRACK&&i[o].hasSubtitleGroup(e))return i[o].pathwayId;return r}clonePathways(e){const t=this.levels;if(!t)return;const r={},i={};e.forEach(o=>{const{ID:s,"BASE-ID":a,"URI-REPLACEMENT":l}=o;if(t.some(c=>c.pathwayId===s))return;const d=this.getLevelsForPathway(a).map(c=>{const u=new Wt(c.attrs);u["PATHWAY-ID"]=s;const f=u.AUDIO&&`${u.AUDIO}_clone_${s}`,p=u.SUBTITLES&&`${u.SUBTITLES}_clone_${s}`;f&&(r[u.AUDIO]=f,u.AUDIO=f),p&&(i[u.SUBTITLES]=p,u.SUBTITLES=p);const h=Sw(c.uri,u["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),g=new Wa({attrs:u,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:h,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let m=1;m<c.audioGroups.length;m++)g.addGroupId("audio",`${c.audioGroups[m]}_clone_${s}`);if(c.subtitleGroups)for(let m=1;m<c.subtitleGroups.length;m++)g.addGroupId("text",`${c.subtitleGroups[m]}_clone_${s}`);return g});t.push(...d),W0(this.audioTracks,r,l,s),W0(this.subtitleTracks,i,l,s)})}loadSteeringManifest(e){const t=this.hls.config,r=t.loader;this.loader&&this.loader.destroy(),this.loader=new r(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+c)}const o={responseType:"json",url:i.href},s=t.steeringManifestLoadPolicy.default,a=s.errorRetry||s.timeoutRetry||{},l={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},d={onSuccess:(c,u,f,p)=>{this.log(`Loaded steering manifest: "${i}"`);const h=c.data;if((h==null?void 0:h.VERSION)!==1){this.log(`Steering VERSION ${h.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=h.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":m,"PATHWAY-PRIORITY":v}=h;if(g)try{this.uri=new self.URL(g,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||f.url),m&&this.clonePathways(m);const b={steeringManifest:h,url:i.toString()};this.hls.trigger(I.STEERING_MANIFEST_LOADED,b),v&&this.updatePathwayPriority(v)},onError:(c,u,f,p)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${u.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${u.url} no longer available`);return}let h=this.timeToLoad*1e3;if(c.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const m=g.getResponseHeader("Retry-After");m&&(h=parseFloat(m)*1e3)}this.log(`Steering manifest ${u.url} rate limited`);return}this.scheduleRefresh(this.uri||u.url,h)},onTimeout:(c,u,f)=>{this.log(`Timeout loading steering manifest (${u.url})`),this.scheduleRefresh(this.uri||u.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(o,l,d)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const i=(r=this.hls)==null?void 0:r.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function W0(n,e,t,r){n&&Object.keys(e).forEach(i=>{const o=n.filter(s=>s.groupId===i).map(s=>{const a=kt({},s);return a.details=void 0,a.attrs=new Wt(a.attrs),a.url=a.attrs.URI=Sw(s.url,s.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),a.groupId=a.attrs["GROUP-ID"]=e[i],a.attrs["PATHWAY-ID"]=r,a});n.push(...o)})}function Sw(n,e,t,r){const{HOST:i,PARAMS:o,[t]:s}=r;let a;e&&(a=s==null?void 0:s[e],a&&(n=a));const l=new self.URL(n);return i&&!a&&(l.host=i),o&&Object.keys(o).sort().forEach(d=>{d&&l.searchParams.set(d,o[d])}),l.href}function Jn(n,e,t){ur(n,e,t),n.addEventListener(e,t)}function ur(n,e,t){n.removeEventListener(e,t)}class vs extends kr{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=vs.CDMCleanupPromise?[vs.CDMCleanupPromise]:[],this.onMediaEncrypted=t=>{const{initDataType:r,initData:i}=t,o=`"${t.type}" event: init data type: "${r}"`;if(this.debug(o),i!==null){if(!this.keyFormatPromise){let s=Object.keys(this.keySystemAccessPromises);s.length||(s=aa(this.config));const a=s.map(Du).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(a)}this.keyFormatPromise.then(s=>{const a=Zl(s);if(r!=="sinf"||a!==qt.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${r}" for selected key-system ${a}`);return}let l;try{const p=nn(new Uint8Array(i)),h=Op(JSON.parse(p).sinf),g=xT(h);if(!g)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(g.subarray(8,24))}catch(p){this.warn(`${o} Failed to parse sinf: ${p}`);return}const d=fi.hexDump(l),{keyIdToKeySessionPromise:c,mediaKeySessions:u}=this;let f=c[d];for(let p=0;p<u.length;p++){const h=u[p],g=h.decryptdata;if(!g.keyId)continue;const m=fi.hexDump(g.keyId);if(d===m||g.uri.replace(/-/g,"").indexOf(d)!==-1){if(f=c[m],!f)continue;if(g.pssh)break;delete c[m],g.pssh=new Uint8Array(i),g.keyId=l,f=c[d]=f.then(()=>this.generateRequestWithPreferredKeySession(h,r,i,"encrypted-event-key-match")),f.catch(v=>this.handleError(v));break}}f||this.handleError(new Error(`Key ID ${d} not encountered in playlist. Key-system sessions ${u.length}.`))})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onWaitingForKey=null}registerListeners(){this.hls.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(I.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(I.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(I.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(I.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(I.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:r}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===qt.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,r=t[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,r=(s,a,l)=>!!s&&l.indexOf(s)===a,i=t.map(s=>s.audioCodec).filter(r),o=t.map(s=>s.videoCodec).filter(r);return i.length+o.length===0&&o.push("avc1.42e01e"),new Promise((s,a)=>{const l=d=>{const c=d.shift();this.getMediaKeysPromise(c,i,o).then(u=>s({keySystem:c,mediaKeys:u})).catch(u=>{d.length?l(d):u instanceof dr?a(u):a(new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_NO_ACCESS,error:u,fatal:!0},u.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${r}`;return DT===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return r(e,t)}getMediaKeysPromise(e,t,r){const i=kU(e,t,r,this.config.drmSystemOptions),o=this.keySystemAccessPromises[e];let s=o==null?void 0:o.keySystemAccess;if(!s){this.log(`Requesting encrypted media "${e}" key-system access with config: ${Ut(i)}`),s=this.requestMediaKeySystemAccess(e,i);const a=this.keySystemAccessPromises[e]={keySystemAccess:s};return s.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),s.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const d=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(c=>(this.log(`Media-keys created for "${e}"`),a.hasMediaKeys=!0,d.then(u=>u?this.setMediaKeysServerCertificate(c,e,u):c))),a.mediaKeys.catch(c=>{this.error(`Failed to create media-keys for "${e}"}: ${c}`)}),a.mediaKeys})}return s.then(()=>o.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:r}){this.log(`Creating key-system session "${t}" keyId: ${fi.hexDump(e.keyId||[])}`);const i=r.createSession(),o={decryptdata:e,keySystem:t,mediaKeys:r,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(o),o}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const r=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),o="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,o,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return fi.hexDump(e.keyId)}updateKeySession(e,t){var r;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${fi.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>Du(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:r})=>this.attemptSetMediaKeys(t,r))}selectKeySystem(e){return new Promise((t,r)=>this.getKeySystemSelectionPromise(e).then(({keySystem:i})=>{const o=Du(i);o?t(o):r(new Error(`Unable to find format for key-system "${i}"`))}).catch(r))}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=aa(this.config),r=e.map(Zl).filter(i=>!!i&&t.indexOf(i)!==-1);return this.selectKeySystem(r)}loadKey(e){const t=e.keyInfo.decryptdata,r=this.getKeyIdString(t),i=`(keyId: ${r} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let o=this.keyIdToKeySessionPromise[r];return o||(o=this.getKeySystemForKeyPromise(t).then(({keySystem:a,mediaKeys:l})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(a,l).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:a,mediaKeys:l,decryptdata:t}))))),(this.keyIdToKeySessionPromise[r]=o.then(a=>{const l="cenc",d=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(a,l,d,"playlist-key")})).catch(a=>this.handleError(a))),o}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof dr?this.hls.trigger(I.ERROR,e.data):this.hls.trigger(I.ERROR,{type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[t];if(!r){const i=Zl(e.keyFormat),o=i?[i]:aa(this.config);return this.attemptKeySystemAccess(o)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=aa(this.config)),e.length===0)throw new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Ut({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaKeys===t)return Promise.resolve();const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(r).then(()=>{if(!this.media)throw this.mediaKeys=null,new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.mediaKeys=t,this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(o=>r.indexOf(o)===-1)})}generateRequestWithPreferredKeySession(e,t,r,i){var o;const s=(o=this.config.drmSystems)==null||(o=o[e.keySystem])==null?void 0:o.generateRequest;if(s)try{const p=s.call(this.hls,t,r,e);if(!p)throw new Error("Invalid response from configured generateRequest filter");t=p.initDataType,r=p.initData?p.initData:null,e.decryptdata.pssh=r?new Uint8Array(r):null}catch(p){var a;if(this.warn(p.message),(a=this.hls)!=null&&a.config.debug)throw p}if(r===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const l=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${l} (init data type: ${t} length: ${r?r.byteLength:null})`);const d=new Fp,c=e._onmessage=p=>{const h=e.mediaKeysSession;if(!h){d.emit("error",new Error("invalid state"));return}const{messageType:g,message:m}=p;this.log(`"${g}" message event for session "${h.sessionId}" message size: ${m.byteLength}`),g==="license-request"||g==="license-renewal"?this.renewLicense(e,m).catch(v=>{d.eventNames().length?d.emit("error",v):this.handleError(v)}):g==="license-release"?e.keySystem===qt.FAIRPLAY&&(this.updateKeySession(e,Zf("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${g}"`)},u=e._onkeystatuseschange=p=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const g=e.keyStatus;d.emit("keyStatus",g),g==="expired"&&(this.warn(`${e.keySystem} expired for key ${l}`),this.renewKeySession(e))};Jn(e.mediaKeysSession,"message",c),Jn(e.mediaKeysSession,"keystatuseschange",u);const f=new Promise((p,h)=>{d.on("error",h),d.on("keyStatus",g=>{g.startsWith("usable")?p():g==="output-restricted"?h(new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):g==="internal-error"?h(new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${g}"`)):g==="expired"?h(new Error("key expired while generating request")):this.warn(`unhandled key status change "${g}"`)})});return e.mediaKeysSession.generateRequest(t,r).then(()=>{var p;this.log(`Request generated for key-session "${(p=e.mediaKeysSession)==null?void 0:p.sessionId}" keyId: ${l}`)}).catch(p=>{throw new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_NO_SESSION,error:p,fatal:!1},`Error generating key-session request: ${p}`)}).then(()=>f).catch(p=>{throw d.removeAllListeners(),this.removeSession(e),p}).then(()=>(d.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,r)=>{if(typeof r=="string"&&typeof t=="object"){const i=r;r=t,t=i}this.log(`key status change "${t}" for keyStatuses keyId: ${fi.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${fi.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,r=t.loader,i=new r(t),o=this.getServerCertificateUrl(e);return o?(this.log(`Fetching server certificate for "${e}"`),new Promise((s,a)=>{const l={responseType:"arraybuffer",url:o},d=t.certLoadPolicy.default,c={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(f,p,h,g)=>{s(f.data)},onError:(f,p,h,g)=>{a(new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:h,response:_t({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${o}). Status: ${f.code} (${f.text})`))},onTimeout:(f,p,h)=>{a(new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:h,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${o})`))},onAbort:(f,p,h)=>{a(new Error("aborted"))}};i.load(l,c,u)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,r){return new Promise((i,o)=>{e.setServerCertificate(r).then(s=>{this.log(`setServerCertificate ${s?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${t}"`),i(e)}).catch(s=>{o(new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:s,fatal:!0},s.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(i=>{throw new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,t){const r=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!r.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(r,"application/xml"),o=i.querySelectorAll("HttpHeader");if(o.length>0){let c;for(let u=0,f=o.length;u<f;u++){var s,a;c=o[u];const p=(s=c.querySelector("name"))==null?void 0:s.textContent,h=(a=c.querySelector("value"))==null?void 0:a.textContent;p&&h&&e.setRequestHeader(p,h)}}const l=i.querySelector("Challenge"),d=l==null?void 0:l.textContent;if(!d)throw new Error("Cannot find <Challenge> in key message");return Zf(atob(d))}setupLicenseXHR(e,t,r,i){const o=this.config.licenseXhrSetup;return o?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return o.call(this.hls,e,t,r,i)}).catch(s=>{if(!r.decryptdata)throw s;return e.open("POST",t,!0),o.call(this.hls,e,t,r,i)}).then(s=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:s||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const r=this.config.keyLoadPolicy.default;return new Promise((i,o)=>{const s=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${s}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return o(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const d=this.config.licenseResponseCallback;if(d)try{l=d.call(this.hls,a,s,e)}catch(c){this.error(c)}i(l)}else{const l=r.errorRetry,d=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>d||a.status>=400&&a.status<500)o(new dr({type:Ge.KEY_SYSTEM_ERROR,details:oe.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:s,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${s}). Status: ${a.status} (${a.statusText})`));else{const c=d-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,t).then(i,o)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,s,e,t).then(({xhr:l,licenseChallenge:d})=>{e.keySystem==qt.PLAYREADY&&(d=this.unpackPlayReadyKeyMessage(l,d)),l.send(d)})})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const r=t.media;this.media=r,Jn(r,"encrypted",this.onMediaEncrypted),Jn(r,"waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media;e&&(ur(e,"encrypted",this.onMediaEncrypted),ur(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;if(this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},!this.mediaKeys&&!this.mediaKeySessions.length)return;const t=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,xc.clearKeyUriToKeyIdMap();const i=r.length;vs.CDMCleanupPromise=Promise.all(r.map(o=>this.removeSession(o)).concat(t==null||(e=t.setMediaKeys(null))==null?void 0:e.catch(o=>{var s;this.log(`Could not clear media keys: ${o}`),(s=this.hls)==null||s.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${o}`)})}))).catch(o=>{var s;this.log(`Could not close sessions and clear media keys: ${o}`),(s=this.hls)==null||s.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${o}`)})}).then(()=>{i&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=t.reduce((i,o)=>(i.indexOf(o.keyFormat)===-1&&i.push(o.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:r}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);i>-1&&this.mediaKeySessions.splice(i,1);const{drmSystemOptions:o}=this.config;return(OU(o)?new Promise((a,l)=>{self.setTimeout(()=>l(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(a)}):Promise.resolve()).catch(a=>{var l;this.log(`Could not remove session: ${a}`),(l=this.hls)==null||l.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${a}`)})}).then(()=>t.close()).catch(a=>{var l;this.log(`Could not close session: ${a}`),(l=this.hls)==null||l.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${a}`)})})}}}vs.CDMCleanupPromise=void 0;class dr extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}class Z6{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(I.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(I.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const r=this.hls.config;if(r.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,r){const i=performance.now();if(t){if(this.lastTime){const o=i-this.lastTime,s=r-this.lastDroppedFrames,a=t-this.lastDecodedFrames,l=1e3*s/o,d=this.hls;if(d.trigger(I.FPS_DROP,{currentDropped:s,currentDecoded:a,totalDroppedFrames:r}),l>0&&s>d.config.fpsDroppedMonitoringThreshold*a){let c=d.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=c)&&(c=c-1,d.trigger(I.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:d.currentLevel}),d.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function Cw(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function Tw(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){wt.debug(`[texttrack-utils]: ${r}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,n.addCue(i)}catch(i){wt.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(n.mode=t)}function as(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues)for(let r=n.cues.length;r--;)e&&n.cues[r].removeEventListener("enter",e),n.removeCue(n.cues[r]);t==="disabled"&&(n.mode=t)}function ah(n,e,t,r){const i=n.mode;if(i==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const o=eH(n.cues,e,t);for(let s=0;s<o.length;s++)(!r||r(o[s]))&&n.removeCue(o[s])}i==="disabled"&&(n.mode=i)}function J6(n,e){if(e<=n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let r=0,i=t,o;for(;r<=i;)if(o=Math.floor((i+r)/2),e<n[o].startTime)i=o-1;else if(e>n[o].startTime&&r<t)r=o+1;else return o;return n[r].startTime-e<e-n[i].startTime?r:i}function eH(n,e,t){const r=[],i=J6(n,e);if(i>-1)for(let o=i,s=n.length;o<s;o++){const a=n[o];if(a.startTime>=e&&a.endTime<=t)r.push(a);else if(a.startTime>t)return r}return r}function nd(n){const e=[];for(let t=0;t<n.length;t++){const r=n[t];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(n[t])}return e}class tH extends Vp{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const r=nd(this.media.textTracks);for(let o=0;o<r.length;o++)if(r[o].mode==="hidden")t=r[o];else if(r[o].mode==="showing"){t=r[o];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(I.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(I.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const r=this.media;if(!r)return;const i=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,i)return;nd(r.textTracks).forEach(s=>{as(s)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:r,groupId:i,details:o}=t,s=this.tracksInGroup[r];if(!s||s.groupId!==i){this.warn(`Subtitle track with id:${r} and group:${i} not found in active group ${s==null?void 0:s.groupId}`);return}const a=s.details;s.details=t.details,this.log(`Subtitle track ${r} "${s.name}" lang:${s.lang} group:${i} loaded [${o.startSN}-${o.endSN}]`),r===this.trackId&&this.playlistLoaded(r,t,a)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const r=t.subtitleGroups||null,i=this.groupIds;let o=this.currentTrack;if(!r||(i==null?void 0:i.length)!==(r==null?void 0:r.length)||r!=null&&r.some(s=>(i==null?void 0:i.indexOf(s))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const s=this.tracks.filter(c=>!r||r.indexOf(c.groupId)!==-1);if(s.length)this.selectDefaultTrack&&!s.some(c=>c.default)&&(this.selectDefaultTrack=!1),s.forEach((c,u)=>{c.id=u});else if(!o&&!this.tracksInGroup.length)return;this.tracksInGroup=s;const a=this.hls.config.subtitlePreference;if(!o&&a){this.selectDefaultTrack=!1;const c=Vr(a,s);if(c>-1)o=s[c];else{const u=Vr(a,this.tracks);o=this.tracks[u]}}let l=this.findTrackId(o);l===-1&&o&&(l=this.findTrackId(null));const d={subtitleTracks:s};this.log(`Updating subtitle tracks, ${s.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(I.SUBTITLE_TRACKS_UPDATED,d),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const t=this.tracksInGroup,r=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const o=t[i];if(!(r&&!o.default||!r&&!e)&&(!e||Ao(o,e)))return i}if(e){for(let i=0;i<t.length;i++){const o=t[i];if(Xa(e.attrs,o.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const o=t[i];if(Xa(e.attrs,o.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let r=0;r<t.length;r++){const i=t[r];if(rh(i,e))return r}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===ct.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const r=this.currentTrack;if(r&&Ao(e,r))return r;const i=Vr(e,this.tracksInGroup);if(i>-1){const o=this.tracksInGroup[i];return this.setSubtitleTrack(i),o}else{if(r)return null;{const o=Vr(e,t);if(o>-1)return t[o]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=e.id,i=e.groupId,o=this.getUrlWithDirectives(e.url,t),s=e.details,a=s==null?void 0:s.age;this.log(`Loading subtitle ${r} "${e.name}" lang:${e.lang} group:${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${o}`),this.hls.trigger(I.SUBTITLE_TRACK_LOADING,{url:o,id:r,groupId:i,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=nd(e.textTracks),r=this.currentTrack;let i;if(r&&(i=t.filter(o=>rh(r,o))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(t).forEach(o=>{o.mode!=="disabled"&&o!==i&&(o.mode="disabled")}),i){const o=this.subtitleDisplay?"showing":"hidden";i.mode!==o&&(i.mode=o)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Oe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(I.SUBTITLE_TRACK_SWITCH,{id:e});return}const o=!!i.details&&!i.details.live;if(e===this.trackId&&i===r&&o)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:s,groupId:a="",name:l,type:d,url:c}=i;this.hls.trigger(I.SUBTITLE_TRACK_SWITCH,{id:s,groupId:a,name:l,type:d,url:c});const u=this.switchParams(i.url,r==null?void 0:r.details,i.details);this.loadPlaylist(u)}}function nH(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const o=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?o:o&3|8).toString(16)})}}}function Ea(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()}const bs=.025;let zd=function(n){return n[n.Point=0]="Point",n[n.Range=1]="Range",n}({});function rH(n,e,t){return`${n.identifier}-${t+1}-${Ea(e)}`}class iH{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const r=this.playoutLimit;return e<=0||isNaN(r)?!1:r===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>r}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Hu(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,r=Hu(t,e);return t-r<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=Oe(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Hu(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<bs))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?zd.Range:zd.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return oH(this)}}function Hu(n,e){return n-e.start<e.duration/2&&!(Math.abs(n-(e.start+e.duration))<bs)?e.start:e.start+e.duration}function ww(n,e,t){const r=new self.URL(n,t);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",e),r}function Vu(n,e){for(;(t=n.assetList[++e])!=null&&t.error;)var t;return e}function oH(n){return`["${n.identifier}" ${n.cue.pre?"<pre>":n.cue.post?"<post>":""}${n.timelineStart.toFixed(2)}-${n.resumeTime.toFixed(2)}]`}function ss(n){const e=n.timelineStart,t=n.duration||0;return`["${n.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class sH{constructor(e,t,r,i){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(I.PLAYOUT_LIMIT_REACHED,{})};const o=this.hls=new e(t);this.interstitial=r,this.assetItem=i;const s=()=>{this.hasDetails=!0};o.once(I.LEVEL_LOADED,s),o.once(I.AUDIO_TRACK_LOADED,s),o.once(I.SUBTITLE_TRACK_LOADED,s),o.on(I.MEDIA_ATTACHING,(a,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&o.on(I.BUFFER_APPENDED,()=>{const c=this.bufferedEnd;this.reachedPlayout(c)&&(this._bufferedEosTime=c,o.trigger(I.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e&&!e.url){let t=this.assetItem.uri;try{t=ww(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const r=this._bufferedEosTime||this.duration,i=this.timelineOffset,o=tt.bufferInfo(e,i,0);return this.getAssetTime(o.end)>=r-.02}reachedPlayout(e){const r=this.interstitial.playoutLimit;return this.startOffset+e>=r}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=tt.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;return e||0}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const r=e-t;if(Math.abs(r)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,e-t),r)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=r=>delete r.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,r){var i;(i=this.hls)==null||i.on(e,t)}once(e,t,r){var i;(i=this.hls)==null||i.once(e,t)}off(e,t,r){var i;(i=this.hls)==null||i.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${ss(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const j0=.033;class aH extends kr{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((r,i)=>e<=i.startOffset&&t>i.startOffset?(delete i.error,r+1):r,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let r=-1;e.nextEvent?r=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(r=this.findEventIndex(e.previousEvent.identifier)+1);const i=this.items;if(i)for(i[r]||(t===void 0&&(t=e.start),r=this.findItemIndexAtTime(t));r>=0&&(o=i[r])!=null&&o.event;){var o;r--}return r}findItemIndexAtTime(e,t){const r=this.items;if(r)for(let i=0;i<r.length;i++){let o=r[i];if(t&&t!=="primary"&&(o=o[t]),e===o.start||e>o.start&&e<o.end)return i}return-1}findJumpRestrictedIndex(e,t){const r=this.items;if(r)for(let i=e;i<=t&&r[i];i++){const o=r[i].event;if(o!=null&&o.restrictions.jump&&!o.appendInPlace)return i}return-1}findEventIndex(e){const t=this.items;if(t)for(let i=t.length;i--;){var r;if(((r=t[i].event)==null?void 0:r.identifier)===e)return i}return-1}findAssetIndex(e,t){const r=e.assetList,i=r.length;if(i>1)for(let o=0;o<i;o++){const s=r[o];if(!s.error){const a=s.timelineStart;if(t===a||t>a&&(t<a+(s.duration||0)||o===i-1))return o}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const r=t.assetList,i=r[r.length-1];if(i)return i.identifier}return null}parseInterstitialDateRanges(e,t){const r=e.main.details,{dateRanges:i}=r,o=this.events,s=this.parseDateRanges(i,{url:r.url},t),a=Object.keys(i),l=o?o.filter(d=>!a.includes(d.identifier)):[];s.length&&s.sort((d,c)=>{const u=d.cue.pre,f=d.cue.post,p=c.cue.pre,h=c.cue.post;if(u&&!p)return-1;if(p&&!u||f&&!h)return 1;if(h&&!f)return-1;if(!u&&!p&&!f&&!h){const g=d.startTime,m=c.startTime;if(g!==m)return g-m}return d.dateRange.tagOrder-c.dateRange.tagOrder}),this.events=s,l.forEach(d=>{this.removeEvent(d)}),this.updateSchedule(e,l)}updateSchedule(e,t=[]){const r=this.events||[];if(r.length||t.length||this.length<2){const i=this.items,o=this.parseSchedule(r,e);(t.length||(i==null?void 0:i.length)!==o.length||o.some((a,l)=>Math.abs(a.playout.start-i[l].playout.start)>.005||Math.abs(a.playout.end-i[l].playout.end)>.005))&&(this.items=o,this.onScheduleUpdate(t,i))}}parseDateRanges(e,t,r){const i=[],o=Object.keys(e);for(let s=0;s<o.length;s++){const a=o[s],l=e[a];if(l.isInterstitial){let d=this.eventMap[a];d?d.setDateRange(l):(d=new iH(l,t),this.eventMap[a]=d,r===!1&&(d.appendInPlace=r)),i.push(d)}}return i}parseSchedule(e,t){const r=[],i=t.main.details,o=i.live?1/0:i.edge;let s=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,t);let l=0,d=0;if(e.forEach((c,u)=>{const f=c.cue.pre,p=c.cue.post,h=e[u-1]||null,g=c.appendInPlace,m=p?o:c.startOffset,v=c.duration,b=c.timelineOccupancy===zd.Range?v:0,y=c.resumptionOffset,x=(h==null?void 0:h.startTime)===m,E=m+c.cumulativeDuration;let A=g?E+v:m+y;if(f||!p&&m<=0){const w=d;d+=b,c.timelineStart=E;const T=s;s+=v,r.push({event:c,start:E,end:A,playout:{start:T,end:s},integrated:{start:w,end:d}})}else if(m<=o){if(!x){const C=m-l;if(C>j0){const L=l,P=d;d+=C;const _=s;s+=C;const D={previousEvent:e[u-1]||null,nextEvent:c,start:L,end:L+C,playout:{start:_,end:s},integrated:{start:P,end:d}};r.push(D)}else C>0&&h&&(h.cumulativeDuration+=C,r[r.length-1].end=m)}p&&(A=E),c.timelineStart=E;const w=d;d+=b;const T=s;s+=v,r.push({event:c,start:E,end:A,playout:{start:T,end:s},integrated:{start:w,end:d}})}else return;const S=c.resumeTime;p||S>o?l=o:l=S}),l<o){var a;const c=l,u=d,f=o-l;d+=f;const p=s;s+=f,r.push({previousEvent:((a=r[r.length-1])==null?void 0:a.event)||null,nextEvent:null,start:l,end:c+f,playout:{start:p,end:s},integrated:{start:u,end:d}})}this.setDurations(o,s,d)}else r.push({previousEvent:null,nextEvent:null,start:0,end:o,playout:{start:0,end:o},integrated:{start:0,end:o}}),this.setDurations(o,o,o);return r}setDurations(e,t,r){this.durations={primary:e,playout:t,integrated:r}}resolveOffsets(e,t){const r=t.main.details,i=r.live?1/0:r.edge;let o=0,s=-1;e.forEach((a,l)=>{const d=a.cue.pre,c=a.cue.post,u=d?0:c?i:a.startTime;this.updateAssetDurations(a),s===u?a.cumulativeDuration=o:(o=0,s=u),!c&&a.snapOptions.in&&(a.resumeAnchor=Fo(null,r.fragments,a.startOffset+a.resumptionOffset,0,0)||void 0),a.appendInPlace&&!a.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(a,t)||(a.appendInPlace=!1)),!a.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<j0&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${a}`));const p=Oe(a.resumeOffset)?a.resumeOffset:a.duration;o+=p})}primaryCanResumeInPlaceAt(e,t){const r=e.resumeTime,i=e.startTime+e.resumptionOffset;return Math.abs(r-i)>bs?(this.log(`"${e.identifier}" resumption ${r} not aligned with estimated timeline end ${i}`),!1):t?!Object.keys(t).some(s=>{const a=t[s].details,l=a.edge;if(r>=l)return this.log(`"${e.identifier}" resumption ${r} past ${s} playlist end ${l}`),!1;const d=Fo(null,a.fragments,r);if(!d)return this.log(`"${e.identifier}" resumption ${r} does not align with any fragments in ${s} playlist (${a.fragStart}-${a.fragmentEnd})`),!0;const c=s==="audio"?.175:0;return Math.abs(d.start-r)<bs+c||Math.abs(d.end-r)<bs+c?!1:(this.log(`"${e.identifier}" resumption ${r} not aligned with ${s} fragment bounds (${d.start}-${d.end} sn: ${d.sn} cc: ${d.cc})`),!0)}):(this.log(`"${e.identifier}" resumption ${r} can not be aligned with media (none selected)`),!1)}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let r=0,i=!1,o=!1;e.assetList.forEach((s,a)=>{const l=t+r;s.startOffset=r,s.timelineStart=l,i||(i=s.duration===null),o||(o=!!s.error);const d=s.error?0:s.duration||0;r+=d}),i&&!o?e.duration=Math.max(r,e.duration):e.duration=r}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function Di(n){return`[${n.event?'"'+n.event.identifier+'"':"primary"}: ${n.start.toFixed(2)}-${n.end.toFixed(2)}]`}class lH{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const r=e.assetListUrl;let i;try{i=ww(r,this.hls.sessionId,e.baseUrl)}catch(f){const p=this.assignAssetListError(e,oe.ASSET_LIST_LOAD_ERROR,f,r);this.hls.trigger(I.ERROR,p);return}t&&i.protocol!=="data:"&&i.searchParams.set("_HLS_start_offset",""+t);const o=this.hls.config,s=o.loader,a=new s(o),l={responseType:"json",url:i.href},d=o.interstitialAssetListLoadPolicy.default,c={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(f,p,h,g)=>{const m=f.data,v=m==null?void 0:m.ASSETS;if(!Array.isArray(v)){const b=this.assignAssetListError(e,oe.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),h.url,p,g);this.hls.trigger(I.ERROR,b);return}e.assetListResponse=m,this.hls.trigger(I.ASSET_LIST_LOADED,{event:e,assetListResponse:m,networkDetails:g})},onError:(f,p,h,g)=>{const m=this.assignAssetListError(e,oe.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${f.code} ${f.text} (${p.url})`),p.url,g,h);this.hls.trigger(I.ERROR,m)},onTimeout:(f,p,h)=>{const g=this.assignAssetListError(e,oe.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${p.url})`),p.url,f,h);this.hls.trigger(I.ERROR,g)}};return a.load(l,c,u),this.hls.trigger(I.ASSET_LIST_LOADING,{event:e}),a}assignAssetListError(e,t,r,i,o,s){return e.error=r,{type:Ge.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:i,error:r,networkDetails:s,stats:o}}}function K0(n){n==null||n.play().catch(()=>{})}class dH extends kr{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled||!this.schedule)return;const i=r-this.timelinePos;if(Math.abs(i)<1/7056e5)return;const s=i<=-.01;this.timelinePos=r,this.bufferedPos=r;const a=this.playingItem;if(!a){this.checkBuffer();return}if(s&&this.schedule.resetErrorsInRange(r,r-i)&&this.updateSchedule(),this.checkBuffer(),s&&r<a.start||r>=a.end){var l;const f=this.findItemIndex(a);let p=this.schedule.findItemIndexAtTime(r);if(p===-1&&(p=f+(s?-1:1),this.log(`seeked ${s?"back ":""}to position not covered by schedule ${r} (resolving from ${f} to ${p})`)),!this.isInterstitial(a)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!s&&p>f){const h=this.schedule.findJumpRestrictedIndex(f+1,p);if(h>f){this.setSchedulePosition(h);return}}this.setSchedulePosition(p);return}const d=this.playingAsset;if(!d){if(this.playingLastItem&&this.isInterstitial(a)){const f=a.event.assetList[0];f&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,f))}return}const c=d.timelineStart,u=d.duration||0;(s&&r<c||r>=c+u)&&this.setScheduleToAssetAtTime(r,d)},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const i=this.playingItem;if(!i||this.playingLastItem)return;if(r>=i.end){this.timelinePos=i.end;const a=this.findItemIndex(i);this.setSchedulePosition(a+1)}const o=this.playingAsset;if(!o)return;const s=o.timelineStart+(o.duration||0);r>=s&&this.setScheduleToAssetAtTime(r,o)},this.onScheduleUpdate=(r,i)=>{const o=this.schedule;if(!o)return;const s=this.playingItem,a=o.events||[],l=o.items||[],d=o.durations,c=r.map(g=>g.identifier),u=!!(a.length||c.length);(u||i)&&this.log(`INTERSTITIALS_UPDATED (${a.length}): ${a}
Schedule: ${l.map(g=>Di(g))} pos: ${this.timelinePos}`),c.length&&this.log(`Removed events ${c}`);let f=null,p=null;s&&(f=this.updateItem(s,this.timelinePos),this.itemsMatch(s,f)?this.playingItem=f:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const h=this.bufferingItem;if(h&&(p=this.updateItem(h,this.bufferedPos),this.itemsMatch(h,p)?this.bufferingItem=p:h.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(h.event,null))),r.forEach(g=>{g.assetList.forEach(m=>{this.clearAssetPlayer(m.identifier,null)})}),this.playerQueue.forEach(g=>{if(g.interstitial.appendInPlace){const m=g.assetItem.timelineStart,v=g.timelineOffset-m;if(v)try{g.timelineOffset=m}catch(b){Math.abs(v)>bs&&this.warn(`${b} ("${g.assetId}" ${g.timelineOffset}->${m})`)}}}),u||i){if(this.hls.trigger(I.INTERSTITIALS_UPDATED,{events:a.slice(0),schedule:l.slice(0),durations:d,removedIds:c}),this.isInterstitial(s)&&c.includes(s.event.identifier)){this.warn(`Interstitial "${s.event.identifier}" removed while playing`),this.primaryFallback(s.event);return}s&&this.trimInPlace(f,s),h&&this.trimInPlace(p,h),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new lH(e),this.schedule=new aH(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(I.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(I.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(I.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(I.BUFFER_APPENDED,this.onBufferAppended,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(I.MEDIA_ENDED,this.onMediaEnded,this),e.on(I.ERROR,this.onError,this),e.on(I.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(I.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(I.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(I.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(I.BUFFER_CODECS,this.onBufferCodecs,this),e.off(I.BUFFER_APPENDED,this.onBufferAppended,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(I.MEDIA_ENDED,this.onMediaEnded,this),e.off(I.ERROR,this.onError,this),e.off(I.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){ur(e,"play",this.onPlay),ur(e,"pause",this.onPause),ur(e,"seeking",this.onSeeking),ur(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const r=this.media=t.media;Jn(r,"seeking",this.onSeeking),Jn(r,"timeupdate",this.onTimeupdate),Jn(r,"play",this.onPlay),Jn(r,"pause",this.onPause)}onMediaAttached(e,t){const r=this.effectivePlayingItem,i=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!i){this.clearScheduleState();const o=this.findItemIndex(r);this.setSchedulePosition(o)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const r=!!t.transferMedia,i=this.media;if(this.media=null,!r&&(i&&this.removeMediaListeners(i),this.detachedData)){const o=this.getBufferingPlayer();o&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,o.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,r=u=>u&&e.getAssetPlayer(u.identifier),i=(u,f,p,h,g)=>{if(u){let m=u[f].start;const v=u.event;if(v){if(f==="playout"||v.timelineOccupancy!==zd.Point){const b=r(p);(b==null?void 0:b.interstitial)===v&&(m+=b.assetItem.startOffset+b[g])}}else{const b=h==="bufferedPos"?s():e[h];m+=b-u.start}return m}return 0},o=(u,f)=>{var p;if(u!==0&&f!=="primary"&&(p=e.schedule)!=null&&p.length){var h;const g=e.schedule.findItemIndexAtTime(u),m=(h=e.schedule.items)==null?void 0:h[g];if(m){const v=m[f].start-m.start;return u+v}}return u},s=()=>{const u=e.bufferedPos;return u===Number.MAX_VALUE?a("primary"):Math.max(u,0)},a=u=>{var f,p;return(f=e.primaryDetails)!=null&&f.live?e.primaryDetails.edge:((p=e.schedule)==null?void 0:p.durations[u])||0},l=(u,f)=>{var p,h;const g=e.effectivePlayingItem;if(g!=null&&(p=g.event)!=null&&p.restrictions.skip||!e.schedule)return;e.log(`seek to ${u} "${f}"`);const m=e.effectivePlayingItem,v=e.schedule.findItemIndexAtTime(u,f),b=(h=e.schedule.items)==null?void 0:h[v],y=e.getBufferingPlayer(),x=y==null?void 0:y.interstitial,E=x==null?void 0:x.appendInPlace,A=m&&e.itemsMatch(m,b);if(m&&(E||A)){const S=r(e.playingAsset),w=(S==null?void 0:S.media)||e.primaryMedia;if(w){const T=f==="primary"?w.currentTime:i(m,f,e.playingAsset,"timelinePos","currentTime"),C=u-T,L=(E?T:w.currentTime)+C;if(L>=0&&(!S||E||L<=S.duration)){w.currentTime=L;return}}}if(b){let S=u;if(f!=="primary"){const T=b[f].start,C=u-T;S=b.start+C}const w=!e.isInterstitial(b);if((!e.isInterstitial(m)||m.event.appendInPlace)&&(w||b.event.appendInPlace)){const T=e.media||(E?y==null?void 0:y.media:null);T&&(T.currentTime=S)}else if(m){const T=e.findItemIndex(m);if(v>T){const L=e.schedule.findJumpRestrictedIndex(T+1,v);if(L>T){e.setSchedulePosition(L);return}}let C=0;if(w)e.timelinePos=S,e.checkBuffer();else{const L=b.event.assetList,P=u-(b[f]||b).start;for(let _=L.length;_--;){const D=L[_];if(D.duration&&P>=D.startOffset&&P<D.startOffset+D.duration){C=_;break}}}e.setSchedulePosition(v,C)}}},d=()=>{const u=e.effectivePlayingItem;if(e.isInterstitial(u))return u;const f=t();return e.isInterstitial(f)?f:null},c={get bufferedEnd(){const u=t(),f=e.bufferingItem;if(f&&f===u){var p;return i(f,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-f.playout.start||((p=e.bufferingAsset)==null?void 0:p.startOffset)||0}return 0},get currentTime(){const u=d(),f=e.effectivePlayingItem;return f&&f===u?i(f,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-f.playout.start:0},set currentTime(u){const f=d(),p=e.effectivePlayingItem;p&&p===f&&l(u+p.playout.start,"playout")},get duration(){const u=d();return u?u.playout.end-u.playout.start:0},get assetPlayers(){var u;const f=(u=d())==null?void 0:u.event.assetList;return f?f.map(p=>e.getAssetPlayer(p.identifier)):[]},get playingIndex(){var u;const f=(u=d())==null?void 0:u.event;return f&&e.effectivePlayingAsset?f.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return d()}};return this.manager={get events(){var u;return((u=e.schedule)==null||(u=u.events)==null?void 0:u.slice(0))||[]},get schedule(){var u;return((u=e.schedule)==null||(u=u.items)==null?void 0:u.slice(0))||[]},get interstitialPlayer(){return d()?c:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const u=t();return e.findItemIndex(u)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const u=e.effectivePlayingItem;return e.findItemIndex(u)},primary:{get bufferedEnd(){return s()},get currentTime(){const u=e.timelinePos;return u>0?u:0},set currentTime(u){l(u,"primary")},get duration(){return a("primary")},get seekableStart(){var u;return((u=e.primaryDetails)==null?void 0:u.fragmentStart)||0}},integrated:{get bufferedEnd(){return i(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return i(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(u){l(u,"integrated")},get duration(){return a("integrated")},get seekableStart(){var u;return o(((u=e.primaryDetails)==null?void 0:u.fragmentStart)||0,"integrated")}},skip:()=>{const u=e.effectivePlayingItem,f=u==null?void 0:u.event;if(f&&!f.restrictions.skip){const p=e.findItemIndex(u);if(f.appendInPlace){const h=u.playout.start+u.event.duration;l(h+.001,"playout")}else e.advanceAfterAssetEnded(f,p,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,r=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!r?!1:this.findItemIndex(t)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const r=this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&!r.event.appendInPlace)return;let i=this.media;!i&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(i=this.primaryMedia);const o=(t=i)==null?void 0:t.currentTime;if(!(o===void 0||!Oe(o)))return o}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const r=this.getAssetPlayer(e);r&&this.transferMediaFromPlayer(r,t)}transferMediaFromPlayer(e,t){const r=e.interstitial.appendInPlace,i=e.media;if(r&&i===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&i){this.detachedData={media:i};return}const o=e.transferMedia();this.log(`transfer MediaSource from ${e} ${Ut(o)}`),this.detachedData=o}else t&&i&&(this.shouldPlay||(this.shouldPlay=!i.paused))}transferMediaTo(e,t){var r,i;if(e.media===t)return;let o=null;const s=this.hls,a=e!==s,l=a&&e.interstitial.appendInPlace,d=(r=this.detachedData)==null?void 0:r.mediaSource;let c;if(s.media)l&&(o=s.transferMedia(),this.detachedData=o),c="Primary";else if(d){const h=this.getBufferingPlayer();h?(o=h.transferMedia(),c=`${h}`):c="detached MediaSource"}else c="detached media";if(!o){if(d)o=this.detachedData,this.log(`using detachedData: MediaSource ${Ut(o)}`);else if(!this.detachedData||s.media===t){const h=this.playerQueue;h.length>1&&h.forEach(g=>{if(a&&g.interstitial.appendInPlace!==l){const m=g.interstitial;this.clearInterstitial(g.interstitial,null),m.appendInPlace=!1,m.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${m}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const u=o&&"mediaSource"in o&&((i=o.mediaSource)==null?void 0:i.readyState)!=="closed",f=u&&o?o:t;this.log(`${u?"transfering MediaSource":"attaching media"} to ${a?e:"Primary"} from ${c} (media.currentTime: ${t.currentTime})`);const p=this.schedule;if(f===o&&p){const h=a&&e.assetId===p.assetIdAtEnd;f.overrides={duration:p.duration,endOfStream:!a||h,cueRemoval:!a}}e.attachMedia(f)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e==null?void 0:e.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,i=this.effectivePlayingItem;if(r===-1){const o=this.hls.startPosition;if(this.timelinePos=o,t.length&&t[0].cue.pre){const s=e.findEventIndex(t[0].identifier);this.setSchedulePosition(s)}else if(o>=0||!this.primaryLive){const s=this.timelinePos=o>0?o:0,a=e.findItemIndexAtTime(s);this.setSchedulePosition(a)}}else if(i&&!this.playingItem){const o=e.findItemIndex(i);this.setSchedulePosition(o)}}advanceAssetBuffering(e,t){const r=e.event,i=r.findAssetIndex(t),o=Vu(r,i);if(!r.isAssetPastPlayoutLimit(o))this.bufferedToEvent(e,o);else if(this.schedule){var s;const a=(s=this.schedule.items)==null?void 0:s[this.findItemIndex(e)+1];a&&this.bufferedToItem(a)}}advanceAfterAssetEnded(e,t,r){const i=Vu(e,r);if(e.isAssetPastPlayoutLimit(i)){if(this.schedule){const o=this.schedule.items;if(o){const s=t+1,a=o.length;if(s>=a){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(s)}}}else{if(e.appendInPlace){const o=e.assetList[i];o&&this.advanceInPlace(o.timelineStart)}this.setSchedulePosition(t,i)}}setScheduleToAssetAtTime(e,t){const r=this.schedule;if(!r)return;const i=t.parentIdentifier,o=r.getEvent(i);if(o){const s=r.findEventIndex(i),a=r.findAssetIndex(o,e);this.advanceAfterAssetEnded(o,s,a-1)}}setSchedulePosition(e,t){var r;const i=(r=this.schedule)==null?void 0:r.items;if(!i||this.playbackDisabled)return;this.log(`setSchedulePosition ${e}, ${t}`);const o=e>=0?i[e]:null,s=this.waitingItem||this.playingItem,a=this.playingLastItem;if(this.isInterstitial(s)){const c=s.event,u=this.playingAsset,f=u==null?void 0:u.identifier,p=f?this.getAssetPlayer(f):null;if(p&&f&&(!this.eventItemsMatch(s,o)||t!==void 0&&f!==c.assetList[t].identifier)){var l;const h=c.findAssetIndex(u);if(this.log(`INTERSTITIAL_ASSET_ENDED ${h+1}/${c.assetList.length} ${ss(u)}`),this.endedAsset=u,this.playingAsset=null,this.hls.trigger(I.INTERSTITIAL_ASSET_ENDED,{asset:u,assetListIndex:h,event:c,schedule:i.slice(0),scheduleIndex:e,player:p}),s!==this.playingItem){this.itemsMatch(s,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(c,this.findItemIndex(this.playingItem),h);return}this.retreiveMediaSource(f,o),p.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&p.detachMedia()}if(!this.eventItemsMatch(s,o)&&(this.endedItem=s,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${c} ${Di(s)}`),c.hasPlayed=!0,this.hls.trigger(I.INTERSTITIAL_ENDED,{event:c,schedule:i.slice(0),scheduleIndex:e}),c.cue.once)){var d;this.updateSchedule();const h=(d=this.schedule)==null?void 0:d.items;if(o&&h){const g=this.findItemIndex(o);this.advanceSchedule(g,h,t,s,a)}return}}this.advanceSchedule(e,i,t,s,a)}advanceSchedule(e,t,r,i,o){const s=this.schedule;if(!s)return;const a=e>=0?t[e]:null,l=this.primaryMedia,d=this.playerQueue;if(d.length&&d.forEach(c=>{const u=c.interstitial,f=s.findEventIndex(u.identifier);(f<e||f>e+1)&&this.clearInterstitial(u,a)}),this.isInterstitial(a)){this.timelinePos=Math.min(Math.max(this.timelinePos,a.start),a.end);const c=a.event;if(r===void 0){r=s.findAssetIndex(c,this.timelinePos);const h=Vu(c,r-1);if(c.isAssetPastPlayoutLimit(h)||c.appendInPlace&&this.timelinePos===a.end){this.advanceAfterAssetEnded(c,e,r);return}r=h}const u=this.waitingItem;this.assetsBuffered(a,l)||this.setBufferingItem(a);let f=this.preloadAssets(c,r);if(this.eventItemsMatch(a,u||i)||(this.waitingItem=a,this.log(`INTERSTITIAL_STARTED ${Di(a)} ${c.appendInPlace?"append in place":""}`),this.hls.trigger(I.INTERSTITIAL_STARTED,{event:c,schedule:t.slice(0),scheduleIndex:e})),!c.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${c}`);return}if(c.assetListLoader&&(c.assetListLoader.destroy(),c.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${c}`);return}this.waitingItem=this.endedItem=null,this.playingItem=a;const p=c.assetList[r];if(!p){this.advanceAfterAssetEnded(c,e,r||0);return}if(f||(f=this.getAssetPlayer(p.identifier)),f===null||f.destroyed){const h=c.assetList.length;this.warn(`asset ${r+1}/${h} player destroyed ${c}`),f=this.createAssetPlayer(c,p,r),f.loadSource()}if(!this.eventItemsMatch(a,this.bufferingItem)&&c.appendInPlace&&this.isAssetBuffered(p))return;this.startAssetPlayer(f,r,t,e,l),this.shouldPlay&&K0(f.media)}else a!==null?(this.resumePrimary(a,e,i),this.shouldPlay&&K0(this.hls.media)):o&&this.isInterstitial(i)&&(this.endedItem=null,this.playingItem=i,i.event.appendInPlace||this.attachPrimary(s.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,r){var i,o;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${Di(e)}`),!((i=this.detachedData)!=null&&i.mediaSource)){let a=this.timelinePos;(a<e.start||a>=e.end)&&(a=this.getPrimaryResumption(e,t),this.timelinePos=a),this.attachPrimary(a,e)}if(!r)return;const s=(o=this.schedule)==null?void 0:o.items;s&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${Di(e)}`),this.hls.trigger(I.INTERSTITIALS_PRIMARY_RESUMED,{schedule:s.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const r=e.start;if(this.primaryLive){const i=this.primaryDetails;if(t===0)return this.hls.startPosition;if(i&&(r<i.fragmentStart||r>i.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:tt.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,r){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const i=this.primaryMedia;if(!i)return;const o=this.hls;o.media?this.checkBuffer():(this.transferMediaTo(o,i),r&&this.startLoadingPrimaryAt(e,r)),r||(this.timelinePos=e,this.startLoadingPrimaryAt(e,r))}startLoadingPrimaryAt(e,t){var r;const i=this.hls;!i.loadingEnabled||!i.media||Math.abs((((r=i.mainForwardBufferInfo)==null?void 0:r.start)||i.media.currentTime)-e)>.5?i.startLoad(e,t):i.bufferingEnabled||i.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(I.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(I.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const r=this.hls.levels[t.level],i=_t(_t({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=i,this.schedule.parseInterstitialDateRanges(i,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const r=this.hls.audioTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=_t(_t({},this.altSelection),{},{audio:r});return}const o=_t(_t({},i),{},{audio:r});this.mediaSelection=o}onSubtitleTrackUpdated(e,t){const r=this.hls.subtitleTracks[t.id],i=this.mediaSelection;if(!i){this.altSelection=_t(_t({},this.altSelection),{},{subtitles:r});return}const o=_t(_t({},i),{},{subtitles:r});this.mediaSelection=o}onAudioTrackSwitching(e,t){const r=a0(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setAudioOption(t)||i.setAudioOption(r)))}onSubtitleTrackSwitch(e,t){const r=a0(t);this.playerQueue.forEach(({hls:i})=>i&&(i.setSubtitleOption(t)||t.id!==-1&&i.setSubtitleOption(r)))}onBufferCodecs(e,t){const r=t.tracks;r&&(this.requiredTracks=r)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const i=this.timelinePos;this.bufferedPos=i,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let i=0;i<t.length;i++){const o=t[i];if(o.cue.post){var r;const s=this.schedule.findEventIndex(o.identifier),a=(r=this.schedule.items)==null?void 0:r[s];this.isInterstitial(a)&&this.eventItemsMatch(a,this.bufferingItem)&&this.bufferedToItem(a,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const r=this.findItemIndex(t);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(e,t){var r;const i=(r=this.schedule)==null?void 0:r.items;if(e&&i){const o=this.findItemIndex(e,t);return i[o]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((o,s)=>{e.event.isAssetPastPlayoutLimit(s)&&this.clearAssetPlayer(o.identifier,null)});const r=e.end+.25,i=tt.bufferInfo(this.primaryMedia,r,0);(i.end>r||(i.nextStart||0)>r)&&(this.attachPrimary(r,null),this.flushFrontBuffer(r))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var r;return!!t&&(e===t||e.event.identifier===((r=t.event)==null?void 0:r.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(){var e;const t=this.mediaSelection;t&&((e=this.schedule)==null||e.updateSchedule(t,[]))}checkBuffer(e){var t;const r=(t=this.schedule)==null?void 0:t.items;if(!r)return;const i=tt.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=i.len<1),this.updateBufferedPos(i.end,r,e)}updateBufferedPos(e,t,r){const i=this.schedule,o=this.bufferingItem;if(this.bufferedPos>e||!i)return;if(t.length===1&&this.itemsMatch(t[0],o)){this.bufferedPos=e;return}const s=this.playingItem,a=this.findItemIndex(s);let l=i.findItemIndexAtTime(e);if(this.bufferedPos<e){var d;const c=this.findItemIndex(o),u=Math.min(c+1,t.length-1),f=t[u];if((l===-1&&o&&e>=o.end||(d=f.event)!=null&&d.appendInPlace&&e+.01>=f.start)&&(l=u),this.isInterstitial(o)){const p=o.event;if(u-a>1&&p.appendInPlace===!1||p.assetList.length===0&&p.assetListLoader)return}if(this.bufferedPos=e,l>c&&l>a)this.bufferedToItem(f);else{const p=this.primaryDetails;this.primaryLive&&p&&e>p.edge-p.targetduration&&f.start<p.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(f)&&this.preloadAssets(f.event,0)}}else r&&s&&!this.itemsMatch(s,o)&&(l===a?this.bufferedToItem(s):l===a+1&&this.bufferedToItem(t[l]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(i=>{const o=this.getAssetPlayer(i.identifier);return!(o!=null&&o.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,r=this.schedule;if(!this.itemsMatch(e,t)&&r){const{items:i,events:o}=r;if(!i||!o)return t;const s=this.isInterstitial(e),a=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=a?a.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${Di(e)}`+(t?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(s){const d=r.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((c,u)=>{const f=this.getAssetPlayer(c.identifier);f&&(u===d&&f.loadSource(),f.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(d=>d.pauseBuffering());this.hls.trigger(I.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:o.slice(0),schedule:i.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const r=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(r!==null){this.bufferingAsset=null;const i=this.detachedData;i?i.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),r=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(r)}bufferedToEvent(e,t){const r=e.event,i=r.assetList.length===0&&!r.assetListLoader,o=r.cue.once;if(i||!o){const s=this.preloadAssets(r,t);if(s!=null&&s.interstitial.appendInPlace){const a=this.primaryMedia;a&&this.bufferAssetPlayer(s,a)}}}preloadAssets(e,t){const r=e.assetUrl,i=e.assetList.length,o=i===0&&!e.assetListLoader,s=e.cue.once;if(o){const l=e.timelineStart;if(e.appendInPlace){var a;const f=this.playingItem;!this.isInterstitial(f)&&(f==null||(a=f.nextEvent)==null?void 0:a.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let d,c=0;if(!this.playingItem&&this.primaryLive&&(c=this.hls.startPosition,c===-1&&(c=this.hls.liveSyncPosition||0)),c&&!(e.cue.pre||e.cue.post)){const f=c-l;f>0&&(d=Math.round(f*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${r?1:i} ${e}${d?` live-start: ${c} start-offset: ${d}`:""}`),r)return this.createAsset(e,0,0,l,e.duration,r);const u=this.assetListLoader.loadAssetList(e,d);u&&(e.assetListLoader=u)}else if(!s&&i){for(let d=t;d<i;d++){const c=e.assetList[d],u=this.getAssetPlayerQueueIndex(c.identifier);(u===-1||this.playerQueue[u].destroyed)&&!c.error&&this.createAssetPlayer(e,c,d)}const l=e.assetList[t];if(l){const d=this.getAssetPlayer(l.identifier);return d&&d.loadSource(),d}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(i=>{this.hls.trigger(I.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:i})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let r=0;r<t.length;r++)if(e===t[r].assetId)return r;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let r=0;r<e.length;r++)if(e[r].media===t)return e[r]}return null}createAsset(e,t,r,i,o,s){const a={parentIdentifier:e.identifier,identifier:rH(e,s,t),duration:o,startOffset:r,timelineStart:i,uri:s};return this.createAssetPlayer(e,a,t)}createAssetPlayer(e,t,r){const i=this.hls,o=i.userConfig;let s=o.videoPreference;const a=i.loadLevelObj||i.levels[i.currentLevel];(s||a)&&(s=kt({},s),a.videoCodec&&(s.videoCodec=a.videoCodec),a.videoRange&&(s.allowedVideoRanges=[a.videoRange]));const l=i.audioTracks[i.audioTrack],d=i.subtitleTracks[i.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const x=this.timelinePos-t.timelineStart;if(x>1){const E=t.duration;E&&x<E&&(c=x)}}const u=t.identifier,f=_t(_t({},o),{},{maxMaxBufferLength:Math.min(180,i.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:i.sessionId,assetPlayerId:u,abrEwmaDefaultEstimate:i.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:s,audioPreference:l||o.audioPreference,subtitlePreference:d||o.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(f.timelineOffset=t.timelineStart));const p=f.cmcd;p!=null&&p.sessionId&&p.contentId&&(f.cmcd=kt({},p,{contentId:Ea(t.uri)})),this.getAssetPlayer(u)&&this.warn(`Duplicate date range identifier ${e} and asset ${u}`);const h=new sH(this.HlsPlayerClass,f,e,t);this.playerQueue.push(h),e.assetList[r]=t;let g=!0;const m=x=>{if(x.live){var E;const w=new Error(`Interstitials MUST be VOD assets ${e}`),T={fatal:!0,type:Ge.OTHER_ERROR,details:oe.INTERSTITIAL_ASSET_ITEM_ERROR,error:w},C=((E=this.schedule)==null?void 0:E.findEventIndex(e.identifier))||-1;this.handleAssetItemError(T,e,C,r,w.message);return}const A=x.edge-x.fragmentStart,S=t.duration;(g||S===null||A>S)&&(g=!1,this.log(`Interstitial asset "${u}" duration change ${S} > ${A}`),t.duration=A,this.updateSchedule())};h.on(I.LEVEL_UPDATED,(x,{details:E})=>m(E)),h.on(I.LEVEL_PTS_UPDATED,(x,{details:E})=>m(E)),h.on(I.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const v=(x,E)=>{const A=this.getAssetPlayer(u);if(A&&E.tracks){A.off(I.BUFFER_CODECS,v),A.tracks=E.tracks;const S=this.primaryMedia;this.bufferingAsset===A.assetItem&&S&&!A.media&&this.bufferAssetPlayer(A,S)}};h.on(I.BUFFER_CODECS,v);const b=()=>{var x;const E=this.getAssetPlayer(u);if(this.log(`buffered to end of asset ${E}`),!E||!this.schedule)return;const A=this.schedule.findEventIndex(e.identifier),S=(x=this.schedule.items)==null?void 0:x[A];this.isInterstitial(S)&&this.advanceAssetBuffering(S,t)};h.on(I.BUFFERED_TO_END,b);const y=x=>()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;this.shouldPlay=!0;const A=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,A,x)};return h.once(I.MEDIA_ENDED,y(r)),h.once(I.PLAYOUT_LIMIT_REACHED,y(1/0)),h.on(I.ERROR,(x,E)=>{if(!this.schedule)return;const A=this.getAssetPlayer(u);if(E.details===oe.BUFFER_STALLED_ERROR){if(A!=null&&A.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(E,e,this.schedule.findEventIndex(e.identifier),r,`Asset player error ${E.error} ${e}`)}),h.on(I.DESTROYING,()=>{if(!this.getAssetPlayer(u)||!this.schedule)return;const E=new Error(`Asset player destroyed unexpectedly ${u}`),A={fatal:!0,type:Ge.OTHER_ERROR,details:oe.INTERSTITIAL_ASSET_ITEM_ERROR,error:E};this.handleAssetItemError(A,e,this.schedule.findEventIndex(e.identifier),r,E.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${ss(t)}`),this.hls.trigger(I.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:r,event:e,player:h}),h}clearInterstitial(e,t){e.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,t)}),e.reset()}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const r=this.playerQueue[t];this.transferMediaFromPlayer(r,null),r.resetDetails()}}clearAssetPlayer(e,t){const r=this.getAssetPlayerQueueIndex(e);if(r!==-1){this.log(`clear asset player "${e}" toSegment: ${t&&Di(t)}`);const i=this.playerQueue[r];this.transferMediaFromPlayer(i,t),this.playerQueue.splice(r,1),i.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,r,i,o){const{interstitial:s,assetItem:a,assetId:l}=e,d=s.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=a,(!c||c.identifier!==l)&&(c&&(this.clearAssetPlayer(c.identifier,r[i]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${d} ${ss(a)}`),this.hls.trigger(I.INTERSTITIAL_ASSET_STARTED,{asset:a,assetListIndex:t,event:s,schedule:r.slice(0),scheduleIndex:i,player:e})),this.bufferAssetPlayer(e,o)}bufferAssetPlayer(e,t){var r,i;if(!this.schedule)return;const{interstitial:o,assetItem:s}=e,a=this.schedule.findEventIndex(o.identifier),l=(r=this.schedule.items)==null?void 0:r[a];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=s;const d=this.getBufferingPlayer();if(d===e)return;const c=o.appendInPlace;if(c&&(d==null?void 0:d.interstitial.appendInPlace)===!1)return;const u=(d==null?void 0:d.tracks)||((i=this.detachedData)==null?void 0:i.tracks)||this.requiredTracks;if(c&&s!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(u&&!fT(u,e.tracks)){const f=new Error(`Asset ${ss(s)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(u)}')`),p={fatal:!0,type:Ge.OTHER_ERROR,details:oe.INTERSTITIAL_ASSET_ITEM_ERROR,error:f},h=o.findAssetIndex(s);this.handleAssetItemError(p,o,a,h,f.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,r=this.primaryMedia;if(!t||!r)return;const i=r.currentTime,o=t.findAssetIndex(e,i),s=e.assetList[o];if(s){const a=this.getAssetPlayer(s.identifier);if(a){const l=a.currentTime||i-s.timelineStart,d=a.duration-l;if(this.warn(`Stalled at ${l} of ${l+d} in ${a} ${e} (media.currentTime: ${i})`),l&&(d/r.playbackRate<.5||a.bufferedInPlaceToEnd(r))&&a.hls){const c=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,c,o)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,r,i,o){if(e.details===oe.BUFFER_STALLED_ERROR)return;const s=t.assetList[i]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${s&&ss(s)} ${e.error}`),!this.schedule)return;const a=(s==null?void 0:s.identifier)||"",l=this.getAssetPlayerQueueIndex(a),d=this.playerQueue[l]||null,c=this.schedule.items,u=kt({},e,{fatal:!1,errorAction:ja(!0),asset:s,assetListIndex:i,event:t,schedule:c,scheduleIndex:r,player:d});if(this.hls.trigger(I.INTERSTITIAL_ASSET_ERROR,u),!e.fatal)return;const f=this.playingAsset,p=this.bufferingAsset,h=new Error(o);if(s&&(this.clearAssetPlayer(a,null),s.error=h),!t.assetList.some(g=>!g.error))t.error=h;else{for(let g=i;g<t.assetList.length;g++)this.resetAssetPlayer(t.assetList[g].identifier);this.updateSchedule()}t.error?this.primaryFallback(t):f&&f.identifier===a?this.advanceAfterAssetEnded(t,r,i):p&&p.identifier===a&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,p)}primaryFallback(e){const t=e.timelineStart,r=this.effectivePlayingItem;if(this.updateSchedule(),r){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${this.timelinePos} playing: ${Di(r)} error: ${e.error}`);let i=this.timelinePos;i===-1&&(i=this.hls.startPosition);const o=this.updateItem(r,i);if(this.itemsMatch(r,o)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t)),!this.schedule)return;const s=this.schedule.findItemIndexAtTime(i);this.setSchedulePosition(s)}else this.checkStart()}onAssetListLoaded(e,t){var r,i;const o=t.event,s=o.identifier,a=t.assetListResponse.ASSETS;if(!((r=this.schedule)!=null&&r.hasEvent(s)))return;const l=o.timelineStart,d=o.duration;let c=0;a.forEach((g,m)=>{const v=parseFloat(g.DURATION);this.createAsset(o,m,c,l+c,v,g.URI),c+=v}),o.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${d}) ${o}`);const u=this.waitingItem,f=(u==null?void 0:u.event.identifier)===s;this.updateSchedule();const p=(i=this.bufferingItem)==null?void 0:i.event;if(f){var h;const g=this.schedule.findEventIndex(s),m=(h=this.schedule.items)==null?void 0:h[g];if(m){if(!this.playingItem&&this.timelinePos>m.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==g){o.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${o}`),this.primaryFallback(o);return}this.setBufferingItem(m)}this.setSchedulePosition(g)}else if((p==null?void 0:p.identifier)===s){const g=o.assetList[0];if(g){const m=this.getAssetPlayer(g.identifier);if(p.appendInPlace){const v=this.primaryMedia;m&&v&&this.bufferAssetPlayer(m,v)}else m&&m.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case oe.ASSET_LIST_PARSING_ERROR:case oe.ASSET_LIST_LOAD_ERROR:case oe.ASSET_LIST_LOAD_TIMEOUT:{const r=t.interstitial;r&&this.primaryFallback(r);break}case oe.BUFFER_STALLED_ERROR:{const r=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(r)&&r.event.appendInPlace){this.handleInPlaceStall(r.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const q0=500;class cH extends Mp{constructor(e,t,r){super(e,t,r,"subtitle-stream-controller",Ue.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(I.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(I.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(I.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(I.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=ye.IDLE,this.setInterval(q0),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:r,success:i}=t;if(this.fragContextChanged(r)||(en(r)&&(this.fragPrevious=r),this.state=ye.IDLE),!i)return;const o=this.tracksBuffered[this.currentTrackId];if(!o)return;let s;const a=r.start;for(let d=0;d<o.length;d++)if(a>=o[d].start&&a<=o[d].end){s=o[d];break}const l=r.start+r.duration;s?s.end=l:(s={start:a,end:l},o.push(s)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:r,endOffset:i}=t;if(r===0&&i!==Number.POSITIVE_INFINITY){const o=i-1;if(o<=0)return;t.endOffsetSubtitles=Math.max(0,o),this.tracksBuffered.forEach(s=>{for(let a=0;a<s.length;){if(s[a].end<=o){s.shift();continue}else if(s[a].start<o)s[a].start=o;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(r,o,Ue.SUBTITLE)}}onError(e,t){const r=t.frag;(r==null?void 0:r.type)===Ue.SUBTITLE&&(t.details===oe.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ye.STOPPED&&(this.state=ye.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&dw(this.levels,t)){this.levels=t.map(r=>new Wa(r));return}this.tracksBuffered=[],this.levels=t.map(r=>{const i=new Wa(r);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Ue.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var r;if(this.currentTrackId=t.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.state!==ye.STOPPED&&this.setInterval(q0)}onSubtitleTrackLoaded(e,t){var r;const{currentTrackId:i,levels:o}=this,{details:s,id:a}=t;if(!o){this.warn(`Subtitle tracks were reset while loading level ${a}`);return}const l=o[a];if(a>=o.length||!l)return;this.log(`Subtitle track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let d=0;if(s.live||(r=l.details)!=null&&r.live){if(s.deltaUpdateFailed)return;const u=this.mainDetails;if(!u){this.startFragRequested=!1;return}const f=u.fragments[0];if(!l.details)s.hasProgramDateTime&&u.hasProgramDateTime?(Bd(s,u),d=s.fragmentStart):f&&(d=f.start,eh(s,d));else{var c;d=this.alignPlaylists(s,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),d===0&&f&&(d=f.start,eh(s,d))}u&&!this.startFragRequested&&this.setStartPosition(u,d)}l.details=s,this.levelLastLoaded=l,a===i&&(this.hls.trigger(I.SUBTITLE_TRACK_UPDATED,{details:s,id:a,groupId:t.groupId}),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===ye.IDLE&&(Fo(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:r}=e,i=t.decryptdata,o=this.hls;if(!this.fragContextChanged(t)&&r&&r.byteLength>0&&i!=null&&i.key&&i.iv&&ms(i.method)){const s=performance.now();this.decrypter.decrypt(new Uint8Array(r),i.key.buffer,i.iv.buffer,Dp(i.method)).catch(a=>{throw o.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:t}),a}).then(a=>{const l=performance.now();o.trigger(I.FRAG_DECRYPTED,{frag:t,payload:a,stats:{tstart:s,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=ye.IDLE})}}doTick(){if(!this.media){this.state=ye.IDLE;return}if(this.state===ye.IDLE){const{currentTrackId:e,levels:t}=this,r=t==null?void 0:t[e];if(!r||!t.length||!r.details||this.waitForLive(r))return;const{config:i}=this,o=this.getLoadPosition(),s=tt.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],o,i.maxBufferHole),{end:a,len:l}=s,d=r.details,c=this.hls.maxBufferLength+d.levelTargetDuration;if(l>c)return;const u=d.fragments,f=u.length,p=d.edge;let h=null;const g=this.fragPrevious;if(a<p){const b=i.maxFragLookUpTolerance,y=a>p-b?0:b;h=Fo(g,u,Math.max(u[0].start,a),y),!h&&g&&g.start<u[0].start&&(h=u[0])}else h=u[f-1];if(h=this.filterReplacedPrimary(h,r.details),!h)return;const m=h.sn-d.startSN,v=u[m-1];if(v&&v.cc===h.cc&&this.fragmentTracker.getState(v)===rn.NOT_LOADED&&(h=v),this.fragmentTracker.getState(h)===rn.NOT_LOADED){const b=this.mapToInitFragWhenRequired(h);b&&this.loadFragment(b,r,a)}}}loadFragment(e,t,r){en(e)?super.loadFragment(e,t,r):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new uH(this.tracksBuffered[this.currentTrackId]||[])}}class uH{constructor(e){this.buffered=void 0;const t=(r,i,o)=>{if(i=i>>>0,i>o-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${o})`);return e[i][r]};this.buffered={get length(){return e.length},end(r){return t("end",r,e.length)},start(r){return t("start",r,e.length)}}}}const fH={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Ew=n=>String.fromCharCode(fH[n]||n),br=15,li=100,hH={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},pH={17:2,18:4,21:6,22:8,23:10,19:13,20:15},gH={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},mH={25:2,26:4,29:6,30:8,31:10,27:13,28:15},vH=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class bH{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const r=typeof t=="function"?t():t;wt.log(`${this.time} [${e}] ${r}`)}}}const go=function(e){const t=[];for(let r=0;r<e.length;r++)t.push(e[r].toString(16));return t};class Rw{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let r=0;r<t.length;r++){const i=t[r];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class yH{constructor(){this.uchar=" ",this.penState=new Rw}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class xH{constructor(e){this.chars=[],this.pos=0,this.currPenState=new Rw,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<li;t++)this.chars.push(new yH);this.logger=e}equals(e){for(let t=0;t<li;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<li;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<li;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>li&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=li)}moveCursor(e){const t=this.pos+e;if(e>1)for(let r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=Ew(e);if(this.pos>=li){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<li;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let r=0;r<li;r++){const i=this.chars[r].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Gu{constructor(e){this.rows=[],this.currRow=br-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<br;t++)this.rows.push(new xH(e));this.logger=e}reset(){for(let e=0;e<br;e++)this.rows[e].clear();this.currRow=br-1}equals(e){let t=!0;for(let r=0;r<br;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t}copy(e){for(let t=0;t<br;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<br;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+Ut(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let a=0;a<br;a++)this.rows[a].clear();const o=this.currRow+1-this.nrRollUpRows,s=this.lastOutputScreen;if(s){const a=s.rows[o].cueStartTime,l=this.logger.time;if(a!==null&&l!==null&&a<l)for(let d=0;d<this.nrRollUpRows;d++)this.rows[t-this.nrRollUpRows+d+1].copy(s.rows[o+d])}}this.currRow=t;const r=this.rows[this.currRow];if(e.indent!==null){const o=e.indent,s=Math.max(o-1,0);r.setCursor(e.indent),e.color=r.chars[s].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+Ut(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let r="",i=-1;for(let o=0;o<br;o++){const s=this.rows[o].getTextString();s&&(i=o+1,e?t.push("Row "+i+": '"+s+"'"):t.push(s.trim()))}return t.length>0&&(e?r="["+t.join(" | ")+"]":r=t.join(`
`)),r}getTextAndFormat(){return this.rows}}class Y0{constructor(e,t,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Gu(r),this.nonDisplayedMemory=new Gu(r),this.lastOutputScreen=new Gu(r),this.currRollUpRow=this.displayedMemory.rows[br-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[br-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const r=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[r]}this.logger.log(2,"MIDROW: "+Ut(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class X0{constructor(e,t,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=CH(),this.logger=void 0;const i=this.logger=new bH;this.channels=[null,new Y0(e,t,i),new Y0(e+1,r,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let r=0;r<t.length;r+=2){const i=t[r]&127,o=t[r+1]&127;let s=!1,a=null;if(i===0&&o===0)continue;this.logger.log(3,()=>"["+go([t[r],t[r+1]])+"] -> ("+go([i,o])+")");const l=this.cmdHistory;if(i>=16&&i<=31){if(SH(i,o,l)){Bl(null,null,l),this.logger.log(3,()=>"Repeated command ("+go([i,o])+") is dropped");continue}Bl(i,o,this.cmdHistory),s=this.parseCmd(i,o),s||(s=this.parseMidrow(i,o)),s||(s=this.parsePAC(i,o)),s||(s=this.parseBackgroundAttributes(i,o))}else Bl(null,null,l);if(!s&&(a=this.parseChars(i,o),a)){const c=this.currentChannel;c&&c>0?this.channels[c].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!s&&!a&&this.logger.log(2,()=>"Couldn't parse cleaned data "+go([i,o])+" orig: "+go([t[r],t[r+1]]))}}parseCmd(e,t){const r=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(r||i))return!1;const o=e===20||e===21||e===23?1:2,s=this.channels[o];return e===20||e===21||e===28||e===29?t===32?s.ccRCL():t===33?s.ccBS():t===34?s.ccAOF():t===35?s.ccAON():t===36?s.ccDER():t===37?s.ccRU(2):t===38?s.ccRU(3):t===39?s.ccRU(4):t===40?s.ccFON():t===41?s.ccRDC():t===42?s.ccTR():t===43?s.ccRTD():t===44?s.ccEDM():t===45?s.ccCR():t===46?s.ccENM():t===47&&s.ccEOC():s.ccTO(t-32),this.currentChannel=o,!0}parseMidrow(e,t){let r=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[r];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+go([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let r;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,o=(e===16||e===24)&&t>=64&&t<=95;if(!(i||o))return!1;const s=e<=23?1:2;t>=64&&t<=95?r=s===1?hH[e]:gH[e]:r=s===1?pH[e]:mH[e];const a=this.channels[s];return a?(a.setPAC(this.interpretPAC(r,t)),this.currentChannel=s,!0):!1}interpretPAC(e,t){let r;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?r=t-96:r=t-64,i.underline=(r&1)===1,r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((r-16)/2)*4,i}parseChars(e,t){let r,i=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),o>=17&&o<=19){let s;o===17?s=t+80:o===18?s=t+112:s=t+144,this.logger.log(2,()=>"Special char '"+Ew(s)+"' in channel "+r),i=[s]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+go(i).join(",")),i}parseBackgroundAttributes(e,t){const r=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(r||i))return!1;let o;const s={};e===16||e===24?(o=Math.floor((t-32)/2),s.background=vH[o],t%2===1&&(s.background=s.background+"_semi")):t===45?s.background="transparent":(s.foreground="black",t===47&&(s.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(s),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Bl(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const r=this.channels[t];r&&r.cueSplitAtTime(e)}}}function Bl(n,e,t){t.a=n,t.b=e}function SH(n,e,t){return t.a===n&&t.b===e}function CH(){return{a:null,b:null}}var Kp=function(){if($d!=null&&$d.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const d=l.toLowerCase();return~a.indexOf(d)?d:!1}function r(a){return t(n,a)}function i(a){return t(e,a)}function o(a,...l){let d=1;for(;d<arguments.length;d++){const c=arguments[d];for(const u in c)a[u]=c[u]}return a}function s(a,l,d){const c=this,u={enumerable:!0};c.hasBeenReset=!1;let f="",p=!1,h=a,g=l,m=d,v=null,b="",y=!0,x="auto",E="start",A=50,S="middle",w=50,T="middle";Object.defineProperty(c,"id",o({},u,{get:function(){return f},set:function(C){f=""+C}})),Object.defineProperty(c,"pauseOnExit",o({},u,{get:function(){return p},set:function(C){p=!!C}})),Object.defineProperty(c,"startTime",o({},u,{get:function(){return h},set:function(C){if(typeof C!="number")throw new TypeError("Start time must be set to a number.");h=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",o({},u,{get:function(){return g},set:function(C){if(typeof C!="number")throw new TypeError("End time must be set to a number.");g=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",o({},u,{get:function(){return m},set:function(C){m=""+C,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",o({},u,{get:function(){return v},set:function(C){v=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",o({},u,{get:function(){return b},set:function(C){const L=r(C);if(L===!1)throw new SyntaxError("An invalid or illegal string was specified.");b=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",o({},u,{get:function(){return y},set:function(C){y=!!C,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",o({},u,{get:function(){return x},set:function(C){if(typeof C!="number"&&C!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");x=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",o({},u,{get:function(){return E},set:function(C){const L=i(C);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");E=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",o({},u,{get:function(){return A},set:function(C){if(C<0||C>100)throw new Error("Position must be between 0 and 100.");A=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",o({},u,{get:function(){return S},set:function(C){const L=i(C);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");S=L,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",o({},u,{get:function(){return w},set:function(C){if(C<0||C>100)throw new Error("Size must be between 0 and 100.");w=C,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",o({},u,{get:function(){return T},set:function(C){const L=i(C);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");T=L,this.hasBeenReset=!0}})),c.displayState=void 0}return s.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},s}();class TH{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function Aw(n){function e(r,i,o,s){return(r|0)*3600+(i|0)*60+(o|0)+parseFloat(s||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class wH{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,r){for(let i=0;i<r.length;++i)if(t===r[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const r=parseFloat(t);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function Iw(n,e,t,r){const i=r?n.split(r):[n];for(const o in i){if(typeof i[o]!="string")continue;const s=i[o].split(t);if(s.length!==2)continue;const a=s[0],l=s[1];e(a,l)}}const lh=new Kp(0,0,""),Nl=lh.align==="middle"?"middle":"center";function EH(n,e,t){const r=n;function i(){const a=Aw(n);if(a===null)throw new Error("Malformed timestamp: "+r);return n=n.replace(/^[^\sa-zA-Z-]+/,""),a}function o(a,l){const d=new wH;Iw(a,function(f,p){let h;switch(f){case"region":for(let g=t.length-1;g>=0;g--)if(t[g].id===p){d.set(f,t[g].region);break}break;case"vertical":d.alt(f,p,["rl","lr"]);break;case"line":h=p.split(","),d.integer(f,h[0]),d.percent(f,h[0])&&d.set("snapToLines",!1),d.alt(f,h[0],["auto"]),h.length===2&&d.alt("lineAlign",h[1],["start",Nl,"end"]);break;case"position":h=p.split(","),d.percent(f,h[0]),h.length===2&&d.alt("positionAlign",h[1],["start",Nl,"end","line-left","line-right","auto"]);break;case"size":d.percent(f,p);break;case"align":d.alt(f,p,["start",Nl,"end","left","right"]);break}},/:/,/\s/),l.region=d.get("region",null),l.vertical=d.get("vertical","");let c=d.get("line","auto");c==="auto"&&lh.line===-1&&(c=-1),l.line=c,l.lineAlign=d.get("lineAlign","start"),l.snapToLines=d.get("snapToLines",!0),l.size=d.get("size",100),l.align=d.get("align",Nl);let u=d.get("position","auto");u==="auto"&&lh.position===50&&(u=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=u}function s(){n=n.replace(/^\s+/,"")}if(s(),e.startTime=i(),s(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);n=n.slice(3),s(),e.endTime=i(),s(),o(n,e)}function Lw(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class RH{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new TH,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function r(){let o=t.buffer,s=0;for(o=Lw(o);s<o.length&&o[s]!=="\r"&&o[s]!==`
`;)++s;const a=o.slice(0,s);return o[s]==="\r"&&++s,o[s]===`
`&&++s,t.buffer=o.slice(s),a}function i(o){Iw(o,function(s,a){},/:/)}try{let o="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;o=r();const a=o.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let s=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(s?s=!1:o=r(),t.state){case"HEADER":/:/.test(o)?i(o):o||(t.state="ID");continue;case"NOTE":o||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(o)){t.state="NOTE";break}if(!o)continue;if(t.cue=new Kp(0,0,""),t.state="CUE",o.indexOf("-->")===-1){t.cue.id=o;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{EH(o,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const a=o.indexOf("-->")!==-1;if(!o||a&&(s=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=o}continue;case"BADCUE":o||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const AH=/\r\n|\n\r|\n|\r/g,Wu=function(e,t,r=0){return e.slice(r,r+t.length)===t},IH=function(e){let t=parseInt(e.slice(-3));const r=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),o=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Oe(t)||!Oe(r)||!Oe(i)||!Oe(o))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*r,t+=60*1e3*i,t+=60*60*1e3*o,t};function qp(n,e,t){return Ea(n.toString())+Ea(e.toString())+Ea(t)}const LH=function(e,t,r){let i=e[t],o=e[i.prevCC];if(!o||!o.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(s=o)!=null&&s.new;){var s;e.ccOffset+=i.start-o.start,i.new=!1,i=o,o=e[i.prevCC]}e.presentationOffset=r};function PH(n,e,t,r,i,o,s){const a=new RH,l=rr(new Uint8Array(n)).trim().replace(AH,`
`).split(`
`),d=[],c=e?$8(e.baseTime,e.timescale):0;let u="00:00.000",f=0,p=0,h,g=!0;a.oncue=function(m){const v=t[r];let b=t.ccOffset;const y=(f-c)/9e4;if(v!=null&&v.new&&(p!==void 0?b=t.ccOffset=v.start:LH(t,r,y)),y){if(!e){h=new Error("Missing initPTS for VTT MPEGTS");return}b=y-t.presentationOffset}const x=m.endTime-m.startTime,E=cr((m.startTime+b-p)*9e4,i*9e4)/9e4;m.startTime=Math.max(E,0),m.endTime=Math.max(E+x,0);const A=m.text.trim();m.text=decodeURIComponent(encodeURIComponent(A)),m.id||(m.id=qp(m.startTime,m.endTime,A)),m.endTime>0&&d.push(m)},a.onparsingerror=function(m){h=m},a.onflush=function(){if(h){s(h);return}o(d)},l.forEach(m=>{if(g)if(Wu(m,"X-TIMESTAMP-MAP=")){g=!1,m.slice(16).split(",").forEach(v=>{Wu(v,"LOCAL:")?u=v.slice(6):Wu(v,"MPEGTS:")&&(f=parseInt(v.slice(7)))});try{p=IH(u)/1e3}catch(v){h=v}return}else m===""&&(g=!1);a.parse(m+`
`)}),a.flush()}const ju="stpp.ttml.im1t",Pw=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,_w=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,_H={left:"start",center:"center",right:"end",start:"start",end:"end"};function Q0(n,e,t,r){const i=dt(new Uint8Array(n),["mdat"]);if(i.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const o=i.map(a=>rr(a)),s=F8(e.baseTime,1,e.timescale);try{o.forEach(a=>t(kH(a,s)))}catch(a){r(a)}}function kH(n,e){const i=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const o={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(o).reduce((u,f)=>(u[f]=i.getAttribute(`ttp:${f}`)||o[f],u),{}),a=i.getAttribute("xml:space")!=="preserve",l=Z0(Ku(i,"styling","style")),d=Z0(Ku(i,"layout","region")),c=Ku(i,"body","[begin]");return[].map.call(c,u=>{const f=kw(u,a);if(!f||!u.hasAttribute("begin"))return null;const p=Yu(u.getAttribute("begin"),s),h=Yu(u.getAttribute("dur"),s);let g=Yu(u.getAttribute("end"),s);if(p===null)throw J0(u);if(g===null){if(h===null)throw J0(u);g=p+h}const m=new Kp(p-e,g-e,f);m.id=qp(m.startTime,m.endTime,m.text);const v=d[u.getAttribute("region")],b=l[u.getAttribute("style")],y=DH(v,b,l),{textAlign:x}=y;if(x){const E=_H[x];E&&(m.lineAlign=E),m.align=x}return kt(m,y),m}).filter(u=>u!==null)}function Ku(n,e,t){const r=n.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(t)):[]}function Z0(n){return n.reduce((e,t)=>{const r=t.getAttribute("xml:id");return r&&(e[r]=t),e},{})}function kw(n,e){return[].slice.call(n.childNodes).reduce((t,r,i)=>{var o;return r.nodeName==="br"&&i?t+`
`:(o=r.childNodes)!=null&&o.length?kw(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent},"")}function DH(n,e,t){const r="http://www.w3.org/ns/ttml#styling";let i=null;const o=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return s&&t.hasOwnProperty(s)&&(i=t[s]),o.reduce((a,l)=>{const d=qu(e,r,l)||qu(n,r,l)||qu(i,r,l);return d&&(a[l]=d),a},{})}function qu(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function J0(n){return new Error(`Could not parse ttml timestamp ${n}`)}function Yu(n,e){if(!n)return null;let t=Aw(n);return t===null&&(Pw.test(n)?t=OH(n,e):_w.test(n)&&(t=MH(n,e))),t}function OH(n,e){const t=Pw.exec(n),r=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+r/e.frameRate}function MH(n,e){const t=_w.exec(n),r=Number(t[1]);switch(t[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class zl{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class FH{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=tb(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(I.FRAG_LOADING,this.onFragLoading,this),e.on(I.FRAG_LOADED,this.onFragLoaded,this),e.on(I.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(I.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(I.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(I.FRAG_LOADING,this.onFragLoading,this),e.off(I.FRAG_LOADED,this.onFragLoaded,this),e.off(I.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(I.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(I.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(I.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new zl(this,"textTrack1"),t=new zl(this,"textTrack2"),r=new zl(this,"textTrack3"),i=new zl(this,"textTrack4");this.cea608Parser1=new X0(1,e,t),this.cea608Parser2=new X0(3,r,i)}addCues(e,t,r,i,o){let s=!1;for(let a=o.length;a--;){const l=o[a],d=$H(l[0],l[1],t,r);if(d>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],r),s=!0,d/(r-t)>.5))return}if(s||o.push([t,r]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,t,r,i)}else{const a=this.Cues.newCue(null,t,r,i);this.hls.trigger(I.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:t,id:r,initPTS:i,timescale:o,trackId:s}){const{unparsedVttFrags:a}=this;r===Ue.MAIN&&(this.initPTS[t.cc]={baseTime:i,timescale:o,trackId:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(I.FRAG_LOADED,l):this.hls.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:r}=this;if(r)for(let i=0;i<r.textTracks.length;i++){const o=r.textTracks[i];if(eb(o,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return o}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:r,media:i}=this,{label:o,languageCode:s}=t[e],a=this.getExistingTrack(o,s);if(a)r[e]=a,as(r[e]),Cw(r[e],i);else{const l=this.createTextTrack("captions",o,s);l&&(l[e]=!0,r[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const r=t.label,i={_id:e,label:r,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(I.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,r){const i=this.media;if(i)return i.addTextTrack(e,t,r)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const r=!!t.transferMedia;if(this.media=null,r)return;const{captionsTracks:i}=this;Object.keys(i).forEach(o=>{as(i[o]),delete i[o]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=tb(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let r=0;r<t.length;r++)as(t[r])}onSubtitleTracksUpdated(e,t){const r=t.subtitleTracks||[],i=r.some(o=>o.textCodec===ju);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(dw(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const s=this.media,a=s?nd(s.textTracks):null;if(this.tracks.forEach((l,d)=>{let c;if(a){let u=null;for(let f=0;f<a.length;f++)if(a[f]&&eb(a[f],l)){u=a[f],a[f]=null;break}u&&(c=u)}if(c)as(c);else{const u=Dw(l);c=this.createTextTrack(u,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),a!=null&&a.length){const l=a.filter(d=>d!==null).map(d=>d.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const s=this.tracks.map(a=>({label:a.name,kind:a.type.toLowerCase(),default:a.default,subtitleTrack:a}));this.hls.trigger(I.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(r=>{const i=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!i)return;const o=`textTrack${i[1]}`,s=this.captionsProperties[o];s&&(s.label=r.name,r.lang&&(s.languageCode=r.lang),s.media=r)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t==null?void 0:t.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===Ue.MAIN){var r,i;const{cea608Parser1:o,cea608Parser2:s,lastSn:a}=this,{cc:l,sn:d}=t.frag,c=(r=(i=t.part)==null?void 0:i.index)!=null?r:-1;o&&s&&(d!==a+1||d===a&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(o.reset(),s.reset()),this.lastCc=l,this.lastSn=d,this.lastPartIndex=c}}onFragLoaded(e,t){const{frag:r,payload:i}=t;if(r.type===Ue.SUBTITLE)if(i.byteLength){const o=r.decryptdata,s="stats"in t;if(o==null||!o.encrypted||s){const a=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),a&&a.textCodec===ju?this._parseIMSC1(r,i):this._parseVTTs(t)}}else this.hls.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const r=this.hls;Q0(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),r.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{r.logger.log(`Failed to parse IMSC1: ${i}`),r.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:r,payload:i}=e,{initPTS:o,unparsedVttFrags:s}=this,a=o.length-1;if(!o[r.cc]&&a===-1){s.push(e);return}const l=this.hls,d=(t=r.initSegment)!=null&&t.data?mr(r.initSegment.data,new Uint8Array(i)).buffer:i;PH(d,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,c=>{this._appendCues(c,r.level),l.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},c=>{const u=c.message==="Missing initPTS for VTT MPEGTS";u?s.push(e):this._fallbackToIMSC1(r,i),l.logger.log(`Failed to parse VTT cue: ${c}`),!(u&&a>r.cc)&&l.trigger(I.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:c})})}_fallbackToIMSC1(e,t){const r=this.tracks[e.level];r.textCodec||Q0(t,this.initPTS[e.cc],()=>{r.textCodec=ju,this._parseIMSC1(e,t)},()=>{r.textCodec="wvtt"})}_appendCues(e,t){const r=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(o=>Tw(i,o))}else{const i=this.tracks[t];if(!i)return;const o=i.default?"default":"subtitles"+t;r.trigger(I.CUES_PARSED,{type:"subtitles",cues:e,track:o})}}onFragDecrypted(e,t){const{frag:r}=t;r.type===Ue.SUBTITLE&&this.onFragLoaded(I.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:i}=t;if(!(r.type===Ue.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let o=0;o<i.length;o++){const s=i[o].bytes;if(s){this.cea608Parser1||this.initCea608Parsers();const a=this.extractCea608Data(s);this.cea608Parser1.addData(i[o].pts,a[0]),this.cea608Parser2.addData(i[o].pts,a[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:r,endOffsetSubtitles:i,type:o}){const{media:s}=this;if(!(!s||s.currentTime<r)){if(!o||o==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>ah(a[l],t,r))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>ah(a[l],t,i))}}}extractCea608Data(e){const t=[[],[]],r=e[0]&31;let i=2;for(let o=0;o<r;o++){const s=e[i++],a=127&e[i++],l=127&e[i++];if(a===0&&l===0)continue;if((4&s)!==0){const c=3&s;(c===0||c===1)&&(t[c].push(a),t[c].push(l))}}return t}}function Dw(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function eb(n,e){return!!n&&n.kind===Dw(e)&&rh(e,n)}function $H(n,e,t,r){return Math.min(e,r)-Math.max(n,t)}function tb(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const BH=/\s/,NH={newCue(n,e,t,r){const i=[];let o,s,a,l,d;const c=self.VTTCue||self.TextTrackCue;for(let f=0;f<r.rows.length;f++)if(o=r.rows[f],a=!0,l=0,d="",!o.isEmpty()){var u;for(let g=0;g<o.chars.length;g++)BH.test(o.chars[g].uchar)&&a?l++:(d+=o.chars[g].uchar,a=!1);o.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const p=Lw(d.trim()),h=qp(e,t,p);n!=null&&(u=n.cues)!=null&&u.getCueById(h)||(s=new c(e,t,p),s.id=h,s.line=f+1,s.align="left",s.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(s))}return n&&i.length&&(i.sort((f,p)=>f.line==="auto"||p.line==="auto"?0:f.line>8&&p.line>8?p.line-f.line:f.line-p.line),i.forEach(f=>Tw(n,f))),i}};function zH(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const UH=/(\d+)-(\d+)\/(\d+)/;class nb{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||WH,this.controller=new self.AbortController,this.stats=new Rp}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,r){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const o=HH(e,this.controller.signal),s=e.responseType==="arraybuffer",a=s?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),t.timeout=l&&Oe(l)?l:d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},t.timeout),(Ya(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(u=>{var f;this.response=this.loader=u;const p=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(i,e,this.response))},d-(p-i.loading.start)),!u.ok){const{status:g,statusText:m}=u;throw new jH(m||"fetch, bad network response",g,u)}i.loading.first=p,i.total=GH(u.headers)||i.total;const h=(f=this.callbacks)==null?void 0:f.onProgress;return h&&Oe(t.highWaterMark)?this.loadProgressively(u,i,e,t.highWaterMark,h):s?u.arrayBuffer():e.responseType==="json"?u.json():u.text()}).then(u=>{var f,p;const h=this.response;if(!h)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const g=u[a];g&&(i.loaded=i.total=g);const m={url:h.url,data:u,code:h.status},v=(f=this.callbacks)==null?void 0:f.onProgress;v&&!Oe(t.highWaterMark)&&v(i,e,u,h),(p=this.callbacks)==null||p.onSuccess(m,i,e,h)}).catch(u=>{var f;if(self.clearTimeout(this.requestTimeout),i.aborted)return;const p=u&&u.code||0,h=u?u.message:null;(f=this.callbacks)==null||f.onError({code:p,text:h},e,u?u.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,r,i=0,o){const s=new VT,a=e.body.getReader(),l=()=>a.read().then(d=>{if(d.done)return s.dataLength&&o(t,r,s.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const c=d.value,u=c.length;return t.loaded+=u,u<i||s.dataLength?(s.push(c),s.dataLength>=i&&o(t,r,s.flush().buffer,e)):o(t,r,c.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function HH(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(kt({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function VH(n){const e=UH.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function GH(n){const e=n.get("Content-Range");if(e){const r=VH(e);if(Oe(r))return r}const t=n.get("Content-Length");if(t)return parseInt(t)}function WH(n,e){return new self.Request(n.url,e)}class jH extends Error{constructor(e,t,r){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=r}}const KH=/^age:\s*[\d.]+\s*$/im;class Ow{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Rp,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const r=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const o=this.xhrSetup;o?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return o(r,t.url)}).catch(s=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",t.url,!0),o(r,t.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,t,e)}).catch(s=>{var a;(a=this.callbacks)==null||a.onError({code:r.status,text:s.message},t,r,i)}):this.openAndSendXhr(r,t,e)}openAndSendXhr(e,t,r){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:o,maxLoadTimeMs:s}=r.loadPolicy;if(i)for(const a in i)e.setRequestHeader(a,i[a]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),r.timeout=o&&Oe(o)?o:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:r}=this;if(!e||!t)return;const i=t.readyState,o=this.config;if(!r.aborted&&i>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),o.timeout!==o.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),o.timeout=o.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),o.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const d=t.status,c=t.responseType==="text"?t.responseText:null;if(d>=200&&d<300){const h=c??t.response;if(h!=null){var s,a;r.loading.end=Math.max(self.performance.now(),r.loading.first);const g=t.responseType==="arraybuffer"?h.byteLength:h.length;r.loaded=r.total=g,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const m=(s=this.callbacks)==null?void 0:s.onProgress;m&&m(r,e,h,t);const v={url:t.responseURL,data:h,code:d};(a=this.callbacks)==null||a.onSuccess(v,r,e,t);return}}const u=o.loadPolicy.errorRetry,f=r.retry,p={url:e.url,data:void 0,code:d};if(Fd(u,f,!1,p))this.retry(u);else{var l;wt.error(`${d} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:d,text:t.statusText},e,t,r)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(Fd(e,t,!0))this.retry(e);else{var r;wt.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:r}=this;this.retryDelay=Pp(e,r.retry),r.retry++,wt.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t==null?void 0:t.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&KH.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const qH={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},YH=_t(_t({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:Ow,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:aU,bufferController:Z8,capLevelController:Gp,errorController:fU,fpsController:Z6,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:DT,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:qH},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},XH()),{},{subtitleStreamController:cH,subtitleTrackController:tH,timelineController:FH,audioStreamController:q8,audioTrackController:Y8,emeController:vs,cmcdController:Y6,contentSteeringController:Q6,interstitialsController:dH});function XH(){return{cueHandler:NH,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function QH(n,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=dh(n),i=["manifest","level","frag"],o=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return i.forEach(s=>{const a=`${s==="level"?"playlist":s}LoadPolicy`,l=e[a]===void 0,d=[];o.forEach(c=>{const u=`${s}Loading${c}`,f=e[u];if(f!==void 0&&l){d.push(u);const p=r[a].default;switch(e[a]={default:p},c){case"TimeOut":p.maxLoadTimeMs=f,p.maxTimeToFirstByteMs=f;break;case"MaxRetry":p.errorRetry.maxNumRetry=f,p.timeoutRetry.maxNumRetry=f;break;case"RetryDelay":p.errorRetry.retryDelayMs=f,p.timeoutRetry.retryDelayMs=f;break;case"MaxRetryTimeout":p.errorRetry.maxRetryDelayMs=f,p.timeoutRetry.maxRetryDelayMs=f;break}}}),d.length&&t.warn(`hls.js config: "${d.join('", "')}" setting(s) are deprecated, use "${a}": ${Ut(e[a])}`)}),_t(_t({},r),e)}function dh(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(dh):Object.keys(n).reduce((e,t)=>(e[t]=dh(n[t]),e),{}):n}function ZH(n,e){const t=n.loader;t!==nb&&t!==Ow?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):zH()&&(n.loader=nb,n.progressive=!0,n.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const rd=2,JH=.1,eV=.05,tV=100;class nV extends PT{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(I.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(tV),this.mediaSource=t.mediaSource;const r=this.media=t.media;Jn(r,"playing",this.onMediaPlaying),Jn(r,"waiting",this.onMediaWaiting),Jn(r,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:r}=this;r&&(ur(r,"playing",this.onMediaPlaying),ur(r,"waiting",this.onMediaWaiting),ur(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var r,i;const o=(r=this.hls)==null?void 0:r.config;if(!o)return;const s=this.media;if(!s)return;const{seeking:a}=s,l=this.seeking&&!a,d=!this.seeking&&a,c=s.paused&&!a||s.ended||s.playbackRate===0;if(this.seeking=a,e!==t){t&&(this.ended=0),this.moved=!0,a||(this.nudgeRetry=0,o.nudgeOnVideoHole&&!c&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(d||l){l&&this.stallResolved(e);return}if(c){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&s.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(I.MEDIA_ENDED,{stalled:!1}));return}if(!tt.getBuffered(s).length){this.nudgeRetry=0;return}const u=tt.bufferInfo(s,e,0),f=u.nextStart||0,p=this.fragmentTracker;if(a&&p&&this.hls){const A=rb(this.hls.inFlightFragments,e),S=u.len>rd,w=!f||A||f-e>rd&&!p.getPartialFragment(e);if(S||w)return;this.moved=!1}const h=(i=this.hls)==null?void 0:i.latestLevelDetails;if(!this.moved&&this.stalled!==null&&p){if(!(u.len>0)&&!f)return;const S=Math.max(f,u.start||0)-e,T=!!(h!=null&&h.live)?h.targetduration*2:rd,C=Ul(e,p);if(S>0&&(S<=T||C)){s.paused||this._trySkipBufferHole(C);return}}const g=o.detectStallWithCurrentTimeMs,m=self.performance.now(),v=this.waiting;let b=this.stalled;if(b===null)if(v>0&&m-v<g)b=this.stalled=v;else{this.stalled=m;return}const y=m-b;if(!a&&(y>=g||v)&&this.hls){var x;if(((x=this.mediaSource)==null?void 0:x.readyState)==="ended"&&!(h!=null&&h.live)&&Math.abs(e-((h==null?void 0:h.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(I.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(u),!this.media||!this.hls)return}const E=tt.bufferInfo(s,e,o.maxBufferHole);this._tryFixBufferStall(E,y,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(I.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var r;const i=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&i&&i.length>1&&e>i.end(0)){const o=tt.bufferedInfo(tt.timeRangesToArray(this.buffered.audio),e,0);if(o.len>1&&t>=o.start){const s=tt.timeRangesToArray(i),a=tt.bufferedInfo(s,t,0).bufferedIndex;if(a>-1&&a<s.length-1){const l=tt.bufferedInfo(s,e,0).bufferedIndex,d=s[a].end,c=s[a+1].start;if((l===-1||l>a)&&c-d<1&&e-d<2){const u=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${d} -> ${c} buffered index: ${l}`);this.warn(u.message),this.media.currentTime+=1e-6;let f=Ul(e,this.fragmentTracker);f&&"fragment"in f?f=f.fragment:f||(f=void 0);const p=tt.bufferInfo(this.media,e,0);this.hls.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:u,reason:u.message,frag:f,buffer:p.len,bufferInfo:p})}}}}}_tryFixBufferStall(e,t,r){var i,o;const{fragmentTracker:s,media:a}=this,l=(i=this.hls)==null?void 0:i.config;if(!a||!s||!l)return;const d=(o=this.hls)==null?void 0:o.latestLevelDetails,c=Ul(r,s);if((c||d!=null&&d.live&&r<d.fragmentStart)&&(this._trySkipBufferHole(c)||!this.media))return;const u=e.buffered,f=this.adjacentTraversal(e,r);(u&&u.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-r<l.maxBufferHole||f))&&(t>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const r=this.fragmentTracker,i=e.nextStart;if(r&&i){const o=r.getFragAtPos(t,Ue.MAIN),s=r.getFragAtPos(i,Ue.MAIN);if(o&&s)return s.sn-o.sn<2}return!1}_reportStall(e){const{hls:t,media:r,stallReported:i,stalled:o}=this;if(!i&&o!==null&&r&&t){this.stallReported=!0;const s=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Ut(e)})`);this.warn(s.message),t.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len,bufferInfo:e,stalled:{start:o}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:r,media:i}=this,o=(t=this.hls)==null?void 0:t.config;if(!i||!r||!o)return 0;const s=i.currentTime,a=tt.bufferInfo(i,s,0),l=s<a.start?a.start:a.nextStart;if(l&&this.hls){const c=a.len<=o.maxBufferHole,u=a.len>0&&a.len<1&&i.readyState<3,f=l-s;if(f>0&&(c||u)){if(f>o.maxBufferHole){let h=!1;if(s===0){const g=r.getAppendedFrag(0,Ue.MAIN);g&&l<g.end&&(h=!0)}if(!h&&e){var d;if(!((d=this.hls.loadLevelObj)!=null&&d.details)||rb(this.hls.inFlightFragments,l))return 0;let m=!1,v=e.end;for(;v<l;){const b=Ul(v,r);if(b)v+=b.duration;else{m=!0;break}}if(m)return 0}}const p=Math.max(l+eV,s+JH);if(this.warn(`skipping hole, adjusting currentTime from ${s} to ${p}`),this.moved=!0,i.currentTime=p,!(e!=null&&e.gap)){const h=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${p}`),g={type:Ge.MEDIA_ERROR,details:oe.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,buffer:a.len,bufferInfo:a};e&&("fragment"in e?g.part=e:g.frag=e),this.hls.trigger(I.ERROR,g)}return p}}return 0}_tryNudgeBuffer(e){const{hls:t,media:r,nudgeRetry:i}=this,o=t==null?void 0:t.config;if(!r||!o)return 0;const s=r.currentTime;if(this.nudgeRetry++,i<o.nudgeMaxRetry){const a=s+(i+1)*o.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${s} to ${a}`);this.warn(l.message),r.currentTime=a,t.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const a=new Error(`Playhead still not moving while enough data buffered @${s} after ${o.nudgeMaxRetry} nudges`);this.error(a.message),t.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.BUFFER_STALLED_ERROR,error:a,fatal:!0,buffer:e.len,bufferInfo:e})}}}function rb(n,e){const t=ib(n.main);if(t&&t.start<=e)return t;const r=ib(n.audio);return r&&r.start<=e?r:null}function ib(n){if(!n)return null;switch(n.state){case ye.IDLE:case ye.STOPPED:case ye.ENDED:case ye.ERROR:return null}return n.frag}function Ul(n,e){return e.getAppendedFrag(n,Ue.MAIN)||e.getPartialFragment(n)}const rV=.25;function ch(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function Xu(n,e,t,r,i){let o=new n(e,t,"");try{o.value=r,i&&(o.type=i)}catch{o=new n(e,t,Ut(i?_t({type:i},r):r))}return o}const Hl=(()=>{const n=ch();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class iV{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(I.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(I.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var r;this.media=t.media,((r=t.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&as(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const r=e[t];if(r.kind==="metadata"&&r.label==="id3")return Cw(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:r,enableID3MetadataCues:i}=this.hls.config;if(!r&&!i)return;const{samples:o}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const s=ch();if(s)for(let a=0;a<o.length;a++){const l=o[a].type;if(l===qn.emsg&&!r||!i)continue;const d=XT(o[a].data),c=o[a].pts;let u=c+o[a].duration;u>Hl&&(u=Hl),u-c<=0&&(u=c+rV);for(let p=0;p<d.length;p++){const h=d[p];if(!QT(h)){this.updateId3CueEnds(c,l);const g=Xu(s,c,u,h,l);g&&this.id3Track.addCue(g)}}}}updateId3CueEnds(e,t){var r;const i=(r=this.id3Track)==null?void 0:r.cues;if(i)for(let o=i.length;o--;){const s=i[o];s.type===t&&s.startTime<e&&s.endTime===Hl&&(s.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:r,type:i}){const{id3Track:o,hls:s}=this;if(!s)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=s;if(o&&(a||l)){let d;i==="audio"?d=c=>c.type===qn.audioId3&&l:i==="video"?d=c=>c.type===qn.emsg&&a:d=c=>c.type===qn.audioId3&&l||c.type===qn.emsg&&a,ah(o,t,r,d)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:r,timelineOffset:i,enableDateRangeMetadataCues:o,interstitialsController:s}=this.hls.config;if(!o)return;const a=ch();if(r&&i&&!s){const{fragmentStart:g,fragmentEnd:m}=e;let v=this.assetCue;v?(v.startTime=g,v.endTime=m):a&&(v=this.assetCue=Xu(a,g,m,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),v&&(v.id=r,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(v),v.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:d}=e,c=Object.keys(d);let u=this.dateRangeCuesAppended;if(l&&t){var f;if((f=l.cues)!=null&&f.length){const g=Object.keys(u).filter(m=>!c.includes(m));for(let m=g.length;m--;){var p;const v=g[m],b=(p=u[v])==null?void 0:p.cues;delete u[v],b&&Object.keys(b).forEach(y=>{const x=b[y];if(x){x.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(x)}catch{}}})}}else u=this.dateRangeCuesAppended={}}const h=e.fragments[e.fragments.length-1];if(!(c.length===0||!Oe(h==null?void 0:h.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let g=0;g<c.length;g++){const m=c[g],v=d[m],b=v.startTime,y=u[m],x=(y==null?void 0:y.cues)||{};let E=(y==null?void 0:y.durationKnown)||!1,A=Hl;const{duration:S,endDate:w}=v;if(w&&S!==null)A=b+S,E=!0;else if(v.endOnNext&&!E){const C=c.reduce((L,P)=>{if(P!==v.id){const _=d[P];if(_.class===v.class&&_.startDate>v.startDate&&(!L||v.startDate<L.startDate))return _}return L},null);C&&(A=C.startTime,E=!0)}const T=Object.keys(v.attr);for(let C=0;C<T.length;C++){const L=T[C];if(!EU(L))continue;const P=x[L];if(P)E&&!(y!=null&&y.durationKnown)?P.endTime=A:Math.abs(P.startTime-b)>.01&&(P.startTime=b,P.endTime=A);else if(a){let _=v.attr[L];RU(L)&&(_=hT(_));const k=Xu(a,b,A,{key:L,data:_},qn.dateRange);k&&(k.id=m,this.id3Track.addCue(k),x[L]=k,s&&(L==="X-ASSET-LIST"||L==="X-ASSET-URL")&&k.addEventListener("enter",this.onEventCueEnter))}}u[m]={cues:x,dateRange:v,durationKnown:E}}}}}class oV{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,r=this.levelDetails;if(!t||!r)return;this.currentTime=t.currentTime;const i=this.computeLatency();if(i===null)return;this._latency=i;const{lowLatencyMode:o,maxLiveSyncPlaybackRate:s}=this.config;if(!o||s===1||!r.live)return;const a=this.targetLatency;if(a===null)return;const l=i-a,d=Math.min(this.maxLatency,a+r.targetduration);if(l<d&&l>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,s)),f=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,p=Math.min(u,Math.max(1,f));this.changeMediaPlaybackRate(t,p)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:r,targetduration:i}=e,{liveSyncDuration:o,liveSyncDurationCount:s,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let d=a&&r||t;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||d===0)&&(d=o!==void 0?o:s*i);const c=i;return d+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const r=this.levelDetails;if(r===null)return null;const i=r.edge,o=e-t-this.edgeStalled,s=i-r.totalduration,a=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(s,o),a)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(I.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(I.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(I.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(I.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var r;t.details===oe.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var r,i;e.playbackRate!==t&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(i=this.targetLatency)==null?void 0:i.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class sV extends Vp{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this),e.on(I.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this),e.off(I.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const r=this.hls.config.preferManagedMediaSource,i=[],o={},s={};let a=!1,l=!1,d=!1;t.levels.forEach(c=>{const u=c.attrs;let{audioCodec:f,videoCodec:p}=c;f&&(c.audioCodec=f=kd(f,r)||void 0),p&&(p=c.videoCodec=G4(p));const{width:h,height:g,unknownCodecs:m}=c;let v=m?m.length:0;if(m)for(let C=v;C--;){const L=m[C];this.isAudioSupported(L)?(c.audioCodec=f=f?`${f},${L}`:L,v--,_s.audio[f.substring(0,4)]=2):this.isVideoSupported(L)&&(c.videoCodec=p=p?`${p},${L}`:L,v--,_s.video[p.substring(0,4)]=2)}if(a||(a=!!(h&&g)),l||(l=!!p),d||(d=!!f),v||f&&!this.isAudioSupported(f)||p&&!this.isVideoSupported(p)){this.log(`Some or all CODECS not supported "${u.CODECS}"`);return}const{CODECS:b,"FRAME-RATE":y,"HDCP-LEVEL":x,"PATHWAY-ID":E,RESOLUTION:A,"VIDEO-RANGE":S}=u,T=`${`${E||"."}-`}${c.bitrate}-${A}-${y}-${b}-${S}-${x}`;if(o[T])if(o[T].uri!==c.url&&!c.attrs["PATHWAY-ID"]){const C=s[T]+=1;c.attrs["PATHWAY-ID"]=new Array(C+1).join(".");const L=this.createLevel(c);o[T]=L,i.push(L)}else o[T].addGroupId("audio",u.AUDIO),o[T].addGroupId("text",u.SUBTITLES);else{const C=this.createLevel(c);o[T]=C,s[T]=1,i.push(C)}}),this.filterAndSortMediaOptions(i,t,a,l,d)}createLevel(e){const t=new Wa(e),r=e.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const i=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(i.message),t.supportedResult=wT(i,[])}return t}isAudioSupported(e){return qf(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return qf(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,r,i,o){let s=[],a=[],l=e;if((r||i)&&o&&(l=l.filter(({videoCodec:m,videoRange:v,width:b,height:y})=>(!!m||!!(b&&y))&&Z4(v))),l.length===0){Promise.resolve().then(()=>{if(this.hls){let m="no level with compatible codecs found in manifest",v=m;t.levels.length&&(v=`one or more CODECS in variant not supported: ${Ut(t.levels.map(y=>y.attrs.CODECS).filter((y,x,E)=>E.indexOf(y)===x))}`,this.warn(v),m+=` (${v})`);const b=new Error(m);this.hls.trigger(I.ERROR,{type:Ge.MEDIA_ERROR,details:oe.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:b,reason:v})}});return}t.audioTracks&&(s=t.audioTracks.filter(m=>!m.audioCodec||this.isAudioSupported(m.audioCodec)),ob(s)),t.subtitles&&(a=t.subtitles,ob(a));const d=l.slice(0);l.sort((m,v)=>{if(m.attrs["HDCP-LEVEL"]!==v.attrs["HDCP-LEVEL"])return(m.attrs["HDCP-LEVEL"]||"")>(v.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&m.height!==v.height)return m.height-v.height;if(m.frameRate!==v.frameRate)return m.frameRate-v.frameRate;if(m.videoRange!==v.videoRange)return Dd.indexOf(m.videoRange)-Dd.indexOf(v.videoRange);if(m.videoCodec!==v.videoCodec){const b=t0(m.videoCodec),y=t0(v.videoCodec);if(b!==y)return y-b}if(m.uri===v.uri&&m.codecSet!==v.codecSet){const b=_d(m.codecSet),y=_d(v.codecSet);if(b!==y)return y-b}return m.averageBitrate!==v.averageBitrate?m.averageBitrate-v.averageBitrate:0});let c=d[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==d.length)){for(let m=0;m<d.length;m++)if(d[m].pathwayId===l[0].pathwayId){c=d[m];break}}this._levels=l;for(let m=0;m<l.length;m++)if(l[m]===c){var u;this._firstLevel=m;const v=c.bitrate,b=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${v}`),((u=this.hls.userConfig)==null?void 0:u.abrEwmaDefaultEstimate)===void 0){const y=Math.min(v,this.hls.config.abrEwmaDefaultEstimateMax);y>b&&b===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=y)}break}const f=o&&!i,p=this.hls.config,h=!!(p.audioStreamController&&p.audioTrackController),g={levels:l,audioTracks:s,subtitleTracks:a,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:i,altAudio:h&&!f&&s.some(m=>!!m.url)};this.hls.trigger(I.MANIFEST_PARSED,g)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const c=new Error("invalid level idx"),u=e<0;if(this.hls.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.LEVEL_SWITCH_ERROR,level:e,fatal:u,error:c,reason:c.message}),u)return;e=Math.min(e,t.length-1)}const r=this.currentLevelIndex,i=this.currentLevel,o=i?i.attrs["PATHWAY-ID"]:void 0,s=t[e],a=s.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=s,r===e&&i&&o===a)return;this.log(`Switching to level ${e} (${s.height?s.height+"p ":""}${s.videoRange?s.videoRange+" ":""}${s.codecSet?s.codecSet+" ":""}@${s.bitrate})${a?" with Pathway "+a:""} from level ${r}${o?" with Pathway "+o:""}`);const l={level:e,attrs:s.attrs,details:s.details,bitrate:s.bitrate,averageBitrate:s.averageBitrate,maxBitrate:s.maxBitrate,realBitrate:s.realBitrate,width:s.width,height:s.height,codecSet:s.codecSet,audioCodec:s.audioCodec,videoCodec:s.videoCodec,audioGroups:s.audioGroups,subtitleGroups:s.subtitleGroups,loaded:s.loaded,loadError:s.loadError,fragmentError:s.fragmentError,name:s.name,id:s.id,uri:s.uri,url:s.url,urlId:0,audioGroupIds:s.audioGroupIds,textGroupIds:s.textGroupIds};this.hls.trigger(I.LEVEL_SWITCHING,l);const d=s.details;if(!d||d.live){const c=this.switchParams(s.uri,i==null?void 0:i.details,d);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),r=e.filter(i=>t.indexOf(i)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=r}}onError(e,t){t.fatal||!t.context||t.context.type===ct.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===Ue.MAIN){const r=t.elementaryStreams;if(!Object.keys(r).some(o=>!!r[o]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var r;const{level:i,details:o}=t,s=t.levelInfo;if(!s){var a;this.warn(`Invalid level index ${i}`),(a=t.deliveryDirectives)!=null&&a.skip&&(o.deltaUpdateFailed=!0);return}if(s===this.currentLevel||t.withoutMultiVariant){s.fragmentError===0&&(s.loadError=0);let l=s.details;l===t.details&&l.advanced&&(l=void 0),this.playlistLoaded(i,t,l)}else(r=t.deliveryDirectives)!=null&&r.skip&&(o.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const r=this.getUrlWithDirectives(e.uri,t),i=this.currentLevelIndex,o=e.attrs["PATHWAY-ID"],s=e.details,a=s==null?void 0:s.age;this.log(`Loading level index ${i}${(t==null?void 0:t.msn)!==void 0?" at sn "+t.msn+" part "+t.part:""}${o?" Pathway "+o:""}${a&&s.live?" age "+a.toFixed(1)+(s.type&&" "+s.type||""):""} ${r}`),this.hls.trigger(I.LEVEL_LOADING,{url:r,level:i,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const r=this._levels.filter((o,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(o),o===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,o.details&&o.details.fragments.forEach(a=>a.level=-1)),!1));zT(r),this._levels=r,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const i=r.length-1;this._firstLevel=Math.min(this._firstLevel,i),this._startLevel&&(this._startLevel=Math.min(this._startLevel,i)),this.hls.trigger(I.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(I.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function ob(n){const e={};n.forEach(t=>{const r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++})}function Mw(){return self.SourceBuffer||self.WebKitSourceBuffer}function Fw(){if(!Zi())return!1;const e=Mw();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function aV(){if(!Fw())return!1;const n=Zi();return typeof(n==null?void 0:n.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(Ga(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(Ga(e,"audio"))))}function lV(){var n;const e=Mw();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const dV=100;class cV extends Mp{constructor(e,t,r){super(e,t,r,"stream-controller",Ue.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const i=this.media,o=i?i.currentTime:null;if(o===null||!Oe(o)||(this.log(`Media seeked to ${o.toFixed(3)}`),!this.getBufferedFrag(o)))return;const s=this.getFwdBufferInfoAtPos(i,o,Ue.MAIN,0);if(s===null||s.len===0){this.warn(`Main forward buffer length at ${o} on "seeked" event ${s?s.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(I.MANIFEST_PARSED,this.onManifestParsed,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.LEVEL_LOADED,this.onLevelLoaded,this),e.on(I.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(I.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(I.BUFFER_CREATED,this.onBufferCreated,this),e.on(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(I.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(I.MANIFEST_PARSED,this.onManifestParsed,this),e.off(I.LEVEL_LOADED,this.onLevelLoaded,this),e.off(I.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(I.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(I.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(I.BUFFER_CREATED,this.onBufferCreated,this),e.off(I.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(I.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:r,hls:i}=this;if(this.stopLoad(),this.setInterval(dV),this.level=-1,!this.startFragRequested){let o=i.startLevel;o===-1&&(i.config.testBandwidth&&this.levels.length>1?(o=0,this.bitrateTest=!0):o=i.firstAutoLevel),i.nextLoadLevel=o,this.level=i.loadLevel,this._hasEnoughToStart=!!t}r>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),e=r),this.state=ye.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=ye.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ye.WAITING_LEVEL:{const{levels:t,level:r}=this,i=t==null?void 0:t[r],o=i==null?void 0:i.details;if(o&&(!o.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(o))break;this.state=ye.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ye.IDLE;break}break}case ye.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),r=this.retryDate;if(!r||t>=r||(e=this.media)!=null&&e.seeking){const{levels:i,level:o}=this,s=i==null?void 0:i[o];this.resetStartWhenNotLoaded(s||null),this.state=ye.IDLE}}break}this.state===ye.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:r,media:i}=this;if(t===null||!i&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const o=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(r!=null&&r[o]))return;const s=r[o],a=this.getMainFwdBufferInfo();if(a===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(a,l)){const g={};this.altAudio===2&&(g.type="video"),this.hls.trigger(I.BUFFER_EOS,g),this.state=ye.ENDED;return}if(!this.buffering)return;e.loadLevel!==o&&e.manualLevel===-1&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const d=s.details;if(!d||this.state===ye.WAITING_LEVEL||this.waitForLive(s)){this.level=o,this.state=ye.WAITING_LEVEL,this.startFragRequested=!1;return}const c=a.len,u=this.getMaxBufferLength(s.maxBitrate);if(c>=u)return;this.backtrackFragment&&this.backtrackFragment.start>a.end&&(this.backtrackFragment=null);const f=this.backtrackFragment?this.backtrackFragment.start:a.end;let p=this.getNextFragment(f,d);if(this.couldBacktrack&&!this.fragPrevious&&p&&en(p)&&this.fragmentTracker.getState(p)!==rn.OK){var h;const m=((h=this.backtrackFragment)!=null?h:p).sn-d.startSN,v=d.fragments[m-1];v&&p.cc===v.cc&&(p=v,this.fragmentTracker.removeFragment(v))}else this.backtrackFragment&&a.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,f)){if(!p.gap){const m=this.audioOnly&&!this.altAudio?Mt.AUDIO:Mt.VIDEO,v=(m===Mt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;v&&this.afterBufferFlushed(v,m,Ue.MAIN)}p=this.getNextFragmentLoopLoading(p,d,a,Ue.MAIN,u)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,s,f))}loadFragment(e,t,r){const i=this.fragmentTracker.getState(e);i===rn.NOT_LOADED||i===rn.PARTIAL?en(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,r):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Ue.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let r;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const o=this.getLevelDetails();if(o!=null&&o.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<o.targetduration*2)return}if(!t.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],d=this.fragLastKbps;d&&this.fragCurrent?r=this.fragCurrent.duration*l.maxBitrate/(1e3*d)+1:r=0}else r=0;const s=this.getBufferedFrag(t.currentTime+r);if(s){const a=this.followingBufferedFrag(s);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,d=a.duration,c=Math.max(s.end,l+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ye.KEY_LOADING:case ye.FRAG_LOADING:case ye.FRAG_LOADING_WAITING_RETRY:case ye.PARSING:case ye.PARSED:this.state=ye.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const r=t.media;Jn(r,"playing",this.onMediaPlaying),Jn(r,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:r}=this;r&&(ur(r,"playing",this.onMediaPlaying),ur(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(I.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let r=!1,i=!1;t.levels.forEach(o=>{const s=o.audioCodec;s&&(r=r||s.indexOf("mp4a.40.2")!==-1,i=i||s.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&i&&!lV(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:r}=this;if(!r||this.state!==ye.IDLE)return;const i=t.levelInfo;(!i.details||i.details.live&&(this.levelLastLoaded!==i||i.details.expired)||this.waitForCdnTuneIn(i.details))&&(this.state=ye.WAITING_LEVEL)}onLevelLoaded(e,t){var r;const{levels:i,startFragRequested:o}=this,s=t.level,a=t.details,l=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${l}`);const d=t.levelInfo,c=this.fragCurrent;c&&(this.state===ye.FRAG_LOADING||this.state===ye.FRAG_LOADING_WAITING_RETRY)&&c.level!==t.level&&c.loader&&this.abortCurrentFrag();let u=0;if(a.live||(r=d.details)!=null&&r.live){var f;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,d.details,(f=this.levelLastLoaded)==null?void 0:f.details)}if(d.details=a,this.levelLastLoaded=d,o||this.setStartPosition(a,u),this.hls.trigger(I.LEVEL_UPDATED,{details:a,level:s}),this.state===ye.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=ye.IDLE}o&&a.live&&this.synchronizeToLiveEdge(a),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:r}=this;if(!r)return;const i=this.hls.liveSyncPosition,o=this.getLoadPosition(),s=e.fragmentStart,a=e.edge,l=o>=s-t.maxFragLookUpTolerance&&o<=a;if(i!==null&&r.duration>i&&(o<i||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!l&&r.readyState<4||o<a-c)&&(this._hasEnoughToStart||(this.nextLoadPosition=i),r.readyState))if(this.warn(`Playback: ${o.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${i.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var d;const u=tt.bufferInfo(r,i,0);if(!(u!=null&&(d=u.buffered)!=null&&d.length)){r.currentTime=i;return}if(u.start<=o){r.currentTime=i;return}const{nextStart:p}=tt.bufferedInfo(u.buffered,o,0);p&&(r.currentTime=p)}else r.currentTime=i}}_handleFragmentLoadProgress(e){var t;const r=e.frag,{part:i,payload:o}=e,{levels:s}=this;if(!s){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const a=s[r.level];if(!a){this.warn(`Level ${r.level} not found on progress`);return}const l=a.details;if(!l){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const d=a.videoCodec,c=l.PTSKnown||!l.live,u=(t=r.initSegment)==null?void 0:t.data,f=this._getAudioCodec(a),p=this.transmuxer=this.transmuxer||new lw(this.hls,Ue.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),h=i?i.index:-1,g=h!==-1,m=new kp(r.level,r.sn,r.stats.chunkCount,o.byteLength,h,g),v=this.initPTS[r.cc];p.push(o,u,f,d,r,i,l.totalduration,c,m,v)}onAudioTrackSwitching(e,t){const r=this.hls,i=this.altAudio===2;if(Od(t.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const s=this.fragCurrent;s&&(this.log("Switching to main audio track, cancel main fragment load"),s.abortRequests(),this.fragmentTracker.removeFragment(s)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(i){this.fragmentTracker.removeAllFragments(),r.once(I.BUFFER_FLUSHED,()=>{var s;(s=this.hls)==null||s.trigger(I.AUDIO_TRACK_SWITCHED,t)}),r.trigger(I.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(I.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const r=Od(t.url,this.hls);if(r){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=r?2:0,this.tick()}onBufferCreated(e,t){const r=t.tracks;let i,o,s=!1;for(const a in r){const l=r[a];if(l.id==="main"){if(o=a,i=l,a==="video"){const d=r[a];d&&(this.videoBuffer=d.buffer)}}else s=!0}s&&i?(this.log(`Alternate track found, use ${o}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:r,part:i}=t,o=r.type===Ue.MAIN;if(o){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${i?" p: "+i.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ye.PARSED&&(this.state=ye.IDLE);return}const a=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),en(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}const s=this.media;s&&(!this._hasEnoughToStart&&tt.getBuffered(s).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),o&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var r;if(t.fatal){this.state=ye.ERROR;return}switch(t.details){case oe.FRAG_GAP:case oe.FRAG_PARSING_ERROR:case oe.FRAG_DECRYPT_ERROR:case oe.FRAG_LOAD_ERROR:case oe.FRAG_LOAD_TIMEOUT:case oe.KEY_LOAD_ERROR:case oe.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ue.MAIN,t);break;case oe.LEVEL_LOAD_ERROR:case oe.LEVEL_LOAD_TIMEOUT:case oe.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===ye.WAITING_LEVEL&&((r=t.context)==null?void 0:r.type)===ct.LEVEL&&(this.state=ye.IDLE);break;case oe.BUFFER_ADD_CODEC_ERROR:case oe.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case oe.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case oe.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=ye.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==Mt.AUDIO||!this.altAudio){const r=(t===Mt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,t,Ue.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let r=this.startPosition;if(r>=0&&t<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${t}`);return}const i=this.timelineOffset;i&&r&&(r+=i);const o=this.getLevelDetails(),s=tt.getBuffered(e),a=s.length?s.start(0):0,l=a-r,d=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<d||this.loadingParts&&l<2*((o==null?void 0:o.partTarget)||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),r+=l,this.startPosition=r),t<r&&(this.log(`seek to target start position ${r} from current time ${t} buffer start ${a}`),e.currentTime=r)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(r=>{const{hls:i}=this,o=r==null?void 0:r.frag;if(!o||this.fragContextChanged(o))return;t.fragmentError=0,this.state=ye.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=o.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(I.FRAG_LOADED,r),o.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const r=this.playlistType,{hls:i}=this,{remuxResult:o,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a){this.resetWhenMissingContext(s);return}const{frag:l,part:d,level:c}=a,{video:u,text:f,id3:p,initSegment:h}=o,{details:g}=c,m=this.altAudio?void 0:o.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=ye.PARSING,h){if(h!=null&&h.tracks){const x=l.initSegment||l;this._bufferInitSegment(c,h.tracks,x,s),i.trigger(I.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:r,tracks:h.tracks})}const v=h.initPTS,b=h.timescale,y=this.initPTS[l.cc];if(Oe(v)&&(!y||y.baseTime!==v||y.timescale!==b)){const x=h.trackId;this.initPTS[l.cc]={baseTime:v,timescale:b,trackId:x},i.trigger(I.INIT_PTS_FOUND,{frag:l,id:r,initPTS:v,timescale:b,trackId:x})}}if(u&&g){m&&u.type==="audiovideo"&&this.logMuxedErr(l);const v=g.fragments[l.sn-1-g.startSN],b=l.sn===g.startSN,y=!v||l.cc>v.cc;if(o.independent!==!1){const{startPTS:x,endPTS:E,startDTS:A,endDTS:S}=u;if(d)d.elementaryStreams[u.type]={startPTS:x,endPTS:E,startDTS:A,endDTS:S};else if(u.firstKeyFrame&&u.independent&&s.id===1&&!y&&(this.couldBacktrack=!0),u.dropped&&u.independent){const w=this.getMainFwdBufferInfo(),T=(w?w.end:this.getLoadPosition())+this.config.maxBufferHole,C=u.firstKeyFramePTS?u.firstKeyFramePTS:x;if(!b&&T<C-this.config.maxBufferHole&&!y){this.backtrack(l);return}else y&&(l.gap=!0);l.setElementaryStreamInfo(u.type,l.start,E,l.start,S,!0)}else b&&x-(g.appliedTimelineOffset||0)>rd&&(l.gap=!0);l.setElementaryStreamInfo(u.type,x,E,A,S),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(u,l,d,s,b||y)}else if(b||y)l.gap=!0;else{this.backtrack(l);return}}if(m){const{startPTS:v,endPTS:b,startDTS:y,endDTS:x}=m;d&&(d.elementaryStreams[Mt.AUDIO]={startPTS:v,endPTS:b,startDTS:y,endDTS:x}),l.setElementaryStreamInfo(Mt.AUDIO,v,b,y,x),this.bufferFragmentData(m,l,d,s)}if(g&&p!=null&&(t=p.samples)!=null&&t.length){const v={id:r,frag:l,details:g,samples:p.samples};i.trigger(I.FRAG_PARSING_METADATA,v)}if(g&&f){const v={id:r,frag:l,details:g,samples:f.samples};i.trigger(I.FRAG_PARSING_USERDATA,v)}}logMuxedErr(e){this.warn(`${en(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,r,i){if(this.state!==ye.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(r));const{audio:o,video:s,audiovideo:a}=t;if(o){const d=e.audioCodec;let c=Xl(o.codec,d);c==="mp4a"&&(c="mp4a.40.5");const u=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5");const f=o.metadata;f&&"channelCount"in f&&(f.channelCount||1)!==1&&u.indexOf("firefox")===-1&&(c="mp4a.40.5")}c&&c.indexOf("mp4a.40.5")!==-1&&u.indexOf("android")!==-1&&o.container!=="audio/mpeg"&&(c="mp4a.40.2",this.log(`Android: force audio codec to ${c}`)),d&&d!==c&&this.log(`Swapping manifest audio codec "${d}" for "${c}"`),o.levelCodec=c,o.id=Ue.MAIN,this.log(`Init audio buffer, container:${o.container}, codecs[selected/level/parsed]=[${c||""}/${d||""}/${o.codec}]`),delete t.audiovideo}if(s){s.levelCodec=e.videoCodec,s.id=Ue.MAIN;const d=s.codec;if((d==null?void 0:d.length)===4)switch(d){case"hvc1":case"hev1":s.codec="hvc1.1.6.L120.90";break;case"av01":s.codec="av01.0.04M.08";break;case"avc1":s.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${s.container}, codecs[level/parsed]=[${e.videoCodec||""}/${d}]${s.codec!==d?" parsed-corrected="+s.codec:""}${s.supplemental?" supplemental="+s.supplemental:""}`),delete t.audiovideo}a&&(this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.codecs}/${a.codec}]`),delete t.video,delete t.audio);const l=Object.keys(t);if(l.length){if(this.hls.trigger(I.BUFFER_CODECS,t),!this.hls)return;l.forEach(d=>{const u=t[d].initSegment;u!=null&&u.byteLength&&this.hls.trigger(I.BUFFER_APPENDING,{type:d,data:u,frag:r,part:null,chunkMeta:i,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,Ue.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,r=e==null?void 0:e[t];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ye.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(tt.isBuffered(e,r)?t=this.getAppendedFrag(r):tt.isBuffered(e,r+.1)&&(t=this.getAppendedFrag(r+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,o=t.level;(!i||t.sn!==i.sn||i.level!==o)&&(this.fragPlaying=t,this.hls.trigger(I.FRAG_CHANGED,{frag:t}),(!i||i.level!==o)&&this.hls.trigger(I.LEVEL_SWITCHED,{level:o}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return Oe(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(Oe(t)){const r=this.getLevelDetails(),i=this.currentFrag||(r?Fo(null,r.fragments,t):null);if(i){const o=i.programDateTime;if(o!==null){const s=o+(t-i.start)*1e3;return new Date(s)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class uV{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const r in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[r].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=oe.KEY_LOAD_ERROR,r,i,o){return new hi({type:Ge.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:o,error:r,networkDetails:i})}loadClear(e,t,r){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let i=0,o=t.length;i<o;i++){const s=t[i];if(e.cc<=s.cc&&(!en(e)||!en(s)||e.sn<s.sn)||!r&&i==o-1)return this.emeController.selectKeySystemFormat(s).then(a=>{if(!this.emeController)return;s.setKeyFormat(a);const l=Zl(a);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const i=aa(this.config);if(i.length)return this.emeController.getKeySystemAccess(i)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var r,i;t&&e.setKeyFormat(t);const o=e.decryptdata;if(!o){const d=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,oe.KEY_LOAD_ERROR,d))}const s=o.uri;if(!s)return Promise.reject(this.createKeyLoadError(e,oe.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${s}"`)));let a=this.keyUriToKeyInfo[s];if((r=a)!=null&&r.decryptdata.key)return o.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((i=a)!=null&&i.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(d=>(o.key=d.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[s]={decryptdata:o,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},o.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return o.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,oe.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${o.method}"`)))}}loadKeyEME(e,t){const r={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(r);if(i)return(e.keyLoadPromise=i.then(o=>(e.mediaKeySessionContext=o,r))).catch(o=>{throw e.keyLoadPromise=null,o})}return Promise.resolve(r)}loadKeyHTTP(e,t){const r=this.config,i=r.loader,o=new i(r);return t.keyLoader=e.loader=o,e.keyLoadPromise=new Promise((s,a)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},d=r.keyLoadPolicy.default,c={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},u={onSuccess:(f,p,h,g)=>{const{frag:m,keyInfo:v,url:b}=h;if(!m.decryptdata||v!==this.keyUriToKeyInfo[b])return a(this.createKeyLoadError(m,oe.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));v.decryptdata.key=m.decryptdata.key=new Uint8Array(f.data),m.keyLoader=null,v.loader=null,s({frag:m,keyInfo:v})},onError:(f,p,h,g)=>{this.resetLoader(p),a(this.createKeyLoadError(t,oe.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),h,_t({url:l.url,data:void 0},f)))},onTimeout:(f,p,h)=>{this.resetLoader(p),a(this.createKeyLoadError(t,oe.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),h))},onAbort:(f,p,h)=>{this.resetLoader(p),a(this.createKeyLoadError(t,oe.INTERNAL_ABORTED,new Error("key loading aborted"),h))}};o.load(l,c,u)})}resetLoader(e){const{frag:t,keyInfo:r,url:i}=e,o=r.loader;t.keyLoader===o&&(t.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],o&&o.destroy()}}function sb(n){const{type:e}=n;switch(e){case ct.AUDIO_TRACK:return Ue.AUDIO;case ct.SUBTITLE_TRACK:return Ue.SUBTITLE;default:return Ue.MAIN}}function Qu(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class fV{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(I.MANIFEST_LOADING,this.onManifestLoading,this),e.on(I.LEVEL_LOADING,this.onLevelLoading,this),e.on(I.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(I.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(I.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(I.MANIFEST_LOADING,this.onManifestLoading,this),e.off(I.LEVEL_LOADING,this.onLevelLoading,this),e.off(I.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(I.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(I.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,r=t.pLoader,i=t.loader,o=r||i,s=new o(t);return this.loaders[e.type]=s,s}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:r}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:ct.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:r,level:i,pathwayId:o,url:s,deliveryDirectives:a,levelInfo:l}=t;this.load({id:r,level:i,pathwayId:o,responseType:"text",type:ct.LEVEL,url:s,deliveryDirectives:a,levelOrTrack:l})}onAudioTrackLoading(e,t){const{id:r,groupId:i,url:o,deliveryDirectives:s,track:a}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:ct.AUDIO_TRACK,url:o,deliveryDirectives:s,levelOrTrack:a})}onSubtitleTrackLoading(e,t){const{id:r,groupId:i,url:o,deliveryDirectives:s,track:a}=t;this.load({id:r,groupId:i,level:null,responseType:"text",type:ct.SUBTITLE_TRACK,url:o,deliveryDirectives:s,levelOrTrack:a})}onLevelsUpdated(e,t){const r=this.loaders[ct.LEVEL];if(r){const i=r.context;i&&!t.levels.some(o=>o===i.levelOrTrack)&&(r.abort(),delete this.loaders[ct.LEVEL])}}load(e){var t;const r=this.hls.config;let i=this.getInternalLoader(e);if(i){const d=this.hls.logger,c=i.context;if(c&&c.levelOrTrack===e.levelOrTrack&&(c.url===e.url||c.deliveryDirectives&&!e.deliveryDirectives)){c.url===e.url?d.log(`[playlist-loader]: ignore ${e.url} ongoing request`):d.log(`[playlist-loader]: ignore ${e.url} in favor of ${c.url}`);return}d.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let o;if(e.type===ct.MANIFEST?o=r.manifestLoadPolicy.default:o=kt({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Oe((t=e.deliveryDirectives)==null?void 0:t.part)){let d;if(e.type===ct.LEVEL&&e.level!==null?d=this.hls.levels[e.level].details:e.type===ct.AUDIO_TRACK&&e.id!==null?d=this.hls.audioTracks[e.id].details:e.type===ct.SUBTITLE_TRACK&&e.id!==null&&(d=this.hls.subtitleTracks[e.id].details),d){const c=d.partTarget,u=d.targetduration;if(c&&u){const f=Math.max(c*3,u*.8)*1e3;o=kt({},o,{maxTimeToFirstByteMs:Math.min(f,o.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,o.maxTimeToFirstByteMs)})}}}const s=o.errorRetry||o.timeoutRetry||{},a={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:s.maxNumRetry||0,retryDelay:s.retryDelayMs||0,maxRetryDelay:s.maxRetryDelayMs||0},l={onSuccess:(d,c,u,f)=>{const p=this.getInternalLoader(u);this.resetInternalLoader(u.type);const h=d.data;if(h.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(d,u,new Error("no EXTM3U delimiter"),f||null,c);return}c.parsing.start=performance.now(),Gr.isMediaPlaylist(h)||u.type!==ct.MANIFEST?this.handleTrackOrLevelPlaylist(d,c,u,f||null,p):this.handleMasterPlaylist(d,c,u,f)},onError:(d,c,u,f)=>{this.handleNetworkError(c,u,!1,d,f)},onTimeout:(d,c,u)=>{this.handleNetworkError(c,u,!0,void 0,d)}};i.load(e,a,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:r}=this.hls;(e||r)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,r,i){const o=this.hls,s=e.data,a=Qu(e,r),l=Gr.parseMasterPlaylist(s,a);if(l.playlistParsingError){this.handleManifestParsingError(e,r,l.playlistParsingError,i,t);return}const{contentSteering:d,levels:c,sessionData:u,sessionKeys:f,startTimeOffset:p,variableList:h}=l;this.variableList=h;const{AUDIO:g=[],SUBTITLES:m,"CLOSED-CAPTIONS":v}=Gr.parseMasterPlaylistMedia(s,a,l);g.length&&!g.some(y=>!y.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Wt({}),bitrate:0,url:""})),o.trigger(I.MANIFEST_LOADED,{levels:c,audioTracks:g,subtitles:m,captions:v,contentSteering:d,url:a,stats:t,networkDetails:i,sessionData:u,sessionKeys:f,startTimeOffset:p,variableList:h})}handleTrackOrLevelPlaylist(e,t,r,i,o){const s=this.hls,{id:a,level:l,type:d}=r,c=Qu(e,r),u=Oe(l)?l:Oe(a)?a:0,f=sb(r),p=Gr.parseLevelPlaylist(e.data,c,u,f,0,this.variableList);if(d===ct.MANIFEST){const h={attrs:new Wt({}),bitrate:0,details:p,name:"",url:c};p.requestScheduled=t.loading.start+$T(p,0),s.trigger(I.MANIFEST_LOADED,{levels:[h],audioTracks:[],url:c,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),r.levelDetails=p,this.handlePlaylistLoaded(p,e,t,r,i,o)}handleManifestParsingError(e,t,r,i,o){this.hls.trigger(I.ERROR,{type:Ge.NETWORK_ERROR,details:oe.MANIFEST_PARSING_ERROR,fatal:t.type===ct.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:t,networkDetails:i,stats:o})}handleNetworkError(e,t,r=!1,i,o){let s=`A network ${r?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===ct.LEVEL?s+=`: ${e.level} id: ${e.id}`:(e.type===ct.AUDIO_TRACK||e.type===ct.SUBTITLE_TRACK)&&(s+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(s);this.hls.logger.warn(`[playlist-loader]: ${s}`);let l=oe.UNKNOWN,d=!1;const c=this.getInternalLoader(e);switch(e.type){case ct.MANIFEST:l=r?oe.MANIFEST_LOAD_TIMEOUT:oe.MANIFEST_LOAD_ERROR,d=!0;break;case ct.LEVEL:l=r?oe.LEVEL_LOAD_TIMEOUT:oe.LEVEL_LOAD_ERROR,d=!1;break;case ct.AUDIO_TRACK:l=r?oe.AUDIO_TRACK_LOAD_TIMEOUT:oe.AUDIO_TRACK_LOAD_ERROR,d=!1;break;case ct.SUBTITLE_TRACK:l=r?oe.SUBTITLE_TRACK_LOAD_TIMEOUT:oe.SUBTITLE_LOAD_ERROR,d=!1;break}c&&this.resetInternalLoader(e.type);const u={type:Ge.NETWORK_ERROR,details:l,fatal:d,url:e.url,loader:c,context:e,error:a,networkDetails:t,stats:o};if(i){const f=(t==null?void 0:t.url)||e.url;u.response=_t({url:f,data:void 0},i)}this.hls.trigger(I.ERROR,u)}handlePlaylistLoaded(e,t,r,i,o,s){const a=this.hls,{type:l,level:d,id:c,groupId:u,deliveryDirectives:f}=i,p=Qu(t,i),h=sb(i),g=typeof i.level=="number"&&h===Ue.MAIN?d:void 0;if(!e.fragments.length){const v=e.playlistParsingError=new Error("No Segments found in Playlist");a.trigger(I.ERROR,{type:Ge.NETWORK_ERROR,details:oe.LEVEL_EMPTY_ERROR,fatal:!1,url:p,error:v,reason:v.message,response:t,context:i,level:g,parent:h,networkDetails:o,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const m=e.playlistParsingError;if(m){if(this.hls.logger.warn(`${m} ${e.url}`),!a.config.ignorePlaylistParsingErrors){a.trigger(I.ERROR,{type:Ge.NETWORK_ERROR,details:oe.LEVEL_PARSING_ERROR,fatal:!1,url:p,error:m,reason:m.message,response:t,context:i,level:g,parent:h,networkDetails:o,stats:r});return}e.playlistParsingError=null}switch(e.live&&s&&(s.getCacheAge&&(e.ageHeader=s.getCacheAge()||0),(!s.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case ct.MANIFEST:case ct.LEVEL:a.trigger(I.LEVEL_LOADED,{details:e,levelInfo:i.levelOrTrack||a.levels[0],level:g||0,id:c||0,stats:r,networkDetails:o,deliveryDirectives:f,withoutMultiVariant:l===ct.MANIFEST});break;case ct.AUDIO_TRACK:a.trigger(I.AUDIO_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:c||0,groupId:u||"",stats:r,networkDetails:o,deliveryDirectives:f});break;case ct.SUBTITLE_TRACK:a.trigger(I.SUBTITLE_TRACK_LOADED,{details:e,track:i.levelOrTrack,id:c||0,groupId:u||"",stats:r,networkDetails:o,deliveryDirectives:f});break}}}class Cr{static get version(){return Ka}static isMSESupported(){return Fw()}static isSupported(){return aV()}static getMediaSource(){return Zi()}static get Events(){return I}static get MetadataSchema(){return qn}static get ErrorTypes(){return Ge}static get ErrorDetails(){return oe}static get DefaultConfig(){return Cr.defaultConfig?Cr.defaultConfig:YH}static set DefaultConfig(e){Cr.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Fp,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=T4(e.debug||!1,"Hls instance",e.assetPlayerId),r=this.config=QH(Cr.DefaultConfig,e,t);this.userConfig=e,r.progressive&&ZH(r,t);const{abrController:i,bufferController:o,capLevelController:s,errorController:a,fpsController:l}=r,d=new a(this),c=this.abrController=new i(this),u=new hU(this),f=r.interstitialsController,p=f?this.interstitialsController=new f(this,Cr):null,h=this.bufferController=new o(this,u),g=this.capLevelController=new s(this),m=new l(this),v=new fV(this),b=r.contentSteeringController,y=b?new b(this):null,x=this.levelController=new sV(this,y),E=new iV(this),A=new uV(this.config),S=this.streamController=new cV(this,u,A),w=this.gapController=new nV(this,u);g.setStreamController(S),m.setStreamController(S);const T=[v,x,S];p&&T.splice(1,0,p),y&&T.splice(1,0,y),this.networkControllers=T;const C=[c,h,w,g,m,E,u];this.audioTrackController=this.createController(r.audioTrackController,T);const L=r.audioStreamController;L&&T.push(this.audioStreamController=new L(this,u,A)),this.subtitleTrackController=this.createController(r.subtitleTrackController,T);const P=r.subtitleStreamController;P&&T.push(this.subtititleStreamController=new P(this,u,A)),this.createController(r.timelineController,C),A.emeController=this.emeController=this.createController(r.emeController,C),this.cmcdController=this.createController(r.cmcdController,C),this.latencyController=this.createController(oV,C),this.coreComponents=C,T.push(d);const _=d.onErrorOut;typeof _=="function"&&this.on(I.ERROR,_,d),this.on(I.MANIFEST_LOADED,v.onManifestLoaded,v)}createController(e,t){if(e){const r=new e(this);return t&&t.push(r),r}return null}on(e,t,r=this){this._emitter.on(e,t,r)}once(e,t,r=this){this._emitter.once(e,t,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,r=this,i){this._emitter.off(e,t,r,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,r){return this._emitter.emit(e,t,r)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(r){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const i=e===I.ERROR;this.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.INTERNAL_EXCEPTION,fatal:i,event:e,error:r}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(I.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const o=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(I.ERROR,{type:Ge.OTHER_ERROR,details:oe.ATTACH_MEDIA_ERROR,fatal:!0,error:o});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,r=t?e.media:e,i=t?e:{media:r};this._media=r,this.trigger(I.MEDIA_ATTACHING,i)}detachMedia(){this.logger.log("detachMedia"),this.trigger(I.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(I.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,r=this._url,i=this._url=Ep.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${i}`),t&&r&&(r!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(I.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(e,t),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[Ue.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[Ue.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[Ue.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=nH()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Q4(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const r=e.length;for(let i=0;i<r;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:r}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,r)for(let o=i;o--;){const s=e[o].attrs["HDCP-LEVEL"];if(s&&s<=r)return o}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const r=AT(t);return ET(e,r,navigator.mediaCapabilities)}}Cr.defaultConfig=void 0;const hV={class:"custom-video-controls"},pV={class:"controls-top"},gV={class:"controls-left"},mV={class:"time-display"},vV={class:"controls-right"},bV={class:"progress-container"},yV=Ce({__name:"CustomVideoControls",props:{videoRef:{},visible:{type:Boolean}},setup(n,{expose:e}){const t=n,r=G(!1),i=G(0),o=G(0),s=G(0),a=G(!1),l=G(1),d=G(!1),c=G(!1),u=w=>{const T=Math.floor(w/60),C=Math.floor(w%60);return`${T.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},f=U(()=>u(i.value)),p=U(()=>u(o.value)),h=()=>{t.videoRef&&(r.value?t.videoRef.pause():t.videoRef.play().catch(w=>{console.error("播放失败:",w)}))},g=()=>{t.videoRef&&(t.videoRef.currentTime=Math.max(0,t.videoRef.currentTime-10))},m=()=>{t.videoRef&&(t.videoRef.currentTime=Math.min(t.videoRef.duration||0,t.videoRef.currentTime+10))},v=()=>{if(!t.videoRef)return;const w=[.5,1,1.5,2,4],C=(w.indexOf(l.value)+1)%w.length;l.value=w[C],t.videoRef.playbackRate=l.value},b=()=>{t.videoRef&&(a.value=!a.value,t.videoRef.muted=a.value)},y=()=>{if(!t.videoRef)return;const w=t.videoRef.parentElement;w&&(d.value?document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():w.requestFullscreen?w.requestFullscreen():w.webkitRequestFullscreen?w.webkitRequestFullscreen():w.msRequestFullscreen&&w.msRequestFullscreen())},x=()=>{c.value=!c.value},E=w=>{if(!t.videoRef){console.error("视频引用不存在");return}w.stopPropagation(),w.preventDefault();const T=t.videoRef.duration||0,L=w.currentTarget.getBoundingClientRect(),_=(w.clientX-L.left)/L.width,D=Math.max(0,Math.min(1,_)),k=Math.min(Number((D*T).toFixed(6)),T);t.videoRef.currentTime=k},A=()=>{t.videoRef&&(t.videoRef.addEventListener("play",()=>{r.value=!0}),t.videoRef.addEventListener("pause",()=>{r.value=!1}),t.videoRef.addEventListener("timeupdate",()=>{t.videoRef&&(i.value=t.videoRef.currentTime,o.value=t.videoRef.duration||0,s.value=i.value/o.value*100)}),t.videoRef.addEventListener("durationchange",()=>{t.videoRef&&(o.value=t.videoRef.duration||0)}),t.videoRef.addEventListener("volumechange",()=>{t.videoRef&&(a.value=t.videoRef.muted)}),document.addEventListener("fullscreenchange",()=>{d.value=!!document.fullscreenElement}))},S=()=>{t.videoRef&&(t.videoRef.removeEventListener("play",()=>{r.value=!0}),t.videoRef.removeEventListener("pause",()=>{r.value=!1}),t.videoRef.removeEventListener("timeupdate",()=>{t.videoRef&&(i.value=t.videoRef.currentTime,o.value=t.videoRef.duration||0,s.value=i.value/o.value*100)}),t.videoRef.removeEventListener("durationchange",()=>{t.videoRef&&(o.value=t.videoRef.duration||0)}),t.videoRef.removeEventListener("volumechange",()=>{t.videoRef&&(a.value=t.videoRef.muted)}),document.removeEventListener("fullscreenchange",()=>{d.value=!!document.fullscreenElement}))};return at(()=>t.videoRef,(w,T)=>{T&&S(),w&&(A(),a.value=w.muted,l.value=w.playbackRate,r.value=!w.paused,o.value=w.duration||0,i.value=w.currentTime||0,s.value=o.value>0?i.value/o.value*100:0)}),Nt(()=>{t.videoRef&&A()}),io(()=>{t.videoRef&&S()}),e({togglePlay:h,rewind:g,fastForward:m,togglePlaybackRate:v,toggleMute:b,toggleFullscreen:y}),(w,T)=>(Rt(),_n("div",hV,[rt("div",pV,[rt("div",gV,[rt("button",{onClick:h,class:"control-btn"},mn(r.value?"⏸️":"▶️"),1),rt("span",mV,mn(f.value)+" / "+mn(p.value),1)]),rt("div",vV,[rt("button",{onClick:g,class:"control-btn"},"⏪"),rt("button",{onClick:m,class:"control-btn"},"⏩"),rt("button",{onClick:v,class:"control-btn"},mn(l.value)+"x",1),rt("button",{onClick:x,class:"control-btn"},"⚙️")])]),rt("div",bV,[rt("div",{class:"progress-bar",onClick:E},[rt("div",{class:"progress-filled",style:jd({width:s.value+"%"})},null,4)])])]))}}),xV=wi(yV,[["__scopeId","data-v-3b8caf5d"]]),SV={class:"video-player-container"},CV=["autoplay","loop"],TV=Ce({__name:"VideoPlayer",props:{videoUrl:{},autoplay:{type:Boolean},index:{}},emits:["update:isEnd","update:isplayError"],setup(n,{expose:e,emit:t}){const r=n,i=t,o=_o(),s=G(null);let a=null,l=!1;const d=()=>{console.log(`【卡片 ${r.index}】加载视频:`,r.videoUrl),!(!s.value||!r.videoUrl)&&(l=!1,a&&(a.destroy(),a=null),r.videoUrl.toLowerCase().includes(".m3u8")?Cr.isSupported()?(a=new Cr,a.loadSource(r.videoUrl),a.attachMedia(s.value),a.on(Cr.Events.MANIFEST_PARSED,()=>{console.log(`【卡片 ${r.index}】视频加载成功，可以开始播放`),l=!0}),a.on(Cr.Events.ERROR,(p,h)=>{console.warn(`【卡片 ${r.index}】HLS错误:`,h),h.fatal&&(console.error(`【卡片 ${r.index}】致命HLS错误:`,h.type),i("update:isplayError",!0))})):s.value.canPlayType("application/vnd.apple.mpegurl")?s.value.src=r.videoUrl:(console.error(`【卡片 ${r.index}】浏览器不支持HLS播放`),i("update:isplayError",!0)):s.value.src=r.videoUrl)};at(()=>r.videoUrl,d),Nt(()=>{s.value&&(s.value.addEventListener("loadedmetadata",()=>{l=!0,console.log(`【卡片 ${r.index}】视频元数据加载完成`)}),s.value.addEventListener("error",p=>{console.error(`【卡片 ${r.index}】视频播放错误:`,p),setTimeout(()=>{l||i("update:isplayError",!0)},3e3)}),s.value.addEventListener("ended",f)),d()}),e({playVideo:()=>{s.value&&s.value.paused&&s.value.play().catch(p=>{console.error(`【卡片 ${r.index}】播放失败:`,p),i("update:isplayError",!0)})},pauseVideo:()=>{s.value&&!s.value.paused&&s.value.pause()}});const f=()=>{console.log(`【卡片 ${r.index}】视频播放结束`),o.isLoop||i("update:isEnd",!0)};return io(()=>{console.log(`【卡片 ${r.index}】组件卸载，清理hls资源`),a&&(a.destroy(),a=null),s.value&&s.value.removeEventListener("ended",f)}),(p,h)=>(Rt(),_n("div",SV,[rt("video",{ref_key:"videoRef",ref:s,autoplay:p.autoplay,loop:Me(o).isLoop,class:"video-element",controls:!1},null,8,CV),qe(xV,{videoRef:s.value},null,8,["videoRef"])]))}}),wV=wi(TV,[["__scopeId","data-v-37177c6f"]]),EV={class:"slide-card"},RV={class:"media-container"},AV=Ce({__name:"SlideCard",props:{item:{},index:{},isActive:{type:Boolean}},emits:["update:isEnd","update:isplayError"],setup(n,{emit:e}){const t=G(null),r=G(null),i=n,o=e;return at(()=>i.isActive,s=>{console.log(`卡片 ${i.index} 激活状态变化: ${s}`),s?t.value&&t.value.playVideo():t.value&&t.value.pauseVideo()}),io(()=>{}),(s,a)=>(Rt(),_n("div",EV,[qe(Yz,{item:s.item,index:s.index},null,8,["item","index"]),qe(p4,{item:s.item,index:s.index},null,8,["item","index"]),rt("div",RV,[s.item.images&&s.item.images.length>0?(Rt(),xn(Wz,{key:0,ref_key:"galleryRef",ref:r,images:s.item.images,title:"图片集",class:"full-width-height",isActive:s.isActive,"onUpdate:isEnd":a[0]||(a[0]=l=>o("update:isEnd",l))},null,8,["images","isActive"])):(Rt(),xn(wV,{key:1,ref_key:"videoPlayerRef",ref:t,videoUrl:s.item.videoUrl,autoplay:s.isActive,index:s.index,class:"full-width-height","onUpdate:isEnd":a[1]||(a[1]=l=>o("update:isEnd",l)),"onUpdate:isplayError":a[2]||(a[2]=l=>o("update:isplayError",l))},null,8,["videoUrl","autoplay","index"]))])]))}}),IV=wi(AV,[["__scopeId","data-v-5858cf83"]]),LV=Ce({__name:"SwiperVirtualDemo",props:{category:{},isActive:{type:Boolean}},setup(n){const e=n,t=[Fz,Bz,$z],r=G(0),i=G(null),o=_o(),s=G([]),a=Ky(),l=f=>{f&&!o.isLoop&&(console.log(`接收到内容结束事件，当前索引: ${r.value}, 循环状态: ${o.isLoop}, 开始切换`),i.value.slideTo(r.value+1))},d=f=>{var h;const p=a.dequeue();s.value[f]=p,console.log(`更新索引 ${f} 的item`,p==null?void 0:p.videoUrl),(h=i.value)==null||h.update()},c=f=>{i.value=f};function u(){i.value&&(r.value=i.value.activeIndex),i.value.isEnd&&(console.log("到达底部，从队列加载更多"),s.value=s.value.concat([a.dequeue(),a.dequeue()]),i.value.update())}return Nt(()=>{s.value=[a.dequeue(),a.dequeue(),a.dequeue()]}),(f,p)=>(Rt(),_n("div",null,[qe(Me(Tp),{modules:t,direction:"vertical","slides-per-view":1,"space-between":0,virtual:!0,class:"virtual-swiper",onSwiper:c,onSlideChange:u,mousewheel:!0,keyboard:{enabled:!0,onlyInViewport:!0},"touch-move-stop-propagation":!0,nested:!0},{default:ut(()=>[(Rt(!0),_n(mt,null,ld(s.value,(h,g)=>(Rt(),xn(Me(wp),{key:g,virtualIndex:g},{default:ut(()=>[qe(IV,{item:h,index:g,isActive:r.value===g&&e.isActive,"onUpdate:isEnd":l,"onUpdate:isplayError":m=>d(g)},null,8,["item","index","isActive","onUpdate:isplayError"])]),_:2},1032,["virtualIndex"]))),128))]),_:1})]))}}),PV=wi(LV,[["__scopeId","data-v-e8e7458d"]]),_V={class:"main-swiper-container"},kV={class:"custom-pagination"},DV=["onClick"],OV=Ce({__name:"MainSwiper",setup(n){const e=G(null),t=a=>{e.value=a},r=G(0),i=()=>{e.value&&(r.value=e.value.realIndex)},o=[Nz,uT],s=G([{id:0,name:"发现"}]);return(a,l)=>(Rt(),_n("div",_V,[rt("div",kV,[(Rt(!0),_n(mt,null,ld(s.value,(d,c)=>(Rt(),_n("span",{key:c,class:Io([{active:r.value===c},"pagination-bullet"]),onClick:u=>{var f;return(f=e.value)==null?void 0:f.slideTo(c)}},mn(d.name),11,DV))),128))]),qe(Me(Tp),{modules:o,"slides-per-view":1,"space-between":20,centeredSlides:!0,loop:!1,autoplay:!1,pagination:!1,navigation:!1,onSwiper:t,onSlideChange:i,class:"horizontal-swiper"},{default:ut(()=>[(Rt(!0),_n(mt,null,ld(s.value,(d,c)=>(Rt(),xn(Me(wp),{key:c},{default:ut(()=>[qe(PV,{category:d.name,isActive:r.value===c},null,8,["category","isActive"])]),_:2},1024))),128))]),_:1})]))}}),MV=wi(OV,[["__scopeId","data-v-78380232"]]),FV={class:"settings-container"},$V={key:0,style:{margin:"16px 0"}},BV={class:"api-list-section"},NV={style:{display:"flex","align-items":"center","justify-content":"space-between",width:"100%"}},zV={style:{display:"flex",gap:"8px"}},UV=Ce({__name:"SettingsPage",setup(n){const e=_o(),t=Dh(),r=TB(),i=G(!1),o=G([]),s=G(""),a=G(!1),l=G(null),d=Q2(),c=U(()=>{if(!s.value.trim())return t.apiList;const C=s.value.toLowerCase();return t.apiList.filter(L=>{var P,_,D,k;return((P=L.name)==null?void 0:P.toLowerCase().includes(C))||((_=L.api)==null?void 0:_.toLowerCase().includes(C))||((D=L.type)==null?void 0:D.toLowerCase().includes(C))||((k=L.group)==null?void 0:k.toLowerCase().includes(C))})}),u=()=>{s.value=""},f=[{key:"selection",width:60,type:"selection"},{title:"ID",key:"id",width:60,sorter:(C,L)=>Number(C.id)-Number(L.id)},{title:"名称",key:"name"},{title:"API地址",key:"api"},{title:"类型",key:"type"},{title:"状态",key:"status",fixed:"right",width:100,render:C=>R(zv,{value:C.status,onUpdateValue:L=>{t.updateApiStatuses([{id:C.id,status:L}])}})},{title:"操作",key:"actions",fixed:"right",width:180,render:C=>R("div",{class:"action-buttons"},[R(zn,{size:"small",type:"primary",onClick:()=>b(C)},{default:()=>"编辑"}),R(zn,{size:"small",type:"error",style:{marginLeft:"8px"},onClick:()=>S(C)},{default:()=>"删除"})])}],p=C=>{if(C&&C.length===8){const L=C.substring(0,4),P=C.substring(4,6),_=C.substring(6,8);return`${L}-${P}-${_}`}return C},h=()=>{o.value=[]},g=U(()=>o.value.length===0?!1:o.value.some(C=>{const L=t.apiList.find(P=>P.id===C);return L&&L.status===!1})),m=()=>{if(o.value.length===0){r.warning("请先选择要操作的API");return}const C=g.value,L=o.value.map(_=>({id:_,status:C}));t.updateApiStatuses(L);const P=C?"启用":"禁用";r.success(`已成功${P} ${o.value.length} 个API`)},v=()=>{if(o.value.length===0){r.warning("请先选择要删除的API");return}d.warning({title:"确认删除",content:`确定要删除选中的 ${o.value.length} 个API吗？此操作不可撤销。`,positiveText:"删除",negativeText:"取消",onPositiveClick:()=>{o.value.forEach(C=>{t.deleteApi(C)}),r.success(`已成功删除 ${o.value.length} 个API`),h()}})},b=C=>{l.value={...C},a.value=!0},y=()=>Date.now().toString(36)+Math.random().toString(36).substring(2),x=()=>{l.value&&(l.value.id=y(),t.addApi(l.value),r.success(`API "${l.value.name}" 已创建`),a.value=!1,l.value=null)},E=()=>{l.value&&(t.updateApi(l.value),r.success(`API "${l.value.name}" 已更新`),a.value=!1,l.value=null)},A=()=>{a.value=!1,l.value=null},S=C=>{d.warning({title:"确认删除",content:`确定要删除API "${C.name}" 吗？此操作不可撤销。`,positiveText:"删除",negativeText:"取消",onPositiveClick:()=>{t.deleteApi(C.id),r.success(`API "${C.name}" 已删除`)}})},w=()=>{if(o.value.length===0){r.warning("请先选择要导出的API");return}const C=o.value.map(k=>t.apiList.find(M=>M.id===k)).filter(Boolean),L={exportDate:new Date().toISOString(),totalCount:C.length,apis:C},P=new Blob([JSON.stringify(L,null,2)],{type:"application/json"}),_=URL.createObjectURL(P),D=document.createElement("a");D.href=_,D.download=`api_export_${new Date().getTime()}.json`,document.body.appendChild(D),D.click(),document.body.removeChild(D),URL.revokeObjectURL(_),r.success(`已成功导出 ${C.length} 个API数据`)},T=async()=>{i.value=!0;try{e.setLastUpdated(""),await t.fetchApiList(),console.log("API列表已成功更新"),console.log(`当前API数量: ${t.apiList.length}`),h()}catch(C){const L=C instanceof Error?C.message:"更新失败";console.error("更新失败:",L)}finally{i.value=!1}};return Nt(()=>{}),(C,L)=>{const P=l1("n-alert");return Rt(),_n("div",FV,[qe(Me(_v),{"label-width":80},{default:ut(()=>[qe(Me(Fr),{label:"API URL"},{default:ut(()=>[qe(Me(vr),{value:Me(e).apiUrl,"onUpdate:value":L[0]||(L[0]=_=>Me(e).apiUrl=_),placeholder:"输入API URL",onInput:L[1]||(L[1]=_=>Me(e).setApiUrl(_??"")),style:{flex:"1"}},null,8,["value"]),qe(Me(zn),{type:"primary",onClick:T},{default:ut(()=>L[14]||(L[14]=[In("立即更新")])),_:1})]),_:1})]),_:1}),Me(e).lastUpdated?(Rt(),_n("div",$V," api总数："+mn(Me(t).apiList.length)+"，最后更新时间："+mn(p(Me(e).lastUpdated)),1)):Gs("",!0),i.value?(Rt(),xn(Me(V3),{key:1},{default:ut(()=>L[15]||(L[15]=[rt("div",{class:"loading-text"},"正在获取最新的API列表数据...",-1)])),_:1})):Gs("",!0),rt("div",BV,[L[19]||(L[19]=rt("h3",{class:"section-title"},"缓存的API列表",-1)),qe(Me(vr),{value:s.value,"onUpdate:value":L[2]||(L[2]=_=>s.value=_),placeholder:"搜索API名称、地址、类型或分组...","allow-clear":"",onClear:u,style:{"margin-bottom":"16px","max-width":"400px"}},null,8,["value"]),o.value.length>0?(Rt(),xn(P,{key:0,type:"info","show-icon":"",class:"selected-info-alert"},{default:ut(()=>[rt("div",NV,[rt("span",null,"已选择 "+mn(o.value.length)+" 项（共 "+mn(Me(t).apiList.length)+" 项）",1),rt("div",zV,[qe(Me(zn),{size:"small",type:"primary",onClick:m},{default:ut(()=>[In(mn(g.value?"启用选中":"禁用选中"),1)]),_:1}),qe(Me(zn),{size:"small",type:"error",onClick:v},{default:ut(()=>L[16]||(L[16]=[In(" 删除选中 ")])),_:1}),qe(Me(zn),{size:"small",type:"success",onClick:w},{default:ut(()=>L[17]||(L[17]=[In(" 导出选中 ")])),_:1}),qe(Me(zn),{size:"small",type:"default",onClick:h},{default:ut(()=>L[18]||(L[18]=[In(" 清空选择 ")])),_:1})])])]),_:1})):Gs("",!0),c.value.length>0?(Rt(),xn(Me(U2),{key:1,data:c.value,columns:f,"row-key":_=>_.id,"single-column-sort":!1,"max-height":600,"fixed-header":!0,"scroll-x":1200,"checked-row-keys":o.value,"onUpdate:checkedRowKeys":L[3]||(L[3]=_=>o.value=_)},null,8,["data","row-key","checked-row-keys"])):s.value.trim()!==""&&c.value.length===0&&Me(t).apiList.length>0?(Rt(),xn(Me(Ed),{key:2,description:"未找到匹配的API数据"})):(Rt(),xn(Me(Ed),{key:3,description:"暂无缓存的API数据"}))]),qe(Me(MC),{show:a.value,"onUpdate:show":L[13]||(L[13]=_=>a.value=_),preset:"dialog",title:"编辑API","show-icon":!1},{action:ut(()=>[qe(Me(zn),{tertiary:"",type:"primary",onClick:x,style:{"margin-right":"8px"}},{default:ut(()=>L[20]||(L[20]=[In(" 创建副本 ")])),_:1}),qe(Me(zn),{onClick:A,style:{"margin-right":"8px"}},{default:ut(()=>L[21]||(L[21]=[In("取消")])),_:1}),qe(Me(zn),{type:"primary",onClick:E},{default:ut(()=>L[22]||(L[22]=[In("保存")])),_:1})]),default:ut(()=>[l.value?(Rt(),xn(Me(_v),{key:0,model:l.value,"label-width":120},{default:ut(()=>[qe(Me(Fr),{label:"名称",required:""},{default:ut(()=>[qe(Me(vr),{value:l.value.name,"onUpdate:value":L[4]||(L[4]=_=>l.value.name=_),placeholder:"请输入API名称"},null,8,["value"])]),_:1}),qe(Me(Fr),{label:"API地址",required:""},{default:ut(()=>[qe(Me(vr),{value:l.value.api,"onUpdate:value":L[5]||(L[5]=_=>l.value.api=_),placeholder:"请输入API地址"},null,8,["value"])]),_:1}),qe(Me(Fr),{label:"类型"},{default:ut(()=>[qe(Me(XS),{value:l.value.type,"onUpdate:value":L[6]||(L[6]=_=>l.value.type=_),options:[{label:"自动",value:"auto"},{label:"JSON",value:"json"},{label:"目录",value:"dir"},{label:"FTP",value:"ftp"},{label:"直接",value:"direct"},{label:"ID范围",value:"id_range"},{label:"ID列表",value:"id_list"}],placeholder:"请选择API类型"},null,8,["value"])]),_:1}),l.value&&["json","id_range","id_list"].includes(l.value.type)?(Rt(),xn(Me(Fr),{key:0,label:"API参数"},{default:ut(()=>[qe(Me(vr),{type:"textarea",value:l.value&&l.value.api_parms?JSON.stringify(l.value.api_parms):"","onUpdate:value":L[7]||(L[7]=_=>l.value&&(l.value.api_parms=_?JSON.parse(_):null)),placeholder:"请输入API参数",autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1})):Gs("",!0),qe(Me(Fr),{label:"分组"},{default:ut(()=>[qe(Me(vr),{value:l.value.group,"onUpdate:value":L[8]||(L[8]=_=>l.value.group=_),placeholder:"请输入分组名称"},null,8,["value"])]),_:1}),qe(Me(Fr),{label:"图标"},{default:ut(()=>[qe(Me(vr),{value:l.value.logo,"onUpdate:value":L[9]||(L[9]=_=>l.value.logo=_),placeholder:"请输入Logo URL"},null,8,["value"])]),_:1}),qe(Me(Fr),{label:"主页"},{default:ut(()=>[qe(Me(vr),{value:l.value.host,"onUpdate:value":L[10]||(L[10]=_=>l.value.host=_),placeholder:"请输入Host"},null,8,["value"])]),_:1}),qe(Me(Fr),{label:"描述"},{default:ut(()=>[qe(Me(vr),{type:"textarea",value:l.value.desc,"onUpdate:value":L[11]||(L[11]=_=>l.value.desc=_),placeholder:"请输入API描述",autosize:{minRows:2,maxRows:4}},null,8,["value"])]),_:1}),qe(Me(Fr),{label:"状态"},{default:ut(()=>[qe(Me(zv),{value:l.value.status,"onUpdate:value":L[12]||(L[12]=_=>l.value.status=_),round:!1},{checked:ut(()=>L[23]||(L[23]=[In("启用")])),unchecked:ut(()=>L[24]||(L[24]=[In("禁用")])),_:1},8,["value"])]),_:1})]),_:1},8,["model"])):Gs("",!0)]),_:1},8,["show"])])}}}),HV=wi(UV,[["__scopeId","data-v-936d1268"]]),VV=[{path:"/",redirect:"/home"},{path:"/home",name:"home",component:MV},{path:"/settings",name:"settings",component:HV}],GV=kA({history:lA(),routes:VV}),WV=q3(),$w=OA();$w.use(d5);LR(J3).use($w).use(GV).use(WV).mount("#app")});export default jV();
